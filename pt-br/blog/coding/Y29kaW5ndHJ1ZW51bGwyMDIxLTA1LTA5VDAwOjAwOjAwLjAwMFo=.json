{"html":"<p>Essa semana eu estava trabalhando no meu projeto <a href=\"https://github.com/blopa/Resume-Builder\" target=\"_blank\" rel=\"noreferrer\">Resume Builder</a> e eu queria poder criar um botão que fizesse o download de um JSON sem usar JavaScript.</p>\n<p>A única maneira que eu sabia fazer isso era usando <code class=\"language-text\">URL.createObjectURL</code> em um arquivo <code class=\"language-text\">blob</code>, mas isso não funcionaria para mim, porque este link estaria dentro de um arquivo PDF.</p>\n<p>Então eu fiz a primeira coisa que qualquer millennial faria, pesquisei no Stack Overflow, mas não consegui encontrar nada… como isso é possível? Bom, de qualquer maneira, depois de algumas tentativas, consegui fazer o que eu queria usando Base 64.</p>\n<p>Digamos que eu queira criar um botão de download que baixará JSON <code class=\"language-text\">{foo: 'bar'}</code>, primeiro precisamos convertê-lo para uma string em Base 64, podemos fazer isso com a função <code class=\"language-text\">btoa</code> do JavaScript:</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">foo</span><span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> jsonString <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> base64Json <span class=\"token operator\">=</span> <span class=\"token function\">btoa</span><span class=\"token punctuation\">(</span>jsonString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// eyJmb28iOiJiYXIifQ==</span></code></pre></div></div>\n<p>Ok, agora que sei qual é o valor Base 64 para o objeto <code class=\"language-text\">{foo: 'bar'}</code>, posso criar um elemento <code class=\"language-text\">anchor</code> da seguinte maneira:</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data:application/json;base64,eyJmb28iOiJiYXIifQ==<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">download</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>object.json<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>download<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div></div>\n<p>E isso é tudo. No meu caso, eu só precisava que o código fosse servido como HTML e, como estou usando Gatsby, o código real que eu fiz foi um elemento React que será pre-renderizado usando SSR para o meu arquivo PDF:</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> DownloadJsonLink <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    children<span class=\"token punctuation\">,</span>\n    json <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    name <span class=\"token operator\">=</span> <span class=\"token string\">'object.json'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> href <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> base64Data <span class=\"token operator\">=</span> <span class=\"token function\">btoa</span><span class=\"token punctuation\">(</span><span class=\"token function\">unescape</span><span class=\"token punctuation\">(</span><span class=\"token function\">encodeURIComponent</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">data:application/json;base64,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>base64Data<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">return</span> <span class=\"token string\">'#'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span>json<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>a\n            href<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>href<span class=\"token punctuation\">}</span>\n            download<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span>\n            target<span class=\"token operator\">=</span><span class=\"token string\">\"_blank\"</span>\n        <span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> DownloadJsonLink<span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Eu sabia que era possível fazer isso para baixar uma imagem, mas nunca tinha tentado para outros tipos de arquivos.</p>\n<p>Incrível ainda aprender coisas de HTML mesmo depois de muitos anos de experiência e espero que mais alguém aprenda algo novo com esse post, até a próxima pessoal.</p>","path":"/pt-br/blog/coding/como-criar-um-link-para-download-de-um-json-apenas-com-html/","title":"Como criar um link para download de um JSON apenas com HTML","language":"pt-br","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTA5VDAwOjAwOjAwLjAwMFo=","comments":[],"relatedPosts":[{"path":"/pt-br/blog/coding/criando-um-formulario-dinamico-a-partir-de-um-json-schema/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTIxVDAwOjAwOjAwLjAwMFo=","title":"Criando um formulário dinâmico a partir de um JSON schema","date":"2021-05-21T00:00:00.000Z"},{"path":"/pt-br/blog/coding/adicionando-botao-para-copiar-code-snippets-no-gatsby-gambiarra/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA1LTA1VDAwOjAwOjAwLjAwMFo=","title":"Adicionando botão para copiar code snippets no Gatsby (gambiarra)","date":"2022-05-05T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-calcular-a-inflacao-acumulada-dos-ultimos-12-meses-com-javascript/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTEzVDAwOjAwOjAwLjAwMFo=","title":"Como calcular a inflação acumulada dos últimos 12 meses com JavaScript","date":"2021-05-13T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-eu-consegui-um-trabalho-no-exterior-com-um-projeto-open-source/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIwLTA5LTIzVDAwOjAwOjAwLjAwMFo=","title":"Como eu consegui um trabalho no exterior com um projeto open source","date":"2020-09-23T00:00:00.000Z"},{"path":"/pt-br/blog/coding/compartilhando-cookies-encriptados-do-laravel-com-next-js/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTEwLTI1VDAwOjAwOjAwLjAwMFo=","title":"Compartilhando cookies encriptados do Laravel com Next.js","date":"2024-10-25T00:00:00.000Z"},{"path":"/pt-br/blog/coding/musclog-aproveitando-minha-experiencia-com-reactjs-para-criar-um-app-em-react-native/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA5LTIxVDAwOjAwOjAwLjAwMFo=","title":"Musclog: Aproveitando minha experiência com React.js para criar um App em React Native","date":"2024-09-21T00:00:00.000Z"},{"path":"/pt-br/blog/coding/calculando-minhas-horas-de-trabalho-em-projetos-pessoais-usando-nodejs/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA2LTE2VDAwOjAwOjAwLjAwMFo=","title":"Calculando minhas horas de trabalho em projetos pessoais usando Node.js","date":"2024-06-16T00:00:00.000Z"},{"path":"/pt-br/blog/coding/transformando-paginas-de-manga-para-leitores-ocidentais-preguicosos/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA1LTAxVDAwOjAwOjAwLjAwMFo=","title":"Transformando páginas de mangá para leitores ocidentais preguiçosos","date":"2024-05-01T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-automatizar-a-criacao-de-instagram-reels-usando-gpt-da-openai/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEyLTIwVDAwOjAwOjAwLjAwMFo=","title":"Como automatizar a criação de Instagram Reels usando GPT da OpenAI","date":"2023-12-20T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-criar-thumbnails-para-seus-videos-automaticamente-com-nodejs/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEwLTI1VDAwOjAwOjAwLjAwMFo=","title":"Como criar thumbnails para seus vídeos automaticamente com Node.js","date":"2023-10-25T00:00:00.000Z"}]}