{"html":"<p>Webpack é o <em>bundler</em> de módulos mais popular para JavaScript, é uma ferramenta para agrupar módulos em um único arquivo e mais.</p>\n<p>Uma coisa que sempre me deixou curioso foi como ele resolve os <em>imports</em> dinâmicos, quer dizer, eu sabia que não era mágica, mas não sabia como funcionava, e sempre esquecia de pesquisar depois… até agora.</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1007px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.67187499999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVQY022QXW6DMBCEuU1VAokxxMTBib22sdeGQP7al6oX6Al6/IpQ0aqqNNqX0czufkkBmDVmtdcph5TDaq8X5cLmws7uv0oKiPmhpToWEHJhFyPlQCEc+jtV+Lv0u+sxk8r0RCJzY+3PzA1ZY9aHNmvM5uhYe2ritXbDnEk55MISFTYSqY5EYlL7cdsOFCJzQ+3HpXvnR/fyvvPjsb8T6anCtbCZsKXpiMLKnogKSY0X5oat7anutu60hDme5fBKIZQ6ljoWCol0ubAUIlFh2qwwmbxHkuoouvtqP51dKNy5YR8urD1tbZ81Zj47E3bnRwqR47k0XUIklrZv4o1InIGlHEodK9OV02OeQvgDOeXwxGTKIeF4IQrzxj6QwoJ01ubofmKNea6Plb/ePj7D6xtr+y/liXJ/sFdToQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Mágica?\" title=\"Mágica?\" src=\"/static/e6e021a037da7763c8f6affd02c34110/b82a7/webpack-magic.png\" srcset=\"/static/e6e021a037da7763c8f6affd02c34110/e3135/webpack-magic.png 256w,\n/static/e6e021a037da7763c8f6affd02c34110/06341/webpack-magic.png 512w,\n/static/e6e021a037da7763c8f6affd02c34110/b82a7/webpack-magic.png 1007w\" sizes=\"(max-width: 1007px) 100vw, 1007px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Mágica?</figcaption>\n  </figure><p></p>\n<h2 id=\"como-funciona-o-import-de-arquivos\" style=\"position:relative;\"><a href=\"#como-funciona-o-import-de-arquivos\" aria-label=\"como funciona o import de arquivos permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Como funciona o import de arquivos</h2>\n<p>Sempre que você importar um arquivo em seu código, o Webpack irá procurá-lo na pasta do projeto e copiá-lo para a pasta de <code class=\"language-text\">build</code> com um novo nome, então o Webpack substituirá o código que importa esse arquivo em seu arquivo JavaScript pelo <em>path</em> para o arquivo recém-copiado.</p>\n<p>Aqui está um exemplo super simplificado:</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// import on your app.js file</span>\n<span class=\"token keyword\">import</span> utils <span class=\"token keyword\">from</span> <span class=\"token string\">'./helpers/utils.js'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// import on the bundled file</span>\n<span class=\"token keyword\">import</span> utils <span class=\"token keyword\">from</span> <span class=\"token string\">'./build/09wdj0wjd.bundle.0.js'</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<h2 id=\"o-que-e-um-import-dinamico\" style=\"position:relative;\"><a href=\"#o-que-e-um-import-dinamico\" aria-label=\"o que e um import dinamico permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>O que é um import dinâmico?</h2>\n<p>Às vezes você não quer que o browser baixe o arquivo imediatamente, você quer carregá-lo apenas quando for necessário, e para isso, você pode usar um <em>import</em> dinâmico.</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbutton<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'Click me'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// when the button is clicked, a dynamic import will happen</span>\nbutton<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./helpers/utils.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Dynamic import'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>É possível usar <em>import</em> dinâmicos com praticamente qualquer arquivo, por isso é bastante útil para imagens ou arquivos de áudio grandes, por exemplo.</p>\n<p>Mas o que acontece quando você quer importar um arquivo com um <em>path</em> variável?</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fileName <span class=\"token operator\">=</span> <span class=\"token string\">'image.jpg'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbutton<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'Click me'</span><span class=\"token punctuation\">;</span>\nbutton<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./assets/images/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fileName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Como o Webpack sabe qual arquivo copiar para a pasta <code class=\"language-text\">build</code>? Bem, existe uma maneira de dizer ao Webpack para ignorar o <em>import</em> e deixar o browser resolve-lo como quiser com o comentário <code class=\"language-text\">/* webpackIgnore: true */</code>.</p>\n<div class=\"copy-code-block\"><button tabindex=\"3\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token string\">'assets/images/image.jpg'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// the browser will resolve this import and fail if the file doesn't exist</span>\n<span class=\"token keyword\">const</span> module <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/*webpackIgnore: true*/</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Isso é bem maneiro, mas de alguma forma também é possível não fazer isso e deixar o Webpack descobrir o <em>path</em> para o arquivo. Mas como?</p>\n<p><img src=\"/6061b99ae0d312b222b91b3f265dbe9e/magic.gif\" alt=\"Magic\"></p>\n<h2 id=\"o-truque-de-magica\" style=\"position:relative;\"><a href=\"#o-truque-de-magica\" aria-label=\"o truque de magica permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>O truque de mágica</h2>\n<p>Na verdade, não é tão complicado, mas vem com algumas ressalvas. Por exemplo, se você importar um arquivo com um <em>path</em> variável, pelo menos uma parte desse <em>path</em> precisa ser explícito no código, por exemplo:</p>\n<div class=\"copy-code-block\"><button tabindex=\"4\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// this works</span>\n<span class=\"token keyword\">const</span> fileName <span class=\"token operator\">=</span> <span class=\"token string\">'image.jpg'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> module <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./assets/images/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fileName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// this doesn't work</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token string\">'./assets/images/image.jpg'</span><span class=\"token punctuation\">;</span>\nmodule <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Por que isso? A maneira como o Webpack faz isso é analisando o <em>path</em> da string interpolada durante o processo de compilação, e ele obterá a parte explícita da string, neste exemplo <code class=\"language-text\">assets/images/</code>, e então copiará todos os arquivos dessa pasta para a pasta <code class=\"language-text\">build</code>.</p>\n<p>O Webpack faz isso de uma maneira muito inteligente também, se o <em>import</em> incluir a extensão do arquivo, ele copiará apenas os arquivos com essa extensão, por exemplo <code class=\"language-text\">import(`./assets/images/${fileName}.png`)</code> só copiará arquivos <code class=\"language-text\">PNG</code>.</p>\n<p>Como o Webpack faz isso analisando a string no <em>import</em>, ele não é capaz de saber quais arquivos copiar quando o <em>path</em> inteiro é uma variável sem uma parte explícita.</p>\n<h2 id=\"conclusao\" style=\"position:relative;\"><a href=\"#conclusao\" aria-label=\"conclusao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusão</h2>\n<p>O Webpack pode ter uma configuração complicada e, às vezes, pode parecer feitiçaria, mas é uma ferramenta muito poderosa com muitos recursos e, se você se aprofundar o suficiente, descobrirá que sua implementação não é tão complicada.</p>\n<p>Se você quiser saber mais sobre o Webpack, você pode conferir a <a href=\"https://webpack.js.org/\" target=\"_blank\" rel=\"noreferrer\">documentação oficial</a>, e você pode ler mais sobre <a href=\"https://webpack.js.org/api/module-methods/\" target=\"_blank\" rel=\"noreferrer\"><strong>Module Methods</strong> aqui</a> e <a href=\"https://webpack.js.org/guides/code-splitting/#dynamic-imports\" target=\"_blank\" rel=\"noreferrer\"><strong>Dynamic Imports</strong> aqui</a>.</p>","path":"/pt-br/blog/coding/como-o-webpack-resolve-imports-dinamicos-com-paths-variaveis/","title":"Como o Webpack resolve imports dinâmicos com paths variáveis","language":"pt-br","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA0LTExVDAwOjAwOjAwLjAwMFo=","comments":[],"relatedPosts":[{"path":"/pt-br/blog/coding/crie-videos-dos-seus-codigos-de-programacao-com-esse-script-de-nodejs/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTAxLTA0VDAwOjAwOjAwLjAwMFo=","title":"Crie videos dos seus códigos de programação com esse script de Node.js","date":"2022-01-04T00:00:00.000Z"},{"path":"/pt-br/blog/games/atualize-automaticamente-o-tileset-embutido-do-seu-mapa-no-tiled-com-um-script-nodejs/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMTAtMDJUMDA6MDA6MDAuMDAwWg==","title":"Atualize automaticamente o Tileset embutido do seu mapa no Tiled com um script Node.js.","date":"2021-10-02T00:00:00.000Z"},{"path":"/pt-br/blog/games/como-gerar-sprite-sheets-automaticamente-para-o-seu-jogo-feito-com-phaser-js/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMjJUMDA6MDA6MDAuMDAwWg==","title":"Como gerar sprite sheets automaticamente para o seu jogo feito com Phaser JS","date":"2021-06-22T00:00:00.000Z"},{"path":"/pt-br/blog/general/tinha-que-ser-o-telegram-de-novo/","postHashId":"Z2VuZXJhbHRydWVudWxsMjAyMS0wMS0zMVQwMDowMDowMC4wMDBa","title":"Tinha que ser o Telegram de novo!","date":"2021-01-31T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-automatizar-a-criacao-de-instagram-reels-usando-gpt-da-openai/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEyLTIwVDAwOjAwOjAwLjAwMFo=","title":"Como automatizar a criação de Instagram Reels usando GPT da OpenAI","date":"2023-12-20T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-criar-thumbnails-para-seus-videos-automaticamente-com-nodejs/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEwLTI1VDAwOjAwOjAwLjAwMFo=","title":"Como criar thumbnails para seus vídeos automaticamente com Node.js","date":"2023-10-25T00:00:00.000Z"},{"path":"/pt-br/blog/coding/publicando-reels-no-instagram-usando-nodejs-e-a-arte-de-superar-limitacoes/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEwLTE0VDAwOjAwOjAwLjAwMFo=","title":"Publicando Reels no Instagram usando Node.js e a arte de superar limitações","date":"2023-10-14T00:00:00.000Z"},{"path":"/pt-br/blog/coding/usando-google-fitness-api-para-calcular-meu-tdee-e-mais/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTA4LTAyVDAwOjAwOjAwLjAwMFo=","title":"Usando Google Fitness API para calcular meu TDEE e mais","date":"2023-08-02T00:00:00.000Z"},{"path":"/pt-br/blog/coding/adicionando-botao-para-copiar-code-snippets-no-gatsby-gambiarra/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA1LTA1VDAwOjAwOjAwLjAwMFo=","title":"Adicionando botão para copiar code snippets no Gatsby (gambiarra)","date":"2022-05-05T00:00:00.000Z"},{"path":"/pt-br/blog/games/criando-um-build-para-celular-para-o-meu-jogo-com-o-phaser-js-game-devlog-23/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDktMDlUMDA6MDA6MDAuMDAwWg==","title":"Criando um build para celular para o meu jogo com o Phaser JS - Game Devlog #23","date":"2021-09-09T00:00:00.000Z"}]}