{"html":"<p>Ao fazer um site usando JAMStack, alguns compromissos precisam ser feitos, mas a habilidade de pesquisar não é um deles, graças a bibliotecas JavaScript como <a href=\"https://github.com/nextapps-de/flexsearch\" target=\"_blank\" rel=\"noreferrer\">flexsearch</a> e <a href=\"https://github.com/olivernn/lunr.js/\" target=\"_blank\" rel=\"noreferrer\">lunr.js</a>.</p>\n<p>Depois de seguir <a href=\"https://labs.walltowall.com/easy-client-side-search-for-gatsby-sites/\" target=\"_blank\" rel=\"noreferrer\">este tutorial</a> e combinar o código com o <a href=\"https://material-ui.com/components/autocomplete/\" target=\"_blank\" rel=\"noreferrer\">componente de autocomplete do Material UI</a>, eu consegui criar a barra de busca que você vê neste blog.</p>\n<p><img src=\"/fc4482c8ac57987aed00951b3a87145f/search-bar-results.gif\" alt=\"Resultados de busca\"></p>\n<p>Isso já foi bom, mas eu gostaria também de ter uma página de busca, onde um termo pudesse ser buscado nas tags, título e conteúdo do post.</p>\n<h2 id=\"criando-de-um-index-de-busca\" style=\"position:relative;\"><a href=\"#criando-de-um-index-de-busca\" aria-label=\"criando de um index de busca permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Criando de um index de busca</h2>\n<p>First I will add the following code to my Gatsby config, this will create a new <code class=\"language-text\">localSearchPage</code> index to be queried via GraphQL.</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token operator\">...</span>otherConfigs<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token string\">'gatsby-plugin-local-search'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'page'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n                {\n                    allMarkdownRemark(\n                        filter: {\n                            frontmatter:{ show: { eq: true } }\n                        }\n                        sort: { fields: [frontmatter___date], order: DESC }\n                        limit: 1000\n                    ) {\n                        edges {\n                            node {\n                                id\n                                fields {\n                                    locale\n                                    path\n                                }\n                                frontmatter {\n                                    date\n                                    title\n                                    show\n                                    tags\n                                }\n                                rawMarkdownBody\n                            }\n                        }\n                    }\n                }\n            </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">engine</span><span class=\"token operator\">:</span> <span class=\"token string\">'flexsearch'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">engineOptions</span><span class=\"token operator\">:</span> <span class=\"token string\">'speed'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">ref</span><span class=\"token operator\">:</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'body'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">store</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locale'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'body'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<h2 id=\"a-pagina-de-busca\" style=\"position:relative;\"><a href=\"#a-pagina-de-busca\" aria-label=\"a pagina de busca permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A página de busca</h2>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 959px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVQY02XP4W6DIBAAYB+k7dpVhiIccMrauakFFJj7t+z9n2XRNUu3frmQ48jljqzrusPhwBirqirP87quCSGUUkTc7/cAUJbl42q73e52u81mw2hplCDkITPGFEXBGOOcU0oBgFJaFAUAEEI454yxp1W+Oh6PrCilqCjNs3meh2HgnAshlFJSSrWSUmqtf65aa3VDSgmw1LOY0hRC3/fOOdRarABAAFyTa0WqO1mMMaU0f8wpReedtTbGYIfBXy7Oe2utc34cfdd1Qojfva7N7yl5vzw7Z62z3rs4jcMUus8v732YphDCOI7e+77vjTG3/dn5dMa6MeZkzLlZ4oSoddPIl1ZrjYgalxMRjTGI+Gdy274q3Zjndo23xrzIlQKQd/79+Rtxw18oUHOvIwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Página de busca\" title=\"Página de busca\" src=\"/static/dd40bbda0c272f4cda51e6846bd7bf54/c19a6/search-page.png\" srcset=\"/static/dd40bbda0c272f4cda51e6846bd7bf54/e3135/search-page.png 256w,\n/static/dd40bbda0c272f4cda51e6846bd7bf54/06341/search-page.png 512w,\n/static/dd40bbda0c272f4cda51e6846bd7bf54/c19a6/search-page.png 959w\" sizes=\"(max-width: 959px) 100vw, 959px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Página de busca</figcaption>\n  </figure><p></p>\n<p>Conforme mostrado no tutorial, o hook <code class=\"language-text\">useFlexSearch</code> pode ser usado para obter os resultados da busca, mas não há nenhuma indicação de onde o termo buscado foi correspondido nos campos do post.</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> urlParams <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URLSearchParams</span><span class=\"token punctuation\">(</span>location<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> urlParams<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token function\">useFlexSearch</span><span class=\"token punctuation\">(</span>\n    query<span class=\"token punctuation\">,</span>\n    data<span class=\"token punctuation\">.</span>localSearchPage<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span>\n    data<span class=\"token punctuation\">.</span>localSearchPage<span class=\"token punctuation\">.</span>store\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getExcerpt</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">post<span class=\"token punctuation\">,</span> length <span class=\"token operator\">=</span> <span class=\"token number\">60</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// magic happens here</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> results<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> \n            <span class=\"token operator\">...</span>post<span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">excerpt</span><span class=\"token operator\">:</span> <span class=\"token function\">getExcerpt</span><span class=\"token punctuation\">(</span>\n                post<span class=\"token punctuation\">.</span>excerpt\n                    <span class=\"token comment\">// let's remove any line breaks</span>\n                    <span class=\"token comment\">// or URLS</span>\n                    <span class=\"token comment\">// or remove the markdown tags etc</span>\n                    <span class=\"token comment\">// it would be better to do this in the build process</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?:https?|ftp):\\/\\/[\\n\\S]+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\n</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>results<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>A função <code class=\"language-text\">getExcerpt</code> precisa, de alguma forma, retornar o trecho do post com o termo buscado em destaque.</p>\n<p>Portanto, preciso encontrar a posição exata do termo buscado no post e substituí-lo por um elemento HTML <code class=\"language-text\">span</code>, tipo <code class=\"language-text\">&lt;span&gt;termo buscado aqui&lt;/span&gt;</code> e, para isso, usarei o bom e velho Regex.</p>\n<p>Além disso, precisarei de uma função para “cortar” o texto e adicionar as reticências se necessário, e <a href=\"https://stackoverflow.com/a/41267747/4307769\" target=\"_blank\" rel=\"noreferrer\">este código do StackOverflow</a> fará o trabalho perfeitamente.</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">const</span> getExcerpt <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> length <span class=\"token operator\">=</span> <span class=\"token number\">60</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// makes it lowercase to be sure to find it</span>\n        <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\\\b(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)\\\\b</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> matchedRegex <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>matchedRegex<span class=\"token operator\">?.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// now let's create a regex using the actual word found, capital-sensitive</span>\n            <span class=\"token keyword\">const</span> actualQuery <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span>matchedRegex<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> actualRegex <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\\\b(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>actualQuery<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)\\\\b</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// start of the excerpt</span>\n            <span class=\"token keyword\">const</span> excerptEnd <span class=\"token operator\">=</span> <span class=\"token function\">truncateStringToWord</span><span class=\"token punctuation\">(</span>\n                text<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span>matchedRegex<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                length<span class=\"token punctuation\">,</span>\n                <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// yolo let's reverse the string and use the same function for the</span>\n            <span class=\"token comment\">// beginning of the excerpt too</span>\n            <span class=\"token keyword\">const</span> excerptStart <span class=\"token operator\">=</span> <span class=\"token function\">truncateStringToWord</span><span class=\"token punctuation\">(</span>\n                text<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> matchedRegex<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                length<span class=\"token punctuation\">,</span>\n                <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">const</span> excerpt <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>excerptStart<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>excerptEnd<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">const</span> highlightedQuery <span class=\"token operator\">=</span> <span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>span className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>highlightedQuery<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n                    <span class=\"token punctuation\">{</span>actualQuery<span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// if nothing was found it means that the query matched</span>\n            <span class=\"token comment\">// a tag or the post title</span>\n            <span class=\"token keyword\">return</span> excerpt<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>actualRegex<span class=\"token punctuation\">,</span> highlightedQuery<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token function\">truncateStringToWord</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>highlightedQuery<span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Este código irá transformar uma string tipo <code class=\"language-text\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed condimentum risus nec scelerisque auctor</code> em <code class=\"language-text\">Lorem ipsum dolor sit amet, consectetur &lt;span&gt;adipiscing&lt;/span&gt; elit. Sed condimentum risus nec scelerisque auctor</code> quando a busca for pela palavra <code class=\"language-text\">adipiscing</code>, e como esta string está em HTML, para exibi-la usarei a propriedade <code class=\"language-text\">dangerouslySetInnerHTML</code> em um elemento <code class=\"language-text\">em</code>.</p>\n<p>A gambiarra com o uso reverso da função <code class=\"language-text\">truncateStringToWord</code> não é a melhor das soluções, mas a maior parte desse código pode ser movido para o processo de build do Gatsby, então o desempenho do blog não será afetado.</p>\n<p>Espero que este post seja útil para você, para ver como o resultado ficou, <a href=\"/pt-br/search?q=javascript\">basta buscar por algo nesse blog</a>. Nos vemos na próxima!</p>","path":"/pt-br/blog/coding/como-criar-uma-pagina-de-busca-offline-com-o-gatsby/","title":"Como criar uma página de busca offline com o Gatsby","language":"pt-br","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTI5VDAwOjAwOjAwLjAwMFo=","comments":[],"relatedPosts":[{"path":"/pt-br/blog/coding/eu-pago-0-em-hospedagem-para-esse-site/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA0LTE3VDAwOjAwOjAwLjAwMFo=","title":"Eu pago R$0,00 em hospedagem para esse site","date":"2021-04-17T00:00:00.000Z"},{"path":"/pt-br/blog/coding/criando-uma-startup-com-github-actions-e-google-forms/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA5LTEzVDAwOjAwOjAwLjAwMFo=","title":"Criando uma Startup com GitHub Actions e Google Forms","date":"2022-09-13T00:00:00.000Z"},{"path":"/pt-br/blog/coding/criando-um-formulario-dinamico-a-partir-de-um-json-schema/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTIxVDAwOjAwOjAwLjAwMFo=","title":"Criando um formulário dinâmico a partir de um JSON schema","date":"2021-05-21T00:00:00.000Z"},{"path":"/pt-br/blog/coding/usando-o-github-actions-para-fazer-o-deploy-do-meu-blog-em-dois-dominios-diferentes/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTE1VDAwOjAwOjAwLjAwMFo=","title":"Usando o GitHub Actions para fazer o deploy do meu blog em domínios diferentes","date":"2021-05-15T00:00:00.000Z"},{"path":"/pt-br/blog/coding/meu-blog-tem-stories-agora-mas-nao-me-pergunte-por-que/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTA5LTA0VDAwOjAwOjAwLjAwMFo=","title":"Meu blog tem Stories agora, mas não me pergunte por quê","date":"2023-09-04T00:00:00.000Z"},{"path":"/pt-br/blog/coding/adicionando-botao-para-copiar-code-snippets-no-gatsby-gambiarra/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA1LTA1VDAwOjAwOjAwLjAwMFo=","title":"Adicionando botão para copiar code snippets no Gatsby (gambiarra)","date":"2022-05-05T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-importar-posts-com-sintaxe-de-codigo-colorida-no-medium-usando-o-gatsby/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTI0VDAwOjAwOjAwLjAwMFo=","title":"Como importar posts com sintaxe de código colorida no Medium usando o Gatsby","date":"2021-10-24T00:00:00.000Z"},{"path":"/pt-br/blog/coding/compartilhando-cookies-encriptados-do-laravel-com-next-js/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTEwLTI1VDAwOjAwOjAwLjAwMFo=","title":"Compartilhando cookies encriptados do Laravel com Next.js","date":"2024-10-25T00:00:00.000Z"},{"path":"/pt-br/blog/coding/calculando-minhas-horas-de-trabalho-em-projetos-pessoais-usando-nodejs/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA2LTE2VDAwOjAwOjAwLjAwMFo=","title":"Calculando minhas horas de trabalho em projetos pessoais usando Node.js","date":"2024-06-16T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-automatizar-a-criacao-de-instagram-reels-usando-gpt-da-openai/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEyLTIwVDAwOjAwOjAwLjAwMFo=","title":"Como automatizar a criação de Instagram Reels usando GPT da OpenAI","date":"2023-12-20T00:00:00.000Z"}]}