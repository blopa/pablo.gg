{"html":"<p>Hey everyone, here we are again with another game devlog for <a href=\"/en/blog/tags/super-ollie-vs-pebble-corp/\">Super Ollie</a>, and since the game is being built with JavaScript, I can easily export it to pretty much any gaming platform, and today I’m to create a mobile build for my game.</p>\n<h2 id=\"mobile-controls\" style=\"position:relative;\"><a href=\"#mobile-controls\" aria-label=\"mobile controls permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mobile controls</h2>\n<p>The character in my game is controlled via a gamepad or keyboard, so the easiest way to port that into a mobile version is to add virtual controller keys to the game.</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1019px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUklEQVQoz43M2U/aABzA8f47PiiXxMgpCcvGUYWpIIMCEo20CsJw02yobOVaW4orVVRGqRRo8eJSYWaJvm3JXnzbkiX7M/ayZC6y63XJ5+n7OwCWZnYDT9t881honfKdJt/7D92WcCmwDeC6nLkqrDEHxS2uxlSO2sLbltD7pcl3T7jzZq33t/zRbdcv6wcNoJzh63h17807jOrm8xdCqcMzHZ5pC6VOjemUCm2u2OZ/x38E9ozdPQQSm+Ut4pDC6zhaxuMchlbweIVI8ViimktWeiTPvaql+hFDK/0p11dNvigCQYRe8ucWF3JLfjqAbAcRGvbnECjumyU3Qru3lZNrrDw3Ty0jdADuQ7YDMB1EdgJIFvC4CMiBw/DOcqjgdRL2Gex1KP8lsfMBLXzEyt9Kh61YcdqOeV2E20l4XITHifvcmMeJe6E0ADlSHhf+ZJVF0415HwW5KTKcvEmnbo8vvtcaP9iTs1jJ5iB8btJhz0bDic9XG1dMeHWZhFw4oB+1ra7trW+yaPIogTURmEa860QE/YTv36TzX8n90mPSatlwTsemLC/RZ8T708gpV8hSZ3OzaUAnt9gtwcAi/jxadDwMGccgrdh8b2RSJQGVYpNKMq6WgFqpWSUyOqdCGNl8ZIvOTEZCwYxBawcUQw9GBvSTZr9/IaEUGfsMaimolphUIoNGYlaLTUqRQTlkNOs9KyuUDYRHBnSKQYNODgIqkUErGx8bturkVo0U1A5PqMRGrWyif2bUyECNxHy3Ix1XDN6/+yg2qaUmjRTUj1p/Ag4AR3L2JCtBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Mobile controls\" title=\"Mobile controls\" src=\"/static/b4e06a90f8970637c139d8869cd2925b/f5df9/skate-platformer-mobile-controls.png\" srcset=\"/static/b4e06a90f8970637c139d8869cd2925b/e3135/skate-platformer-mobile-controls.png 256w,\n/static/b4e06a90f8970637c139d8869cd2925b/06341/skate-platformer-mobile-controls.png 512w,\n/static/b4e06a90f8970637c139d8869cd2925b/f5df9/skate-platformer-mobile-controls.png 1019w\" sizes=\"(max-width: 1019px) 100vw, 1019px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Mobile controls</figcaption>\n  </figure><p></p>\n<p>To make this I will need 3 sprites for buttons, one for the <code class=\"language-text\">A button</code>, one for the <code class=\"language-text\">B button</code>, and another one for the <code class=\"language-text\">D-buttons</code>, like the sprite image below:</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 125px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 32.800000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVQoz12RQWtUMRCAI1jsxav4PwT/h/0THjx58KaCeBTpWagHQcRafCpvecn2vcy83U12e1DY4m7yTLbVUkER0aM+9rUjs0QoPYTM8E2GLzNCgb8mtTNSO5La/ZTa3VfgLyrwQoG/LrUbJfZbgb+X9fYF0YnYeTu6VA39Gtq4Biaso4kCTBRCatcq8KSw6RQ0tIrBP1TgL0vtlpz38VNiq8YP6nF8NJgcfkMbZ2DCHG38DCaUaOM6W3BRu50NKMv3OoUN5z+kdrvMinLWvsqG9E5+6FLtLzDxe5ZPqBx4QhsJTCA0kWMj+tgs8/6UXmyXpy9fI9t16Yu0YmpKz573TnfejJidsKnUH+nx5tM/u/W8rceLFkxo0UY+tDIsqvnfoppTUc2W3EiBP5TaPfnPsnyP8v50mQyP0C6+FOWUqmFz3vAuz/Aoza1LNz+6VU+OmX09O8NkfhNtvD2YHBi0sQcm9NDGGk24gzYKNrwitdtKxUFqtyG1E2nLV8+wAwX+htReoA1i/P5Y1OOFABMEN+Ito40X/gG43aZxI/AvBAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Button sprites\" title=\"Button sprites\" src=\"/static/42b88d2f41be772c5fba6b594eeabf81/c59a0/button-sprites.png\" srcset=\"/static/42b88d2f41be772c5fba6b594eeabf81/c59a0/button-sprites.png 125w\" sizes=\"(max-width: 125px) 100vw, 125px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Button sprites</figcaption>\n  </figure><p></p>\n<p>For the code, I will do pretty much <a href=\"/en/blog/games/creating-hero-hud-on-phaser-js-skate-platformer-game-devlog-10/\">the same as I did for the HUD</a>, which is create a class and set its scroll factor to <code class=\"language-text\">0</code>.</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">TouchScreenControls</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GameGroup</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        scene<span class=\"token punctuation\">,</span>\n        x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">,</span>\n        dPadAsset <span class=\"token operator\">=</span> <span class=\"token string\">'d_pad'</span><span class=\"token punctuation\">,</span>\n        buttonAAsset <span class=\"token operator\">=</span> <span class=\"token string\">'button_a'</span><span class=\"token punctuation\">,</span>\n        buttonBAsset <span class=\"token operator\">=</span> <span class=\"token string\">'button_b'</span><span class=\"token punctuation\">,</span>\n        controlKeys <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token constant\">LEFT</span><span class=\"token punctuation\">,</span>\n            <span class=\"token constant\">RIGHT</span><span class=\"token punctuation\">,</span>\n            <span class=\"token constant\">UP</span><span class=\"token punctuation\">,</span>\n            <span class=\"token constant\">DOWN</span><span class=\"token punctuation\">,</span>\n            <span class=\"token constant\">SPACE</span><span class=\"token punctuation\">,</span>\n            <span class=\"token constant\">NUMPAD_ZERO</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span>KeyCodes<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">const</span> baseKeys <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">d_pad_left</span><span class=\"token operator\">:</span> <span class=\"token constant\">LEFT</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">d_pad_right</span><span class=\"token operator\">:</span> <span class=\"token constant\">RIGHT</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">d_pad_up</span><span class=\"token operator\">:</span> <span class=\"token constant\">UP</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">d_pad_down</span><span class=\"token operator\">:</span> <span class=\"token constant\">DOWN</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">button_a</span><span class=\"token operator\">:</span> <span class=\"token constant\">SPACE</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">button_b</span><span class=\"token operator\">:</span> <span class=\"token constant\">NUMPAD_ZERO</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">const</span> keys <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token operator\">...</span>baseKeys<span class=\"token punctuation\">,</span>\n            <span class=\"token operator\">...</span>controlKeys<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">const</span> children <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">[</span>\n            dPadAsset<span class=\"token punctuation\">,</span>\n            buttonAAsset<span class=\"token punctuation\">,</span>\n            buttonBAsset<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>assignButtonActions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            scene<span class=\"token punctuation\">,</span>\n            children<span class=\"token punctuation\">,</span>\n            name<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token constant\">TOUCH_CONTROLS_DEPTH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setControlsPositions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TouchScreenControls<span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>For the <code class=\"language-text\">assignButtonActions</code> function, I need to write a code that will be triggered when the player presses one of the on-screen buttons in the game, and the easiest way to do this is by simulating existing mapped keyboard keys.</p>\n<p>For example, I already coded that when the space bar is pressed, the hero needs to jump, so all I need to do now is to create a code for when the player presses the in-screen <code class=\"language-text\">A button</code>, that will simulate that the space bar was pressed, and I found a really nice <a href=\"https://gist.github.com/GlauberF/d8278ce3aa592389e6e3d4e758e6a0c2\" target=\"_blank\" rel=\"noreferrer\">GitHub Gist with a function that does just that</a>.</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/**\n * source https://gist.github.com/GlauberF/d8278ce3aa592389e6e3d4e758e6a0c2\n * Simulate a key event.\n * @param {Number} keyCode The keyCode of the key to simulate\n * @param {String} type (optional) The type of event : down, up or press. The default is down\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">simulateKeyEvent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">keyCode<span class=\"token punctuation\">,</span> type</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> evtName <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">key</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token string\">'keydown'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> event <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HTMLEvents'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">initEvent</span><span class=\"token punctuation\">(</span>evtName<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    event<span class=\"token punctuation\">.</span>keyCode <span class=\"token operator\">=</span> keyCode<span class=\"token punctuation\">;</span>\n\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Now for the actual <code class=\"language-text\">assignButtonActions</code> function code, the key here is to trigger an event for <code class=\"language-text\">pointerdown</code>, <code class=\"language-text\">pointerup</code>, and <code class=\"language-text\">pointerout</code>, otherwise, it will not work properly on the touchscreen.</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">assignButtonActions</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">asset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>asset <span class=\"token operator\">===</span> buttonPrefix <span class=\"token operator\">+</span> dPadAsset<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> angle <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'right'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dPadDirection</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> assetName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>asset<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dPadDirection<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Image</span><span class=\"token punctuation\">(</span>\n                scene<span class=\"token punctuation\">,</span>\n                x<span class=\"token punctuation\">,</span>\n                y<span class=\"token punctuation\">,</span>\n                asset\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>assetName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setAngle</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setInteractive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerdown'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x90989e</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>assetName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerup'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">clearTint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>assetName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerout'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">clearTint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>assetName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            angle <span class=\"token operator\">+=</span> <span class=\"token number\">90</span><span class=\"token punctuation\">;</span>\n            children<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Image</span><span class=\"token punctuation\">(</span>\n            scene<span class=\"token punctuation\">,</span>\n            x<span class=\"token punctuation\">,</span>\n            y<span class=\"token punctuation\">,</span>\n            asset\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>asset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setInteractive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerdown'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x90989e</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>asset<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerup'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">clearTint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>asset<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerout'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">clearTint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>asset<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<p>The <code class=\"language-text\">setControlsPositions</code> function is quite boring, it simply sets the position of each control button:</p>\n<div class=\"copy-code-block\"><button tabindex=\"3\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">setControlsPositions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> paddingX <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> paddingY <span class=\"token operator\">=</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> child<span class=\"token punctuation\">;</span>\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>paddingX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>height <span class=\"token operator\">-</span> paddingY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setScrollFactor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_d_pad_left'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_d_pad_up'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">58</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">49</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_d_pad_right'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">88</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_d_pad_down'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">37</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_button_a'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">-</span> paddingX <span class=\"token operator\">-</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_button_b'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">-</span> paddingX <span class=\"token operator\">-</span> <span class=\"token number\">85</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'d_pad_left'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'d_pad_up'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'d_pad_right'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'d_pad_down'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'button_a'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">-</span> paddingX <span class=\"token operator\">-</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'button_b'</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">-</span> paddingX <span class=\"token operator\">-</span> <span class=\"token number\">75</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<h2 id=\"mobile-build\" style=\"position:relative;\"><a href=\"#mobile-build\" aria-label=\"mobile build permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mobile build</h2>\n<p>I don’t want to load extra assets if I’m not using them, so I will create a separate build for mobile and check in my code if I should or should not load the button assets:</p>\n<div class=\"copy-code-block\"><button tabindex=\"4\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">getGlobal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'IS_MOBILE_BUILD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'big_d_pad'</span><span class=\"token punctuation\">,</span> bigDPad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'big_button_a'</span><span class=\"token punctuation\">,</span> bigButtonA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'big_button_b'</span><span class=\"token punctuation\">,</span> bigButtonB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'big_button_Y'</span><span class=\"token punctuation\">,</span> bigButtonY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d_pad'</span><span class=\"token punctuation\">,</span> dPad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button_a'</span><span class=\"token punctuation\">,</span> buttonA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button_b'</span><span class=\"token punctuation\">,</span> buttonB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button_Y'</span><span class=\"token punctuation\">,</span> buttonY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">getGlobal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'IS_MOBILE_BUILD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchScreenControls <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TouchScreenControls</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'touchScreenControls'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">dPadAsset</span><span class=\"token operator\">:</span> <span class=\"token string\">'d_pad'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">buttonAAsset</span><span class=\"token operator\">:</span> <span class=\"token string\">'button_a'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">buttonBAsset</span><span class=\"token operator\">:</span> <span class=\"token string\">'button_b'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">useBigButtons</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchScreenControls<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<p>Then in my <code class=\"language-text\">package.json</code> I will create a build script with <code class=\"language-text\">\"build-mobile\": \"webpack --mode production --config webpack.config.prod.js --env=mobile\"</code>, and on my Webpack settings by exporting a function instead of an object:</p>\n<div class=\"copy-code-block\"><button tabindex=\"5\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// webpack.config.js</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">env <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> isMobileBuild <span class=\"token operator\">=</span> env <span class=\"token operator\">===</span> <span class=\"token string\">'mobile'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isMobileBuild<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token constant\">BUILD_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'www/build'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token constant\">DIST_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'www'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<p>Also, I will define the <code class=\"language-text\">IS_MOBILE_BUILD</code> variable with the <a href=\"https://webpack.js.org/plugins/define-plugin/\" target=\"_blank\" rel=\"noreferrer\">Webpack Define Plugin</a>:</p>\n<div class=\"copy-code-block\"><button tabindex=\"6\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>DefinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">IS_MOBILE_BUILD</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>isMobileBuild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div></div>\n<h2 id=\"building-an-apk-bundle\" style=\"position:relative;\"><a href=\"#building-an-apk-bundle\" aria-label=\"building an apk bundle permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building an APK Bundle</h2>\n<p>I want my game to run on Android for now, and for that, I will use <a href=\"https://cordova.apache.org/\" target=\"_blank\" rel=\"noreferrer\">Cordova</a>. First I need to install Cordova with <code class=\"language-text\">npm install -g cordova</code>, then <a href=\"https://cordova.apache.org/docs/en/10.x/guide/platforms/android/index.html\" target=\"_blank\" rel=\"noreferrer\">install Android Studio and yada yada</a> and then finally create my project with <code class=\"language-text\">cordova create skate</code>.</p>\n<p>Cordova will expect the build files to be in a <code class=\"language-text\">www/</code> folder, that’s why I had to change my Webpack script before. Now I can simply run <code class=\"language-text\">cordova build --release android</code> and an unsigned APK file will be generated for me.</p>\n<p>That’s it! Easy peasy lemon squeezy!</p>\n<p>See you in the next one!</p>","path":"/en/blog/games/creating-a-mobile-build-of-my-phaser-js-game-game-devlog-23/","title":"Creating a mobile build of my Phaser JS game - Game Devlog #23","language":"en","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDktMDlUMDA6MDA6MDAuMDAwWg==","comments":[],"relatedPosts":[{"path":"/en/blog/games/creating-moving-platforms-for-my-phaser-js-game-game-devlog-22/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDgtMjhUMDA6MDA6MDAuMDAwWg==","title":"Creating moving platforms for my Phaser JS game - Game Devlog #22","date":"2021-08-28T00:00:00.000Z"},{"path":"/en/blog/games/hiding-parts-of-the-map-on-phaser-js-game-devlog-21/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDctMDZUMDA6MDA6MDAuMDAwWg==","title":"Hiding parts of the map on Phaser JS - Game Devlog #21","date":"2021-07-06T00:00:00.000Z"},{"path":"/en/blog/games/creating-falling-spikes-with-phaser-js-game-devlog-20/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMjhUMDA6MDA6MDAuMDAwWg==","title":"Creating falling spikes with Phaser JS - Game Devlog #20","date":"2021-06-28T00:00:00.000Z"},{"path":"/en/blog/games/hanging-on-a-monkey-bar-on-phaser-js-game-devlog-19/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMTlUMDA6MDA6MDAuMDAwWg==","title":"Hanging on a monkey bar Phaser JS - Game Devlog #19","date":"2021-06-19T00:00:00.000Z"},{"path":"/en/blog/games/creating-a-pogo-attack-with-phaser-js-game-devlog-17/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDQtMjRUMDA6MDA6MDAuMDAwWg==","title":"Creating a pogo-attack with Phaser JS - Game Devlog #17","date":"2021-04-24T00:00:00.000Z"},{"path":"/en/blog/games/adding-transition-when-entering-a-stage-on-phaser-js-skate-platformer-game-devlog-16/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTItMjlUMDA6MDA6MDAuMDAwWg==","title":"Adding transition when entering a stage on Phaser JS - Game Devlog #16","date":"2020-12-29T00:00:00.000Z"},{"path":"/en/blog/games/creating-a-smarter-and-more-performing-ai-on-phaser-js-skate-platformer-game-devlog-15/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTItMTVUMDA6MDA6MDAuMDAwWg==","title":"Creating a smarter and more performing AI on Phaser JS - Game Devlog #15","date":"2020-12-15T00:00:00.000Z"},{"path":"/en/blog/games/creating-custom-weather-on-phaser-js-skate-platformer-game-devlog-14/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTItMDlUMDA6MDA6MDAuMDAwWg==","title":"Creating custom weather on Phaser JS - Skate Platformer Game Devlog #14","date":"2020-12-09T00:00:00.000Z"},{"path":"/en/blog/games/creating-a-loading-screen-and-adding-translation-on-phaser-js-skate-platformer-game-devlog-13/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTEtMjlUMDA6MDA6MDAuMDAwWg==","title":"Creating a loading screen and adding translation on Phaser JS - Skate Platformer Game Devlog #13","date":"2020-11-29T00:00:00.000Z"},{"path":"/en/blog/games/saving-player-progress-with-checkpoints-with-phaser-js-skate-platformer-game-devlog-12/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTEtMTlUMDA6MDA6MDAuMDAwWg==","title":"Saving player progress with checkpoints with Phaser JS - Skate Platformer Game Devlog #12","date":"2020-11-19T00:00:00.000Z"}]}