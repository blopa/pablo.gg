{
    "componentChunkName": "component---src-templates-blog-post-jsx",
    "path": "/en/blog/coding/building-a-dynamic-form-from-a-json-schema/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://pablo.gg"}},"markdownRemark":{"id":"9d6ed232-2b0e-5c04-9fd9-03a412d05327","excerpt":"Around 2 months ago, Gatsby v3 was released, and I was already super hyped to upgrade this blog to v3 and start using incremental builds, but “sadly” this blog…","html":"<p>Around 2 months ago, <a href=\"https://www.gatsbyjs.com/blog/gatsbyconf-product-announcements\" target=\"_blank\" rel=\"noreferrer\">Gatsby v3 was released</a>, and I was already super hyped to upgrade this blog to v3 and start using <a href=\"https://www.gatsbyjs.com/docs/reference/release-notes/v3.0/#incremental-builds-in-oss\" target=\"_blank\" rel=\"noreferrer\">incremental builds</a>, but “sadly” this blog has way too many customizations, so upgrading it to Gatsby v3 is not an easy feat.</p>\n<p>Luckily, my open source project, <a href=\"https://github.com/blopa/Resume-Builder\" target=\"_blank\" rel=\"noreferrer\">Resume Builder</a>, didn’t have many customizations, so I was able to upgrade it to Gatsby v3 by simply running <code class=\"language-text\">ncu -u</code>, a command by <a href=\"https://github.com/raineorshine/npm-check-updates\" target=\"_blank\" rel=\"noreferrer\">npm-check-updates</a>. But then after upgrading it to Gatsby v3 I kind of got carried away and decided to implement some new features, like the <a href=\"https://github.com/blopa/Resume-Builder#cover-letter-editor\" target=\"_blank\" rel=\"noreferrer\">cover letter editor</a> that was on my backlog since 2018.</p>\n<h2 id=\"what-is-resume-builder\" style=\"position:relative;\"><a href=\"#what-is-resume-builder\" aria-label=\"what is resume builder permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Resume Builder?</h2>\n<p>Resume Builder is a free open-source project that allows anyone to easily maintain and build any kind of resume using a spreadsheet or a JSON file as a data source. Thanks to this project I was hired to live abroad, as I already explained <a href=\"/en/blog/coding/how-an-open-source-project-landed-me-a-job-abroad/\">in another blog post</a>.</p>\n<p>One of the biggest flaws of this project was that you must already have a data source for your resume, there was no way to create your own resume from scratch.</p>\n<h2 id=\"formik\" style=\"position:relative;\"><a href=\"#formik\" aria-label=\"formik permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Formik</h2>\n<p>A couple of days ago I was watching <a href=\"https://www.youtube.com/watch?v=uyLrwn8FdmM\" target=\"_blank\" rel=\"noreferrer\">a talk</a> by <a href=\"https://github.com/jaredpalmer\" target=\"_blank\" rel=\"noreferrer\">Jared Palmer</a> and I was convinced I should try <a href=\"https://github.com/formium/formik\" target=\"_blank\" rel=\"noreferrer\">Formik</a>, and I have the perfect feature for it.</p>\n<h2 id=\"json-schema\" style=\"position:relative;\"><a href=\"#json-schema\" aria-label=\"json schema permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON schema</h2>\n<p>I needed the form to be dynamic, so users could add as much work experience as they wanted it to, and since I’m already using the <a href=\"https://github.com/jsonresume/resume-schema/blob/81d9e75a3d7b599e202e7c3e31c55e634c7f1e39/schema.json\" target=\"_blank\" rel=\"noreferrer\">JSON schema from the json-resume project</a>, why not use it to build the form programmatically for me?</p>\n<p>Before coding I decided to use my UML knowledge to make a diagram of how this is going to work:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFElEQVQY002PzaqCUACEeztfoheRMAg3Cm0kwZ2gJEp1wp0oCIa2CcOflUiEtAyqs7CVHefCNbx3VjMD38BMAJxOp6Zp8jxPkgTA5/MBcD6fF4uF67oA+r4H8H6/gyC4XC66rtd1DWACYLPZrNfr4/FICMGvHo/HcrlUFEXTNMdxhjlK6eFwqOvaMAzP876w67qEEFmWd7vd8/m83+++74uiKEnSarVSFCXLstfrlef5fD7neX673VZV9YX3+73neaqqWpYFgDHW971t24IgzGYz0zS7rgOQpinHcdPplBBSluUXvt1u1+uVUto0zfiwbdsoisIwpJQOXxhjZVkWRRHH8R88aGBGP8b/hjHWdR1jbGh+AML6LI6VT8DuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JSON schema to HTML form\"\n        title=\"JSON schema to HTML form\"\n        src=\"/static/5bb124471650354914396e3c83c9a1f3/42a19/diagram.png\"\n        srcset=\"/static/5bb124471650354914396e3c83c9a1f3/e3135/diagram.png 256w,\n/static/5bb124471650354914396e3c83c9a1f3/06341/diagram.png 512w,\n/static/5bb124471650354914396e3c83c9a1f3/42a19/diagram.png 1024w,\n/static/5bb124471650354914396e3c83c9a1f3/e8464/diagram.png 1536w,\n/static/5bb124471650354914396e3c83c9a1f3/2eb59/diagram.png 2048w,\n/static/5bb124471650354914396e3c83c9a1f3/1ce76/diagram.png 4000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">JSON schema to HTML form</figcaption>\n  </figure></p>\n<p>For this blog post let’s use a simpler version of the JSON schema from the json-resume project.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">\"work\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"array\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"additionalItems\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"additionalProperties\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Facebook\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Menlo Park, CA\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Social Media Company\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Software Engineer\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. http://facebook.example.com\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"format\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uri\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"startDate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"$ref\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#/definitions/iso8601\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"endDate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"$ref\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#/definitions/iso8601\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Give an overview of your responsibilities at the company\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"highlights\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"array\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Specify multiple accomplishments\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"additionalItems\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Increased profits by 20% from 2011-2012 through viral advertising\"</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"traversing-the-json\" style=\"position:relative;\"><a href=\"#traversing-the-json\" aria-label=\"traversing the json permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Traversing the JSON</h2>\n<p>There are 3 different data types in the JSON schema that I’m using, <code class=\"language-text\">object</code>, <code class=\"language-text\">array</code>, and <code class=\"language-text\">string</code>, so it should be fairly simple to traverse.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> formik <span class=\"token operator\">=</span> <span class=\"token function\">useFormik</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">jsonSchema</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n              <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span> \r\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>TextField\r\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              fullWidth\r\n              id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> form <span class=\"token operator\">=</span> <span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That should be enough for most cases when there are not repeating keys in the JSON neither the need for the user to input unlimited data.</p>\n<h2 id=\"using-unique-keys\" style=\"position:relative;\"><a href=\"#using-unique-keys\" aria-label=\"using unique keys permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using unique keys</h2>\n<p>Now things start to get a bit hacky, to make sure every field has a unique key, I will accumulate the keys in the node, for example for the object <code class=\"language-text\">{ foo: { bar: '' } }</code>, the key for the <code class=\"language-text\">bar</code> node would be <code class=\"language-text\">foo-bar</code>. I’m not super proud of this, but I can always refactor it later.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> getForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">,</span> accKey <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> newAccKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>accKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span> newAccKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n              <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> newAccKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span> \r\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>TextField\r\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newAccKey<span class=\"token punctuation\">}</span>\r\n              fullWidth\r\n              id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newAccKey<span class=\"token punctuation\">}</span>\r\n              name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"adding-more-fields-dynamically\" style=\"position:relative;\"><a href=\"#adding-more-fields-dynamically\" aria-label=\"adding more fields dynamically permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding more fields dynamically</h2>\n<p>To add fields dynamically I decided to create a local variable that would hold how many times an input should be displayed based on the input unique key.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>quantitiesObject<span class=\"token punctuation\">,</span> setQuantitiesObject<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> getForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">,</span> accKey <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> quantity <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> newAccKey <span class=\"token operator\">=</span> key<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>accKey<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      newAccKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>accKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                  <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> currQuantity <span class=\"token operator\">=</span> quantitiesObject<span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n              <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                  <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> currQuantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n              <span class=\"token operator\">&lt;</span>Button\r\n                onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                  <span class=\"token function\">setQuantitiesObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                    <span class=\"token operator\">...</span>quantitiesObject<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> currQuantity <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                color<span class=\"token operator\">=</span><span class=\"token string\">\"primary\"</span>\r\n                variant<span class=\"token operator\">=</span><span class=\"token string\">\"contained\"</span>\r\n              <span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">+ </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\r\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">{</span>currQuantity <span class=\"token operator\">></span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>Button\r\n                  onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token function\">setQuantitiesObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                      <span class=\"token operator\">...</span>quantitiesObject<span class=\"token punctuation\">,</span>\r\n                      <span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> currQuantity <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                  color<span class=\"token operator\">=</span><span class=\"token string\">\"secondary\"</span>\r\n                  variant<span class=\"token operator\">=</span><span class=\"token string\">\"contained\"</span>\r\n                <span class=\"token operator\">></span>\r\n                  <span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">- </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span>\r\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> newKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n                  <span class=\"token operator\">&lt;</span>TextField\r\n                    key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\r\n                    fullWidth\r\n                    id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\r\n                    name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\r\n                    label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n                    value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>newKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n                    onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\r\n                  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After wrapping this code into a React component, I can use it like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>DynamicForm\r\n    schema<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>jsonSchema<span class=\"token punctuation\">}</span>\r\n    formik<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">}</span>\r\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>The result of this messy code looks like the following:</p>\n<p><img src=\"/49d9138f925cb97546d36f00f37d091a/dynamic-formik.gif\" alt=\"Dynamic form with Formik\"></p>\n<p>You can check the <a href=\"https://github.com/blopa/Resume-Builder/blob/4.0.7/src/components/DynamicForm.jsx#L48\" target=\"_blank\" rel=\"noreferrer\">actual code for the form on GitHub</a>, and the nice thing is that next time the json-resume schema changes, I don’t have to do anything.</p>\n<p>Try the form yourself on the <a href=\"https://resume-builder.js.org/en/build\" target=\"_blank\" rel=\"noreferrer\">Resume Builder website</a>.</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTIxVDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-05-21-building-a-dynamic-form-from-a-json-schema.en/","path":"/blog/coding/building-a-dynamic-form-from-a-json-schema/","locale":"en"},"readingTime":{"minutes":4.84},"frontmatter":{"path":"building-a-dynamic-form-from-a-json-schema","allowComments":true,"title":"Building a dynamic form from a JSON schema","date":"2021-05-21T00:00:00.000Z","categories":["coding"],"tags":["json schema","json","gatsby","javascript","resume builder","formik","reactjs"],"hideExcerpt":false,"subtitle":""}},"categoryImage":{"childImageSharp":{"original":{"width":1920,"height":1080,"src":"/static/categories_coding-aa17d098a6a0d8e0a764a345865f5ffb.jpg"}}}},"pageContext":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTIxVDAwOjAwOjAwLjAwMFo=","relatedPosts":[{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTI5VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-05-29-how-to-create-an-offline-search-page-with-gatsby.en/","path":"/blog/coding/how-to-create-an-offline-search-page-with-gatsby/","locale":"en"},"frontmatter":{"tags":["gatsby","javascript","reactjs","jamstack","flexsearch"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-05-29T00:00:00.000Z","id":null,"path":"how-to-create-an-offline-search-page-with-gatsby","show":true,"title":"How to create an offline search page with Gatsby","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTE1VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-05-15-using-github-actions-to-deploy-my-blog-into-different-domains.en/","path":"/blog/coding/using-github-actions-to-deploy-my-blog-into-different-domains/","locale":"en"},"frontmatter":{"tags":["github actions","gatsby","javascript","deploy","reactjs"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-05-15T00:00:00.000Z","id":null,"path":"using-github-actions-to-deploy-my-blog-into-different-domains","show":true,"title":"Using GitHub Actions to deploy my blog into different domains","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA0LTE3VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-04-17-i-pay-0-in-hosting-for-this-website.en/","path":"/blog/coding/i-pay-0-in-hosting-for-this-website/","locale":"en"},"frontmatter":{"tags":["jamstack","javascript","gatsby","reactjs","github","github pages","github actions","frugal","multi-languages","flexsearch","google photos","markdown"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-04-17T00:00:00.000Z","id":null,"path":"i-pay-0-in-hosting-for-this-website","show":true,"title":"I pay $0.00 in hosting for this website","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTA5LTA0VDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-09-04-my-blog-now-has-stories-and-im-not-sure-why.en/","path":"/blog/coding/my-blog-now-has-stories-and-im-not-sure-why/","locale":"en"},"frontmatter":{"tags":["instagram","instagram stories","unnecessary inventions","gatsby","react","javascript"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-09-04T00:00:00.000Z","id":null,"path":"my-blog-now-has-stories-and-im-not-sure-why","show":true,"title":"My blog now has Stories, and I'm not sure why","hideExcerpt":false,"subtitle":"The saga of \"Well, It's here now\""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA5LTEzVDAwOjAwOjAwLjAwMFo=","slug":"/2022/2022-09-13-creating-a-startup-with-github-actions-and-google-forms.en/","path":"/blog/coding/creating-a-startup-with-github-actions-and-google-forms/","locale":"en"},"frontmatter":{"tags":["startup","jamstack","google forms","github actions","react","gatsby","javascript","funda","netherlands","housing market","scraping","puppeteer.js","github"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2022-09-13T00:00:00.000Z","id":null,"path":"creating-a-startup-with-github-actions-and-google-forms","show":true,"title":"Creating a Startup with GitHub Actions and Google Forms","hideExcerpt":false,"subtitle":"How to use JAMStack to kickstart your own Startup"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA1LTA1VDAwOjAwOjAwLjAwMFo=","slug":"/2022/2022-05-05-adding-a-copy-button-to-code-snippets-on-gatsby-the-lazy-way.en/","path":"/blog/coding/adding-a-copy-button-to-code-snippets-on-gatsby-the-lazy-way/","locale":"en"},"frontmatter":{"tags":["gatsby","html","code snippets","node","nodejs","javascript","dom","ast"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2022-05-05T00:00:00.000Z","id":null,"path":"adding-a-copy-button-to-code-snippets-on-gatsby-the-lazy-way","show":true,"title":"Adding a copy button to code snippets on Gatsby: The lazy way","hideExcerpt":false,"subtitle":"Don't feel like creating a Gatsby plugin? Then this blog post is for you."}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTI0VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-24-how-to-import-gatsby-posts-into-medium-with-gist-code-snippets.en/","path":"/blog/coding/how-to-import-gatsby-posts-into-medium-with-gist-code-snippets/","locale":"en"},"frontmatter":{"tags":["github","gist","gatsby","javascript","api","react","jsdom","node-fetch"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-10-24T00:00:00.000Z","id":null,"path":"how-to-import-gatsby-posts-into-medium-with-gist-code-snippets","show":true,"title":"How to import Gatsby posts into Medium with Gist code snippets","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTEzVDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-05-13-how-to-calculate-brazils-annual-inflation-using-javascript.en/","path":"/blog/coding/how-to-calculate-brazils-annual-inflation-using-javascript/","locale":"en"},"frontmatter":{"tags":["json","central bank","brazil","inflation","reduce","accumulated inflation","javascript","annual inflation"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-05-13T00:00:00.000Z","id":null,"path":"how-to-calculate-brazils-annual-inflation-using-javascript","show":true,"title":"How to calculate the annual inflation in Brazil using JavaScript","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTA5VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-05-09-how-to-create-a-json-download-link-using-html-only.en/","path":"/blog/coding/how-to-create-a-json-download-link-using-html-only/","locale":"en"},"frontmatter":{"tags":["json","html","download","base64","resume builder"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-05-09T00:00:00.000Z","id":null,"path":"how-to-create-a-json-download-link-using-html-only","show":true,"title":"How to create a JSON download link using HTML only","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTEwLTI1VDAwOjAwOjAwLjAwMFo=","slug":"/2024/2024-10-25-sharing-encrypted-laravel-cookies-with-next-js.en/","path":"/blog/coding/sharing-encrypted-laravel-cookies-with-next-js/","locale":"en"},"frontmatter":{"tags":["laravel","next.js","cookies","encryption","synchronization","web development","php","javascript"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2024-10-25T00:00:00.000Z","id":null,"path":"sharing-encrypted-laravel-cookies-with-next-js","show":true,"title":"Sharing encrypted Laravel cookies with Next.js","hideExcerpt":false,"subtitle":"Bridging Laravel and Next.js: How we synchronized encrypted cookies between two different frameworks."}}],"alternativeHtml":"<p>Around 2 months ago, <a href=\"https://www.gatsbyjs.com/blog/gatsbyconf-product-announcements\" target=\"_blank\" rel=\"noreferrer\">Gatsby v3 was released</a>, and I was already super hyped to upgrade this blog to v3 and start using <a href=\"https://www.gatsbyjs.com/docs/reference/release-notes/v3.0/#incremental-builds-in-oss\" target=\"_blank\" rel=\"noreferrer\">incremental builds</a>, but “sadly” this blog has way too many customizations, so upgrading it to Gatsby v3 is not an easy feat.</p>\n<p>Luckily, my open source project, <a href=\"https://github.com/blopa/Resume-Builder\" target=\"_blank\" rel=\"noreferrer\">Resume Builder</a>, didn’t have many customizations, so I was able to upgrade it to Gatsby v3 by simply running <code class=\"language-text\">ncu -u</code>, a command by <a href=\"https://github.com/raineorshine/npm-check-updates\" target=\"_blank\" rel=\"noreferrer\">npm-check-updates</a>. But then after upgrading it to Gatsby v3 I kind of got carried away and decided to implement some new features, like the <a href=\"https://github.com/blopa/Resume-Builder#cover-letter-editor\" target=\"_blank\" rel=\"noreferrer\">cover letter editor</a> that was on my backlog since 2018.</p>\n<h2 id=\"what-is-resume-builder\" style=\"position:relative;\"><a href=\"#what-is-resume-builder\" aria-label=\"what is resume builder permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Resume Builder?</h2>\n<p>Resume Builder is a free open-source project that allows anyone to easily maintain and build any kind of resume using a spreadsheet or a JSON file as a data source. Thanks to this project I was hired to live abroad, as I already explained <a href=\"/en/blog/coding/how-an-open-source-project-landed-me-a-job-abroad/\">in another blog post</a>.</p>\n<p>One of the biggest flaws of this project was that you must already have a data source for your resume, there was no way to create your own resume from scratch.</p>\n<h2 id=\"formik\" style=\"position:relative;\"><a href=\"#formik\" aria-label=\"formik permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Formik</h2>\n<p>A couple of days ago I was watching <a href=\"https://www.youtube.com/watch?v=uyLrwn8FdmM\" target=\"_blank\" rel=\"noreferrer\">a talk</a> by <a href=\"https://github.com/jaredpalmer\" target=\"_blank\" rel=\"noreferrer\">Jared Palmer</a> and I was convinced I should try <a href=\"https://github.com/formium/formik\" target=\"_blank\" rel=\"noreferrer\">Formik</a>, and I have the perfect feature for it.</p>\n<h2 id=\"json-schema\" style=\"position:relative;\"><a href=\"#json-schema\" aria-label=\"json schema permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON schema</h2>\n<p>I needed the form to be dynamic, so users could add as much work experience as they wanted it to, and since I’m already using the <a href=\"https://github.com/jsonresume/resume-schema/blob/81d9e75a3d7b599e202e7c3e31c55e634c7f1e39/schema.json\" target=\"_blank\" rel=\"noreferrer\">JSON schema from the json-resume project</a>, why not use it to build the form programmatically for me?</p>\n<p>Before coding I decided to use my UML knowledge to make a diagram of how this is going to work:</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFElEQVQY002PzaqCUACEeztfoheRMAg3Cm0kwZ2gJEp1wp0oCIa2CcOflUiEtAyqs7CVHefCNbx3VjMD38BMAJxOp6Zp8jxPkgTA5/MBcD6fF4uF67oA+r4H8H6/gyC4XC66rtd1DWACYLPZrNfr4/FICMGvHo/HcrlUFEXTNMdxhjlK6eFwqOvaMAzP876w67qEEFmWd7vd8/m83+++74uiKEnSarVSFCXLstfrlef5fD7neX673VZV9YX3+73neaqqWpYFgDHW971t24IgzGYz0zS7rgOQpinHcdPplBBSluUXvt1u1+uVUto0zfiwbdsoisIwpJQOXxhjZVkWRRHH8R88aGBGP8b/hjHWdR1jbGh+AML6LI6VT8DuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"JSON schema to HTML form\" title=\"JSON schema to HTML form\" src=\"/static/5bb124471650354914396e3c83c9a1f3/42a19/diagram.png\" srcset=\"/static/5bb124471650354914396e3c83c9a1f3/e3135/diagram.png 256w,\n/static/5bb124471650354914396e3c83c9a1f3/06341/diagram.png 512w,\n/static/5bb124471650354914396e3c83c9a1f3/42a19/diagram.png 1024w,\n/static/5bb124471650354914396e3c83c9a1f3/e8464/diagram.png 1536w,\n/static/5bb124471650354914396e3c83c9a1f3/2eb59/diagram.png 2048w,\n/static/5bb124471650354914396e3c83c9a1f3/1ce76/diagram.png 4000w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">JSON schema to HTML form</figcaption>\n  </figure><p></p>\n<p>For this blog post let’s use a simpler version of the JSON schema from the json-resume project.</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"work\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"array\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"additionalItems\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"additionalProperties\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Facebook\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Menlo Park, CA\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Social Media Company\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Software Engineer\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. http://facebook.example.com\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"format\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uri\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"startDate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"$ref\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#/definitions/iso8601\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"endDate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"$ref\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#/definitions/iso8601\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Give an overview of your responsibilities at the company\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"highlights\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"array\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Specify multiple accomplishments\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"additionalItems\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Increased profits by 20% from 2011-2012 through viral advertising\"</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<h2 id=\"traversing-the-json\" style=\"position:relative;\"><a href=\"#traversing-the-json\" aria-label=\"traversing the json permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Traversing the JSON</h2>\n<p>There are 3 different data types in the JSON schema that I’m using, <code class=\"language-text\">object</code>, <code class=\"language-text\">array</code>, and <code class=\"language-text\">string</code>, so it should be fairly simple to traverse.</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> formik <span class=\"token operator\">=</span> <span class=\"token function\">useFormik</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">jsonSchema</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span> \n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>TextField\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\n              fullWidth\n              id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\n              name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\n              label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> form <span class=\"token operator\">=</span> <span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>That should be enough for most cases when there are not repeating keys in the JSON neither the need for the user to input unlimited data.</p>\n<h2 id=\"using-unique-keys\" style=\"position:relative;\"><a href=\"#using-unique-keys\" aria-label=\"using unique keys permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using unique keys</h2>\n<p>Now things start to get a bit hacky, to make sure every field has a unique key, I will accumulate the keys in the node, for example for the object <code class=\"language-text\">{ foo: { bar: '' } }</code>, the key for the <code class=\"language-text\">bar</code> node would be <code class=\"language-text\">foo-bar</code>. I’m not super proud of this, but I can always refactor it later.</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> getForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">,</span> accKey <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> newAccKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>accKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span> newAccKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> newAccKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span> \n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>TextField\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newAccKey<span class=\"token punctuation\">}</span>\n              fullWidth\n              id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newAccKey<span class=\"token punctuation\">}</span>\n              name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\n              label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<h2 id=\"adding-more-fields-dynamically\" style=\"position:relative;\"><a href=\"#adding-more-fields-dynamically\" aria-label=\"adding more fields dynamically permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding more fields dynamically</h2>\n<p>To add fields dynamically I decided to create a local variable that would hold how many times an input should be displayed based on the input unique key.</p>\n<div class=\"copy-code-block\"><button tabindex=\"3\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>quantitiesObject<span class=\"token punctuation\">,</span> setQuantitiesObject<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> getForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">,</span> accKey <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> quantity <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> newAccKey <span class=\"token operator\">=</span> key<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>accKey<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      newAccKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>accKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n                  <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n              <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> currQuantity <span class=\"token operator\">=</span> quantitiesObject<span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n              <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                  <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> currQuantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n              <span class=\"token operator\">&lt;</span>Button\n                onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token function\">setQuantitiesObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                    <span class=\"token operator\">...</span>quantitiesObject<span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> currQuantity <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                color<span class=\"token operator\">=</span><span class=\"token string\">\"primary\"</span>\n                variant<span class=\"token operator\">=</span><span class=\"token string\">\"contained\"</span>\n              <span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">+ </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">&gt;</span>\n              <span class=\"token punctuation\">{</span>currQuantity <span class=\"token operator\">&gt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>Button\n                  onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">setQuantitiesObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                      <span class=\"token operator\">...</span>quantitiesObject<span class=\"token punctuation\">,</span>\n                      <span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> currQuantity <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                  color<span class=\"token operator\">=</span><span class=\"token string\">\"secondary\"</span>\n                  variant<span class=\"token operator\">=</span><span class=\"token string\">\"contained\"</span>\n                <span class=\"token operator\">&gt;</span>\n                  <span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">- </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">&gt;</span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> newKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                  <span class=\"token operator\">&lt;</span>TextField\n                    key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\n                    fullWidth\n                    id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\n                    name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\n                    label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\n                    value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>newKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n                    onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\n                  <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>After wrapping this code into a React component, I can use it like this:</p>\n<div class=\"copy-code-block\"><button tabindex=\"4\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>DynamicForm\n    schema<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>jsonSchema<span class=\"token punctuation\">}</span>\n    formik<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span></code></pre></div></div>\n<p>The result of this messy code looks like the following:</p>\n<p><img src=\"/49d9138f925cb97546d36f00f37d091a/dynamic-formik.gif\" alt=\"Dynamic form with Formik\"></p>\n<p>You can check the <a href=\"https://github.com/blopa/Resume-Builder/blob/4.0.7/src/components/DynamicForm.jsx#L48\" target=\"_blank\" rel=\"noreferrer\">actual code for the form on GitHub</a>, and the nice thing is that next time the json-resume schema changes, I don’t have to do anything.</p>\n<p>Try the form yourself on the <a href=\"https://resume-builder.js.org/en/build\" target=\"_blank\" rel=\"noreferrer\">Resume Builder website</a>.</p>","otherLanguagesUrl":["/pt-br/blog/coding/criando-um-formulario-dinamico-a-partir-de-um-json-schema/"],"rss":{"title":"Building a dynamic form from a JSON schema","description":"Building a dynamic form from a JSON schema","date":"2021-05-21T00:00:00.000Z"},"images":["/static/5bb124471650354914396e3c83c9a1f3/42a19/diagram.png","/49d9138f925cb97546d36f00f37d091a/dynamic-formik.gif"],"videos":[],"comments":[],"googleFormData":{"fvv":1,"pageHistory":0,"fbzx":"5566947645549549202","action":"e/1FAIpQLSeST_0jBnLKkEkXGpyx9LWrvV2a1-1F5dr-AcA4wn0BSRyPCw","title":"blog_comment","description":null,"fields":[{"label":"name","description":null,"type":"SHORT_ANSWER","id":"1953327618","required":true},{"label":"email","description":null,"type":"SHORT_ANSWER","id":"1309141965","required":false},{"label":"twitter","description":null,"type":"SHORT_ANSWER","id":"740186305","required":false},{"label":"comment","description":null,"type":"LONG_ANSWER","id":"1663940054","required":true},{"label":"post_path","description":null,"type":"SHORT_ANSWER","id":"1852628638","required":true}],"fieldsOrder":{"740186305":2,"1309141965":1,"1663940054":3,"1852628638":4,"1953327618":0}},"pageType":"blogPost","categoryImage":"/categories_coding.jpg/","slug":"/2021/2021-05-21-building-a-dynamic-form-from-a-json-schema.en/","locale":"en","title":"Building a dynamic form from a JSON schema","previous":{"excerpt":"Há cerca de 2 meses, o Gatsby v3 foi lançado, e eu estava…","html":"<p>Há cerca de 2 meses, o <a href=\"https://www.gatsbyjs.com/blog/gatsbyconf-product-announcements\" target=\"_blank\" rel=\"noreferrer\">Gatsby v3 foi lançado</a>, e eu estava super ansioso para atualizar este blog para v3 e começar a usar os <a href=\"https://www.gatsbyjs.com/docs/reference/release-notes/v3.0/#incremental-builds-in-oss\" target=\"_blank\" rel=\"noreferrer\">incremental builds</a>, mas “infelizmente” este blog tem muita customização, então fazer a atualização para v3 não vai ser fácil 😢.</p>\n<p>Porém, o meu projeto open source, <a href=\"https://github.com/blopa/Resume-Builder\" target=\"_blank\" rel=\"noreferrer\">Resume Builder</a>, não tinha muitas customizações, então foi tranquilo atualizá-lo para o Gatsby v3 com o comando <code class=\"language-text\">ncu -u</code>, usando o package <a href=\"https://github.com/raineorshine/npm-check-updates\" target=\"_blank\" rel=\"noreferrer\">npm-check-updates</a>. Então, depois de atualizá-lo para v3, eu meio que me empolguei e decidi implementar alguns novos recursos do meu backlog desde 2018, como o <a href=\"https://github.com/blopa/Resume-Builder#cover-letter-editor\" target=\"_blank\" rel=\"noreferrer\">editor de cover letter</a>.</p>\n<h2 id=\"o-que-e-o-resume-builder\" style=\"position:relative;\"><a href=\"#o-que-e-o-resume-builder\" aria-label=\"o que e o resume builder permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>O que é o Resume Builder?</h2>\n<p>O Resume Builder é um projeto open source gratuito que permite a qualquer pessoa manter e construir facilmente qualquer tipo de currículo usando planilhas ou um JSON como a fonte de dados. Graças a este projeto eu fui contratado para morar no exterior, como já expliquei <a href=\"/pt-br/blog/coding/como-eu-consegui-um-trabalho-no-exterior-com-um-projeto-open-source/\">em outro post desse blog</a>.</p>\n<p>Uma das maiores falhas desse projeto é que você já deve ter o arquivo com os dados para o seu currículo, não havia como criar seu próprio currículo do zero.</p>\n<h2 id=\"formik\" style=\"position:relative;\"><a href=\"#formik\" aria-label=\"formik permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Formik</h2>\n<p>Alguns dias atrás, eu estava assistindo <a href=\"https://www.youtube.com/watch?v=uyLrwn8FdmM\" target=\"_blank\" rel=\"noreferrer\">uma palestra</a> do <a href=\"https://github.com/jaredpalmer\" target=\"_blank\" rel=\"noreferrer\">Jared Palmer</a> e me convenci totalmente de que deveria testar o <a href=\"https://github.com/formium/formik\" target=\"_blank\" rel=\"noreferrer\">Formik</a>, e eu tenho a feature perfeita para isso.</p>\n<h2 id=\"json-schema\" style=\"position:relative;\"><a href=\"#json-schema\" aria-label=\"json schema permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON schema</h2>\n<p>Eu precisava que o formulário fosse dinâmico, para que os usuários pudessem adicionar quantos dados quisessem, e já estou usando o <a href=\"https://github.com/jsonresume/resume-schema/blob/81d9e75a3d7b599e202e7c3e31c55e634c7f1e39/schema.json\" target=\"_blank\" rel=\"noreferrer\">JSON schema do projeto json-resume</a>, por que não usá-lo para criar o formulário programaticamente para mim?</p>\n<p>Antes de começar a programar, eu decidi usar meu conhecimento de UML para fazer um diagrama de como isso vai funcionar:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFElEQVQY002PzaqCUACEeztfoheRMAg3Cm0kwZ2gJEp1wp0oCIa2CcOflUiEtAyqs7CVHefCNbx3VjMD38BMAJxOp6Zp8jxPkgTA5/MBcD6fF4uF67oA+r4H8H6/gyC4XC66rtd1DWACYLPZrNfr4/FICMGvHo/HcrlUFEXTNMdxhjlK6eFwqOvaMAzP876w67qEEFmWd7vd8/m83+++74uiKEnSarVSFCXLstfrlef5fD7neX673VZV9YX3+73neaqqWpYFgDHW971t24IgzGYz0zS7rgOQpinHcdPplBBSluUXvt1u1+uVUto0zfiwbdsoisIwpJQOXxhjZVkWRRHH8R88aGBGP8b/hjHWdR1jbGh+AML6LI6VT8DuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"De JSON schema para um formulário\"\n        title=\"De JSON schema para um formulário\"\n        src=\"/static/5bb124471650354914396e3c83c9a1f3/42a19/diagram.png\"\n        srcset=\"/static/5bb124471650354914396e3c83c9a1f3/e3135/diagram.png 256w,\n/static/5bb124471650354914396e3c83c9a1f3/06341/diagram.png 512w,\n/static/5bb124471650354914396e3c83c9a1f3/42a19/diagram.png 1024w,\n/static/5bb124471650354914396e3c83c9a1f3/e8464/diagram.png 1536w,\n/static/5bb124471650354914396e3c83c9a1f3/2eb59/diagram.png 2048w,\n/static/5bb124471650354914396e3c83c9a1f3/1ce76/diagram.png 4000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">De JSON schema para um formulário</figcaption>\n  </figure></p>\n<p>Para o propósito desse post, vamos usar uma versão mais simples do JSON schema do projeto json-resume.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">\"work\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"array\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"additionalItems\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"additionalProperties\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Facebook\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Menlo Park, CA\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Social Media Company\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Software Engineer\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. http://facebook.example.com\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"format\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uri\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"startDate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"$ref\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#/definitions/iso8601\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"endDate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"$ref\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#/definitions/iso8601\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Give an overview of your responsibilities at the company\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"highlights\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"array\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Specify multiple accomplishments\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"additionalItems\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Increased profits by 20% from 2011-2012 through viral advertising\"</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"percorrendo-o-json\" style=\"position:relative;\"><a href=\"#percorrendo-o-json\" aria-label=\"percorrendo o json permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Percorrendo o JSON</h2>\n<p>Existem 3 tipos de dados diferentes no JSON schema que estou usando, <code class=\"language-text\">object</code>, <code class=\"language-text\">array</code> e <code class=\"language-text\">string</code>, então ele vai ser bem fácil de percorrer.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> formik <span class=\"token operator\">=</span> <span class=\"token function\">useFormik</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">jsonSchema</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n              <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span> \r\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>TextField\r\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              fullWidth\r\n              id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> form <span class=\"token operator\">=</span> <span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Isso deve ser suficiente para a maioria dos casos em que não há keys repetidas no JSON e nem a necessidade do usuário inserir dados ilimitados.</p>\n<h2 id=\"usando-keys-unicas\" style=\"position:relative;\"><a href=\"#usando-keys-unicas\" aria-label=\"usando keys unicas permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usando keys únicas</h2>\n<p>Agora as coisas começam a ficar um pouco gambiarradas, para garantir que cada campo tenha uma key única, vou acumular as keys de todos os nodes, por exemplo para o objeto <code class=\"language-text\">{foo: {bar: ''}}</code>, a key do node <code class=\"language-text\">bar</code> seria <code class=\"language-text\">foo-bar</code>. Não estou muito orgulhoso disso, mas sempre posso refatorá-lo mais tarde.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> getForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">,</span> accKey <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> newAccKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>accKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span> newAccKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n              <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> newAccKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span> \r\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>TextField\r\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newAccKey<span class=\"token punctuation\">}</span>\r\n              fullWidth\r\n              id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newAccKey<span class=\"token punctuation\">}</span>\r\n              name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"adicionando-mais-campos-dinamicamente\" style=\"position:relative;\"><a href=\"#adicionando-mais-campos-dinamicamente\" aria-label=\"adicionando mais campos dinamicamente permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adicionando mais campos dinamicamente</h2>\n<p>Para adicionar campos dinamicamente, decidi criar uma variável local que controlaria quantas vezes cada input deveria ser exibido baseado na key única de cada input.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>quantitiesObject<span class=\"token punctuation\">,</span> setQuantitiesObject<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> getForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">,</span> accKey <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> quantity <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> newAccKey <span class=\"token operator\">=</span> key<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>accKey<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      newAccKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>accKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                  <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> currQuantity <span class=\"token operator\">=</span> quantitiesObject<span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n              <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                  <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> currQuantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n              <span class=\"token operator\">&lt;</span>Button\r\n                onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                  <span class=\"token function\">setQuantitiesObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                    <span class=\"token operator\">...</span>quantitiesObject<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> currQuantity <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                color<span class=\"token operator\">=</span><span class=\"token string\">\"primary\"</span>\r\n                variant<span class=\"token operator\">=</span><span class=\"token string\">\"contained\"</span>\r\n              <span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">+ </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\r\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">{</span>currQuantity <span class=\"token operator\">></span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>Button\r\n                  onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token function\">setQuantitiesObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                      <span class=\"token operator\">...</span>quantitiesObject<span class=\"token punctuation\">,</span>\r\n                      <span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> currQuantity <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                  color<span class=\"token operator\">=</span><span class=\"token string\">\"secondary\"</span>\r\n                  variant<span class=\"token operator\">=</span><span class=\"token string\">\"contained\"</span>\r\n                <span class=\"token operator\">></span>\r\n                  <span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">- </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span>\r\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> newKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n                  <span class=\"token operator\">&lt;</span>TextField\r\n                    key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\r\n                    fullWidth\r\n                    id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\r\n                    name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\r\n                    label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n                    value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>newKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n                    onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\r\n                  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Depois de colocar esse código em um componente React, eu posso usar-lo assim:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>DynamicForm\r\n    schema<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>jsonSchema<span class=\"token punctuation\">}</span>\r\n    formik<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">}</span>\r\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>O resultado desse código meio confuso fica assim:</p>\n<p><img src=\"/49d9138f925cb97546d36f00f37d091a/dynamic-formik.gif\" alt=\"Dynamic form with Formik\"></p>\n<p>Você pode ver o <a href=\"https://github.com/blopa/Resume-Builder/blob/4.0.7/src/components/DynamicForm.jsx#L48\" target=\"_blank\" rel=\"noreferrer\">código real do formulário no GitHub</a>, e o bom é que da próxima vez que o schema do json-resume mudar, eu não preciso fazer nada yay.</p>\n<p>Acesse o <a href=\"https://resume-builder.js.org/pt-br/build\" target=\"_blank\" rel=\"noreferrer\">site do Resume Builder</a> e veja como o formulário ficou.</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTIxVDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-05-21-criando-um-formulario-dinamico-a-partir-de-um-json-schema.pt-br/","path":"/blog/coding/criando-um-formulario-dinamico-a-partir-de-um-json-schema/","locale":"pt-br"},"rawMarkdownBody":"Há cerca de 2 meses, o [Gatsby v3 foi lançado](https://www.gatsbyjs.com/blog/gatsbyconf-product-announcements), e eu estava super ansioso para atualizar este blog para v3 e começar a usar os [incremental builds](https://www.gatsbyjs.com/docs/reference/release-notes/v3.0/#incremental-builds-in-oss), mas \"infelizmente\" este blog tem muita customização, então fazer a atualização para v3 não vai ser fácil 😢.\r\n\r\nPorém, o meu projeto open source, [Resume Builder](https://github.com/blopa/Resume-Builder), não tinha muitas customizações, então foi tranquilo atualizá-lo para o Gatsby v3 com o comando `ncu -u`, usando o package [npm-check-updates](https://github.com/raineorshine/npm-check-updates). Então, depois de atualizá-lo para v3, eu meio que me empolguei e decidi implementar alguns novos recursos do meu backlog desde 2018, como o [editor de cover letter](https://github.com/blopa/Resume-Builder#cover-letter-editor).\r\n\r\n## O que é o Resume Builder?\r\nO Resume Builder é um projeto open source gratuito que permite a qualquer pessoa manter e construir facilmente qualquer tipo de currículo usando planilhas ou um JSON como a fonte de dados. Graças a este projeto eu fui contratado para morar no exterior, como já expliquei [em outro post desse blog](/pt-br/blog/coding/como-eu-consegui-um-trabalho-no-exterior-com-um-projeto-open-source/).\r\n\r\nUma das maiores falhas desse projeto é que você já deve ter o arquivo com os dados para o seu currículo, não havia como criar seu próprio currículo do zero.\r\n\r\n## Formik\r\nAlguns dias atrás, eu estava assistindo [uma palestra](https://www.youtube.com/watch?v=uyLrwn8FdmM) do [Jared Palmer](https://github.com/jaredpalmer) e me convenci totalmente de que deveria testar o [Formik](https://github.com/formium/formik), e eu tenho a feature perfeita para isso.\r\n\r\n## JSON schema\r\nEu precisava que o formulário fosse dinâmico, para que os usuários pudessem adicionar quantos dados quisessem, e já estou usando o [JSON schema do projeto json-resume](https://github.com/jsonresume/resume-schema/blob/81d9e75a3d7b599e202e7c3e31c55e634c7f1e39/schema.json), por que não usá-lo para criar o formulário programaticamente para mim?\r\n\r\nAntes de começar a programar, eu decidi usar meu conhecimento de UML para fazer um diagrama de como isso vai funcionar:\r\n\r\n![De JSON schema para um formulário](../../uploads/blog/2021/05/diagram.png)\r\n\r\nPara o propósito desse post, vamos usar uma versão mais simples do JSON schema do projeto json-resume.\r\n\r\n```json\r\n{\r\n  \"work\": {\r\n    \"type\": \"array\",\r\n    \"additionalItems\": false,\r\n    \"items\": {\r\n      \"type\": \"object\",\r\n      \"additionalProperties\": true,\r\n      \"properties\": {\r\n        \"name\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"e.g. Facebook\"\r\n        },\r\n        \"location\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"e.g. Menlo Park, CA\"\r\n        },\r\n        \"description\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"e.g. Social Media Company\"\r\n        },\r\n        \"position\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"e.g. Software Engineer\"\r\n        },\r\n        \"url\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"e.g. http://facebook.example.com\",\r\n          \"format\": \"uri\"\r\n        },\r\n        \"startDate\": {\r\n          \"$ref\": \"#/definitions/iso8601\"\r\n        },\r\n        \"endDate\": {\r\n          \"$ref\": \"#/definitions/iso8601\"\r\n        },\r\n        \"summary\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"Give an overview of your responsibilities at the company\"\r\n        },\r\n        \"highlights\": {\r\n          \"type\": \"array\",\r\n          \"description\": \"Specify multiple accomplishments\",\r\n          \"additionalItems\": false,\r\n          \"items\": {\r\n            \"type\": \"string\",\r\n            \"description\": \"e.g. Increased profits by 20% from 2011-2012 through viral advertising\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## Percorrendo o JSON\r\nExistem 3 tipos de dados diferentes no JSON schema que estou usando, `object`, `array` e `string`, então ele vai ser bem fácil de percorrer.\r\n\r\n```javascript\r\nconst formik = useFormik({});\r\nconst getForm = (jsonSchema) => {\r\n  Object.entries(jsonSchema).map(([key, value], index) => {\r\n    switch (value.type) {\r\n      case 'object': {\r\n        return (\r\n          <div>\r\n            <h1>{key}</h1>\r\n            {getForm(value.properties)}\r\n          </div>\r\n        );\r\n      }\r\n\r\n      case 'array': {\r\n        return (\r\n          <div>\r\n            {getForm({\r\n              [key]: value.items,\r\n            })}\r\n          </div>\r\n        );\r\n      }\r\n\r\n      case 'string': \r\n      default: {\r\n        return (\r\n          <div>\r\n            <TextField\r\n              key={key}\r\n              fullWidth\r\n              id={key}\r\n              name={key}\r\n              label={key}\r\n              value={formik.values[key]}\r\n              onChange={formik.handleChange}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\nconst form = getForm(jsonSchema);\r\n```\r\n\r\nIsso deve ser suficiente para a maioria dos casos em que não há keys repetidas no JSON e nem a necessidade do usuário inserir dados ilimitados.\r\n\r\n## Usando keys únicas\r\nAgora as coisas começam a ficar um pouco gambiarradas, para garantir que cada campo tenha uma key única, vou acumular as keys de todos os nodes, por exemplo para o objeto `{foo: {bar: ''}}`, a key do node `bar` seria `foo-bar`. Não estou muito orgulhoso disso, mas sempre posso refatorá-lo mais tarde.\r\n\r\n```javascript\r\nconst getForm = (jsonSchema, accKey = '') => {\r\n  Object.entries(jsonSchema).map(([key, value], index) => {\r\n    const newAccKey = `${accKey}-${key}`;\r\n    switch (value.type) {\r\n      case 'object': {\r\n        return (\r\n          <div>\r\n            <h1>{key}</h1>\r\n            {getForm(value.properties, newAccKey)}\r\n          </div>\r\n        );\r\n      }\r\n\r\n      case 'array': {\r\n        return (\r\n          <div>\r\n            {getForm({\r\n              [key]: value.items,\r\n            }, newAccKey)}\r\n          </div>\r\n        );\r\n      }\r\n\r\n      case 'string': \r\n      default: {\r\n        return (\r\n          <div>\r\n            <TextField\r\n              key={newAccKey}\r\n              fullWidth\r\n              id={newAccKey}\r\n              name={key}\r\n              label={key}\r\n              value={formik.values[newAccKey]}\r\n              onChange={formik.handleChange}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  });\r\n};\r\n```\r\n\r\n## Adicionando mais campos dinamicamente\r\nPara adicionar campos dinamicamente, decidi criar uma variável local que controlaria quantas vezes cada input deveria ser exibido baseado na key única de cada input.\r\n\r\n```javascript\r\nconst [quantitiesObject, setQuantitiesObject] = useState({});\r\nconst getForm = (jsonSchema, accKey = '', quantity = 1) =>\r\n  Object.entries(jsonSchema).map(([key, value], index) => {\r\n    let newAccKey = key;\r\n    if (accKey) {\r\n      newAccKey = `${accKey}-${key}`;\r\n    }\r\n\r\n    switch (value.type) {\r\n      case 'object': {\r\n        return (\r\n          <div key={key}>\r\n            <h1>{key}</h1>\r\n            {(new Array(quantity).fill(null).map(\r\n              (v, i) => (\r\n                <div key={i}>\r\n                  {getForm(value.properties, `${newAccKey}-${i}`)}\r\n                </div>\r\n              )\r\n            ))}\r\n          </div>\r\n        );\r\n      }\r\n\r\n      case 'array': {\r\n        const currQuantity = quantitiesObject[newAccKey] || 1;\r\n        return (\r\n          <div key={key}>\r\n            {(new Array(quantity).fill(null).map((v, i) => (\r\n              <div key={i}>\r\n                {getForm({\r\n                  [key]: value.items,\r\n                }, `${newAccKey}-${i}`, currQuantity)}\r\n              </div>\r\n            )))}\r\n            <div>\r\n              <Button\r\n                onClick={() => {\r\n                  setQuantitiesObject({\r\n                    ...quantitiesObject,\r\n                    [newAccKey]: currQuantity + 1,\r\n                  });\r\n                }}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                {`+ ${key}`}\r\n              </Button>\r\n              {currQuantity > 1 && (\r\n                <Button\r\n                  onClick={() => {\r\n                    setQuantitiesObject({\r\n                      ...quantitiesObject,\r\n                      [newAccKey]: currQuantity - 1,\r\n                    });\r\n                  }}\r\n                  color=\"secondary\"\r\n                  variant=\"contained\"\r\n                >\r\n                  {`- ${key}`}\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      case 'string':\r\n      default: {\r\n        return (\r\n          <div key={key}>\r\n            {(new Array(quantity).fill(null).map(\r\n              (v, i) => {\r\n                const newKey = `${newAccKey}-${i}`;\r\n\r\n                return (\r\n                  <TextField\r\n                    key={newKey}\r\n                    fullWidth\r\n                    id={newKey}\r\n                    name={newKey}\r\n                    label={key}\r\n                    value={formik.values[newKey]}\r\n                    onChange={formik.handleChange}\r\n                  />\r\n                );\r\n              }\r\n            ))}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  });\r\n```\r\n\r\nDepois de colocar esse código em um componente React, eu posso usar-lo assim:\r\n\r\n```javascript\r\n<DynamicForm\r\n    schema={jsonSchema}\r\n    formik={formik}\r\n/>\r\n```\r\n\r\nO resultado desse código meio confuso fica assim:\r\n\r\n![Dynamic form with Formik](../../uploads/blog/2021/05/dynamic-formik.gif)\r\n\r\nVocê pode ver o [código real do formulário no GitHub](https://github.com/blopa/Resume-Builder/blob/4.0.7/src/components/DynamicForm.jsx#L48), e o bom é que da próxima vez que o schema do json-resume mudar, eu não preciso fazer nada yay.\r\n\r\nAcesse o [site do Resume Builder](https://resume-builder.js.org/pt-br/build) e veja como o formulário ficou.\r\n","frontmatter":{"tags":["json schema","json","gatsby","javascript","resume builder","formik","reactjs"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-05-21T00:00:00.000Z","id":null,"path":"criando-um-formulario-dinamico-a-partir-de-um-json-schema","show":true,"title":"Criando um formulário dinâmico a partir de um JSON schema","hideExcerpt":false,"subtitle":""}},"next":{"excerpt":"Ao fazer um site usando JAMStack, alguns compromissos…","html":"<p>Ao fazer um site usando JAMStack, alguns compromissos precisam ser feitos, mas a habilidade de pesquisar não é um deles, graças a bibliotecas JavaScript como <a href=\"https://github.com/nextapps-de/flexsearch\" target=\"_blank\" rel=\"noreferrer\">flexsearch</a> e <a href=\"https://github.com/olivernn/lunr.js/\" target=\"_blank\" rel=\"noreferrer\">lunr.js</a>.</p>\n<p>Depois de seguir <a href=\"https://labs.walltowall.com/easy-client-side-search-for-gatsby-sites/\" target=\"_blank\" rel=\"noreferrer\">este tutorial</a> e combinar o código com o <a href=\"https://material-ui.com/components/autocomplete/\" target=\"_blank\" rel=\"noreferrer\">componente de autocomplete do Material UI</a>, eu consegui criar a barra de busca que você vê neste blog.</p>\n<p><img src=\"/fc4482c8ac57987aed00951b3a87145f/search-bar-results.gif\" alt=\"Resultados de busca\"></p>\n<p>Isso já foi bom, mas eu gostaria também de ter uma página de busca, onde um termo pudesse ser buscado nas tags, título e conteúdo do post.</p>\n<h2 id=\"criando-de-um-index-de-busca\" style=\"position:relative;\"><a href=\"#criando-de-um-index-de-busca\" aria-label=\"criando de um index de busca permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Criando de um index de busca</h2>\n<p>First I will add the following code to my Gatsby config, this will create a new <code class=\"language-text\">localSearchPage</code> index to be queried via GraphQL.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token operator\">...</span>otherConfigs<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token string\">'gatsby-plugin-local-search'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'page'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n                {\r\n                    allMarkdownRemark(\r\n                        filter: {\r\n                            frontmatter:{ show: { eq: true } }\r\n                        }\r\n                        sort: { fields: [frontmatter___date], order: DESC }\r\n                        limit: 1000\r\n                    ) {\r\n                        edges {\r\n                            node {\r\n                                id\r\n                                fields {\r\n                                    locale\r\n                                    path\r\n                                }\r\n                                frontmatter {\r\n                                    date\r\n                                    title\r\n                                    show\r\n                                    tags\r\n                                }\r\n                                rawMarkdownBody\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">engine</span><span class=\"token operator\">:</span> <span class=\"token string\">'flexsearch'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">engineOptions</span><span class=\"token operator\">:</span> <span class=\"token string\">'speed'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">ref</span><span class=\"token operator\">:</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'body'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">store</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locale'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'body'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"a-pagina-de-busca\" style=\"position:relative;\"><a href=\"#a-pagina-de-busca\" aria-label=\"a pagina de busca permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A página de busca</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 959px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVQY02XP4W6DIBAAYB+k7dpVhiIccMrauakFFJj7t+z9n2XRNUu3frmQ48jljqzrusPhwBirqirP87quCSGUUkTc7/cAUJbl42q73e52u81mw2hplCDkITPGFEXBGOOcU0oBgFJaFAUAEEI454yxp1W+Oh6PrCilqCjNs3meh2HgnAshlFJSSrWSUmqtf65aa3VDSgmw1LOY0hRC3/fOOdRarABAAFyTa0WqO1mMMaU0f8wpReedtTbGYIfBXy7Oe2utc34cfdd1Qojfva7N7yl5vzw7Z62z3rs4jcMUus8v732YphDCOI7e+77vjTG3/dn5dMa6MeZkzLlZ4oSoddPIl1ZrjYgalxMRjTGI+Gdy274q3Zjndo23xrzIlQKQd/79+Rtxw18oUHOvIwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Página de busca\"\n        title=\"Página de busca\"\n        src=\"/static/dd40bbda0c272f4cda51e6846bd7bf54/c19a6/search-page.png\"\n        srcset=\"/static/dd40bbda0c272f4cda51e6846bd7bf54/e3135/search-page.png 256w,\n/static/dd40bbda0c272f4cda51e6846bd7bf54/06341/search-page.png 512w,\n/static/dd40bbda0c272f4cda51e6846bd7bf54/c19a6/search-page.png 959w\"\n        sizes=\"(max-width: 959px) 100vw, 959px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Página de busca</figcaption>\n  </figure></p>\n<p>Conforme mostrado no tutorial, o hook <code class=\"language-text\">useFlexSearch</code> pode ser usado para obter os resultados da busca, mas não há nenhuma indicação de onde o termo buscado foi correspondido nos campos do post.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> urlParams <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URLSearchParams</span><span class=\"token punctuation\">(</span>location<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> urlParams<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token function\">useFlexSearch</span><span class=\"token punctuation\">(</span>\r\n    query<span class=\"token punctuation\">,</span>\r\n    data<span class=\"token punctuation\">.</span>localSearchPage<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span>\r\n    data<span class=\"token punctuation\">.</span>localSearchPage<span class=\"token punctuation\">.</span>store\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getExcerpt</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">post<span class=\"token punctuation\">,</span> length <span class=\"token operator\">=</span> <span class=\"token number\">60</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// magic happens here</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> results<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> \r\n            <span class=\"token operator\">...</span>post<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">excerpt</span><span class=\"token operator\">:</span> <span class=\"token function\">getExcerpt</span><span class=\"token punctuation\">(</span>\r\n                post<span class=\"token punctuation\">.</span>excerpt\r\n                    <span class=\"token comment\">// let's remove any line breaks</span>\r\n                    <span class=\"token comment\">// or URLS</span>\r\n                    <span class=\"token comment\">// or remove the markdown tags etc</span>\r\n                    <span class=\"token comment\">// it would be better to do this in the build process</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?:https?|ftp):\\/\\/[\\n\\S]+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\n</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">[</span>results<span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>A função <code class=\"language-text\">getExcerpt</code> precisa, de alguma forma, retornar o trecho do post com o termo buscado em destaque.</p>\n<p>Portanto, preciso encontrar a posição exata do termo buscado no post e substituí-lo por um elemento HTML <code class=\"language-text\">span</code>, tipo <code class=\"language-text\">&lt;span>termo buscado aqui&lt;/span></code> e, para isso, usarei o bom e velho Regex.</p>\n<p>Além disso, precisarei de uma função para “cortar” o texto e adicionar as reticências se necessário, e <a href=\"https://stackoverflow.com/a/41267747/4307769\" target=\"_blank\" rel=\"noreferrer\">este código do StackOverflow</a> fará o trabalho perfeitamente.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">const</span> getExcerpt <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> length <span class=\"token operator\">=</span> <span class=\"token number\">60</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// makes it lowercase to be sure to find it</span>\r\n        <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\\\b(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)\\\\b</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> matchedRegex <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>matchedRegex<span class=\"token operator\">?.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// now let's create a regex using the actual word found, capital-sensitive</span>\r\n            <span class=\"token keyword\">const</span> actualQuery <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span>matchedRegex<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> actualRegex <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\\\b(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>actualQuery<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)\\\\b</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token comment\">// start of the excerpt</span>\r\n            <span class=\"token keyword\">const</span> excerptEnd <span class=\"token operator\">=</span> <span class=\"token function\">truncateStringToWord</span><span class=\"token punctuation\">(</span>\r\n                text<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span>matchedRegex<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                length<span class=\"token punctuation\">,</span>\r\n                <span class=\"token boolean\">true</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token comment\">// yolo let's reverse the string and use the same function for the</span>\r\n            <span class=\"token comment\">// beginning of the excerpt too</span>\r\n            <span class=\"token keyword\">const</span> excerptStart <span class=\"token operator\">=</span> <span class=\"token function\">truncateStringToWord</span><span class=\"token punctuation\">(</span>\r\n                text<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> matchedRegex<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                length<span class=\"token punctuation\">,</span>\r\n                <span class=\"token boolean\">true</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> excerpt <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>excerptStart<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>excerptEnd<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> highlightedQuery <span class=\"token operator\">=</span> <span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>span className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>highlightedQuery<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                    <span class=\"token punctuation\">{</span>actualQuery<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token comment\">// if nothing was found it means that the query matched</span>\r\n            <span class=\"token comment\">// a tag or the post title</span>\r\n            <span class=\"token keyword\">return</span> excerpt<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>actualRegex<span class=\"token punctuation\">,</span> highlightedQuery<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token function\">truncateStringToWord</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>highlightedQuery<span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Este código irá transformar uma string tipo <code class=\"language-text\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed condimentum risus nec scelerisque auctor</code> em <code class=\"language-text\">Lorem ipsum dolor sit amet, consectetur &lt;span>adipiscing&lt;/span> elit. Sed condimentum risus nec scelerisque auctor</code> quando a busca for pela palavra <code class=\"language-text\">adipiscing</code>, e como esta string está em HTML, para exibi-la usarei a propriedade <code class=\"language-text\">dangerouslySetInnerHTML</code> em um elemento <code class=\"language-text\">em</code>.</p>\n<p>A gambiarra com o uso reverso da função <code class=\"language-text\">truncateStringToWord</code> não é a melhor das soluções, mas a maior parte desse código pode ser movido para o processo de build do Gatsby, então o desempenho do blog não será afetado.</p>\n<p>Espero que este post seja útil para você, para ver como o resultado ficou, <a href=\"/pt-br/search?q=javascript\">basta buscar por algo nesse blog</a>. Nos vemos na próxima!</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA1LTI5VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-05-29-como-criar-uma-pagina-de-busca-offline-com-o-gatsby.pt-br/","path":"/blog/coding/como-criar-uma-pagina-de-busca-offline-com-o-gatsby/","locale":"pt-br"},"rawMarkdownBody":"Ao fazer um site usando JAMStack, alguns compromissos precisam ser feitos, mas a habilidade de pesquisar não é um deles, graças a bibliotecas JavaScript como [flexsearch](https://github.com/nextapps-de/flexsearch) e [lunr.js](https://github.com/olivernn/lunr.js/).\r\n\r\nDepois de seguir [este tutorial](https://labs.walltowall.com/easy-client-side-search-for-gatsby-sites/) e combinar o código com o [componente de autocomplete do Material UI](https://material-ui.com/components/autocomplete/), eu consegui criar a barra de busca que você vê neste blog.\r\n\r\n![Resultados de busca](../../uploads/blog/2021/05/search-bar-results.gif)\r\n\r\nIsso já foi bom, mas eu gostaria também de ter uma página de busca, onde um termo pudesse ser buscado nas tags, título e conteúdo do post.\r\n\r\n## Criando de um index de busca\r\nFirst I will add the following code to my Gatsby config, this will create a new `localSearchPage` index to be queried via GraphQL.\r\n\r\n```javascript\r\nmodule.exports = [\r\n    ...otherConfigs,\r\n    {\r\n        resolve: 'gatsby-plugin-local-search',\r\n        options: {\r\n            name: 'page',\r\n            query: `\r\n                {\r\n                    allMarkdownRemark(\r\n                        filter: {\r\n                            frontmatter:{ show: { eq: true } }\r\n                        }\r\n                        sort: { fields: [frontmatter___date], order: DESC }\r\n                        limit: 1000\r\n                    ) {\r\n                        edges {\r\n                            node {\r\n                                id\r\n                                fields {\r\n                                    locale\r\n                                    path\r\n                                }\r\n                                frontmatter {\r\n                                    date\r\n                                    title\r\n                                    show\r\n                                    tags\r\n                                }\r\n                                rawMarkdownBody\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            `,\r\n            engine: 'flexsearch',\r\n            engineOptions: 'speed',\r\n            ref: 'id',\r\n            index: ['title', 'path', 'tags', 'body'],\r\n            store: ['id', 'path', 'title', 'tags', 'locale', 'body', 'date'],\r\n        },\r\n    },\r\n];\r\n```\r\n\r\n## A página de busca\r\n![Página de busca](../../uploads/blog/2021/05/search-page.png)\r\n\r\nConforme mostrado no tutorial, o hook `useFlexSearch` pode ser usado para obter os resultados da busca, mas não há nenhuma indicação de onde o termo buscado foi correspondido nos campos do post.\r\n\r\n```javascript\r\nconst urlParams = new URLSearchParams(location.search);\r\nconst query = urlParams.get('q') || '';\r\n\r\nconst results = useFlexSearch(\r\n    query,\r\n    data.localSearchPage.index,\r\n    data.localSearchPage.store\r\n);\r\n\r\nconst getExcerpt = (post, length = 60) => {\r\n    // magic happens here\r\n};\r\n\r\nconst posts = useMemo(\r\n    () => results.map(\r\n        (post) => ({ \r\n            ...post,\r\n            excerpt: getExcerpt(\r\n                post.excerpt\r\n                    // let's remove any line breaks\r\n                    // or URLS\r\n                    // or remove the markdown tags etc\r\n                    // it would be better to do this in the build process\r\n                    .replace(/(?:https?|ftp):\\/\\/[\\n\\S]+/g, '')\r\n                    .replace(/\\n/g, ' ')\r\n            ),\r\n        })\r\n    ),\r\n    [results]\r\n);\r\n```\r\n\r\nA função `getExcerpt` precisa, de alguma forma, retornar o trecho do post com o termo buscado em destaque.\r\n\r\nPortanto, preciso encontrar a posição exata do termo buscado no post e substituí-lo por um elemento HTML `span`, tipo `<span>termo buscado aqui</span>` e, para isso, usarei o bom e velho Regex.\r\n\r\nAlém disso, precisarei de uma função para \"cortar\" o texto e adicionar as reticências se necessário, e [este código do StackOverflow](https://stackoverflow.com/a/41267747/4307769) fará o trabalho perfeitamente.\r\n\r\n```javascript\r\n    const getExcerpt = useCallback((text, length = 60) => {\r\n        // makes it lowercase to be sure to find it\r\n        const regex = new RegExp(`\\\\b(${query.toLowerCase()})\\\\b`);\r\n        const matchedRegex = text.toLowerCase().match(regex);\r\n\r\n        if (matchedRegex?.length) {\r\n            // now let's create a regex using the actual word found, capital-sensitive\r\n            const actualQuery = text.substr(matchedRegex.index, query.length);\r\n            const actualRegex = new RegExp(`\\\\b(${actualQuery})\\\\b`);\r\n\r\n            // start of the excerpt\r\n            const excerptEnd = truncateStringToWord(\r\n                text.substr(matchedRegex.index),\r\n                length,\r\n                true\r\n            );\r\n\r\n            // yolo let's reverse the string and use the same function for the\r\n            // beginning of the excerpt too\r\n            const excerptStart = truncateStringToWord(\r\n                text.substr(0, matchedRegex.index).split('').reverse().join(''),\r\n                length,\r\n                true\r\n            );\r\n\r\n            const excerpt = `${excerptStart.split('').reverse().join('')}${excerptEnd}`;\r\n\r\n            const highlightedQuery = renderToString(\r\n                <span className={classes.highlightedQuery}>\r\n                    {actualQuery}\r\n                </span>\r\n            );\r\n\r\n            // if nothing was found it means that the query matched\r\n            // a tag or the post title\r\n            return excerpt.replace(actualRegex, highlightedQuery);\r\n        }\r\n\r\n        return truncateStringToWord(text, length, true);\r\n    }, [classes.highlightedQuery, query]);\r\n```\r\n\r\nEste código irá transformar uma string tipo `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed condimentum risus nec scelerisque auctor` em `Lorem ipsum dolor sit amet, consectetur <span>adipiscing</span> elit. Sed condimentum risus nec scelerisque auctor` quando a busca for pela palavra `adipiscing`, e como esta string está em HTML, para exibi-la usarei a propriedade `dangerouslySetInnerHTML` em um elemento `em`.\r\n\r\nA gambiarra com o uso reverso da função `truncateStringToWord` não é a melhor das soluções, mas a maior parte desse código pode ser movido para o processo de build do Gatsby, então o desempenho do blog não será afetado.\r\n\r\nEspero que este post seja útil para você, para ver como o resultado ficou, [basta buscar por algo nesse blog](/pt-br/search?q=javascript). Nos vemos na próxima!\r\n","frontmatter":{"tags":["gatsby","javascript","reactjs","jamstack","flexsearch"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-05-29T00:00:00.000Z","id":null,"path":"como-criar-uma-pagina-de-busca-offline-com-o-gatsby","show":true,"title":"Como criar uma página de busca offline com o Gatsby","hideExcerpt":false,"subtitle":""}},"language":"en","intl":{"language":"en","languages":["en","pt-br"],"messages":{"site_title":"pablo.gg","title":"Title","author":"@thepiratepablo","search_placeholder":"Search...","about":"About","photos":"Photos","archive":"Archive","contact":"Contact","close":"Close","contact_page":"Contact page","see_more":"See more posts","built_with":"Built with ","buy_me_a_soda":"Buy me a soda","blog":"Blog","blog_posts":"Blog posts","go_to_post":"Go to post","search":"Search","loading":"Loading...","search_results":"Search results","search_results_for":"{quantity} search results for: \"{query}\"","search_for_query":"Search for \"{query}\"","no_results":"No results","home":"Home","description":"Yet another developer personal blog","go_back":"Go back to the homepage","thats_me":"That's me!","got_it":"Got it!","check_it_out":"Check it out!","we_are":"We are","e3":"E3","away_from_next_sgf":"away from Summer Game Fest 2025","away_from_next_gamescom":"away from Gamescom 2024","sgf_countdown":"Summer Game Fest Countdown","gamescom_countdown":"Gamescom Countdown","e3_paragraph_1":"This page once featured a countdown to the next E3 event, a moment that countless gamers and industry professionals looked forward to each year. E3 was not just an event; it was a celebration of our shared passion for video games, a place where dreams were realized, and memories were made.","e3_paragraph_2":"From the electrifying announcements to the hands-on demos, E3 was the heartbeat of the gaming world. It brought together people from all corners of the globe, united by their love for games. For many, it was a chance to meet their heroes, discover new titles, and experience the thrill of the latest innovations in gaming technology.","e3_paragraph_3":"However, as the gaming landscape has evolved, so too has the way we connect and celebrate our passion. While E3 has come to an end, the spirit of excitement and community it fostered lives on. We now look forward to new ways of coming together, sharing our love for games, and creating new memories.","e3_paragraph_4":"Though the countdown is gone, the legacy of E3 will forever remain in our hearts, reminding us of the incredible journeys we've taken and the bonds we've formed along the way.","sec":"Sec","secs":"Secs","min":"Min","mins":"Mins","hour":"Hour","hours":"Hours","day":"Day","days":"Days","month":"Month","months":"Months","year":"Year","years":"Years","recent_posts":"Recent posts","email":"Email","twitter":"Twitter","name":"Name","page":"Page","fill_this_want_reply":"Fill this in if you want me to contact you back","sorry_this_post_unavailable_language":"Sorry, this post is not available in the language you picked","language":"Language","comment":"Comment","comments":"Comments","no_comments":"No comments yet.","post_comment":"Post comment","send_message":"Send message","message":"Message","post_a_comment":"Post a comment","your_comment_submitted":"Your comment has been successfully submitted.","your_message_submitted":"Your message has been successfully submitted.","on":"on","ok":"Ok","copy":"Copy","copied":"Copied","photo_num":"Photo {num}","the_matrix_has_you":"The Matrix has you...","about_paragraph_1":"A technology enthusiast from an early age, I have always been interested in computers and video games.","about_paragraph_2":"I graduated in Information Technology at Estácio de Sá University and always try to find out about new technologies and get involved in new development projects, some of which the code can be found on GitHub.","cookie_banner_consent":"By using this website you agree to our use of cookies to deliver a better experience.","written_in":"Written in ","no_post_this_tag":"No post in English include this tag.","tags":"Tags","tag_colon":"Tag: ","tags_colon":"Tags: ","posts_tagged":"Posts tagged with ","categories":"Categories","category":"Category","category_colon":"Category: ","posts_on_category":"Posts on category ","related_posts":"Related posts","read_time":"🕒 {time} min. read","create_post":"Create Post","show":"Show","date":"Date","download":"Download","add_tag":"Add Tag","hide_excerpt":"Hide Excerpt","publish_on_medium":"Publish on Medium","allow_comments":"Allow Comments","subtitle":"Subtitle","you_must_be_truly_desperate":"You must be truly desperate to come to me for help","game.game_title":"pablo.gg - The Game","game.next":"Next","game.ok":"Ok","game.loading_asset_colon":"Loading asset:","game.loading":"Loading...","game.characters.npc_01":"Frost","game.characters.npc_02":"Gavin","game.characters.npc_03":"Giles","game.characters.npc_04":"Godfrey","game.characters.npc_05":"Hugh","game.characters.npc_06":"Ivar","game.characters.npc_07":"Leopold","game.characters.npc_08":"Lucian","game.characters.npc_09":"Gumercindo","game.characters.npc_10":"Mr. Flower","game.characters.npc_11":"Maxim","game.characters.npc_12":"Milo","game.characters.npc_13":"Otto","game.characters.npc_14":"Palmer","game.characters.npc_15":"Quentin","game.characters.npc_16":"Sebastian","game.characters.npc_17":"Neville","game.characters.npc_18":"Cassian","game.characters.npc_19":"Balthasar","game.characters.sign_01":"Sign","game.characters.book_01":"Book","game.characters.home_page_city_sign":"Sign","game.characters.coding_category_city_sign_01":"Sign","game.characters.coding_category_city_sign_02":"Sign","game.characters.events_category_city_sign":"Sign","game.characters.funny_category_city_sign":"Sign","game.characters.gadgets_category_city_sign_01":"Sign","game.characters.gadgets_category_city_sign_02":"Sign","game.characters.games_category_city_sign":"Sign","game.characters.general_category_city_sign":"Sign","game.characters.tips_category_city_sign":"Sign","game.characters.toys_category_city_sign":"Sign","game.characters.sword":"Info","game.characters.push":"Info","game.gamepad.a_button":"A Button","game.gamepad.b_button":"B Button","game.gamepad.d_pad_left":"D-Pad Left","game.gamepad.d_pad_up":"D-Pad Up","game.gamepad.d_pad_right":"D-Pad Right","game.gamepad.d_pad_down":"D-Pad Down","game.gamepad.start_button":"Start Button","game.menu.start":"Start","game.menu.exit":"Exit","game.menu.settings":"Settings","game.game_over.game_over":"Game Over","game.game_over.retry":"Retry","game.game_over.exit":"Exit","game.start_menu.save_game":"Save Game","game.start_menu.exit":"Exit","game.browse_posts.choose_a_post":"Choose a Post to read","game.dialogs.npc_01.01":"Hey, you're finally awake!","game.dialogs.npc_01.02":"What, you don't know where you are?","game.dialogs.npc_01.03":"Don't be silly, you're at the Home Page City, remember?","game.dialogs.npc_01.04":"This city was founded by Pablo Montenegro to be the start of your journey","game.dialogs.npc_01.05":"Go explore the world and find other cities where you can read the accumulated knowledge of our civilization...","game.dialogs.npc_01.06":"... some people call it \"Blog Posts\", I don't know why...","game.dialogs.npc_02.01":"Be careful with the Slimes that live in the wild.","game.dialogs.npc_02.02":"Press SPACE to use your sword","game.dialogs.npc_02.03":"What is SPACE? I have no idea.","game.dialogs.npc_03.01":"Hello, welcome to our library","game.dialogs.npc_03.02":"We only have one book, which contains all of this city category publications.","game.dialogs.npc_03.03":"Go check it out!","game.dialogs.npc_04.01":"I like snails","game.dialogs.npc_05.01":"Incomplete sentences may cause some","game.dialogs.npc_06.01":"Red is greener than purple, for sure.","game.dialogs.npc_07.01":"Having a beard is the new not having a beard","game.dialogs.npc_08.01":"Sup","game.dialogs.npc_09.01":"\" - Cooper, what are you doing?\"\n\" - Docking.\"","game.dialogs.npc_10.01":"I should buy a boat","game.dialogs.npc_11.01":"Have you heard the me neither joke? Me neither.","game.dialogs.npc_12.01":"I clean toilet and rescue princesses, good life, yes?","game.dialogs.npc_13.01":"We want the airwaves back","game.dialogs.npc_14.01":"Save the cheerleader, save the world","game.dialogs.npc_15.01":"Hello, how are you?","game.dialogs.npc_15.02":"Ok bye!","game.dialogs.npc_16.01":"A kangaroo is really just a rabbit on steroids","game.dialogs.npc_17.01":"For the 216th time, he said he would quit drinking soda after this last Coke","game.dialogs.npc_18.01":"Nothing and everything is possimpible","game.dialogs.npc_19.01":"For a city called \"Events\", there isn't much going on...","game.dialogs.sign_01.01":"Congrats, you can read this!","game.dialogs.book_01.01":"Hey, thanks for trying out this very weird way to access my website","game.dialogs.book_01.02":"This project wouldn't be possible without the awesome open-source work of many people, like:","game.dialogs.book_01.03":"ArMM1998 - For the characters sprites and tilesets","game.dialogs.book_01.04":"PixElthen - For the slime sprites","game.dialogs.book_01.05":"pixelartm - For the pirate hat sprites","game.dialogs.book_01.06":"jkjkke - For the Game Over screen background","game.dialogs.book_01.07":"KnoblePersona - For the Main Menu screen background","game.dialogs.book_01.08":"Min - For the open book sprite","game.dialogs.book_01.09":"And of course, Richard Davey for making Phaser.io!","game.dialogs.home_page_city_sign":"City of Home Page","game.dialogs.coding_category_city_sign.01":"City of Coding Category","game.dialogs.coding_category_city_sign.02":"City of Coding Category","game.dialogs.events_category_city_sign":"City of Events Category","game.dialogs.funny_category_city_sign":"City of Funny Category","game.dialogs.gadgets_category_city_sign.01":"City of Gadgets Category","game.dialogs.gadgets_category_city_sign.02":"City of Gadgets Category","game.dialogs.games_category_city_sign":"City of Games Category","game.dialogs.general_category_city_sign":"City of General Category","game.dialogs.tips_category_city_sign":"City of Tips Category","game.dialogs.toys_category_city_sign":"City of Toys Category","game.dialogs.sword_item_description":"You can now attack, press SPACE to use your sword.","game.dialogs.push_item_description":"Now you can push some objects, press SPACE in front of a object to use push it.","zelda_timeline.title":"Zelda Timeline","zelda_timeline.timeline_split":"Timeline Split","zelda_timeline.timeline_unification":"Timeline Unification","zelda_timeline.icons_from":"The icons used on this page are from zeldauniverse.net and game-icons.net","zelda_timeline.creation":"Creation","zelda_timeline.creation_of_land_sky":"The Creation of the Land and Sky","zelda_timeline.goddess_hylia_and_sky_era":"Goddess Hylia and Sky Era","zelda_timeline.skyward_sword":"Skyward Sword","zelda_timeline.the_ancient_battle":"The Ancient Battle and the reincarnation of the Goddess Hylia","zelda_timeline.return_to_surface":"Return to the surface","zelda_timeline.era_of_chaos":"Era of Chaos","zelda_timeline.sacred_realm_sealed":"The Sacred Realm is Sealed","zelda_timeline.era_of_prosperity":"Era of Prosperity","zelda_timeline.establishment_of_hyrule":"The Hyrule Kingdom is established","zelda_timeline.force_era":"Force Era","zelda_timeline.the_minish_cap":"The Minish Cap","zelda_timeline.rise_of_evil_vaati":"The Rise of the Evil Vaati","zelda_timeline.four_swords":"Four Swords","zelda_timeline.resurrection_of_vaati":"The Resurrection of Vaati","zelda_timeline.era_of_the_hero_of_time":"Era of the Hero of Time","zelda_timeline.hyrulean_civil_war":"Hyrulean Civil War","zelda_timeline.ocarina_of_time":"Ocarina of Time","zelda_timeline.sacred_realm_becomes_dark_world":"The Sacred Realm Becomes the Dark World","zelda_timeline.ganondorf_becomes_ganon":"Ganondorf becomes Ganon","zelda_timeline.hero_is_defeated":"Hero is defeated","zelda_timeline.decline_of_last_hero":"The Decline of Hyrule and the Last Hero","zelda_timeline.the_imprisoning_war":"The Imprisoning War","zelda_timeline.era_of_dark_and_light":"Era of Light and Dark","zelda_timeline.a_link_to_the_past":"A Link to the Past","zelda_timeline.resurrection_of_ganon":"The Resurrection of Ganon","zelda_timeline.resurrection_of_ganon_is_prevented":"The Resurrection of Ganon is prevented","zelda_timeline.links_awakening":"Link's Awakening","zelda_timeline.oracle_of_ages_and_seasons":"Oracle of Ages and Oracle of Seasons","zelda_timeline.a_link_between_worlds":"A Link Between Worlds","zelda_timeline.tri_force_heroes":"Tri Force Heroes","zelda_timeline.the_gold_era":"The Gold Era","zelda_timeline.monarchs_of_hyrule_use_triforce":"The Monarchs of Hyrule Use the Triforce","zelda_timeline.era_of_decline":"The Era of Decline","zelda_timeline.tragedy_of_princess_zelda_1":"The Tragedy of Princess Zelda I","zelda_timeline.the_legend_of_zelda":"The Legend of Zelda","zelda_timeline.adventure_of_link":"Adventure of Link","zelda_timeline.hero_defeated":"Hero Defeated","zelda_timeline.child_era":"Child Era","zelda_timeline.adult_era":"Adult Era","zelda_timeline.sacred_realm_protected":"The Sacred Realm Remains Protected","zelda_timeline.twilight_realm_and_legacy_of_hero":"The Twilight Realm and the Legacy of the Hero","zelda_timeline.majoras_mask":"Majora's Mask","zelda_timeline.prince_of_thieves_is_executed":"The Demon Thief, Ganondorf, Is Executed","zelda_timeline.twilight_era":"The Twilight Era","zelda_timeline.twilight_princess":"Twilight Princess","zelda_timeline.shadow_invasion":"The Shadow Invasion","zelda_timeline.shadow_era":"The Shadow Era","zelda_timeline.four_swords_adventures":"Four Swords Adventures","zelda_timeline.reincarnation_of_ganondorf":"The Reincarnation of Ganondorf","zelda_timeline.ganondorf_is_sealed":"Ganondorf is sealed","zelda_timeline.hero_of_wind_and_new_world":"The Hero of Wind and a New World","zelda_timeline.era_without_a_hero":"The Era without a Hero","zelda_timeline.ganondorf_is_resurrected":"Ganondorf is Resurrected","zelda_timeline.hyrule_is_sealed_and_flooded":"Hyrule is sealed and then flooded","zelda_timeline.era_of_the_great_sea":"The Era of the Great Sea","zelda_timeline.the_wind_waker":"The Wind Waker","zelda_timeline.era_of_the_great_voyage":"The Era of the Great Voyage","zelda_timeline.phantom_hourglass":"Phantom Hourglass","zelda_timeline.era_of_hyrule_rebirth":"The Era of Hyrule's Rebirth","zelda_timeline.new_continent_discovered":"New Continent Discovered","zelda_timeline.new_hyrule_is_founded":"A New Hyrule Kingdom is founded","zelda_timeline.spirit_tracks":"Spirit Tracks","zelda_timeline.evil_king_malladus_is_resurrected":"The Evil King Malladus is Resurrected","zelda_timeline.age_of_calamity":"Age of Calamity","zelda_timeline.breath_of_the_wild":"Breath of the Wild","zelda_timeline.era_of_the_wilds":"Era of the Wilds","zelda_timeline.calamity_ganon_is_sealed":"Calamity Ganon is Sealed. Technology is banned, leading some Sheikah to form the Yiga Clan","zelda_timeline.divine_beasts_are_cleansed":"The Divine Beasts are cleansed and Calamity Ganon is Sealed","zelda_timeline.tears_of_the_kingdom":"Tears of the Kingdom","zelda_timeline.hyrule_kingdom_is_teared_apart":"Ganondorf is Resurrected (I think?)","blog_categories.games":"Games","blog_categories.general":"General","blog_categories.tips":"Tips","blog_categories.events":"Events","blog_categories.coding":"Coding","blog_categories.funny":"Funny","blog_categories.toys":"Toys","blog_categories.gadgets":"Gadgets","forty_two_page.title":"Forty Two","forty_two_page.description":"So long and thanks for all the fish!","projects_page.title":"Projects","projects_page.description":"Here is a list of some of my favorites personal projects.","projects_page.gatsbyMaterialUiBlogDescription":"A simple Gatsby Blog Starter with Material UI.","projects_page.contractBuilderDescription":"Contract Builder is a free open-source project that allows anyone to easily maintain and build any kind of contract (legal documents, lawsuit, rent, agreements, construction and so on) using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom contract, now she is able to do it in less than 5 minutes. Hooray!","projects_page.resumeBuilderDescription":"Resume Builder is a free open-source project that allows anyone to easily maintain and build any kind of resume using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom resumes.","projects_page.magentoChatbotDescription":"With this module you can fully integrate your Magento store with the most popular chat apps in the market. This means that by simply installing this module and a few clicks you can have a new way to show and sell your products to your clients. Very easy to use! Try now, it's FREE.","projects_page.jamStackSortenerDescription":"This is a basic URL shortener POC build with Gatsby.","projects_page.gotinhaDescription":"It was always my dream to make my own game, and after trying Unity a couple years ago, I decided to try it again with something I'm more familiar with: Javascript. As a frontend developer, Javascript is already the language that I write most of my code at work and also in my personal projects, and after a quick search I was able to find the amazing PhaserJS Framework for building 2D web games.","e3_2012_photos.title":"E3 2012","e3_2012_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for Nintendo Blast.","e3_2013_photos.title":"E3 2013","e3_2013_photos.description":"On June 2013 I attended E3 as a media press for a full coverage for Game Blast.","e3_2014_photos.title":"E3 2014","e3_2014_photos.description":"On June 2014 I attended E3 as a media press for a full coverage for Game Blast.","e3_2015_photos.title":"E3 2015","e3_2015_photos.description":"On June 2015 I attended E3 as a media press for a full coverage for Game Blast and Game Over TV.","e3_2017_photos.title":"E3 2017","e3_2017_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for PlayReplay and Game Over TV.","e3_2019_photos.title":"E3 2019","e3_2019_photos.description":"On June 2019 I attended E3 as a media press for a full coverage for PlayReplay.","gamescom_2019_photos.title":"Gamescom 2019","gamescom_2019_photos.description":"On August 2019 I attended Gamescom as a media press for a full coverage for PlayReplay.","san_francisco_2019_photos.title":"San Francisco 2019","san_francisco_2019_photos.description":"On September 2019 I've traveled to San Francisco for the Metallica S&M2 concert.","notfound.title":"404: Not found","notfound.header":"404 NOT FOUND","notfound.description":"Sorry, this page doesn't seem to exist. Perhaps the archives are incomplete?","seo_keywords.developer":"developer","seo_keywords.development":"development","seo_keywords.javascript":"javascript","seo_keywords.es6":"es6","seo_keywords.e3":"e3","seo_keywords.sgf":"sgf","seo_keywords.gamescom":"gamescom","seo_keywords.countdown":"countdown","seo_keywords.archive":"archive","seo_keywords.about_me":"about me","seo_keywords.personal_blog":"personal blog","seo_keywords.personal_projects":"personal projects","seo_keywords.travels":"travels","seo_keywords.tips":"tips","seo_keywords.lifehacks":"lifehacks","seo_keywords.reviews":"reviews","seo_keywords.games":"games","seo_keywords.timeline":"timeline","seo_keywords.photos":"photos","cookie_law.we_use_cookies":"We use cookies to ensure you get the best experience on our website. By using our website you agree to our ","cookie_law.title":"Cookie policy","cookie_law.what_are_cookies":"What are cookies?","cookie_law.what_are_cookies_text":"As is common practice with almost all professional websites this site uses cookies, which are tiny files that are downloaded to your computer, to improve your experience. This page describes what information they gather, how we use it and why we sometimes need to store these cookies. We will also share how you can prevent these cookies from being stored however this may downgrade or 'break' certain elements of the sites functionality. For more general information on cookies, please read ","cookie_law.what_are_cookies_more_info_url":"https://en.wikipedia.org/wiki/HTTP_cookie","cookie_law.how_we_use_cookies":"How we use cookies","cookie_law.how_we_use_cookies_text":"We use cookies for a variety of reasons detailed below. Unfortunately in most cases there are no industry standard options for disabling cookies without completely disabling the functionality and features they add to this site. It is recommended that you leave on all cookies if you are not sure whether you need them or not in case they are used to provide a service that you use.","cookie_law.disabling_cookies":"Disabling cookies","cookie_law.disabling_cookies_text":"You can prevent the setting of cookies by adjusting the settings on your browser (see your browser Help for how to do this). Be aware that disabling cookies will affect the functionality of this and many other websites that you visit. Disabling cookies will usually result in also disabling certain functionality and features of the this site. Therefore it is recommended that you do not disable cookies.","cookie_law.the_cookies_we_set":"The cookies we set","cookie_law.site_preferences_cookie":"Site preferences cookies","cookie_law.site_preferences_cookie_text":"In order to provide you with a great experience on this site we provide the functionality to set your preferences for how this site runs when you use it. In order to remember your preferences we need to set cookies so that this information can be called whenever you interact with a page is affected by your preferences.","cookie_law.third_party_cookies":"Third party cookies","cookie_law.third_party_cookies_text":"In some special cases we also use cookies provided by trusted third parties. The following section details which third party cookies you might encounter through this site.","cookie_law.third_party_cookies_item_1":"This site uses Google Analytics which is one of the most widespread and trusted analytics solution on the web for helping us to understand how you use the site and ways that we can improve your experience. These cookies may track things such as how long you spend on the site and the pages that you visit so we can continue to produce engaging content. For more information on Google Analytics cookies, see the official Google Analytics page.","cookie_law.third_party_cookies_item_2":"From time to time we test new features and make subtle changes to the way that the site is delivered. When we are still testing new features these cookies may be used to ensure that you receive a consistent experience whilst on the site whilst ensuring we understand which optimisations our users appreciate the most.","cookie_law.more_information":"More information","cookie_law.more_information_text":"Hopefully that has clarified things for you and as was previously mentioned if there is something that you aren't sure whether you need or not it's usually safer to leave cookies enabled in case it does interact with one of the features you use on our site. However if you are still looking for more information then you can contact us through our "},"routed":true,"originalPath":"/blog/coding/building-a-dynamic-form-from-a-json-schema/","redirect":true,"redirectDefaultLanguageToRoot":false,"defaultLanguage":"en","fallbackLanguage":"","ignoredPaths":[]},"blogLocale":"en"}},
    "staticQueryHashes": ["1156153307","1355482417","1591365477","1628619374","2127381735","2288279559","26159077","3566410298","3649515864","3847325417","3982724423","928834867"]}