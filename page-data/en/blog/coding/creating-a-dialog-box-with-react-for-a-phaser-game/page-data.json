{
    "componentChunkName": "component---src-templates-blog-post-jsx",
    "path": "/en/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://pablo.gg"}},"markdownRemark":{"id":"c5a1450d-4921-519f-ba92-df6544ba3265","excerpt":"Phaser works by rendering pixels inside a  element in the DOM, and it’s great, but one of the great features of web development is the power of the DOM and CSS…","html":"<p>Phaser works by rendering pixels inside a <code class=\"language-text\">canvas</code> element in the DOM, and it’s great, but one of the great features of web development is the power of the DOM and CSS to create great UI elements, and you can’t do that with Phaser alone.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 831px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.71875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACp0lEQVQozyXSaU8TURTG8fk6vibRsnTm3nOnha7QGaCtQsuqiaIQIksLUtrSaZliWEKCYasYxCWR1GFoBUqnQxclQX0jCokQMFqiCd/BFJLf+/95kkM5V/R9MWv3SoNuV3crT3csWPomeU2OYbLYvMb62zlfG9/TaKRfMtqPmEljpGDmClIwJdzjel843V87jWpNRZ7pWLIOTPOVeURyxLhCuszWrlpbp8XEh3Xu52asAmQIUQnsgbaAKQ9fb3yo1XyqgjRU5FHHorV/mi/PI5wjKAnOdkOtlnHcN3ARXWvYSKsYK4BUYLdI13Qd9cDA2R/prbKeqFBZQKXyFF++j8wJYtkAlISgz042Ma1ibQaBCkQFyAKR8Z1gNeX01FTPAbdagzNQkb0qT/KaA2yc05qC5XpFL/gc+m0WZwAUgjJQKl/FKwuYcr+pLftGV+wjbR6XHdAtMfPjGa7sC12VQZo0jRQI+e36bRaV1pbgHEAOQCmhugL1rmWTa6HEGTP0i5w/2OiIGV2LpqaYse2ZOTJiJymg9xBSEa0idh0TGeMc4AxQnpnGQbE+HHRNjLVEAy5xrDkiNEcDrmtPA+5xwd0gWbmEhUtaWuZt3l57d4/NsFw6gaILhNnVF9TZf59f/UxFT3bGT1Li6W70NCWepMSTnchpMnS+KZzL4TM5fP5e+KuI6aUnuj7E7GOK3YPqNDmQxy63JopysLgZKm4KF8lIMRG+SISLsv9PfOi3NHztlzR8mRhR5vvxY8xmWQp2eDQvKOsDp5L3cGPkWBo6ljzHkvdY8vyIe4/io4cbo0dx/7Xv676zbVF6FyBTrDlhonCi6YYvfVN4rQstD/bdNYQWaWGNCa/iyHrb28XbMieOtzpknv9ga0jY6lK1/ll350p96X8z8B80oVdUwzbQoQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dialog Box\"\n        title=\"Dialog Box\"\n        src=\"/static/1d7bab5112f76c938742845465f8f5c1/1aa23/dialog-box.png\"\n        srcset=\"/static/1d7bab5112f76c938742845465f8f5c1/e3135/dialog-box.png 256w,\n/static/1d7bab5112f76c938742845465f8f5c1/06341/dialog-box.png 512w,\n/static/1d7bab5112f76c938742845465f8f5c1/1aa23/dialog-box.png 831w\"\n        sizes=\"(max-width: 831px) 100vw, 831px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Dialog Box</figcaption>\n  </figure></p>\n<p>I recently needed a dialog box for my game, and by Googling <a href=\"https://www.google.com/search?q=rpg+dialog+box+react\" target=\"_blank\" rel=\"noreferrer\">“rpg dialog box react”</a> I found a great tutorial by <a href=\"https://twitter.com/CamTatz\" target=\"_blank\" rel=\"noreferrer\">Cameron Tatz</a> on <a href=\"https://codeworkshop.dev/blog/2020-03-01-creating-an-rpg-dialog-effect-with-react-and-react-spring/\" target=\"_blank\" rel=\"noreferrer\">how to create a dialog box using React</a> and <a href=\"https://github.com/pmndrs/react-spring\" target=\"_blank\" rel=\"noreferrer\">react-spring</a>, and that’s exactly what I was looking for.</p>\n<p>The original tutorial was using an old version of react-spring, so I updated it and added some other features, which I will show in this tutorial.</p>\n<h2 id=\"the-code\" style=\"position:relative;\"><a href=\"#the-code\" aria-label=\"the code permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The code</h2>\n<p>This dialog box will use react-spring to show the message letter by letter. If you press <code class=\"language-text\">ENTER</code>, it will finish the current message animation and show it in full and if you press <code class=\"language-text\">ENTER</code> again it will move to the next message if there is one.</p>\n<p>The two main changes in the code for the <code class=\"language-text\">Message.jsx</code> component are that the <code class=\"language-text\">useTransition</code> API changed to receive just the items and the config object, instead of the items, a mapping function, and the config object.</p>\n<p>I also added the <code class=\"language-text\">onRest</code> property to the <code class=\"language-text\">useTransition</code> config object to check if the message animation is over. <code class=\"language-text\">onRest</code> is called after every letter animation, so I need to check for the current letter index.</p>\n<p>If the prop <code class=\"language-text\">forceShowFullMessage</code> is sent, then I will simply show the full message, without any animation.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> animated<span class=\"token punctuation\">,</span> useTransition <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-spring'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeStyles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@material-ui/core/styles'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token function-variable function\">dialogMessage</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Message</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    message <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    trail <span class=\"token operator\">=</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">onMessageEnded</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    forceShowFullMessage <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> message<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">letter<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">item</span><span class=\"token operator\">:</span> letter<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> index<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> transitions <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        trail<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">enter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token function-variable function\">onRest</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status<span class=\"token punctuation\">,</span> controller<span class=\"token punctuation\">,</span> item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>key <span class=\"token operator\">===</span> items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">onMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogMessage<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>forceShowFullMessage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>forceShowFullMessage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">transitions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">styles<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">,</span> key <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>animated<span class=\"token punctuation\">.</span>span key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                    <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>animated<span class=\"token punctuation\">.</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Message<span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the <code class=\"language-text\">DialogBox.jsx</code> component, I’m using a background image very similar to the one in the original tutorial.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 100px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAABm0lEQVQ4y92UvWrCUBTH8wougjdRcLIQB5Ub6KKDjbcmuV5sHsMHCCZ+1NIqtDGItG+hg/oMDq4BN7UxCS52UvxYi7YIFbs0W+HHXc758+ece86h/Ne+gAAAZoDEBEQaSAz9C6cEgJmAAPzXPgqINP8soReCdCK07pBB+Ca+CDKOCTpBL4R/loBIU3QuiHQSFkPxAhTfZFbjWBVGNe4MVoWsxolvcrwAw2II6YTOBSmAGaSTRAGmyjfZdj6ixIrdysOgcd9/OvEwaBS7lYgSy7bzqfJNogCRTgBmKCAx2VZeeJWFtpw2pGQ9Yy7H1saerGbT9ft0/T5ZzayNbS7HyXombUhCWxZe5WwrDyTm6GwQVoVXSizVuB06I3e/mO8ce+eemO8cd78YOqNU4/ZKibEqRMbRmcZBvolZFSqdsvkxPii3zkXc/cL8GCudMqtCvolpHPwWR0tcrV+3NvZ863y9Z5xCtX49WuJ+ijWu2nucri1751qXbK3toZDp2qr2HqPa/xB7adgfv8rTkHgezz8vhreV9HIMvJyhTyWzYCcD+O+cAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dialog Box background\"\n        title=\"Dialog Box background\"\n        src=\"/static/6dbe9ca6f21beb5fae99a1d5dc543f19/effb6/dialog-borderbox.png\"\n        srcset=\"/static/6dbe9ca6f21beb5fae99a1d5dc543f19/effb6/dialog-borderbox.png 100w\"\n        sizes=\"(max-width: 100px) 100vw, 100px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Dialog Box background</figcaption>\n  </figure></p>\n<p>This file handles the keyboard interactions for the dialog, so if the player presses <code class=\"language-text\">ENTER</code> and the message animation is still playing, then it finishes the current animation by setting <code class=\"language-text\">forceShowFullMessage</code> to true. If the player presses <code class=\"language-text\">ENTER</code> and the message animation is already finished, then it goes to the next message.</p>\n<p>Besides <code class=\"language-text\">forceShowFullMessage</code>,  I also get <code class=\"language-text\">screenWidth</code> and <code class=\"language-text\">screenHeight</code> as props, so I can scale up or down the size of the box depending on the size of the Phaser game.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useCallback<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeStyles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@material-ui/core/styles'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Images</span>\r\n<span class=\"token keyword\">import</span> dialogBorderBox <span class=\"token keyword\">from</span> <span class=\"token string\">'../images/dialog_borderbox.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Components</span>\r\n<span class=\"token keyword\">import</span> Message <span class=\"token keyword\">from</span> <span class=\"token string\">'./Message'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token function-variable function\">dialogWindow</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> screenWidth<span class=\"token punctuation\">,</span> screenHeight <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> messageBoxHeight <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenHeight <span class=\"token operator\">/</span> <span class=\"token number\">3.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">imageRendering</span><span class=\"token operator\">:</span> <span class=\"token string\">'pixelated'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#e2b27e'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'solid'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">borderImage</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dialogBorderBox<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") 6 / 12px 12px 12px 12px stretch</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenHeight <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>messageBoxHeight <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>messageBoxHeight <span class=\"token operator\">*</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenWidth <span class=\"token operator\">*</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'translate(-50%, 0%)'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">minHeight</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>messageBoxHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">dialogTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">marginBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">dialogFooter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">textAlign</span><span class=\"token operator\">:</span> <span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">bottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">DialogBox</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\r\n    messages<span class=\"token punctuation\">,</span>\r\n    characterName<span class=\"token punctuation\">,</span>\r\n    onDialogEnded<span class=\"token punctuation\">,</span>\r\n    screenWidth<span class=\"token punctuation\">,</span>\r\n    screenHeight<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">,</span> setCurrentMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messageEnded<span class=\"token punctuation\">,</span> setMessageEnded<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>forceShowFullMessage<span class=\"token punctuation\">,</span> setForceShowFullMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        screenWidth<span class=\"token punctuation\">,</span>\r\n        screenHeight<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>messageEnded<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setForceShowFullMessage</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">&lt;</span> messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">setCurrentMessage</span><span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">setCurrentMessage</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token function\">onDialogEnded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setForceShowFullMessage</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">,</span> messageEnded<span class=\"token punctuation\">,</span> messages<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span> onDialogEnded<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleKeyPressed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Enter'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Space'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Escape'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>handleClick<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogWindow<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span>characterName<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>Message\r\n                action<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>action<span class=\"token punctuation\">}</span>\r\n                message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span>\r\n                key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentMessage<span class=\"token punctuation\">}</span>\r\n                forceShowFullMessage<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>forceShowFullMessage<span class=\"token punctuation\">}</span>\r\n                onMessageEnded<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div\r\n                onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span>\r\n                className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogFooter<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">===</span> messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> messageEnded<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string\">'Ok'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Next'</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> DialogBox<span class=\"token punctuation\">;</span></code></pre></div>\n<p>And this will be the end result</p>\n<p><img src=\"/bd9346cd2b3aaee4dafa10d49a9b182c/dialog-box-animation.gif\" alt=\"Dialog Box animation\"></p>\n<p>If you want to know more details about how to integrate <code class=\"language-text\">Phaser</code> and <code class=\"language-text\">React</code>, check <a href=\"/en/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/\">this blog post</a>.</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTA2VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-06-creating-a-dialog-box-with-react-for-a-phaser-game.en/","path":"/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/","locale":"en"},"readingTime":{"minutes":3.945},"frontmatter":{"path":"creating-a-dialog-box-with-react-for-a-phaser-game","allowComments":true,"title":"Creating a dialog box with React for a Phaser game","date":"2021-10-06T00:00:00.000Z","categories":["coding"],"tags":["coding","games","javascript","phaser","phaser 3","react","dialog box","rpg","rpg maker","material ui"],"hideExcerpt":null,"subtitle":null}},"categoryImage":{"childImageSharp":{"original":{"width":1920,"height":1080,"src":"/static/categories_coding-aa17d098a6a0d8e0a764a345865f5ffb.jpg"}}}},"pageContext":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTA2VDAwOjAwOjAwLjAwMFo=","relatedPosts":[{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTA4VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-08-how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react.en/","path":"/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","react","dialog box","rpg","rpg maker"],"categories":["coding"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-10-08T00:00:00.000Z","id":null,"path":"how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react","show":true,"title":"How to create a top-down RPG Maker like game with Phaser JS and React","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTEyVDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-12-i-made-a-top-down-game-version-of-my-blog-with-phaser-and-react.en/","path":"/blog/coding/i-made-a-top-down-game-version-of-my-blog-with-phaser-and-react/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","react","blog","rpg","rpg maker","top-down"],"categories":["coding"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-10-12T00:00:00.000Z","id":null,"path":"i-made-a-top-down-game-version-of-my-blog-with-phaser-and-react","show":true,"title":"I made a top-down game version of my blog with Phaser and React","hideExcerpt":null,"subtitle":"Learn how to create a top-down RPG game using Phaser and React, including integrating with Gatsby and creating the game map with Tiled"}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMTEtMThUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-11-18-how-to-load-assets-asynchronously-with-phaser-3.en/","path":"/blog/games/how-to-load-assets-asynchronously-with-phaser-3/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","asynchronous","rexrainbow","phaser loader"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-11-18T00:00:00.000Z","id":null,"path":"how-to-load-assets-asynchronously-with-phaser-3","show":true,"title":"How to load assets asynchronously with Phaser 3","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMTAtMDJUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-10-02-automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script.en/","path":"/blog/games/automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","nodejs","node","tiled","map","tilemap","tileset"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-10-02T00:00:00.000Z","id":null,"path":"automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script","show":true,"title":"Automatically update the embedded Tileset for all your Tiled maps a Node.js script","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDktMDlUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-09-09-creating-a-mobile-build-of-my-phaser-js-game-game-devlog-23.en/","path":"/blog/games/creating-a-mobile-build-of-my-phaser-js-game-game-devlog-23/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","mobile","android","mobile build"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-09-09T00:00:00.000Z","id":null,"path":"creating-a-mobile-build-of-my-phaser-js-game-game-devlog-23","show":true,"title":"Creating a mobile build of my Phaser JS game - Game Devlog #23","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDgtMjhUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-08-28-creating-moving-platforms-for-my-phaser-js-game-game-devlog-22.en/","path":"/blog/games/creating-moving-platforms-for-my-phaser-js-game-game-devlog-22/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","moving platforms","platforms"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-08-28T00:00:00.000Z","id":null,"path":"creating-moving-platforms-for-my-phaser-js-game-game-devlog-22","show":true,"title":"Creating moving platforms for my Phaser JS game - Game Devlog #22","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDctMDZUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-07-06-hiding-parts-of-the-map-on-phaser-js-game-devlog-21.en/","path":"/blog/games/hiding-parts-of-the-map-on-phaser-js-game-devlog-21/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","metroidvania"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-07-06T00:00:00.000Z","id":null,"path":"hiding-parts-of-the-map-on-phaser-js-game-devlog-21","show":true,"title":"Hiding parts of the map on Phaser JS - Game Devlog #21","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMjhUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-06-28-creating-falling-spikes-with-phaser-js-game-devlog-20.en/","path":"/blog/games/creating-falling-spikes-with-phaser-js-game-devlog-20/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-06-28T00:00:00.000Z","id":null,"path":"creating-falling-spikes-with-phaser-js-game-devlog-20","show":true,"title":"Creating falling spikes with Phaser JS - Game Devlog #20","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMjJUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-06-22-automatically-generate-sprite-sheet-atlas-files-for-your-phaser-js-game-with-a-nodejs-script.en/","path":"/blog/games/automatically-generate-sprite-sheet-atlas-files-for-your-phaser-js-game-with-a-nodejs-script/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","nodejs","node","atlas","sprite sheet"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-06-22T00:00:00.000Z","id":null,"path":"automatically-generate-sprite-sheet-atlas-files-for-your-phaser-js-game-with-a-nodejs-script","show":true,"title":"Automatically generate sprite sheet atlas files for your Phaser JS game with a Node.js script","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMTlUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-06-19-hanging-on-a-monkey-bar-on-phaser-js-game-devlog-19.en/","path":"/blog/games/hanging-on-a-monkey-bar-on-phaser-js-game-devlog-19/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","monkey bar"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-06-19T00:00:00.000Z","id":null,"path":"hanging-on-a-monkey-bar-on-phaser-js-game-devlog-19","show":true,"title":"Hanging on a monkey bar Phaser JS - Game Devlog #19","hideExcerpt":null,"subtitle":null}}],"alternativeHtml":"<p>Phaser works by rendering pixels inside a <code class=\"language-text\">canvas</code> element in the DOM, and it’s great, but one of the great features of web development is the power of the DOM and CSS to create great UI elements, and you can’t do that with Phaser alone.</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 831px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.71875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACp0lEQVQozyXSaU8TURTG8fk6vibRsnTm3nOnha7QGaCtQsuqiaIQIksLUtrSaZliWEKCYasYxCWR1GFoBUqnQxclQX0jCokQMFqiCd/BFJLf+/95kkM5V/R9MWv3SoNuV3crT3csWPomeU2OYbLYvMb62zlfG9/TaKRfMtqPmEljpGDmClIwJdzjel843V87jWpNRZ7pWLIOTPOVeURyxLhCuszWrlpbp8XEh3Xu52asAmQIUQnsgbaAKQ9fb3yo1XyqgjRU5FHHorV/mi/PI5wjKAnOdkOtlnHcN3ARXWvYSKsYK4BUYLdI13Qd9cDA2R/prbKeqFBZQKXyFF++j8wJYtkAlISgz042Ma1ibQaBCkQFyAKR8Z1gNeX01FTPAbdagzNQkb0qT/KaA2yc05qC5XpFL/gc+m0WZwAUgjJQKl/FKwuYcr+pLftGV+wjbR6XHdAtMfPjGa7sC12VQZo0jRQI+e36bRaV1pbgHEAOQCmhugL1rmWTa6HEGTP0i5w/2OiIGV2LpqaYse2ZOTJiJymg9xBSEa0idh0TGeMc4AxQnpnGQbE+HHRNjLVEAy5xrDkiNEcDrmtPA+5xwd0gWbmEhUtaWuZt3l57d4/NsFw6gaILhNnVF9TZf59f/UxFT3bGT1Li6W70NCWepMSTnchpMnS+KZzL4TM5fP5e+KuI6aUnuj7E7GOK3YPqNDmQxy63JopysLgZKm4KF8lIMRG+SISLsv9PfOi3NHztlzR8mRhR5vvxY8xmWQp2eDQvKOsDp5L3cGPkWBo6ljzHkvdY8vyIe4/io4cbo0dx/7Xv676zbVF6FyBTrDlhonCi6YYvfVN4rQstD/bdNYQWaWGNCa/iyHrb28XbMieOtzpknv9ga0jY6lK1/ll350p96X8z8B80oVdUwzbQoQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Dialog Box\" title=\"Dialog Box\" src=\"/static/1d7bab5112f76c938742845465f8f5c1/1aa23/dialog-box.png\" srcset=\"/static/1d7bab5112f76c938742845465f8f5c1/e3135/dialog-box.png 256w,\n/static/1d7bab5112f76c938742845465f8f5c1/06341/dialog-box.png 512w,\n/static/1d7bab5112f76c938742845465f8f5c1/1aa23/dialog-box.png 831w\" sizes=\"(max-width: 831px) 100vw, 831px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Dialog Box</figcaption>\n  </figure><p></p>\n<p>I recently needed a dialog box for my game, and by Googling <a href=\"https://www.google.com/search?q=rpg+dialog+box+react\" target=\"_blank\" rel=\"noreferrer\">“rpg dialog box react”</a> I found a great tutorial by <a href=\"https://twitter.com/CamTatz\" target=\"_blank\" rel=\"noreferrer\">Cameron Tatz</a> on <a href=\"https://codeworkshop.dev/blog/2020-03-01-creating-an-rpg-dialog-effect-with-react-and-react-spring/\" target=\"_blank\" rel=\"noreferrer\">how to create a dialog box using React</a> and <a href=\"https://github.com/pmndrs/react-spring\" target=\"_blank\" rel=\"noreferrer\">react-spring</a>, and that’s exactly what I was looking for.</p>\n<p>The original tutorial was using an old version of react-spring, so I updated it and added some other features, which I will show in this tutorial.</p>\n<h2 id=\"the-code\" style=\"position:relative;\"><a href=\"#the-code\" aria-label=\"the code permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The code</h2>\n<p>This dialog box will use react-spring to show the message letter by letter. If you press <code class=\"language-text\">ENTER</code>, it will finish the current message animation and show it in full and if you press <code class=\"language-text\">ENTER</code> again it will move to the next message if there is one.</p>\n<p>The two main changes in the code for the <code class=\"language-text\">Message.jsx</code> component are that the <code class=\"language-text\">useTransition</code> API changed to receive just the items and the config object, instead of the items, a mapping function, and the config object.</p>\n<p>I also added the <code class=\"language-text\">onRest</code> property to the <code class=\"language-text\">useTransition</code> config object to check if the message animation is over. <code class=\"language-text\">onRest</code> is called after every letter animation, so I need to check for the current letter index.</p>\n<p>If the prop <code class=\"language-text\">forceShowFullMessage</code> is sent, then I will simply show the full message, without any animation.</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> animated<span class=\"token punctuation\">,</span> useTransition <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-spring'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeStyles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@material-ui/core/styles'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">dialogMessage</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Message</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    message <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    trail <span class=\"token operator\">=</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onMessageEnded</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    forceShowFullMessage <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">letter<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">item</span><span class=\"token operator\">:</span> letter<span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> index<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> transitions <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        trail<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">enter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">onRest</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status<span class=\"token punctuation\">,</span> controller<span class=\"token punctuation\">,</span> item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>key <span class=\"token operator\">===</span> items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">onMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogMessage<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span>forceShowFullMessage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>forceShowFullMessage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">transitions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">styles<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">,</span> key <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>animated<span class=\"token punctuation\">.</span>span key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n                    <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>animated<span class=\"token punctuation\">.</span>span<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Message<span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>For the <code class=\"language-text\">DialogBox.jsx</code> component, I’m using a background image very similar to the one in the original tutorial.</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 100px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAABm0lEQVQ4y92UvWrCUBTH8wougjdRcLIQB5Ub6KKDjbcmuV5sHsMHCCZ+1NIqtDGItG+hg/oMDq4BN7UxCS52UvxYi7YIFbs0W+HHXc758+ece86h/Ne+gAAAZoDEBEQaSAz9C6cEgJmAAPzXPgqINP8soReCdCK07pBB+Ca+CDKOCTpBL4R/loBIU3QuiHQSFkPxAhTfZFbjWBVGNe4MVoWsxolvcrwAw2II6YTOBSmAGaSTRAGmyjfZdj6ixIrdysOgcd9/OvEwaBS7lYgSy7bzqfJNogCRTgBmKCAx2VZeeJWFtpw2pGQ9Yy7H1saerGbT9ft0/T5ZzayNbS7HyXombUhCWxZe5WwrDyTm6GwQVoVXSizVuB06I3e/mO8ce+eemO8cd78YOqNU4/ZKibEqRMbRmcZBvolZFSqdsvkxPii3zkXc/cL8GCudMqtCvolpHPwWR0tcrV+3NvZ863y9Z5xCtX49WuJ+ijWu2nucri1751qXbK3toZDp2qr2HqPa/xB7adgfv8rTkHgezz8vhreV9HIMvJyhTyWzYCcD+O+cAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Dialog Box background\" title=\"Dialog Box background\" src=\"/static/6dbe9ca6f21beb5fae99a1d5dc543f19/effb6/dialog-borderbox.png\" srcset=\"/static/6dbe9ca6f21beb5fae99a1d5dc543f19/effb6/dialog-borderbox.png 100w\" sizes=\"(max-width: 100px) 100vw, 100px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Dialog Box background</figcaption>\n  </figure><p></p>\n<p>This file handles the keyboard interactions for the dialog, so if the player presses <code class=\"language-text\">ENTER</code> and the message animation is still playing, then it finishes the current animation by setting <code class=\"language-text\">forceShowFullMessage</code> to true. If the player presses <code class=\"language-text\">ENTER</code> and the message animation is already finished, then it goes to the next message.</p>\n<p>Besides <code class=\"language-text\">forceShowFullMessage</code>,  I also get <code class=\"language-text\">screenWidth</code> and <code class=\"language-text\">screenHeight</code> as props, so I can scale up or down the size of the box depending on the size of the Phaser game.</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useCallback<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeStyles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@material-ui/core/styles'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Images</span>\n<span class=\"token keyword\">import</span> dialogBorderBox <span class=\"token keyword\">from</span> <span class=\"token string\">'../images/dialog_borderbox.png'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Components</span>\n<span class=\"token keyword\">import</span> Message <span class=\"token keyword\">from</span> <span class=\"token string\">'./Message'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">dialogWindow</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> screenWidth<span class=\"token punctuation\">,</span> screenHeight <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> messageBoxHeight <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenHeight <span class=\"token operator\">/</span> <span class=\"token number\">3.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">imageRendering</span><span class=\"token operator\">:</span> <span class=\"token string\">'pixelated'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#e2b27e'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'solid'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">borderImage</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dialogBorderBox<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") 6 / 12px 12px 12px 12px stretch</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenHeight <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>messageBoxHeight <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>messageBoxHeight <span class=\"token operator\">*</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenWidth <span class=\"token operator\">*</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'translate(-50%, 0%)'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">minHeight</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>messageBoxHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">dialogTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">marginBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">dialogFooter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">textAlign</span><span class=\"token operator\">:</span> <span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">bottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">DialogBox</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n    messages<span class=\"token punctuation\">,</span>\n    characterName<span class=\"token punctuation\">,</span>\n    onDialogEnded<span class=\"token punctuation\">,</span>\n    screenWidth<span class=\"token punctuation\">,</span>\n    screenHeight<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">,</span> setCurrentMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messageEnded<span class=\"token punctuation\">,</span> setMessageEnded<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>forceShowFullMessage<span class=\"token punctuation\">,</span> setForceShowFullMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        screenWidth<span class=\"token punctuation\">,</span>\n        screenHeight<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> handleClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>messageEnded<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setForceShowFullMessage</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">&lt;</span> messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">setCurrentMessage</span><span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">setCurrentMessage</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">onDialogEnded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setForceShowFullMessage</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">,</span> messageEnded<span class=\"token punctuation\">,</span> messages<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span> onDialogEnded<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleKeyPressed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Enter'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Space'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Escape'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>handleClick<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogWindow<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">{</span>characterName<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>Message\n                action<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>action<span class=\"token punctuation\">}</span>\n                message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span>\n                key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentMessage<span class=\"token punctuation\">}</span>\n                forceShowFullMessage<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>forceShowFullMessage<span class=\"token punctuation\">}</span>\n                onMessageEnded<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>div\n                onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span>\n                className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogFooter<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">===</span> messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> messageEnded<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string\">'Ok'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Next'</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> DialogBox<span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>And this will be the end result</p>\n<p><img src=\"/bd9346cd2b3aaee4dafa10d49a9b182c/dialog-box-animation.gif\" alt=\"Dialog Box animation\"></p>\n<p>If you want to know more details about how to integrate <code class=\"language-text\">Phaser</code> and <code class=\"language-text\">React</code>, check <a href=\"/en/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/\">this blog post</a>.</p>","otherLanguagesUrl":["/pt-br/blog/coding/criando-uma-caixa-de-dialogo-com-react-para-o-meu-jogo-em-phaser/"],"rss":{"title":"Creating a dialog box with React for a Phaser game","description":"Creating a dialog box with React for a Phaser game","date":"2021-10-06T00:00:00.000Z"},"images":["/static/1d7bab5112f76c938742845465f8f5c1/1aa23/dialog-box.png","/static/6dbe9ca6f21beb5fae99a1d5dc543f19/effb6/dialog-borderbox.png","/bd9346cd2b3aaee4dafa10d49a9b182c/dialog-box-animation.gif"],"videos":[],"comments":[{"Carimbo de data/hora":"11/19/2021 17:20:44","name":"Flo","comment":"Nice Post!\nOne question though: How would you implement a box with two or more texts like a monologue of a npc?\nSo if you press enter a second textbox appears? Thanks in advance","post_path":"creating-a-dialog-box-with-react-for-a-phaser-game","email":null,"twitter":null,"date":"11/19/2021 17:20:44"}],"googleFormData":{"fvv":1,"pageHistory":0,"fbzx":"5566947645549549202","action":"e/1FAIpQLSeST_0jBnLKkEkXGpyx9LWrvV2a1-1F5dr-AcA4wn0BSRyPCw","title":"blog_comment","description":null,"fields":[{"label":"name","description":null,"type":"SHORT_ANSWER","id":"1953327618","required":true},{"label":"email","description":null,"type":"SHORT_ANSWER","id":"1309141965","required":false},{"label":"twitter","description":null,"type":"SHORT_ANSWER","id":"740186305","required":false},{"label":"comment","description":null,"type":"LONG_ANSWER","id":"1663940054","required":true},{"label":"post_path","description":null,"type":"SHORT_ANSWER","id":"1852628638","required":true}],"fieldsOrder":{"740186305":2,"1309141965":1,"1663940054":3,"1852628638":4,"1953327618":0}},"pageType":"blogPost","categoryImage":"/categories_coding.jpg/","slug":"/2021/2021-10-06-creating-a-dialog-box-with-react-for-a-phaser-game.en/","locale":"en","title":"Creating a dialog box with React for a Phaser game","previous":{"excerpt":"O Phaser funciona renderizando píxeis dentro de um elemento…","html":"<p>O Phaser funciona renderizando píxeis dentro de um elemento <code class=\"language-text\">canvas</code> no DOM, e isso é ótimo, mas um dos grandes recursos do desenvolvimento da web é o poder do DOM e CSS para criar excelentes elementos de UI, e você não pode fazer isso com Phaser sozinho.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 831px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.71875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACp0lEQVQozyXSaU8TURTG8fk6vibRsnTm3nOnha7QGaCtQsuqiaIQIksLUtrSaZliWEKCYasYxCWR1GFoBUqnQxclQX0jCokQMFqiCd/BFJLf+/95kkM5V/R9MWv3SoNuV3crT3csWPomeU2OYbLYvMb62zlfG9/TaKRfMtqPmEljpGDmClIwJdzjel843V87jWpNRZ7pWLIOTPOVeURyxLhCuszWrlpbp8XEh3Xu52asAmQIUQnsgbaAKQ9fb3yo1XyqgjRU5FHHorV/mi/PI5wjKAnOdkOtlnHcN3ARXWvYSKsYK4BUYLdI13Qd9cDA2R/prbKeqFBZQKXyFF++j8wJYtkAlISgz042Ma1ibQaBCkQFyAKR8Z1gNeX01FTPAbdagzNQkb0qT/KaA2yc05qC5XpFL/gc+m0WZwAUgjJQKl/FKwuYcr+pLftGV+wjbR6XHdAtMfPjGa7sC12VQZo0jRQI+e36bRaV1pbgHEAOQCmhugL1rmWTa6HEGTP0i5w/2OiIGV2LpqaYse2ZOTJiJymg9xBSEa0idh0TGeMc4AxQnpnGQbE+HHRNjLVEAy5xrDkiNEcDrmtPA+5xwd0gWbmEhUtaWuZt3l57d4/NsFw6gaILhNnVF9TZf59f/UxFT3bGT1Li6W70NCWepMSTnchpMnS+KZzL4TM5fP5e+KuI6aUnuj7E7GOK3YPqNDmQxy63JopysLgZKm4KF8lIMRG+SISLsv9PfOi3NHztlzR8mRhR5vvxY8xmWQp2eDQvKOsDp5L3cGPkWBo6ljzHkvdY8vyIe4/io4cbo0dx/7Xv676zbVF6FyBTrDlhonCi6YYvfVN4rQstD/bdNYQWaWGNCa/iyHrb28XbMieOtzpknv9ga0jY6lK1/ll350p96X8z8B80oVdUwzbQoQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dialog Box\"\n        title=\"Dialog Box\"\n        src=\"/static/1d7bab5112f76c938742845465f8f5c1/1aa23/dialog-box.png\"\n        srcset=\"/static/1d7bab5112f76c938742845465f8f5c1/e3135/dialog-box.png 256w,\n/static/1d7bab5112f76c938742845465f8f5c1/06341/dialog-box.png 512w,\n/static/1d7bab5112f76c938742845465f8f5c1/1aa23/dialog-box.png 831w\"\n        sizes=\"(max-width: 831px) 100vw, 831px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Dialog Box</figcaption>\n  </figure></p>\n<p>Recentemente, precisei de uma caixa de diálogo para o meu jogo e, pesquisando <a href=\"https://www.google.com/search?q=rpg+dialog+box+react\" target=\"_blank\" rel=\"noreferrer\">“rpg dialog box react”</a>, encontrei um ótimo tutorial de <a href=\"https://twitter.com/CamTatz\" target=\"_blank\" rel=\"noreferrer\">Cameron Tatz</a> sobre <a href=\"https://codeworkshop.dev/blog/2020-03-01-creating-an-rpg-dialog-effect-with-react-and-react-spring/\" target=\"_blank\" rel=\"noreferrer\">como criar uma caixa de diálogo usando React</a> e <a href=\"https://github.com/pmndrs/react-spring\" target=\"_blank\" rel=\"noreferrer\">react-spring</a>, e isso é exatamente o que eu estava procurando.</p>\n<p>O tutorial original usa uma versão antiga do react-spring, então eu atualizei o package e adicionei alguns outros recursos ao componente, que mostrarei neste tutorial.</p>\n<h2 id=\"o-codigo\" style=\"position:relative;\"><a href=\"#o-codigo\" aria-label=\"o codigo permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>O código</h2>\n<p>Esta caixa de diálogo usará react-spring para mostrar a mensagem letra por letra. Se você pressionar <code class=\"language-text\">ENTER</code>, irá terminar a animação da mensagem atual e mostrá-la por completo e se você pressionar <code class=\"language-text\">ENTER</code> novamente irá mover para a próxima mensagem se houver uma.</p>\n<p>As duas principais mudanças no código para o componente <code class=\"language-text\">Message.jsx</code> são que a API <code class=\"language-text\">useTransition</code> mudou para receber apenas os itens e o objeto de configuração, ao invés dos itens, uma função de mapeamento e o objeto de configuração.</p>\n<p>Também adicionei a propriedade <code class=\"language-text\">onRest</code> ao objeto de configuração <code class=\"language-text\">useTransition</code> para verificar se a animação da mensagem acabou. <code class=\"language-text\">onRest</code> é chamado após cada animação de letras, então preciso verificar o index da letra atual.</p>\n<p>Se o prop <code class=\"language-text\">forceShowFullMessage</code> for enviado, simplesmente mostrarei a mensagem completa, sem nenhuma animação.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> animated<span class=\"token punctuation\">,</span> useTransition <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-spring'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeStyles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@material-ui/core/styles'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token function-variable function\">dialogMessage</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Message</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    message <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    trail <span class=\"token operator\">=</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">onMessageEnded</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    forceShowFullMessage <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> message<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">letter<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">item</span><span class=\"token operator\">:</span> letter<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> index<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> transitions <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        trail<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">enter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token function-variable function\">onRest</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status<span class=\"token punctuation\">,</span> controller<span class=\"token punctuation\">,</span> item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>key <span class=\"token operator\">===</span> items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">onMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogMessage<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>forceShowFullMessage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>forceShowFullMessage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">transitions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">styles<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">,</span> key <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>animated<span class=\"token punctuation\">.</span>span key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                    <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>animated<span class=\"token punctuation\">.</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Message<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Para o componente <code class=\"language-text\">DialogBox.jsx</code>, estou usando uma imagem de fundo muito semelhante à do tutorial original.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 100px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAABm0lEQVQ4y92UvWrCUBTH8wougjdRcLIQB5Ub6KKDjbcmuV5sHsMHCCZ+1NIqtDGItG+hg/oMDq4BN7UxCS52UvxYi7YIFbs0W+HHXc758+ece86h/Ne+gAAAZoDEBEQaSAz9C6cEgJmAAPzXPgqINP8soReCdCK07pBB+Ca+CDKOCTpBL4R/loBIU3QuiHQSFkPxAhTfZFbjWBVGNe4MVoWsxolvcrwAw2II6YTOBSmAGaSTRAGmyjfZdj6ixIrdysOgcd9/OvEwaBS7lYgSy7bzqfJNogCRTgBmKCAx2VZeeJWFtpw2pGQ9Yy7H1saerGbT9ft0/T5ZzayNbS7HyXombUhCWxZe5WwrDyTm6GwQVoVXSizVuB06I3e/mO8ce+eemO8cd78YOqNU4/ZKibEqRMbRmcZBvolZFSqdsvkxPii3zkXc/cL8GCudMqtCvolpHPwWR0tcrV+3NvZ863y9Z5xCtX49WuJ+ijWu2nucri1751qXbK3toZDp2qr2HqPa/xB7adgfv8rTkHgezz8vhreV9HIMvJyhTyWzYCcD+O+cAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dialog Box background\"\n        title=\"Dialog Box background\"\n        src=\"/static/6dbe9ca6f21beb5fae99a1d5dc543f19/effb6/dialog-borderbox.png\"\n        srcset=\"/static/6dbe9ca6f21beb5fae99a1d5dc543f19/effb6/dialog-borderbox.png 100w\"\n        sizes=\"(max-width: 100px) 100vw, 100px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Dialog Box background</figcaption>\n  </figure></p>\n<p>Este arquivo lida com as interações do teclado para a caixa de diálogo, portanto, se o jogador pressionar <code class=\"language-text\">ENTER</code> e a animação da mensagem ainda estiver sendo reproduzida, ele termina a animação atual definindo <code class=\"language-text\">forceShowFullMessage</code> como true. Se o jogador pressionar <code class=\"language-text\">ENTER</code> e a animação da mensagem já estiver concluída, então ele vai para a próxima mensagem.</p>\n<p>Além de <code class=\"language-text\">forceShowFullMessage</code>, também recebo <code class=\"language-text\">screenWidth</code> e <code class=\"language-text\">screenHeight</code> como adereços, então posso aumentar ou diminuir o tamanho da caixa dependendo do tamanho do jogo Phaser.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useCallback<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeStyles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@material-ui/core/styles'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Images</span>\r\n<span class=\"token keyword\">import</span> dialogBorderBox <span class=\"token keyword\">from</span> <span class=\"token string\">'../images/dialog_borderbox.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Components</span>\r\n<span class=\"token keyword\">import</span> Message <span class=\"token keyword\">from</span> <span class=\"token string\">'./Message'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token function-variable function\">dialogWindow</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> screenWidth<span class=\"token punctuation\">,</span> screenHeight <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> messageBoxHeight <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenHeight <span class=\"token operator\">/</span> <span class=\"token number\">3.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">imageRendering</span><span class=\"token operator\">:</span> <span class=\"token string\">'pixelated'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#e2b27e'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'solid'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">borderImage</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dialogBorderBox<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") 6 / 12px 12px 12px 12px stretch</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenHeight <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>messageBoxHeight <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>messageBoxHeight <span class=\"token operator\">*</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenWidth <span class=\"token operator\">*</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'translate(-50%, 0%)'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">minHeight</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>messageBoxHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">dialogTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">marginBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">dialogFooter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">textAlign</span><span class=\"token operator\">:</span> <span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">bottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">DialogBox</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\r\n    messages<span class=\"token punctuation\">,</span>\r\n    characterName<span class=\"token punctuation\">,</span>\r\n    onDialogEnded<span class=\"token punctuation\">,</span>\r\n    screenWidth<span class=\"token punctuation\">,</span>\r\n    screenHeight<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">,</span> setCurrentMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messageEnded<span class=\"token punctuation\">,</span> setMessageEnded<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>forceShowFullMessage<span class=\"token punctuation\">,</span> setForceShowFullMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        screenWidth<span class=\"token punctuation\">,</span>\r\n        screenHeight<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>messageEnded<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setForceShowFullMessage</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">&lt;</span> messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">setCurrentMessage</span><span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">setCurrentMessage</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token function\">onDialogEnded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setForceShowFullMessage</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">,</span> messageEnded<span class=\"token punctuation\">,</span> messages<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span> onDialogEnded<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleKeyPressed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Enter'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Space'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Escape'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>handleClick<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogWindow<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span>characterName<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>Message\r\n                action<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>action<span class=\"token punctuation\">}</span>\r\n                message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span>\r\n                key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentMessage<span class=\"token punctuation\">}</span>\r\n                forceShowFullMessage<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>forceShowFullMessage<span class=\"token punctuation\">}</span>\r\n                onMessageEnded<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div\r\n                onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span>\r\n                className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogFooter<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">===</span> messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> messageEnded<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string\">'Ok'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Next'</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> DialogBox<span class=\"token punctuation\">;</span></code></pre></div>\n<p>E este será o resultado final</p>\n<p><img src=\"/bd9346cd2b3aaee4dafa10d49a9b182c/dialog-box-animation.gif\" alt=\"Dialog Box animation\"></p>\n<p>Se você quiser mais detalhes sobre como integrar React com Phaser, <a href=\"/pt-br/blog/coding/como-criar-um-jogo-estilo-rpg-maker-com-phaser-e-react/\">leia o meu post sobre o assunto</a>.</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTA2VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-06-criando-uma-caixa-de-dialogo-com-react-para-o-meu-jogo-em-phaser.pt-br/","path":"/blog/coding/criando-uma-caixa-de-dialogo-com-react-para-o-meu-jogo-em-phaser/","locale":"pt-br"},"rawMarkdownBody":"O Phaser funciona renderizando píxeis dentro de um elemento `canvas` no DOM, e isso é ótimo, mas um dos grandes recursos do desenvolvimento da web é o poder do DOM e CSS para criar excelentes elementos de UI, e você não pode fazer isso com Phaser sozinho.\r\n\r\n![Dialog Box](../../uploads/blog/2021/10/dialog-box.png)\r\n\r\nRecentemente, precisei de uma caixa de diálogo para o meu jogo e, pesquisando [\"rpg dialog box react\"](https://www.google.com/search?q=rpg+dialog+box+react), encontrei um ótimo tutorial de [Cameron Tatz](https://twitter.com/CamTatz) sobre [como criar uma caixa de diálogo usando React](https://codeworkshop.dev/blog/2020-03-01-creating-an-rpg-dialog-effect-with-react-and-react-spring/) e [react-spring](https://github.com/pmndrs/react-spring), e isso é exatamente o que eu estava procurando.\r\n\r\nO tutorial original usa uma versão antiga do react-spring, então eu atualizei o package e adicionei alguns outros recursos ao componente, que mostrarei neste tutorial.\r\n\r\n## O código\r\nEsta caixa de diálogo usará react-spring para mostrar a mensagem letra por letra. Se você pressionar `ENTER`, irá terminar a animação da mensagem atual e mostrá-la por completo e se você pressionar `ENTER` novamente irá mover para a próxima mensagem se houver uma.\r\n\r\nAs duas principais mudanças no código para o componente `Message.jsx` são que a API `useTransition` mudou para receber apenas os itens e o objeto de configuração, ao invés dos itens, uma função de mapeamento e o objeto de configuração.\r\n\r\nTambém adicionei a propriedade `onRest` ao objeto de configuração `useTransition` para verificar se a animação da mensagem acabou. `onRest` é chamado após cada animação de letras, então preciso verificar o index da letra atual.\r\n\r\nSe o prop `forceShowFullMessage` for enviado, simplesmente mostrarei a mensagem completa, sem nenhuma animação.\r\n\r\n```javascript\r\nimport React, { useMemo } from 'react';\r\nimport { animated, useTransition } from 'react-spring';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dialogMessage: () => ({\r\n        fontSize: '12px',\r\n        textTransform: 'uppercase',\r\n    }),\r\n}));\r\n\r\nconst Message = ({\r\n    message = [],\r\n    trail = 35,\r\n    onMessageEnded = () => {},\r\n    forceShowFullMessage = false,\r\n}) => {\r\n    const classes = useStyles();\r\n    const items = useMemo(\r\n        () => message.trim().split('').map((letter, index) => ({\r\n            item: letter,\r\n            key: index,\r\n        })),\r\n        [message]\r\n    );\r\n\r\n    const transitions = useTransition(items, {\r\n        trail,\r\n        from: { display: 'none' },\r\n        enter: { display: '' },\r\n        onRest: (status, controller, item) => {\r\n            if (item.key === items.length - 1) {\r\n                onMessageEnded();\r\n            }\r\n        },\r\n    });\r\n\r\n    return (\r\n        <div className={classes.dialogMessage}>\r\n            {forceShowFullMessage && (\r\n                <span>{message}</span>\r\n            )}\r\n            {!forceShowFullMessage && transitions((styles, { item, key }) => (\r\n                <animated.span key={key} style={styles}>\r\n                    {item}\r\n                </animated.span>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Message;\r\n```\r\n\r\nPara o componente `DialogBox.jsx`, estou usando uma imagem de fundo muito semelhante à do tutorial original.\r\n\r\n![Dialog Box background](../../uploads/blog/2021/10/dialog-borderbox.png)\r\n\r\nEste arquivo lida com as interações do teclado para a caixa de diálogo, portanto, se o jogador pressionar `ENTER` e a animação da mensagem ainda estiver sendo reproduzida, ele termina a animação atual definindo `forceShowFullMessage` como true. Se o jogador pressionar `ENTER` e a animação da mensagem já estiver concluída, então ele vai para a próxima mensagem.\r\n\r\nAlém de `forceShowFullMessage`, também recebo `screenWidth` e `screenHeight` como adereços, então posso aumentar ou diminuir o tamanho da caixa dependendo do tamanho do jogo Phaser.\r\n\r\n```javascript\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\n// Images\r\nimport dialogBorderBox from '../images/dialog_borderbox.png';\r\n\r\n// Components\r\nimport Message from './Message';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dialogWindow: ({ screenWidth, screenHeight }) => {\r\n        const messageBoxHeight = Math.ceil(screenHeight / 3.5);\r\n\r\n        return {\r\n            imageRendering: 'pixelated',\r\n            textTransform: 'uppercase',\r\n            backgroundColor: '#e2b27e',\r\n            border: 'solid',\r\n            borderImage: `url(\"${dialogBorderBox}\") 6 / 12px 12px 12px 12px stretch`,\r\n            padding: '16px',\r\n            position: 'absolute',\r\n            top: `${Math.ceil(screenHeight - (messageBoxHeight + (messageBoxHeight * 0.1)))}px`,\r\n            width: `${Math.ceil(screenWidth * 0.8)}px`,\r\n            left: '50%',\r\n            transform: 'translate(-50%, 0%)',\r\n            minHeight: `${messageBoxHeight}px`,\r\n        };\r\n    },\r\n    dialogTitle: () => ({\r\n        fontSize: '16px',\r\n        marginBottom: '12px',\r\n        fontWeight: 'bold',\r\n    }),\r\n    dialogFooter: () => ({\r\n        fontSize: '16px',\r\n        cursor: 'pointer',\r\n        textAlign: 'end',\r\n        position: 'absolute',\r\n        right: '12px',\r\n        bottom: '12px',\r\n    }),\r\n}));\r\n\r\nconst DialogBox = ({\r\n    messages,\r\n    characterName,\r\n    onDialogEnded,\r\n    screenWidth,\r\n    screenHeight,\r\n}) => {\r\n    const [currentMessage, setCurrentMessage] = useState(0);\r\n    const [messageEnded, setMessageEnded] = useState(false);\r\n    const [forceShowFullMessage, setForceShowFullMessage] = useState(false);\r\n    const classes = useStyles({\r\n        screenWidth,\r\n        screenHeight,\r\n    });\r\n\r\n    const handleClick = useCallback(() => {\r\n        if (messageEnded) {\r\n            setMessageEnded(false);\r\n            setForceShowFullMessage(false);\r\n            if (currentMessage < messages.length - 1) {\r\n                setCurrentMessage(currentMessage + 1);\r\n            } else {\r\n                setCurrentMessage(0);\r\n                onDialogEnded();\r\n            }\r\n        } else {\r\n            setMessageEnded(true);\r\n            setForceShowFullMessage(true);\r\n        }\r\n    }, [currentMessage, messageEnded, messages.length, onDialogEnded]);\r\n\r\n    useEffect(() => {\r\n        const handleKeyPressed = (e) => {\r\n            if (['Enter', 'Space', 'Escape'].includes(e.code)) {\r\n                handleClick();\r\n            }\r\n        };\r\n        window.addEventListener('keydown', handleKeyPressed);\r\n\r\n        return () => window.removeEventListener('keydown', handleKeyPressed);\r\n    }, [handleClick]);\r\n\r\n    return (\r\n        <div className={classes.dialogWindow}>\r\n            <div className={classes.dialogTitle}>\r\n                {characterName}\r\n            </div>\r\n            <Message\r\n                action={messages[currentMessage].action}\r\n                message={messages[currentMessage].message}\r\n                key={currentMessage}\r\n                forceShowFullMessage={forceShowFullMessage}\r\n                onMessageEnded={() => {\r\n                    setMessageEnded(true);\r\n                }}\r\n            />\r\n            <div\r\n                onClick={handleClick}\r\n                className={classes.dialogFooter}\r\n            >\r\n                {(currentMessage === messages.length - 1 && messageEnded) ? 'Ok' : 'Next'}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DialogBox;\r\n```\r\n\r\nE este será o resultado final\r\n\r\n![Dialog Box animation](../../uploads/blog/2021/10/dialog-box-animation.gif)\r\n\r\nSe você quiser mais detalhes sobre como integrar React com Phaser, [leia o meu post sobre o assunto](/pt-br/blog/coding/como-criar-um-jogo-estilo-rpg-maker-com-phaser-e-react/).\r\n","frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","react","dialog box","rpg","rpg maker","material ui"],"categories":["coding"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-10-06T00:00:00.000Z","id":null,"path":"criando-uma-caixa-de-dialogo-com-react-para-o-meu-jogo-em-phaser","show":true,"title":"Criando uma caixa de diálogo com React para o meu jogo em Phaser","hideExcerpt":null,"subtitle":null}},"next":{"excerpt":"My first experience in “programming” started in 2002, when I…","html":"<p>My first experience in “programming” started in 2002, when I was making games with RPG Maker, when I learned what a variable, data persistence, and loops were.</p>\n<p>I never got to publish any of the games I made, but it was kind of always my dream so now that I have about 2 years of Phaser experience, I decided to make a small game in the same style as the RPG Makers I used to make. in 2002.</p>\n<h2 id=\"integrating-react-with-phaser\" style=\"position:relative;\"><a href=\"#integrating-react-with-phaser\" aria-label=\"integrating react with phaser permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integrating React with Phaser</h2>\n<p>Phaser works by rendering pixels inside a <code class=\"language-text\">canvas</code> element in the DOM, and it’s great, but one of the great features of web development is the power of the DOM and CSS to create great UI elements, and you can’t do that with Phaser alone.</p>\n<p>The simplest way to use Phaser with React is with a functional component like the one below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> Phaser <span class=\"token keyword\">from</span> <span class=\"token string\">'phaser'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GameComponent<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"using-react-for-the-game-ui\" style=\"position:relative;\"><a href=\"#using-react-for-the-game-ui\" aria-label=\"using react for the game ui permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using React for the game UI</h2>\n<p>To make Phaser communicate back and forth with React, like to show a menu item or a dialog box, I will dispatch JavaScript events between Phaser and React.</p>\n<p>The best way to do it would be with some sort of state management tool like <a href=\"https://facebook.github.io/flux/\" target=\"_blank\" rel=\"noreferrer\">Flux</a>, but since this is just a very small project, dispatching JavaScript events will work for now.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// React component</span>\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>DialogBox\r\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\r\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Phaser scene</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxFinishedEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token comment\">// Do whatever is needed when the dialog is over</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"/18452438d2251249518c712d8873e89a/react-dialog-box.gif\" alt=\"Dialog box\"></p>\n<p>If you want more details on how to create a React dialog box for your Phaser game, <a href=\"/en/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/\">check my blog post on it</a>.</p>\n<h2 id=\"using-grid-engine-and-loading-tiled-map\" style=\"position:relative;\"><a href=\"#using-grid-engine-and-loading-tiled-map\" aria-label=\"using grid engine and loading tiled map permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using grid-engine and loading Tiled map</h2>\n<p>To create the map I will again use Tiled, which is a FOSS in which you can create maps and use them in almost any game engine.</p>\n<p>The <code class=\"language-text\">tileset</code> I’m using for my map is the <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">Zelda-like tileset</a> created by <a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, which includes indoor and outdoor tilesets.</p>\n<p>After the map is done, <a href=\"/en/blog/games/automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script/\">I will embed the tileset into the map</a>, and then I can simply import the map and <code class=\"language-text\">tileset</code> file into my game and load them in Phaser.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> mainMapaJson <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/main-map.json'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> tilesetImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/tileset.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">tilemapTiledJSON</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main-map'</span><span class=\"token punctuation\">,</span> mainMapaJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> tilesetImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now to add the grid-engine into Phaser, just configure your game to use arcade physics and add grid-engine as a plugin, like shown below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">physics</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'arcade'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">plugin</span><span class=\"token operator\">:</span> GridEngine<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">mapping</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I can access the plugin via <code class=\"language-text\">this.gridEngine</code> inside any Phaser game scene. The next step is to create a sprite and move it with the grid-engine plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth <span class=\"token operator\">=</span> <span class=\"token number\">16</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight <span class=\"token operator\">=</span> <span class=\"token number\">16</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'main-map'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> gridEngineConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">characters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> heroSprite<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> cursors <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">createCursorKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>up<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>down<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This code was pretty much copied and pasted from <a href=\"https://annoraaq.github.io/grid-engine/examples/basic-movement.html\" target=\"_blank\" rel=\"noreferrer\">their official documentation page</a>.</p>\n<p>To make collisions work automatically with a map created on Tiled, just add the property <code class=\"language-text\">ge_collide</code> set to <code class=\"language-text\">true</code> for the tiles the hero is supposed to collide with.</p>\n<p>Notice that this will make the hero move and collide with objects, but there is no walking animation. To create new sprite animations I will use the <code class=\"language-text\">this.anims.create()</code> function, and then play that animation every time the grid-engine tells me that the player moved, with the <code class=\"language-text\">movementStarted</code>, <code class=\"language-text\">movementStopped</code> and <code class=\"language-text\">directionChanged</code> events dispatched by the grid-engine.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStarted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span>direction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStopped</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">directionChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">direction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> direction<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frames</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_01</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_02</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frameRate</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">repeat</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">yoyo</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"creating-hero-interactions\" style=\"position:relative;\"><a href=\"#creating-hero-interactions\" aria-label=\"creating hero interactions permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating hero interactions</h2>\n<p>The hero must be able to interact with the world, for example going into an NPC and talking to them.</p>\n<p>That sounds simple, but how to achieve that with Phaser? There are many ways to do it, but the easiest is to create a custom collider that will always be in front of the hero, and that custom collider will interact with all objects in the game.</p>\n<p>First I’m going to create an object using the <code class=\"language-text\">Phaser.GameObjects.Rectangle</code> class:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider <span class=\"token operator\">=</span>\r\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Rectangle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setImmovable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I need to make this custom collider always stay in front of the hero, for that I’m going to use the <code class=\"language-text\">update</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> facingDirection <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">getFacingDirection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>facingDirection<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'down'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'up'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'left'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'right'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">24</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// will never happen</span>\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"adding-interactive-tiles\" style=\"position:relative;\"><a href=\"#adding-interactive-tiles\" aria-label=\"adding interactive tiles permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding interactive tiles</h2>\n<p>Now that I have the <code class=\"language-text\">this.heroActionCollider</code> variable, let’s make the world a bit more interactive. I want the hero to be able to cut grass and the push boxes, so first I will create a layer called <code class=\"language-text\">test</code> in my map and add the grass and box tiles.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        layer<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tile</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In my case, my grass tile index is <code class=\"language-text\">428</code>, and my box tile index is <code class=\"language-text\">427</code>, and with this information, I can start coding my interactions.</p>\n<p>First I will create a <code class=\"language-text\">GameGroup</code> with <code class=\"language-text\">this.add.group()</code> and add my interactive layers to it, and then create an overlap between <code class=\"language-text\">this.heroActionCollider</code> and <code class=\"language-text\">interactiveLayers</code> with the <code class=\"language-text\">this.physics.add.overlap()</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> interactiveLayers <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nmap<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'interactions'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        interactiveLayers<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">GRASS_INDEX</span> <span class=\"token operator\">=</span> <span class=\"token number\">428</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">BOX_INDEX</span> <span class=\"token operator\">=</span> <span class=\"token number\">427</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">,</span> interactiveLayers<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">objA<span class=\"token punctuation\">,</span> objB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>objA<span class=\"token punctuation\">,</span> objB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token operator\">?.</span>index <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>tile<span class=\"token punctuation\">.</span>wasHandled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">GRASS_INDEX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                tile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">BOX_INDEX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                tile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the cutting grass action, I will check if the <code class=\"language-text\">SPACE</code> key is down with <code class=\"language-text\">Input.Keyboard.JustDown()</code>, and if it is, destroy that tile.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>spaceKey <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">addKey</span><span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span>KeyCodes<span class=\"token punctuation\">.</span><span class=\"token constant\">SPACE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">,</span> interactiveLayers<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">objA<span class=\"token punctuation\">,</span> objB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>objA<span class=\"token punctuation\">,</span> objB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token operator\">?.</span>index <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>tile<span class=\"token punctuation\">.</span>wasHandled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">GRASS_INDEX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">JustDown</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>spaceKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    tile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token comment\">// Wait a little bit for the attack animation to be over</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span>\r\n                        <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                            tile<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                            tile<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token punctuation\">}</span>\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the pushing box action, I will also check if the <code class=\"language-text\">SPACE</code> key is down, and then move the tile with <code class=\"language-text\">this.tweens.add()</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>spaceKey <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">addKey</span><span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span>KeyCodes<span class=\"token punctuation\">.</span><span class=\"token constant\">SPACE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">,</span> interactiveLayers<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">objA<span class=\"token punctuation\">,</span> objB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>objA<span class=\"token punctuation\">,</span> objB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token operator\">?.</span>index <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>tile<span class=\"token punctuation\">.</span>wasHandled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">BOX_INDEX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">JustDown</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>spaceKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    tile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">const</span> newPosition <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">calculatePushedTilePosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tweens<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                        <span class=\"token literal-property property\">targets</span><span class=\"token operator\">:</span> tile<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">pixelX</span><span class=\"token operator\">:</span> newPosition<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">pixelY</span><span class=\"token operator\">:</span> newPosition<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">ease</span><span class=\"token operator\">:</span> <span class=\"token string\">'Power2'</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">700</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">onComplete</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handlePushedTileCompleted</span><span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code contains 2 mysterious 🕵️ functions, <code class=\"language-text\">calculatePushedTilePosition</code> and <code class=\"language-text\">handlePushedTileCompleted</code>. The first one will calculate the new tile position after being pushed based on the hero position.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">calculatePushedTilePosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> facingDirection <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">getFacingDirection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> position <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">getPosition</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>facingDirection<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'up'</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'right'</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'down'</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'left'</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">handlePushedTileCompleted</code> function will remove the pushed tile and create a new one in the new position. This needs to be done because even though the tile position changed, the collision stays in the original position, I don’t know if this is by design or a bug on Phaser or in the grid-engine plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">handlePushedTileCompleted</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tile</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> newTile <span class=\"token operator\">=</span> tile<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>tilemapLayer<span class=\"token punctuation\">.</span><span class=\"token function\">putTileAt</span><span class=\"token punctuation\">(</span>\r\n        tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span>\r\n        newPosition<span class=\"token punctuation\">.</span>x <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n        newPosition<span class=\"token punctuation\">.</span>y <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n        <span class=\"token boolean\">true</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    newTile<span class=\"token punctuation\">.</span>properties <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token operator\">...</span>tile<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    newTile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n\r\n    tile<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    tile<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"/51cd88a1136dee62f6bb01810de39339/cutting-grass.gif\" alt=\"Cutting grass\"></p>\n<h2 id=\"adding-enemies\" style=\"position:relative;\"><a href=\"#adding-enemies\" aria-label=\"adding enemies permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding enemies</h2>\n<p>To add enemies to the map, I will use Tiled objects layer, which I can access via the function <code class=\"language-text\">map.getObjectLayer()</code>. First I will create an object layer called <code class=\"language-text\">elements</code> and add some tiles with the “Insert Tile” button.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1010px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.359375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVQoz3XO708ScQDHcf6pas2tWj2pmSPkZ6YogigIij8QTbgDDu/ue8cdnGbLuVSUUDQR7o7U0iBQeCTOxdRHjjbUBwjinDxza2oun/je5+lr+whWlqPhcCgajXAcy3FcMBgMhUJsJMxzHM+xbIRdWgovRthwOLLsm1z1TX2fmuLmF7joN5aPClaWuZVVPhZbWV/7sb6+zrKs3+/3B2a/zAb9s3OB6cD45PTHmbmJ8Yk5yh1dmonPfg6MjM7ML/gCQUEotMRx/MLXxXAkwvP8jN/vdDhcZh1iUrs6m/u7WxzdGrRLjffoGH2j12IatQ1STieKYzg6JNjf3/tz3eHh4UmhEIvHIBtEtgk92mpSX2sxqJwGOdEuZSxGTFOLWDpxyoMDAAABACHY3d3N5/O5XC6fzxeLxXg8DkNQ71uhRVENaSSIRoy0SGyqWsrcyvuoYTeGYlfuJsHe3t7R0dHOzs7BwUGpWPwZizlgiDbKR0xSxiTH28SgU+HSSui+pjXeNso4UJQgbrUgm83mrjs+Pj4/P/+VSNhhCFO9HtO/9LS+GWoWug1y0ijH26WwqgYZ6AGkG+D4P5xKpRKJRDqd3tzczGZ/sxyHOOyYsQ5uFCJqkQdW03SH16mhu5VecxNq7QEkBcAt3tra2t7ezmQy6XQ6k8lwPI847KSp3m1SUAYZTRl7p+3EJzPWWYdoZbitFyfd/3G5XK5UKhfXXV5eptJpO2QjuxoIowzopYxLC8bMw5j+g0qCGmqHIDMg7uBCoVAul09PT0ul0sXFRTKZtMMQ0tKAt8lH+uopg4zSiUdNyiltqw0WD6I9JLhz++Tk5Ozs7MZXKpWNjQ2b1VpT9az64WNRVdV7ndTjVMtePBU/f/Lq0YMOvY6mPTh+P4ZhuLFBo5AppaL6fquZGEHqFU1yiVIqemfpG3BT7ntxMplEEIRhPF4v7WVokiBxDHi8tPd6JEnewiv8F8sW+HURs/pCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Insert a tile\"\n        title=\"Insert a tile\"\n        src=\"/static/0c6ede12e2b26092f9f120e5834da7f3/08990/tiled-insert-tile.png\"\n        srcset=\"/static/0c6ede12e2b26092f9f120e5834da7f3/e3135/tiled-insert-tile.png 256w,\n/static/0c6ede12e2b26092f9f120e5834da7f3/06341/tiled-insert-tile.png 512w,\n/static/0c6ede12e2b26092f9f120e5834da7f3/08990/tiled-insert-tile.png 1010w\"\n        sizes=\"(max-width: 1010px) 100vw, 1010px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Insert a tile</figcaption>\n  </figure></p>\n<p>I will also add a custom property <code class=\"language-text\">enemyData</code> to this added tile with the value <code class=\"language-text\">slime_red:follow:1:100</code>, which will be all the properties of my enemy, this values separated by <strong>“:</strong>” are <code class=\"language-text\">enemyType:AIType:speed:health</code>. To get this values I will split the string and store all these data into an array to use later.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> enemiesData <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getObjectLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'elements'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ndataLayer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> properties<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n\r\n    properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> property<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'enemyData'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>enemyType<span class=\"token punctuation\">,</span> enemyAI<span class=\"token punctuation\">,</span> speed<span class=\"token punctuation\">,</span> health<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">':'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                enemiesData<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                    x<span class=\"token punctuation\">,</span>\r\n                    y<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">speed</span><span class=\"token operator\">:</span> Number<span class=\"token punctuation\">.</span><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>speed<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                    enemyType<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">enemySpecies</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getEnemySpecies</span><span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                    enemyAI<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">enemyName</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>enemyType<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>enemiesData<span class=\"token punctuation\">.</span>length<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">health</span><span class=\"token operator\">:</span> Number<span class=\"token punctuation\">.</span><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>health<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now the <code class=\"language-text\">enemiesData</code> variable contains all the data for all the enemies on the map, so all that is left is to create enemy sprites with <code class=\"language-text\">this.physics.add.sprite()</code> and add them to the <code class=\"language-text\">gridEngineConfig.characters</code> array.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>enemiesSprites <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nenemiesData<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">enemyData<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> enemySpecies<span class=\"token punctuation\">,</span> enemyType<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> enemyName<span class=\"token punctuation\">,</span> speed<span class=\"token punctuation\">,</span> enemyAI<span class=\"token punctuation\">,</span> health <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> enemyData<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> enemy <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> enemyType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        enemy<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xF1374B</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'green'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        enemy<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x2BBD6E</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'yellow'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        enemy<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xFFFF4F</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        enemy<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x00A0DC</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    enemy<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> enemyName<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>enemyType <span class=\"token operator\">=</span> enemyType<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>enemySpecies <span class=\"token operator\">=</span> enemySpecies<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>enemyAI <span class=\"token operator\">=</span> enemyAI<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>speed <span class=\"token operator\">=</span> speed<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>health <span class=\"token operator\">=</span> health<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>enemiesSprites<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>enemy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    gridEngineConfig<span class=\"token punctuation\">.</span>characters<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> enemyName<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> enemy<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> x <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        speed<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>To make the enemy follow the hero, I will simply use the <a href=\"https://annoraaq.github.io/grid-engine/api/methods.html#follow\" target=\"_blank\" rel=\"noreferrer\">this.gridEngine.follow() function</a>.</p>\n<p><img src=\"/3a4df19cbb0e4834a0aa0b26bb702dce/slime-enemy.gif\" alt=\"\"></p>\n<h2 id=\"adding-items\" style=\"position:relative;\"><a href=\"#adding-items\" aria-label=\"adding items permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding items</h2>\n<p>For the items I will again use the Tiled objects layer I already created, called <code class=\"language-text\">elements</code>. For now, I’m going to add two different items to the game, coins, and hearts, with a custom property called <code class=\"language-text\">itemData</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getObjectLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'elements'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ndataLayer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> properties<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n\r\n    properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> property<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'itemData'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// it's only one value... for now.</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>itemType<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">':'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>itemType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">case</span> <span class=\"token string\">'coin'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token string\">'coin'</span><span class=\"token punctuation\">)</span>\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                        item<span class=\"token punctuation\">.</span>itemType <span class=\"token operator\">=</span> <span class=\"token string\">'coin'</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n\r\n                    <span class=\"token keyword\">case</span> <span class=\"token string\">'heart'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token string\">'heart'</span><span class=\"token punctuation\">)</span>\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                        item<span class=\"token punctuation\">.</span>itemType <span class=\"token operator\">=</span> <span class=\"token string\">'heart'</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n\r\n                    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I just need to overlap the hero and the item group in the <code class=\"language-text\">this.itemsSprites</code> variable.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">objA<span class=\"token punctuation\">,</span> objB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>objA<span class=\"token punctuation\">,</span> objB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>itemType <span class=\"token operator\">===</span> <span class=\"token string\">'heart'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">restoreHealth</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        item<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        item<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>itemType <span class=\"token operator\">===</span> <span class=\"token string\">'coin'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">collectCoin</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        item<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        item<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"using-react-for-the-hud\" style=\"position:relative;\"><a href=\"#using-react-for-the-hud\" aria-label=\"using react for the hud permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using React for the HUD</h2>\n<p>In the overlap code with the items, I didn’t explain how the <code class=\"language-text\">restoreHealth</code> and <code class=\"language-text\">collectCoin</code> functions work, as they communicate directly with React, so first let’s see what this component looks like.</p>\n<p>The HUD component in React is quite simple and contains 3 props, an integer <code class=\"language-text\">screenWidth</code>, for the placement of the HUD on the screen, an integer <code class=\"language-text\">coins</code>, to show the amount of collected coins, and a <code class=\"language-text\">healthState</code> array, with the amount of hearts and whether they are empty, full or half.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> coinImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../images/coin.png'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> healthImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../images/health.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token function-variable function\">hudContainer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> screenWidth <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> left <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>innerWidth <span class=\"token operator\">-</span> screenWidth<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">fontFamily</span><span class=\"token operator\">:</span> <span class=\"token string\">'\"Press Start 2P\"'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">imageRendering</span><span class=\"token operator\">:</span> <span class=\"token string\">'pixelated'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">16</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>left <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">userSelect</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">health</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">healthStateFull</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">backgroundSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'48px 16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>healthImage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") no-repeat 0 0</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">healthStateHalf</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> healthState <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">backgroundSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'48px 16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>healthImage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") no-repeat -16px 0</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">healthStateEmpty</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> healthState <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">backgroundSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'48px 16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>healthImage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") no-repeat -32px 0</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">coin</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">backgroundSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px 16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coinImage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") no-repeat 0 0</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">coinFull</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'11px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">textShadow</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">-1px 0 #FFFFFF, 0 1px #FFFFFF, 1px 0 #FFFFFF, 0 -1px #FFFFFF</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#119923'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameHeadsUpDisplay</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> screenWidth<span class=\"token punctuation\">,</span> coins<span class=\"token punctuation\">,</span> healthState <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        screenWidth<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>hudContainer<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>healthContainer<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span>healthStates<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">healthState<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n                    <span class=\"token operator\">&lt;</span>div\r\n                        key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span>\r\n                        className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">classNames</span><span class=\"token punctuation\">(</span>classes<span class=\"token punctuation\">.</span>health<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n                            <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>healthStateFull<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> healthState <span class=\"token operator\">===</span> <span class=\"token string\">'full'</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>healthStateHalf<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> healthState <span class=\"token operator\">===</span> <span class=\"token string\">'half'</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>healthStateEmpty<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> healthState <span class=\"token operator\">===</span> <span class=\"token string\">'empty'</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>coinContainer<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>coin<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                <span class=\"token operator\">&lt;</span>span\r\n                    className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">classNames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                        <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>coinFull<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> coins <span class=\"token operator\">>=</span> <span class=\"token number\">999</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">></span>\r\n                    <span class=\"token punctuation\">{</span>coins<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">padStart</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GameHeadsUpDisplay<span class=\"token punctuation\">;</span></code></pre></div>\n<p>The code of the <code class=\"language-text\">collectCoin</code> function just sends a JavaScript event with the number of coins the hero has.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">collectCoin</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">heroCoins</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-coin'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">detail</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            heroCoins<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">restoreHealth</code> function is a bit more complex, as it has to deal with the possibility of empty, full, and half hearts.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">restoreHealth</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">healthToRestore</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> healthStates <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">length</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>maxHealth <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> health <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>health <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>health <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">return</span> <span class=\"token string\">'full'</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>health <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">return</span> <span class=\"token string\">'half'</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">return</span> <span class=\"token string\">'empty'</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-health'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">detail</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            healthStates<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Well now that I’m looking at it again, it’s not that complex, but it took me a while to make everything work well.</p>\n<p>So now my main <code class=\"language-text\">GameComponent</code> looks like the following with the HUD:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>heroCoins<span class=\"token punctuation\">,</span> setHeroCoins<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>heroHealthStates<span class=\"token punctuation\">,</span> setHeroHealthStates<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">heroCoinEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setHeroCoins</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>heroCoins<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-coin'</span><span class=\"token punctuation\">,</span> heroCoinEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">heroHealthEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setHeroHealthStates</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>healthStates<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-health'</span><span class=\"token punctuation\">,</span> heroHealthEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-coin'</span><span class=\"token punctuation\">,</span> heroCoinEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-health'</span><span class=\"token punctuation\">,</span> heroHealthEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>GameHeadsUpDisplay\r\n                coins<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>heroCoins<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/baaecacf779b133465977eb2a3eaeb10/collecting-items.gif\" alt=\"\"></p>\n<h2 id=\"teleporting-to-another-map\" style=\"position:relative;\"><a href=\"#teleporting-to-another-map\" aria-label=\"teleporting to another map permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Teleporting to another map</h2>\n<p>All the code done so far only works for one map, the <code class=\"language-text\">main-map</code>, however, my game has several maps, like houses, cities, and the overworld. Imagine having to copy all this code to other game scenes 😵.</p>\n<p>Instead of doing that, I’m going to use the <a href=\"https://photonstorm.github.io/phaser3-docs/Phaser.Types.Scenes.html#.SceneInitCallback\" target=\"_blank\" rel=\"noreferrer\">init() function of the Phaser.Scene class</a> to pass information about the hero and which map to load in <code class=\"language-text\">GameScene</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>initData <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> heroStatus<span class=\"token punctuation\">,</span> mapKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>initData<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> mapKey <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> initialPosition<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">health</span><span class=\"token operator\">:</span> heroHealth<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">coin</span><span class=\"token operator\">:</span> heroCoin<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> heroStatus<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateHeroHealthUi</span><span class=\"token punctuation\">(</span>heroHealth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateHeroCoinUi</span><span class=\"token punctuation\">(</span>heroCoin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> gridEngineConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">characters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> heroSprite<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> initialPosition<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now I can start my <code class=\"language-text\">GameScene</code> with the code <code class=\"language-text\">this.scene.start('GameScene', { heroStatus: { ...heroStatus }, mapKey: 'main-map' });</code>, and now I can start working on the code to teleport the hero between maps, and again I’m going to use Tiled’s object layer with a custom property named <code class=\"language-text\">teleportTo</code> with the value <code class=\"language-text\">mapKey:positionX:positionY</code>.</p>\n<p>But what about starting the same game scene that you’re already in? For that there is the <code class=\"language-text\">this.scene.restart()</code> function. So I’m going to create a custom collider to collide with the hero and teleport, add a fade-out, and pass all the hero and new map data to <code class=\"language-text\">this.scene.restart()</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getObjectLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'elements'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ndataLayer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> properties<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n\r\n    properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> property<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'teleportTo'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>mapKey<span class=\"token punctuation\">,</span> teleportToX<span class=\"token punctuation\">,</span> teleportToY<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">':'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">const</span> customCollider <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Rectangle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token constant\">SCENE_FADE_TIME</span> <span class=\"token operator\">=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">const</span> overlapCollider <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">,</span> customCollider<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>world<span class=\"token punctuation\">.</span><span class=\"token function\">removeCollider</span><span class=\"token punctuation\">(</span>overlapCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">const</span> facingDirection <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">getFacingDirection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    camera<span class=\"token punctuation\">.</span><span class=\"token function\">fadeOut</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SCENE_FADE_TIME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SCENE_FADE_TIME</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">restart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                            <span class=\"token literal-property property\">heroStatus</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                                <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> teleportToX<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> teleportToY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                                <span class=\"token literal-property property\">health</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>health<span class=\"token punctuation\">,</span>\r\n                                <span class=\"token literal-property property\">coin</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>coin<span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">mapKey</span><span class=\"token operator\">:</span> teleportToMapKey<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/639b8857e51b89d20ad24475f5c818f7/teleporting.gif\" alt=\"\"></p>\n<h2 id=\"special-thanks\" style=\"position:relative;\"><a href=\"#special-thanks\" aria-label=\"special thanks permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Special thanks</h2>\n<p>This game would not be possible without the help of some amazing people and their work, so here is my list of special thanks.</p>\n<ul>\n<li><a href=\"https://github.com/photonstorm\" target=\"_blank\" rel=\"noreferrer\">photonstorm</a>, for creating <a href=\"https://github.com/photonstorm/phaser\" target=\"_blank\" rel=\"noreferrer\">Phaser.io</a>.</li>\n<li><a href=\"https://github.com/Annoraaq\" target=\"_blank\" rel=\"noreferrer\">Annoraaq</a>, for creating the <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">grid-engine</a> plugin.</li>\n<li><a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, for the <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">characters sprites and tilesets</a>.</li>\n<li><a href=\"https://elthen.itch.io/\" target=\"_blank\" rel=\"noreferrer\">PixElthen</a>, for the <a href=\"https://elthen.itch.io/2d-pixel-art-small-slime-sprites\" target=\"_blank\" rel=\"noreferrer\">slime sprites</a>.</li>\n<li><a href=\"https://itch.io/profile/pixelartm\" target=\"_blank\" rel=\"noreferrer\">pixelartm</a>, for the <a href=\"https://opengameart.org/content/pirate-1\" target=\"_blank\" rel=\"noreferrer\">pirate hat sprites</a>.</li>\n<li><a href=\"https://opengameart.org/users/jkjkke\" target=\"_blank\" rel=\"noreferrer\">jkjkke</a>, for the <a href=\"https://opengameart.org/content/background-6\" target=\"_blank\" rel=\"noreferrer\">Game Over screen background</a>.</li>\n<li><a href=\"https://opengameart.org/users/knoblepersona\" target=\"_blank\" rel=\"noreferrer\">KnoblePersona</a>, for the <a href=\"https://opengameart.org/content/ocean-background\" target=\"_blank\" rel=\"noreferrer\">Main Menu screen background</a>.</li>\n<li><a href=\"https://opengameart.org/users/min\" target=\"_blank\" rel=\"noreferrer\">Min</a>, for the <a href=\"https://opengameart.org/content/open-book-0\" target=\"_blank\" rel=\"noreferrer\">open book sprite</a>.</li>\n</ul>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>It was a lot of fun creating this small project. I actually made this game as a new way to access my blog, but with all this boilerplate code done, I might end up making a new game out of it, let’s see 👀.</p>\n<p>There is more code into the “real” game than shown here in this blog post, so go check out <a href=\"https://github.com/blopa/top-down-react-phaser-game\" target=\"_blank\" rel=\"noreferrer\">the GitHub repo for this project</a>.</p>\n<p>See you in the next one!</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTA4VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-08-how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react.en/","path":"/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/","locale":"en"},"rawMarkdownBody":"My first experience in \"programming\" started in 2002, when I was making games with RPG Maker, when I learned what a variable, data persistence, and loops were.\r\n\r\nI never got to publish any of the games I made, but it was kind of always my dream so now that I have about 2 years of Phaser experience, I decided to make a small game in the same style as the RPG Makers I used to make. in 2002.\r\n\r\n## Integrating React with Phaser\r\nPhaser works by rendering pixels inside a `canvas` element in the DOM, and it's great, but one of the great features of web development is the power of the DOM and CSS to create great UI elements, and you can't do that with Phaser alone.\r\n\r\nThe simplest way to use Phaser with React is with a functional component like the one below.\r\n\r\n```javascript\r\nimport React from 'react';\r\nimport Phaser from 'phaser';\r\n\r\nfunction GameComponent() {\r\n    const game = new Phaser.Game({\r\n        ...configs,\r\n        parent: 'game-content',\r\n    });\r\n\r\n    return <div id=\"game-content\" />;\r\n};\r\n\r\nexport default GameComponent;\r\n```\r\n## Using React for the game UI\r\nTo make Phaser communicate back and forth with React, like to show a menu item or a dialog box, I will dispatch JavaScript events between Phaser and React.\r\n\r\nThe best way to do it would be with some sort of state management tool like [Flux](https://facebook.github.io/flux/), but since this is just a very small project, dispatching JavaScript events will work for now.\r\n\r\n```javascript\r\n// React component\r\nfunction GameComponent() {\r\n    const [messages, setMessage] = useState('');\r\n    const [showDialogBox, setShowDialogBox] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const dialogBoxEventListener = ({ detail }) => {\r\n            setMessage(detail.message);\r\n            setShowDialogBox(true);\r\n        };\r\n        window.addEventListener('start-dialog', dialogBoxEventListener);\r\n\r\n        return () => {\r\n            window.removeEventListener('start-dialog', dialogBoxEventListener);\r\n        };\r\n    });\r\n\r\n    const handleMessageIsDone = useCallback(() => {\r\n        const customEvent = new CustomEvent('end-dialog');\r\n        window.dispatchEvent(customEvent);\r\n\r\n        setMessage('');\r\n        setShowDialogBox(false);\r\n    }, [characterName]);\r\n\r\n    return (\r\n        <>\r\n            {showDialogBox && (\r\n                <DialogBox\r\n                    message={message}\r\n                    onDone={handleMessageIsDone}\r\n                />\r\n            )}\r\n            <div id=\"game-content\" />\r\n        </>\r\n    );\r\n};\r\n\r\n// Phaser scene\r\nclass GameScene extends Phaser.Scene {\r\n    constructor() {\r\n        super('GameScene');\r\n    }\r\n\r\n    create() {\r\n        const dialogBoxFinishedEventListener = () => {\r\n            window.removeEventListener('end-dialog', dialogBoxFinishedEventListener);\r\n            // Do whatever is needed when the dialog is over\r\n        };\r\n        window.addEventListener('end-dialog', dialogBoxFinishedEventListener);\r\n    }\r\n}\r\n```\r\n\r\n![Dialog box](../../uploads/blog/2021/10/react-dialog-box.gif)\r\n\r\nIf you want more details on how to create a React dialog box for your Phaser game, [check my blog post on it](/en/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/).\r\n\r\n## Using grid-engine and loading Tiled map\r\nTo create the map I will again use Tiled, which is a FOSS in which you can create maps and use them in almost any game engine.\r\n\r\nThe `tileset` I'm using for my map is the [Zelda-like tileset](https://opengameart.org/content/zelda-like-tilesets-and-sprites) created by [ArMM1998](https://itch.io/profile/armm1998), which includes indoor and outdoor tilesets.\r\n\r\nAfter the map is done, [I will embed the tileset into the map](/en/blog/games/automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script/), and then I can simply import the map and `tileset` file into my game and load them in Phaser.\r\n\r\n```javascript\r\nimport mainMapaJson from '../../../content/assets/game/maps/main-map.json';\r\nimport tilesetImage from '../../../content/assets/game/maps/tileset.png';\r\n\r\nclass GameScene extends Phaser.Scene {\r\n    constructor() {\r\n        super('GameScene');\r\n    }\r\n\r\n    preload() {\r\n        this.load.tilemapTiledJSON('main-map', mainMapaJson);\r\n        this.load.image('tileset', tilesetImage);\r\n    }\r\n}\r\n```\r\n\r\nNow to add the grid-engine into Phaser, just configure your game to use arcade physics and add grid-engine as a plugin, like shown below.\r\n\r\n```javascript\r\nconst game = new Phaser.Game({\r\n    ...configs,\r\n    parent: 'game-content',\r\n    physics: {\r\n        default: 'arcade',\r\n    },\r\n    plugins: {\r\n        scene: [{\r\n                key: 'gridEngine',\r\n                plugin: GridEngine,\r\n                mapping: 'gridEngine',\r\n            }],\r\n    },\r\n});\r\n```\r\n\r\nNow I can access the plugin via `this.gridEngine` inside any Phaser game scene. The next step is to create a sprite and move it with the grid-engine plugin.\r\n\r\n```javascript\r\ncreate() {\r\n    this.tileWidth = 16;\r\n    this.tileHeight = 16;\r\n\r\n    const map = this.make.tilemap({ key: 'main-map' });\r\n    map.addTilesetImage('tileset', 'tileset');\r\n    map.layers.forEach((layer, index) => {\r\n        map.createLayer(index, 'tileset', 0, 0);\r\n    });\r\n\r\n    const heroSprite = this.physics.add.sprite(0, 0, 'hero');\r\n\r\n    const gridEngineConfig = {\r\n        characters: [{\r\n            id: 'hero',\r\n            sprite: heroSprite,\r\n            startPosition: { x: 1, y: 1 },\r\n        }],\r\n    };\r\n    this.gridEngine.create(map, gridEngineConfig);\r\n}\r\n\r\nupdate() {\r\n    const cursors = this.input.keyboard.createCursorKeys();\r\n\r\n    if (cursors.left.isDown) {\r\n        this.gridEngine.move('hero', 'left');\r\n    } else if (cursors.right.isDown) {\r\n        this.gridEngine.move('hero', 'right');\r\n    } else if (cursors.up.isDown) {\r\n        this.gridEngine.move('hero', 'up');\r\n    } else if (cursors.down.isDown) {\r\n        this.gridEngine.move('hero', 'down');\r\n    }\r\n}\r\n```\r\n\r\nThis code was pretty much copied and pasted from [their official documentation page](https://annoraaq.github.io/grid-engine/examples/basic-movement.html).\r\n\r\nTo make collisions work automatically with a map created on Tiled, just add the property `ge_collide` set to `true` for the tiles the hero is supposed to collide with.\r\n\r\nNotice that this will make the hero move and collide with objects, but there is no walking animation. To create new sprite animations I will use the `this.anims.create()` function, and then play that animation every time the grid-engine tells me that the player moved, with the `movementStarted`, `movementStopped` and `directionChanged` events dispatched by the grid-engine.\r\n\r\n```javascript\r\ncreate() {\r\n    const heroSprite = this.physics.add.sprite(0, 0, 'hero');\r\n    this.createHeroWalkingAnimation('up');\r\n    this.createHeroWalkingAnimation('right');\r\n    this.createHeroWalkingAnimation('down');\r\n    this.createHeroWalkingAnimation('left');\r\n\r\n    this.gridEngine.create(map, gridEngineConfig);\r\n    this.gridEngine.movementStarted().subscribe(({ direction }) => {\r\n        heroSprite.anims.play(direction);\r\n    });\r\n\r\n    this.gridEngine.movementStopped().subscribe(({ direction }) => {\r\n        heroSprite.anims.stop();\r\n        heroSprite.setFrame('down_01');\r\n    });\r\n\r\n    this.gridEngine.directionChanged().subscribe(({ direction }) => {\r\n        heroSprite.setFrame('down_01');\r\n    });\r\n}\r\n\r\ncreateHeroWalkingAnimation(direction) {\r\n    this.anims.create({\r\n        key: direction,\r\n        frames: [\r\n            { key: 'hero', frame: `${direction}_01` },\r\n            { key: 'hero', frame: `${direction}_02` },\r\n        ],\r\n        frameRate: 4,\r\n        repeat: -1,\r\n        yoyo: true,\r\n    });\r\n}\r\n```\r\n\r\n## Creating hero interactions\r\nThe hero must be able to interact with the world, for example going into an NPC and talking to them.\r\n\r\nThat sounds simple, but how to achieve that with Phaser? There are many ways to do it, but the easiest is to create a custom collider that will always be in front of the hero, and that custom collider will interact with all objects in the game.\r\n\r\nFirst I'm going to create an object using the `Phaser.GameObjects.Rectangle` class:\r\n\r\n```javascript\r\nthis.heroActionCollider =\r\n    new GameObjects.Rectangle(this, 0, 0, 14, 8).setOrigin(0, 1);\r\nthis.physics.add.existing(this.heroActionCollider);\r\nthis.heroActionCollider.body.setImmovable(true);\r\n```\r\n\r\nNow I need to make this custom collider always stay in front of the hero, for that I'm going to use the `update` function.\r\n\r\n```javascript\r\nupdate() {\r\n    const facingDirection = this.gridEngine.getFacingDirection('hero');\r\n\r\n    switch (facingDirection) {\r\n        case 'down': {\r\n            this.heroActionCollider.setSize(14, 8);\r\n            this.heroActionCollider.body.setSize(14, 8);\r\n            this.heroActionCollider.setX(this.heroSprite.x + 9);\r\n            this.heroActionCollider.setY(this.heroSprite.y + 36);\r\n\r\n            break;\r\n        }\r\n\r\n        case 'up': {\r\n            this.heroActionCollider.setSize(14, 8);\r\n            this.heroActionCollider.body.setSize(14, 8);\r\n            this.heroActionCollider.setX(this.heroSprite.x + 9);\r\n            this.heroActionCollider.setY(this.heroSprite.y + 12);\r\n\r\n            break;\r\n        }\r\n\r\n        case 'left': {\r\n            this.heroActionCollider.setSize(8, 14);\r\n            this.heroActionCollider.body.setSize(8, 14);\r\n            this.heroActionCollider.setX(this.heroSprite.x);\r\n            this.heroActionCollider.setY(this.heroSprite.y + 21);\r\n\r\n            break;\r\n        }\r\n\r\n        case 'right': {\r\n            this.heroActionCollider.setSize(8, 14);\r\n            this.heroActionCollider.body.setSize(8, 14);\r\n            this.heroActionCollider.setX(this.heroSprite.x + 24);\r\n            this.heroActionCollider.setY(this.heroSprite.y + 21);\r\n\r\n            break;\r\n        }\r\n\r\n        default: {\r\n            // will never happen\r\n            break;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## Adding interactive tiles\r\nNow that I have the `this.heroActionCollider` variable, let's make the world a bit more interactive. I want the hero to be able to cut grass and the push boxes, so first I will create a layer called `test` in my map and add the grass and box tiles.\r\n\r\n```javascript\r\nmap.layers.forEach((layer, index) => {\r\n    map.createLayer(index, 'tileset', 0, 0);\r\n\r\n    if (layer.name === 'test') {\r\n        layer.data.flat().forEach((tile) => console.log(tile.index));\r\n    }\r\n});\r\n```\r\n\r\nIn my case, my grass tile index is `428`, and my box tile index is `427`, and with this information, I can start coding my interactions.\r\n\r\nFirst I will create a `GameGroup` with `this.add.group()` and add my interactive layers to it, and then create an overlap between `this.heroActionCollider` and `interactiveLayers` with the `this.physics.add.overlap()` function.\r\n\r\n```javascript\r\nconst interactiveLayers = this.add.group();\r\nmap.layers.forEach((layer, index) => {\r\n    map.createLayer(index, 'tileset', 0, 0);\r\n\r\n    if (layer.name === 'interactions') {\r\n        interactiveLayers.add(layer);\r\n    }\r\n});\r\n\r\nconst GRASS_INDEX = 428;\r\nconst BOX_INDEX = 427;\r\n\r\nthis.physics.add.overlap(this.heroActionCollider, interactiveLayers, (objA, objB) => {\r\n    const tile = [objA, objB].find((obj) => obj !== this.heroActionCollider);\r\n\r\n    if (tile?.index > 0 && !tile.wasHandled) {\r\n        switch (tile.index) {\r\n            case GRASS_INDEX: {\r\n                tile.wasHandled = true;\r\n                break;\r\n            }\r\n\r\n            case BOX_INDEX: {\r\n                tile.wasHandled = true;\r\n                break;\r\n            }\r\n\r\n            default: {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n});\r\n```\r\n\r\nFor the cutting grass action, I will check if the `SPACE` key is down with `Input.Keyboard.JustDown()`, and if it is, destroy that tile.\r\n\r\n```javascript\r\nthis.spaceKey = this.input.keyboard.addKey(Input.Keyboard.KeyCodes.SPACE);\r\n\r\nthis.physics.add.overlap(this.heroActionCollider, interactiveLayers, (objA, objB) => {\r\n    const tile = [objA, objB].find((obj) => obj !== this.heroActionCollider);\r\n\r\n    if (tile?.index > 0 && !tile.wasHandled) {\r\n        switch (tile.index) {\r\n            case GRASS_INDEX: {\r\n                if (Input.Keyboard.JustDown(this.spaceKey)) {\r\n                    tile.wasHandled = true;\r\n\r\n                    // Wait a little bit for the attack animation to be over\r\n                    this.time.delayedCall(\r\n                        50,\r\n                        () => {\r\n                            tile.setVisible(false);\r\n                            tile.destroy();\r\n                        }\r\n                    );\r\n                }\r\n\r\n                break;\r\n            }\r\n        }\r\n    }\r\n});\r\n```\r\n\r\nFor the pushing box action, I will also check if the `SPACE` key is down, and then move the tile with `this.tweens.add()`.\r\n\r\n```javascript\r\nthis.spaceKey = this.input.keyboard.addKey(Input.Keyboard.KeyCodes.SPACE);\r\n\r\nthis.physics.add.overlap(this.heroActionCollider, interactiveLayers, (objA, objB) => {\r\n    const tile = [objA, objB].find((obj) => obj !== this.heroActionCollider);\r\n\r\n    if (tile?.index > 0 && !tile.wasHandled) {\r\n        switch (tile.index) {\r\n            case BOX_INDEX: {\r\n                if (Input.Keyboard.JustDown(this.spaceKey)) {\r\n                    tile.wasHandled = true;\r\n                    const newPosition = this.calculatePushedTilePosition();\r\n\r\n                    this.tweens.add({\r\n                        targets: tile,\r\n                        pixelX: newPosition.x,\r\n                        pixelY: newPosition.y,\r\n                        ease: 'Power2',\r\n                        duration: 700,\r\n                        onComplete: this.handlePushedTileCompleted(tile),\r\n                    });\r\n                }\r\n\r\n                break;\r\n            }\r\n        }\r\n    }\r\n});\r\n```\r\n\r\nThis code contains 2 mysterious 🕵️ functions, `calculatePushedTilePosition` and `handlePushedTileCompleted`. The first one will calculate the new tile position after being pushed based on the hero position.\r\n\r\n```javascript\r\ncalculatePushedTilePosition() {\r\n    const facingDirection = this.gridEngine.getFacingDirection('hero');\r\n    const position = this.gridEngine.getPosition('hero');\r\n\r\n    switch (facingDirection) {\r\n        case 'up':\r\n            return {\r\n                x: position.x * this.tileWidth,\r\n                y: (position.y - 2) * this.tileHeight,\r\n            };\r\n\r\n        case 'right':\r\n            return {\r\n                x: (position.x + 2) * this.tileWidth,\r\n                y: position.y * this.tileHeight,\r\n            };\r\n\r\n        case 'down':\r\n            return {\r\n                x: position.x * this.tileWidth,\r\n                y: (position.y + 2) * this.tileHeight,\r\n            };\r\n\r\n        case 'left':\r\n            return {\r\n                x: (position.x - 2) * this.tileWidth,\r\n                y: position.y * this.tileHeight,\r\n            };\r\n\r\n        default:\r\n            return {\r\n                x: position.x * this.tileWidth,\r\n                y: position.y * this.tileHeight,\r\n            };\r\n    }\r\n}\r\n```\r\n\r\nThe `handlePushedTileCompleted` function will remove the pushed tile and create a new one in the new position. This needs to be done because even though the tile position changed, the collision stays in the original position, I don't know if this is by design or a bug on Phaser or in the grid-engine plugin.\r\n\r\n```javascript\r\nhandlePushedTileCompleted(tile) {\r\n    const newTile = tile.layer.tilemapLayer.putTileAt(\r\n        tile.index,\r\n        newPosition.x / this.tileWidth,\r\n        newPosition.y / this.tileHeight,\r\n        true\r\n    );\r\n\r\n    newTile.properties = {\r\n        ...tile.properties,\r\n    };\r\n    newTile.wasHandled = true;\r\n\r\n    tile.setVisible(false);\r\n    tile.destroy();\r\n}\r\n```\r\n\r\n![Cutting grass](../../uploads/blog/2021/10/cutting-grass.gif)\r\n\r\n## Adding enemies\r\nTo add enemies to the map, I will use Tiled objects layer, which I can access via the function `map.getObjectLayer()`. First I will create an object layer called `elements` and add some tiles with the \"Insert Tile\" button.\r\n\r\n![Insert a tile](../../uploads/blog/2021/10/tiled-insert-tile.png)\r\n\r\nI will also add a custom property `enemyData` to this added tile with the value `slime_red:follow:1:100`, which will be all the properties of my enemy, this values separated by **\":**\" are `enemyType:AIType:speed:health`. To get this values I will split the string and store all these data into an array to use later.\r\n\r\n```javascript\r\nconst enemiesData = [];\r\nconst dataLayer = map.getObjectLayer('elements');\r\ndataLayer.objects.forEach((data) => {\r\n    const { properties, x, y } = data;\r\n\r\n    properties.forEach((property) => {\r\n        const { name, type, value } = property;\r\n\r\n        switch (name) {\r\n            case 'enemyData': {\r\n                const [enemyType, enemyAI, speed, health] = value.split(':');\r\n                enemiesData.push({\r\n                    x,\r\n                    y,\r\n                    speed: Number.parseInt(speed, 10),\r\n                    enemyType,\r\n                    enemySpecies: this.getEnemySpecies(enemyType),\r\n                    enemyAI,\r\n                    enemyName: `${enemyType}_${enemiesData.length}`,\r\n                    health: Number.parseInt(health, 10),\r\n                });\r\n\r\n                break;\r\n            }\r\n\r\n            default: {\r\n                break;\r\n            }\r\n        }\r\n    });\r\n});\r\n```\r\n\r\nNow the `enemiesData` variable contains all the data for all the enemies on the map, so all that is left is to create enemy sprites with `this.physics.add.sprite()` and add them to the `gridEngineConfig.characters` array.\r\n\r\n```javascript\r\nthis.enemiesSprites = this.add.group();\r\nenemiesData.forEach((enemyData, index) => {\r\n    const { enemySpecies, enemyType, x, y, enemyName, speed, enemyAI, health } = enemyData;\r\n    const enemy = this.physics.add.sprite(0, 0, enemyType);\r\n\r\n    if (enemyType.includes('red')) {\r\n        enemy.setTint(0xF1374B);\r\n    } else if (enemyType.includes('green')) {\r\n        enemy.setTint(0x2BBD6E);\r\n    } else if (enemyType.includes('yellow')) {\r\n        enemy.setTint(0xFFFF4F);\r\n    } else if (enemyType.includes('blue')) {\r\n        enemy.setTint(0x00A0DC);\r\n    }\r\n\r\n    enemy.name = enemyName;\r\n    enemy.enemyType = enemyType;\r\n    enemy.enemySpecies = enemySpecies;\r\n    enemy.enemyAI = enemyAI;\r\n    enemy.speed = speed;\r\n    enemy.health = health;\r\n\r\n    this.enemiesSprites.add(enemy);\r\n\r\n    gridEngineConfig.characters.push({\r\n        id: enemyName,\r\n        sprite: enemy,\r\n        startPosition: { x: x / this.tileWidth, y: (y / this.tileHeight) },\r\n        speed,\r\n    });\r\n});\r\n```\r\n\r\nTo make the enemy follow the hero, I will simply use the [this.gridEngine.follow() function](https://annoraaq.github.io/grid-engine/api/methods.html#follow).\r\n\r\n![](../../uploads/blog/2021/10/slime-enemy.gif)\r\n\r\n## Adding items\r\nFor the items I will again use the Tiled objects layer I already created, called `elements`. For now, I'm going to add two different items to the game, coins, and hearts, with a custom property called `itemData`.\r\n\r\n```javascript\r\nthis.itemsSprites = this.add.group();\r\nconst dataLayer = map.getObjectLayer('elements');\r\ndataLayer.objects.forEach((data) => {\r\n    const { properties, x, y } = data;\r\n\r\n    properties.forEach((property) => {\r\n        const { name, type, value } = property;\r\n\r\n        switch (name) {\r\n            case 'itemData': {\r\n                // it's only one value... for now.\r\n                const [itemType] = value.split(':');\r\n\r\n                switch (itemType) {\r\n                    case 'coin': {\r\n                        const item = this.physics.add\r\n                            .sprite(x, y, 'coin')\r\n                            .setDepth(1)\r\n                            .setOrigin(0, 1);\r\n\r\n                        item.itemType = 'coin';\r\n                        this.itemsSprites.add(item);\r\n                        break;\r\n                    }\r\n\r\n                    case 'heart': {\r\n                        const item = this.physics.add\r\n                            .sprite(x, y, 'heart')\r\n                            .setDepth(1)\r\n                            .setOrigin(0, 1);\r\n\r\n                        item.itemType = 'heart';\r\n                        this.itemsSprites.add(item);\r\n                        break;\r\n                    }\r\n\r\n                    default: {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                break;\r\n            }\r\n\r\n            default: {\r\n                break;\r\n            }\r\n        }\r\n    });\r\n});\r\n```\r\n\r\nNow I just need to overlap the hero and the item group in the `this.itemsSprites` variable.\r\n\r\n```javascript\r\nthis.physics.add.overlap(this.heroSprite, this.itemsSprites, (objA, objB) => {\r\n    const item = [objA, objB].find((obj) => obj !== this.heroSprite);\r\n\r\n    if (item.itemType === 'heart') {\r\n        this.heroSprite.restoreHealth(20);\r\n        item.setVisible(false);\r\n        item.destroy();\r\n    }\r\n\r\n    if (item.itemType === 'coin') {\r\n        this.heroSprite.collectCoin(1);\r\n        item.setVisible(false);\r\n        item.destroy();\r\n    }\r\n});\r\n```\r\n\r\n## Using React for the HUD\r\nIn the overlap code with the items, I didn't explain how the `restoreHealth` and `collectCoin` functions work, as they communicate directly with React, so first let's see what this component looks like.\r\n\r\nThe HUD component in React is quite simple and contains 3 props, an integer `screenWidth`, for the placement of the HUD on the screen, an integer `coins`, to show the amount of collected coins, and a `healthState` array, with the amount of hearts and whether they are empty, full or half.\r\n\r\n```javascript\r\nimport React from 'react';\r\nimport coinImage from '../images/coin.png';\r\nimport healthImage from '../images/health.png';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    hudContainer: ({ screenWidth }) => {\r\n        const left = window.innerWidth - screenWidth;\r\n        return {\r\n            fontFamily: '\"Press Start 2P\"',\r\n            fontSize: '12px',\r\n            textTransform: 'uppercase',\r\n            imageRendering: 'pixelated',\r\n            position: 'absolute',\r\n            top: '16px',\r\n            left: `${16 + (left / 2)}px`,\r\n            display: 'flex',\r\n            cursor: 'default',\r\n            userSelect: 'none',\r\n        };\r\n    },\r\n    health: () => ({\r\n        width: '16px',\r\n        height: '16px',\r\n    }),\r\n    healthStateFull: () => ({\r\n        backgroundSize: '48px 16px',\r\n        background: `url(\"${healthImage}\") no-repeat 0 0`,\r\n    }),\r\n    healthStateHalf: ({ healthState }) => ({\r\n        backgroundSize: '48px 16px',\r\n        background: `url(\"${healthImage}\") no-repeat -16px 0`,\r\n    }),\r\n    healthStateEmpty: ({ healthState }) => ({\r\n        backgroundSize: '48px 16px',\r\n        background: `url(\"${healthImage}\") no-repeat -32px 0`,\r\n    }),\r\n    coin: () => ({\r\n        backgroundSize: '16px 16px',\r\n        background: `url(\"${coinImage}\") no-repeat 0 0`,\r\n        width: '16px',\r\n        height: '16px',\r\n    }),\r\n    coinFull: () => {\r\n        return {\r\n            fontSize: '11px',\r\n            textShadow: `-1px 0 #FFFFFF, 0 1px #FFFFFF, 1px 0 #FFFFFF, 0 -1px #FFFFFF`,\r\n            color: '#119923',\r\n        };\r\n    },\r\n}));\r\n\r\nfunction GameHeadsUpDisplay({ screenWidth, coins, healthState }) {\r\n    const classes = useStyles({\r\n        screenWidth,\r\n    });\r\n    \r\n    return (\r\n        <div className={classes.hudContainer}>\r\n            <div className={classes.healthContainer}>\r\n                {healthStates.map((healthState, index) => (\r\n                    <div\r\n                        key={index}\r\n                        className={classNames(classes.health, {\r\n                            [classes.healthStateFull]: healthState === 'full',\r\n                            [classes.healthStateHalf]: healthState === 'half',\r\n                            [classes.healthStateEmpty]: healthState === 'empty',\r\n                        })}\r\n                    />\r\n                ))}\r\n            </div>\r\n            <div className={classes.coinContainer}>\r\n                <div className={classes.coin} />\r\n                <span\r\n                    className={classNames({\r\n                        [classes.coinFull]: coins >= 999,\r\n                    })}\r\n                >\r\n                    {coins.toString().padStart(3, '0')}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GameHeadsUpDisplay;\r\n```\r\n\r\nThe code of the `collectCoin` function just sends a JavaScript event with the number of coins the hero has.\r\n\r\n```javascript\r\ncollectCoin(heroCoins) {\r\n    const customEvent = new CustomEvent('hero-coin', {\r\n        detail: {\r\n            heroCoins,\r\n        },\r\n    });\r\n\r\n    window.dispatchEvent(customEvent);\r\n}\r\n```\r\n\r\nThe `restoreHealth` function is a bit more complex, as it has to deal with the possibility of empty, full, and half hearts.\r\n\r\n```javascript\r\nrestoreHealth(healthToRestore) {\r\n    const healthStates = Array.from({ length: this.heroSprite.maxHealth / 2 })\r\n        .fill(null).map(\r\n            (value, index) => {\r\n                const health = Math.max(this.heroSprite.health - (2 * index), 0);\r\n                if (health > 1) {\r\n                    return 'full';\r\n                }\r\n\r\n                if (health > 0) {\r\n                    return 'half';\r\n                }\r\n\r\n                return 'empty';\r\n            }\r\n        );\r\n\r\n    const customEvent = new CustomEvent('hero-health', {\r\n        detail: {\r\n            healthStates,\r\n        },\r\n    });\r\n\r\n    window.dispatchEvent(customEvent);\r\n}\r\n```\r\n\r\nWell now that I'm looking at it again, it's not that complex, but it took me a while to make everything work well.\r\n\r\nSo now my main `GameComponent` looks like the following with the HUD:\r\n\r\n```javascript\r\nfunction GameComponent() {\r\n    const [heroCoins, setHeroCoins] = useState(null);\r\n    const [heroHealthStates, setHeroHealthStates] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const heroCoinEventListener = ({ detail }) => {\r\n            setHeroCoins(detail.heroCoins);\r\n        };\r\n        window.addEventListener('hero-coin', heroCoinEventListener);\r\n\r\n        const heroHealthEventListener = ({ detail }) => {\r\n            setHeroHealthStates(detail.healthStates);\r\n        };\r\n        window.addEventListener('hero-health', heroHealthEventListener);\r\n\r\n        return () => {\r\n            window.removeEventListener('hero-coin', heroCoinEventListener);\r\n            window.removeEventListener('hero-health', heroHealthEventListener);\r\n        };\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <GameHeadsUpDisplay\r\n                coins={heroCoins}\r\n            />\r\n            <div id=\"game-content\" />\r\n        </>\r\n    );\r\n};\r\n```\r\n\r\n![](../../uploads/blog/2021/10/collecting-items.gif)\r\n\r\n## Teleporting to another map\r\nAll the code done so far only works for one map, the `main-map`, however, my game has several maps, like houses, cities, and the overworld. Imagine having to copy all this code to other game scenes 😵.\r\n\r\nInstead of doing that, I'm going to use the [init() function of the Phaser.Scene class](https://photonstorm.github.io/phaser3-docs/Phaser.Types.Scenes.html#.SceneInitCallback) to pass information about the hero and which map to load in `GameScene`.\r\n\r\n```javascript\r\ninit(data) {\r\n    this.initData = data;\r\n}\r\n\r\ncreate() {\r\n    const { heroStatus, mapKey } = this.initData;\r\n\r\n    const map = this.make.tilemap({ key: mapKey });\r\n    map.addTilesetImage('tileset', 'tileset');\r\n    map.layers.forEach((layer, index) => {\r\n        map.createLayer(index, 'tileset', 0, 0);\r\n    });\r\n\r\n    const {\r\n        position: initialPosition,\r\n        health: heroHealth,\r\n        coin: heroCoin,\r\n    } = heroStatus;\r\n\r\n    const heroSprite = this.physics.add.sprite(0, 0, 'hero');\r\n    this.updateHeroHealthUi(heroHealth);\r\n    this.updateHeroCoinUi(heroCoin);\r\n\r\n    const gridEngineConfig = {\r\n        characters: [{\r\n            id: 'hero',\r\n            sprite: heroSprite,\r\n            startPosition: initialPosition,\r\n        }],\r\n    };\r\n    this.gridEngine.create(map, gridEngineConfig);\r\n}\r\n```\r\n\r\nNow I can start my `GameScene` with the code `this.scene.start('GameScene', { heroStatus: { ...heroStatus }, mapKey: 'main-map' });`, and now I can start working on the code to teleport the hero between maps, and again I'm going to use Tiled's object layer with a custom property named `teleportTo` with the value `mapKey:positionX:positionY`.\r\n\r\nBut what about starting the same game scene that you're already in? For that there is the `this.scene.restart()` function. So I'm going to create a custom collider to collide with the hero and teleport, add a fade-out, and pass all the hero and new map data to `this.scene.restart()`.\r\n\r\n```javascript\r\nthis.itemsSprites = this.add.group();\r\nconst dataLayer = map.getObjectLayer('elements');\r\ndataLayer.objects.forEach((data) => {\r\n    const { properties, x, y } = data;\r\n\r\n    properties.forEach((property) => {\r\n        const { name, type, value } = property;\r\n\r\n        switch (name) {\r\n            case 'teleportTo': {\r\n                const [mapKey, teleportToX, teleportToY] = value.split(':');\r\n                const customCollider = new GameObjects.Rectangle(this, x, y, 16, 16).setOrigin(0, 1);\r\n                const SCENE_FADE_TIME = 300;\r\n\r\n                const overlapCollider = this.physics.add.overlap(this.heroSprite, customCollider, () => {\r\n                    this.physics.world.removeCollider(overlapCollider);\r\n                    const facingDirection = this.gridEngine.getFacingDirection('hero');\r\n                    camera.fadeOut(SCENE_FADE_TIME);\r\n\r\n                    this.time.delayedCall(SCENE_FADE_TIME, () => {\r\n                        this.scene.restart({\r\n                            heroStatus: {\r\n                                position: { x: teleportToX, y: teleportToY },\r\n                                health: this.heroSprite.health,\r\n                                coin: this.heroSprite.coin,\r\n                            },\r\n                            mapKey: teleportToMapKey,\r\n                        });\r\n                    });\r\n                });\r\n\r\n                break;\r\n            }\r\n\r\n            default: {\r\n                break;\r\n            }\r\n        }\r\n    });\r\n});\r\n```\r\n\r\n![](../../uploads/blog/2021/10/teleporting.gif)\r\n\r\n## Special thanks\r\nThis game would not be possible without the help of some amazing people and their work, so here is my list of special thanks.\r\n\r\n- [photonstorm](https://github.com/photonstorm), for creating [Phaser.io](https://github.com/photonstorm/phaser).\r\n- [Annoraaq](https://github.com/Annoraaq), for creating the [grid-engine](https://github.com/Annoraaq/grid-engine) plugin.\r\n- [ArMM1998](https://itch.io/profile/armm1998), for the [characters sprites and tilesets](https://opengameart.org/content/zelda-like-tilesets-and-sprites).\r\n- [PixElthen](https://elthen.itch.io/), for the [slime sprites](https://elthen.itch.io/2d-pixel-art-small-slime-sprites).\r\n- [pixelartm](https://itch.io/profile/pixelartm), for the [pirate hat sprites](https://opengameart.org/content/pirate-1).\r\n- [jkjkke](https://opengameart.org/users/jkjkke), for the [Game Over screen background](https://opengameart.org/content/background-6).\r\n- [KnoblePersona](https://opengameart.org/users/knoblepersona), for the [Main Menu screen background](https://opengameart.org/content/ocean-background).\r\n- [Min](https://opengameart.org/users/min), for the [open book sprite](https://opengameart.org/content/open-book-0).\r\n\r\n## Conclusion\r\nIt was a lot of fun creating this small project. I actually made this game as a new way to access my blog, but with all this boilerplate code done, I might end up making a new game out of it, let's see 👀.\r\n\r\nThere is more code into the \"real\" game than shown here in this blog post, so go check out [the GitHub repo for this project](https://github.com/blopa/top-down-react-phaser-game).\r\n\r\nSee you in the next one!\r\n","frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","react","dialog box","rpg","rpg maker"],"categories":["coding"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-10-08T00:00:00.000Z","id":null,"path":"how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react","show":true,"title":"How to create a top-down RPG Maker like game with Phaser JS and React","hideExcerpt":null,"subtitle":null}},"language":"en","intl":{"language":"en","languages":["en","pt-br"],"messages":{"site_title":"pablo.gg","title":"Title","author":"@thepiratepablo","search_placeholder":"Search...","about":"About","photos":"Photos","archive":"Archive","contact":"Contact","close":"Close","contact_page":"Contact page","see_more":"See more posts","built_with":"Built with ","buy_me_a_soda":"Buy me a soda","blog":"Blog","blog_posts":"Blog posts","go_to_post":"Go to post","search":"Search","loading":"Loading...","search_results":"Search results","search_results_for":"{quantity} search results for: \"{query}\"","search_for_query":"Search for \"{query}\"","no_results":"No results","home":"Home","description":"Yet another developer personal blog","go_back":"Go back to the homepage","thats_me":"That's me!","got_it":"Got it!","check_it_out":"Check it out!","we_are":"We are","e3":"E3","away_from_next_sgf":"away from Summer Game Fest 2025","away_from_next_gamescom":"away from Gamescom 2024","sgf_countdown":"Summer Game Fest Countdown","gamescom_countdown":"Gamescom Countdown","e3_paragraph_1":"This page once featured a countdown to the next E3 event, a moment that countless gamers and industry professionals looked forward to each year. E3 was not just an event; it was a celebration of our shared passion for video games, a place where dreams were realized, and memories were made.","e3_paragraph_2":"From the electrifying announcements to the hands-on demos, E3 was the heartbeat of the gaming world. It brought together people from all corners of the globe, united by their love for games. For many, it was a chance to meet their heroes, discover new titles, and experience the thrill of the latest innovations in gaming technology.","e3_paragraph_3":"However, as the gaming landscape has evolved, so too has the way we connect and celebrate our passion. While E3 has come to an end, the spirit of excitement and community it fostered lives on. We now look forward to new ways of coming together, sharing our love for games, and creating new memories.","e3_paragraph_4":"Though the countdown is gone, the legacy of E3 will forever remain in our hearts, reminding us of the incredible journeys we've taken and the bonds we've formed along the way.","sec":"Sec","secs":"Secs","min":"Min","mins":"Mins","hour":"Hour","hours":"Hours","day":"Day","days":"Days","month":"Month","months":"Months","year":"Year","years":"Years","recent_posts":"Recent posts","email":"Email","twitter":"Twitter","name":"Name","page":"Page","fill_this_want_reply":"Fill this in if you want me to contact you back","sorry_this_post_unavailable_language":"Sorry, this post is not available in the language you picked","language":"Language","comment":"Comment","comments":"Comments","no_comments":"No comments yet.","post_comment":"Post comment","send_message":"Send message","message":"Message","post_a_comment":"Post a comment","your_comment_submitted":"Your comment has been successfully submitted.","your_message_submitted":"Your message has been successfully submitted.","on":"on","ok":"Ok","copy":"Copy","copied":"Copied","photo_num":"Photo {num}","the_matrix_has_you":"The Matrix has you...","about_paragraph_1":"A technology enthusiast from an early age, I have always been interested in computers and video games.","about_paragraph_2":"I graduated in Information Technology at Estácio de Sá University and always try to find out about new technologies and get involved in new development projects, some of which the code can be found on GitHub.","cookie_banner_consent":"By using this website you agree to our use of cookies to deliver a better experience.","written_in":"Written in ","no_post_this_tag":"No post in English include this tag.","tags":"Tags","tag_colon":"Tag: ","tags_colon":"Tags: ","posts_tagged":"Posts tagged with ","categories":"Categories","category":"Category","category_colon":"Category: ","posts_on_category":"Posts on category ","related_posts":"Related posts","read_time":"🕒 {time} min. read","create_post":"Create Post","show":"Show","date":"Date","download":"Download","add_tag":"Add Tag","hide_excerpt":"Hide Excerpt","publish_on_medium":"Publish on Medium","allow_comments":"Allow Comments","subtitle":"Subtitle","you_must_be_truly_desperate":"You must be truly desperate to come to me for help","game.game_title":"pablo.gg - The Game","game.next":"Next","game.ok":"Ok","game.loading_asset_colon":"Loading asset:","game.loading":"Loading...","game.characters.npc_01":"Frost","game.characters.npc_02":"Gavin","game.characters.npc_03":"Giles","game.characters.npc_04":"Godfrey","game.characters.npc_05":"Hugh","game.characters.npc_06":"Ivar","game.characters.npc_07":"Leopold","game.characters.npc_08":"Lucian","game.characters.npc_09":"Gumercindo","game.characters.npc_10":"Mr. Flower","game.characters.npc_11":"Maxim","game.characters.npc_12":"Milo","game.characters.npc_13":"Otto","game.characters.npc_14":"Palmer","game.characters.npc_15":"Quentin","game.characters.npc_16":"Sebastian","game.characters.npc_17":"Neville","game.characters.npc_18":"Cassian","game.characters.npc_19":"Balthasar","game.characters.sign_01":"Sign","game.characters.book_01":"Book","game.characters.home_page_city_sign":"Sign","game.characters.coding_category_city_sign_01":"Sign","game.characters.coding_category_city_sign_02":"Sign","game.characters.events_category_city_sign":"Sign","game.characters.funny_category_city_sign":"Sign","game.characters.gadgets_category_city_sign_01":"Sign","game.characters.gadgets_category_city_sign_02":"Sign","game.characters.games_category_city_sign":"Sign","game.characters.general_category_city_sign":"Sign","game.characters.tips_category_city_sign":"Sign","game.characters.toys_category_city_sign":"Sign","game.characters.sword":"Info","game.characters.push":"Info","game.gamepad.a_button":"A Button","game.gamepad.b_button":"B Button","game.gamepad.d_pad_left":"D-Pad Left","game.gamepad.d_pad_up":"D-Pad Up","game.gamepad.d_pad_right":"D-Pad Right","game.gamepad.d_pad_down":"D-Pad Down","game.gamepad.start_button":"Start Button","game.menu.start":"Start","game.menu.exit":"Exit","game.menu.settings":"Settings","game.game_over.game_over":"Game Over","game.game_over.retry":"Retry","game.game_over.exit":"Exit","game.start_menu.save_game":"Save Game","game.start_menu.exit":"Exit","game.browse_posts.choose_a_post":"Choose a Post to read","game.dialogs.npc_01.01":"Hey, you're finally awake!","game.dialogs.npc_01.02":"What, you don't know where you are?","game.dialogs.npc_01.03":"Don't be silly, you're at the Home Page City, remember?","game.dialogs.npc_01.04":"This city was founded by Pablo Montenegro to be the start of your journey","game.dialogs.npc_01.05":"Go explore the world and find other cities where you can read the accumulated knowledge of our civilization...","game.dialogs.npc_01.06":"... some people call it \"Blog Posts\", I don't know why...","game.dialogs.npc_02.01":"Be careful with the Slimes that live in the wild.","game.dialogs.npc_02.02":"Press SPACE to use your sword","game.dialogs.npc_02.03":"What is SPACE? I have no idea.","game.dialogs.npc_03.01":"Hello, welcome to our library","game.dialogs.npc_03.02":"We only have one book, which contains all of this city category publications.","game.dialogs.npc_03.03":"Go check it out!","game.dialogs.npc_04.01":"I like snails","game.dialogs.npc_05.01":"Incomplete sentences may cause some","game.dialogs.npc_06.01":"Red is greener than purple, for sure.","game.dialogs.npc_07.01":"Having a beard is the new not having a beard","game.dialogs.npc_08.01":"Sup","game.dialogs.npc_09.01":"\" - Cooper, what are you doing?\"\n\" - Docking.\"","game.dialogs.npc_10.01":"I should buy a boat","game.dialogs.npc_11.01":"Have you heard the me neither joke? Me neither.","game.dialogs.npc_12.01":"I clean toilet and rescue princesses, good life, yes?","game.dialogs.npc_13.01":"We want the airwaves back","game.dialogs.npc_14.01":"Save the cheerleader, save the world","game.dialogs.npc_15.01":"Hello, how are you?","game.dialogs.npc_15.02":"Ok bye!","game.dialogs.npc_16.01":"A kangaroo is really just a rabbit on steroids","game.dialogs.npc_17.01":"For the 216th time, he said he would quit drinking soda after this last Coke","game.dialogs.npc_18.01":"Nothing and everything is possimpible","game.dialogs.npc_19.01":"For a city called \"Events\", there isn't much going on...","game.dialogs.sign_01.01":"Congrats, you can read this!","game.dialogs.book_01.01":"Hey, thanks for trying out this very weird way to access my website","game.dialogs.book_01.02":"This project wouldn't be possible without the awesome open-source work of many people, like:","game.dialogs.book_01.03":"ArMM1998 - For the characters sprites and tilesets","game.dialogs.book_01.04":"PixElthen - For the slime sprites","game.dialogs.book_01.05":"pixelartm - For the pirate hat sprites","game.dialogs.book_01.06":"jkjkke - For the Game Over screen background","game.dialogs.book_01.07":"KnoblePersona - For the Main Menu screen background","game.dialogs.book_01.08":"Min - For the open book sprite","game.dialogs.book_01.09":"And of course, Richard Davey for making Phaser.io!","game.dialogs.home_page_city_sign":"City of Home Page","game.dialogs.coding_category_city_sign.01":"City of Coding Category","game.dialogs.coding_category_city_sign.02":"City of Coding Category","game.dialogs.events_category_city_sign":"City of Events Category","game.dialogs.funny_category_city_sign":"City of Funny Category","game.dialogs.gadgets_category_city_sign.01":"City of Gadgets Category","game.dialogs.gadgets_category_city_sign.02":"City of Gadgets Category","game.dialogs.games_category_city_sign":"City of Games Category","game.dialogs.general_category_city_sign":"City of General Category","game.dialogs.tips_category_city_sign":"City of Tips Category","game.dialogs.toys_category_city_sign":"City of Toys Category","game.dialogs.sword_item_description":"You can now attack, press SPACE to use your sword.","game.dialogs.push_item_description":"Now you can push some objects, press SPACE in front of a object to use push it.","zelda_timeline.title":"Zelda Timeline","zelda_timeline.timeline_split":"Timeline Split","zelda_timeline.timeline_unification":"Timeline Unification","zelda_timeline.icons_from":"The icons used on this page are from zeldauniverse.net and game-icons.net","zelda_timeline.creation":"Creation","zelda_timeline.creation_of_land_sky":"The Creation of the Land and Sky","zelda_timeline.goddess_hylia_and_sky_era":"Goddess Hylia and Sky Era","zelda_timeline.skyward_sword":"Skyward Sword","zelda_timeline.the_ancient_battle":"The Ancient Battle and the reincarnation of the Goddess Hylia","zelda_timeline.return_to_surface":"Return to the surface","zelda_timeline.era_of_chaos":"Era of Chaos","zelda_timeline.sacred_realm_sealed":"The Sacred Realm is Sealed","zelda_timeline.era_of_prosperity":"Era of Prosperity","zelda_timeline.establishment_of_hyrule":"The Hyrule Kingdom is established","zelda_timeline.force_era":"Force Era","zelda_timeline.the_minish_cap":"The Minish Cap","zelda_timeline.rise_of_evil_vaati":"The Rise of the Evil Vaati","zelda_timeline.four_swords":"Four Swords","zelda_timeline.resurrection_of_vaati":"The Resurrection of Vaati","zelda_timeline.era_of_the_hero_of_time":"Era of the Hero of Time","zelda_timeline.hyrulean_civil_war":"Hyrulean Civil War","zelda_timeline.ocarina_of_time":"Ocarina of Time","zelda_timeline.sacred_realm_becomes_dark_world":"The Sacred Realm Becomes the Dark World","zelda_timeline.ganondorf_becomes_ganon":"Ganondorf becomes Ganon","zelda_timeline.hero_is_defeated":"Hero is defeated","zelda_timeline.decline_of_last_hero":"The Decline of Hyrule and the Last Hero","zelda_timeline.the_imprisoning_war":"The Imprisoning War","zelda_timeline.era_of_dark_and_light":"Era of Light and Dark","zelda_timeline.a_link_to_the_past":"A Link to the Past","zelda_timeline.resurrection_of_ganon":"The Resurrection of Ganon","zelda_timeline.resurrection_of_ganon_is_prevented":"The Resurrection of Ganon is prevented","zelda_timeline.links_awakening":"Link's Awakening","zelda_timeline.oracle_of_ages_and_seasons":"Oracle of Ages and Oracle of Seasons","zelda_timeline.a_link_between_worlds":"A Link Between Worlds","zelda_timeline.tri_force_heroes":"Tri Force Heroes","zelda_timeline.the_gold_era":"The Gold Era","zelda_timeline.monarchs_of_hyrule_use_triforce":"The Monarchs of Hyrule Use the Triforce","zelda_timeline.era_of_decline":"The Era of Decline","zelda_timeline.tragedy_of_princess_zelda_1":"The Tragedy of Princess Zelda I","zelda_timeline.the_legend_of_zelda":"The Legend of Zelda","zelda_timeline.adventure_of_link":"Adventure of Link","zelda_timeline.hero_defeated":"Hero Defeated","zelda_timeline.child_era":"Child Era","zelda_timeline.adult_era":"Adult Era","zelda_timeline.sacred_realm_protected":"The Sacred Realm Remains Protected","zelda_timeline.twilight_realm_and_legacy_of_hero":"The Twilight Realm and the Legacy of the Hero","zelda_timeline.majoras_mask":"Majora's Mask","zelda_timeline.prince_of_thieves_is_executed":"The Demon Thief, Ganondorf, Is Executed","zelda_timeline.twilight_era":"The Twilight Era","zelda_timeline.twilight_princess":"Twilight Princess","zelda_timeline.shadow_invasion":"The Shadow Invasion","zelda_timeline.shadow_era":"The Shadow Era","zelda_timeline.four_swords_adventures":"Four Swords Adventures","zelda_timeline.reincarnation_of_ganondorf":"The Reincarnation of Ganondorf","zelda_timeline.ganondorf_is_sealed":"Ganondorf is sealed","zelda_timeline.hero_of_wind_and_new_world":"The Hero of Wind and a New World","zelda_timeline.era_without_a_hero":"The Era without a Hero","zelda_timeline.ganondorf_is_resurrected":"Ganondorf is Resurrected","zelda_timeline.hyrule_is_sealed_and_flooded":"Hyrule is sealed and then flooded","zelda_timeline.era_of_the_great_sea":"The Era of the Great Sea","zelda_timeline.the_wind_waker":"The Wind Waker","zelda_timeline.era_of_the_great_voyage":"The Era of the Great Voyage","zelda_timeline.phantom_hourglass":"Phantom Hourglass","zelda_timeline.era_of_hyrule_rebirth":"The Era of Hyrule's Rebirth","zelda_timeline.new_continent_discovered":"New Continent Discovered","zelda_timeline.new_hyrule_is_founded":"A New Hyrule Kingdom is founded","zelda_timeline.spirit_tracks":"Spirit Tracks","zelda_timeline.evil_king_malladus_is_resurrected":"The Evil King Malladus is Resurrected","zelda_timeline.age_of_calamity":"Age of Calamity","zelda_timeline.breath_of_the_wild":"Breath of the Wild","zelda_timeline.era_of_the_wilds":"Era of the Wilds","zelda_timeline.calamity_ganon_is_sealed":"Calamity Ganon is Sealed. Technology is banned, leading some Sheikah to form the Yiga Clan","zelda_timeline.divine_beasts_are_cleansed":"The Divine Beasts are cleansed and Calamity Ganon is Sealed","zelda_timeline.tears_of_the_kingdom":"Tears of the Kingdom","zelda_timeline.hyrule_kingdom_is_teared_apart":"Ganondorf is Resurrected (I think?)","blog_categories.games":"Games","blog_categories.general":"General","blog_categories.tips":"Tips","blog_categories.events":"Events","blog_categories.coding":"Coding","blog_categories.funny":"Funny","blog_categories.toys":"Toys","blog_categories.gadgets":"Gadgets","forty_two_page.title":"Forty Two","forty_two_page.description":"So long and thanks for all the fish!","projects_page.title":"Projects","projects_page.description":"Here is a list of some of my favorites personal projects.","projects_page.gatsbyMaterialUiBlogDescription":"A simple Gatsby Blog Starter with Material UI.","projects_page.contractBuilderDescription":"Contract Builder is a free open-source project that allows anyone to easily maintain and build any kind of contract (legal documents, lawsuit, rent, agreements, construction and so on) using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom contract, now she is able to do it in less than 5 minutes. Hooray!","projects_page.resumeBuilderDescription":"Resume Builder is a free open-source project that allows anyone to easily maintain and build any kind of resume using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom resumes.","projects_page.magentoChatbotDescription":"With this module you can fully integrate your Magento store with the most popular chat apps in the market. This means that by simply installing this module and a few clicks you can have a new way to show and sell your products to your clients. Very easy to use! Try now, it's FREE.","projects_page.jamStackSortenerDescription":"This is a basic URL shortener POC build with Gatsby.","projects_page.gotinhaDescription":"It was always my dream to make my own game, and after trying Unity a couple years ago, I decided to try it again with something I'm more familiar with: Javascript. As a frontend developer, Javascript is already the language that I write most of my code at work and also in my personal projects, and after a quick search I was able to find the amazing PhaserJS Framework for building 2D web games.","e3_2012_photos.title":"E3 2012","e3_2012_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for Nintendo Blast.","e3_2013_photos.title":"E3 2013","e3_2013_photos.description":"On June 2013 I attended E3 as a media press for a full coverage for Game Blast.","e3_2014_photos.title":"E3 2014","e3_2014_photos.description":"On June 2014 I attended E3 as a media press for a full coverage for Game Blast.","e3_2015_photos.title":"E3 2015","e3_2015_photos.description":"On June 2015 I attended E3 as a media press for a full coverage for Game Blast and Game Over TV.","e3_2017_photos.title":"E3 2017","e3_2017_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for PlayReplay and Game Over TV.","e3_2019_photos.title":"E3 2019","e3_2019_photos.description":"On June 2019 I attended E3 as a media press for a full coverage for PlayReplay.","gamescom_2019_photos.title":"Gamescom 2019","gamescom_2019_photos.description":"On August 2019 I attended Gamescom as a media press for a full coverage for PlayReplay.","san_francisco_2019_photos.title":"San Francisco 2019","san_francisco_2019_photos.description":"On September 2019 I've traveled to San Francisco for the Metallica S&M2 concert.","notfound.title":"404: Not found","notfound.header":"404 NOT FOUND","notfound.description":"Sorry, this page doesn't seem to exist. Perhaps the archives are incomplete?","seo_keywords.developer":"developer","seo_keywords.development":"development","seo_keywords.javascript":"javascript","seo_keywords.es6":"es6","seo_keywords.e3":"e3","seo_keywords.sgf":"sgf","seo_keywords.gamescom":"gamescom","seo_keywords.countdown":"countdown","seo_keywords.archive":"archive","seo_keywords.about_me":"about me","seo_keywords.personal_blog":"personal blog","seo_keywords.personal_projects":"personal projects","seo_keywords.travels":"travels","seo_keywords.tips":"tips","seo_keywords.lifehacks":"lifehacks","seo_keywords.reviews":"reviews","seo_keywords.games":"games","seo_keywords.timeline":"timeline","seo_keywords.photos":"photos","cookie_law.we_use_cookies":"We use cookies to ensure you get the best experience on our website. By using our website you agree to our ","cookie_law.title":"Cookie policy","cookie_law.what_are_cookies":"What are cookies?","cookie_law.what_are_cookies_text":"As is common practice with almost all professional websites this site uses cookies, which are tiny files that are downloaded to your computer, to improve your experience. This page describes what information they gather, how we use it and why we sometimes need to store these cookies. We will also share how you can prevent these cookies from being stored however this may downgrade or 'break' certain elements of the sites functionality. For more general information on cookies, please read ","cookie_law.what_are_cookies_more_info_url":"https://en.wikipedia.org/wiki/HTTP_cookie","cookie_law.how_we_use_cookies":"How we use cookies","cookie_law.how_we_use_cookies_text":"We use cookies for a variety of reasons detailed below. Unfortunately in most cases there are no industry standard options for disabling cookies without completely disabling the functionality and features they add to this site. It is recommended that you leave on all cookies if you are not sure whether you need them or not in case they are used to provide a service that you use.","cookie_law.disabling_cookies":"Disabling cookies","cookie_law.disabling_cookies_text":"You can prevent the setting of cookies by adjusting the settings on your browser (see your browser Help for how to do this). Be aware that disabling cookies will affect the functionality of this and many other websites that you visit. Disabling cookies will usually result in also disabling certain functionality and features of the this site. Therefore it is recommended that you do not disable cookies.","cookie_law.the_cookies_we_set":"The cookies we set","cookie_law.site_preferences_cookie":"Site preferences cookies","cookie_law.site_preferences_cookie_text":"In order to provide you with a great experience on this site we provide the functionality to set your preferences for how this site runs when you use it. In order to remember your preferences we need to set cookies so that this information can be called whenever you interact with a page is affected by your preferences.","cookie_law.third_party_cookies":"Third party cookies","cookie_law.third_party_cookies_text":"In some special cases we also use cookies provided by trusted third parties. The following section details which third party cookies you might encounter through this site.","cookie_law.third_party_cookies_item_1":"This site uses Google Analytics which is one of the most widespread and trusted analytics solution on the web for helping us to understand how you use the site and ways that we can improve your experience. These cookies may track things such as how long you spend on the site and the pages that you visit so we can continue to produce engaging content. For more information on Google Analytics cookies, see the official Google Analytics page.","cookie_law.third_party_cookies_item_2":"From time to time we test new features and make subtle changes to the way that the site is delivered. When we are still testing new features these cookies may be used to ensure that you receive a consistent experience whilst on the site whilst ensuring we understand which optimisations our users appreciate the most.","cookie_law.more_information":"More information","cookie_law.more_information_text":"Hopefully that has clarified things for you and as was previously mentioned if there is something that you aren't sure whether you need or not it's usually safer to leave cookies enabled in case it does interact with one of the features you use on our site. However if you are still looking for more information then you can contact us through our "},"routed":true,"originalPath":"/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/","redirect":true,"redirectDefaultLanguageToRoot":false,"defaultLanguage":"en","fallbackLanguage":"","ignoredPaths":[]},"blogLocale":"en"}},
    "staticQueryHashes": ["1156153307","1355482417","1591365477","1628619374","2127381735","2288279559","26159077","3566410298","3649515864","3847325417","3982724423","928834867"]}