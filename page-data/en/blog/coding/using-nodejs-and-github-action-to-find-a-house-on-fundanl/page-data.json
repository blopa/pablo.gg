{
    "componentChunkName": "component---src-templates-blog-post-jsx",
    "path": "/en/blog/coding/using-nodejs-and-github-action-to-find-a-house-on-fundanl/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://pablo.gg"}},"markdownRemark":{"id":"5457e8bc-38fa-5aa6-aef2-a031ab68bb15","excerpt":"If you want to rent or buy a house in the Netherlands, you better brace yourself because it is no easy task, especially if you’re looking in Amsterdam. Applying…","html":"<p>If you want to rent or buy a house in the Netherlands, you better brace yourself because it is no easy task, especially if you’re looking in Amsterdam.</p>\n<p>Applying for rent or bidding on a house is like a job interview, or getting a visa for another country. You need to provide your payment slips, work contract, previous landlords’ recommendations, and more.</p>\n<p>Not only that but many times you don’t even have a chance to apply, because they already have so many people applying that they don’t take applications anymore. Sometimes within 2 days after the house is listed on <a href=\"https://funda.nl/\" target=\"_blank\" rel=\"noreferrer\">Funda.nl</a>, they are already not booking viewings.</p>\n<p>If you at least then manage to book a viewing, you will see the house with many other people and <a href=\"https://dutchreview.com/traveling/cities/amsterdam/an-amsterdam-apartment-with-fair-rent-queue-stretches-around-the-block/\" target=\"_blank\" rel=\"noreferrer\">sometimes even queue for it</a>.</p>\n<p>Because of that, I had to constantly open Funda.nl and check for new houses, so as soon as a new house was available I could book a viewing.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 857px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSUlEQVQoz2WQ60tTYQDG91f0B4i57Vze97xnO26zmwSGIllqNGGrkPBajlnWpg6ZWE4r0lo3IlIqocgv9VVEKFSUcLqFY+u4tjw7Z5d2ds42bxUZXoLMH8/XH8/Do5BWN6TVDUHOCXIums7IPzefvXiJaKTT6TSIYGigQYBCCEBII5JGJAVJDMN3UPBSjpdygrwWk9ejUi6+su4P8xcbWquqqo8a6MN6pNXSDKPV0oiCJNoOBOSuLMhyPPs7IIzNhRyJ7K+EvBbm2OdDttMV5UUM0iNQqKGL9LQWgS2ZAjS15f9tlteT2c3JYP/4vHpZ3vRLgocfCmbcF1rPH2SOw+JSHCJMrcIw/J/s7lZE4qOplYmpkGns04Hx8FSd60HnLddlR1d9W4epyXbuUnu59QbUHcJUSpwg8L0oQtHr79+Y3o7UeOZrveKTM+Zm56myvlqzvbzkXkvDU2tdk7m2qKZJnZ9HEOT/cjjRPVCv7a3MD0Y6uWTXq5kRa/8d50N3W5/L4b7f0NFrbOkuaekBOAYA3CfHeyZmrvp8jf6A08/aZ1njPN/n5Qe9/CAruXvcjUqmuPDIMUhBktzXnFnLXPOkLZO+pe+iIImBGMunhIScionJVFb8FuPLTlSolQUQAmKbPXLaM3xy9GPz9OLch9eRlDchfY6KXk5c4MSFSNIj/fjyeNiuKsgzMJRGg2hag+Nbb+8crigduG171H7FZbnbX/lu8eZc2PaVs7CcdWk77LJlevFstdGgVBKAIklAAEBCAAGABEH8AX6ULwUbFNkZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"funda scraper\"\n        title=\"funda scraper\"\n        src=\"/static/82fc245c2e60c74dd352f6bb36dfa4f4/87817/funda-scraper.png\"\n        srcset=\"/static/82fc245c2e60c74dd352f6bb36dfa4f4/e3135/funda-scraper.png 256w,\n/static/82fc245c2e60c74dd352f6bb36dfa4f4/06341/funda-scraper.png 512w,\n/static/82fc245c2e60c74dd352f6bb36dfa4f4/87817/funda-scraper.png 857w\"\n        sizes=\"(max-width: 857px) 100vw, 857px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"lets-automate-it\" style=\"position:relative;\"><a href=\"#lets-automate-it\" aria-label=\"lets automate it permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’s automate it</h2>\n<p>The good thing about Funda.nl is that they have a vast variety of filters for your search, and those filters are saved in the URL. Hooray!</p>\n<p>For example, <a href=\"https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/\" target=\"_blank\" rel=\"noreferrer\">this link</a> will list all houses that are listed since 1 day ago, with 2 bedrooms, at least 40m², and a maximum of €2000.</p>\n<p>The results on this page are listed in an HTML <code class=\"language-text\">li</code> element with a class <code class=\"language-text\">search-result</code>, so I can get all elements with the query <code class=\"language-text\">document.querySelectorAll('.search-result')</code>, and inside each of these elements, I can get the link for the house with <code class=\"language-text\">element.querySelectorAll('a').[0].href</code>.</p>\n<p>With <code class=\"language-text\">puppeteer.js</code> I can automate the process of going to that URL and checking if any new house showed up and save it to a file. Since this is a Node.js script, I will use <code class=\"language-text\">jsdom</code> to work with the DOM elements.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> writeFileSync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> puppeteer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'puppeteer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> jsdom <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">runTask</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/'</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">headless</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">goto</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">waitUntil</span><span class=\"token operator\">:</span> <span class=\"token string\">'domcontentloaded'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> htmlString <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">content</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> dom <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">jsdom<span class=\"token punctuation\">.</span>JSDOM</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.search-result'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> urls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    urls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>element<span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span>href<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'urls.json'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">runTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I can simply run <code class=\"language-text\">node script.js</code> and I will have all URLs on a <code class=\"language-text\">urls.json</code> file.</p>\n<h2 id=\"sending-new-urls-to-telegram\" style=\"position:relative;\"><a href=\"#sending-new-urls-to-telegram\" aria-label=\"sending new urls to telegram permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sending new URLs to Telegram</h2>\n<p>Instead of saving the URLs to a <code class=\"language-text\">urls.json</code> file, I want to have these URLs sent to a Telegram group using a Telegram bot, for that, I will need to use <code class=\"language-text\">node-fetch</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> nodeFetch <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'node-fetch'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">runTask</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.telegram.org/bot</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">BOT_API</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/sendMessage</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> element<span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span>href<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">chat_id</span> <span class=\"token operator\">:</span> <span class=\"token constant\">CHAT_ID</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">parse_mode</span> <span class=\"token operator\">:</span> <span class=\"token string\">'markdown'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">runTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s great, but not very useful because I don’t want to have to manually run the script, I will fix that in the next step.</p>\n<h2 id=\"using-github-actions\" style=\"position:relative;\"><a href=\"#using-github-actions\" aria-label=\"using github actions permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using GitHub Actions</h2>\n<p>GitHub Actions is great, I use it all the time for tasks like tests and building my blog, but you can also have <a href=\"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule\" target=\"_blank\" rel=\"noreferrer\">scripts running on a schedule</a> using <code class=\"language-text\">cron</code>.</p>\n<p>For this script, I need to use <a href=\"https://github.com/actions/checkout\" target=\"_blank\" rel=\"noreferrer\">actions/checkout</a> to checkout to my code, and <a href=\"https://github.com/stefanzweifel/git-auto-commit-action\" target=\"_blank\" rel=\"noreferrer\">stefanzweifel/git-auto-commit-action</a> to persist a list of the URLs that were already sent to Telegram.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run Task\r\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">cron</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*/30 * * * *\"</span>\r\n\r\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">build-and-deploy</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\r\n\r\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\r\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2.4.0\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">ref</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.head_ref <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Running\r\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\r\n          npm cache clean --force\r\n          npm install\r\n          npm run task</span>\r\n        <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">CHAT_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.CHAT_ID <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token key atrule\">BOT_API</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.BOT_API <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> stefanzweifel/git<span class=\"token punctuation\">-</span>auto<span class=\"token punctuation\">-</span>commit<span class=\"token punctuation\">-</span>action@v4\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">commit_message</span><span class=\"token punctuation\">:</span> Update db.json\r\n          <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> main</code></pre></div>\n<p>And that’s it! Now whenever a new house is listed in my URL, I will get a message on Telegram 🎉.</p>\n<h2 id=\"bonus\" style=\"position:relative;\"><a href=\"#bonus\" aria-label=\"bonus permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bonus</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 547px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEEElEQVQ4y23USWwbVRgH8AjEqXZsOV4SK4snY88be2Y89sy82Tz2jGefccZ2SJyQRApr2SGiRJVoVKgqLkSQYlrRqi1BiAviwAEEHMsBQZWITeWGRBOpwIkThRa4gONEpRV/vcO7/PTpPX3fNxCJRsOhULZQgHW9rNRKkgwAwACGYRgAIJvNopM5dBJDEHTi9gwNDQ1EIpFwOJzNZgVBYPcCIeR6gRBCnueJPEMWIA7oDJJB/pN4PL6PURQVRXHPcDRNQwgFQehXyGT65za5j6PRaCgUomm60+k0Gg3f91utpmVZrutpqkaS5MTEnexOTBCE73me6/qeZ9u2bdm1mqppGsdxCIKgKDp5kP/BFEU2pgLdsEzLUdV6TVWJQiGXzcZisXh8KJlMjIyMjI6OptPpg//K3MIFnJqf9h5a9JYXnMMPdlafX9k41T177kL39Jlu9/T6+qsrK886ltKZneZYii3TZZpMJBI9fCgUIvOlh+ftw4vGXIt5YEl56YVHL54/s7219edff1/d2f32uyvn3nzt6SeWj6w8aZl1RRYUGaZSqf3KeUBN6cJCu+aoZGATjyxWH7vf7W6cvP77Hzdu3Pzx6u7bm28FvtEMfMvUaxUo8n0ciYbCoTwoyixlVai5QJ0N5IZNtqfY+XvFrcuXfvn5p7WjzyzM+romqKrqeoFcUauVWiqZPHhzvlSFRQ3iywvtwK52Wna9VtQq2Im1x4+vHRXYHM8CSRJtr+147VKZF6Xq8PBwHx8qFLiaooiw6Nqmo2vTrXZdN+RqfWZm5r6FJQbKgqKzUFZ13/Q7DFRYTkwmkwORSK8yDkocJ1AUSTM8y3GQF3TTKRbJbvf1Cxc3dct1/GlRMYLZ5YrmjyGgxErJROKgt1ECxzCQQwiSwHCixMm2487OLXx+ZeeTS5clkcdxkpDbgIIIiqfSYwgKEn08OBjOThaKNC1WFNO0JZ73DM2x7dXj61/+8Ov2zm9n3v3QdIJINJYF1CSKxqLhzPj4LYxkcIbhqppp6npNgmpFMAzj5VOb31y7+fXu9Q8++/65FzeaM0tQrALOl402lOuxWOzgw/JlkijQBOboNR5yZYZRasaxV85/+tW1j7d33vnoi9WTbzy1ekLRp8ZzJWX6SEZaHorvdVgkGsmhJGT0IlkCIJfDsFwOA3ieKpY5QS5zAsMJRZohKJousxiWG0MwBAW93h4cHLzn7rvygG4GbdO0TNM0TMOyTMMwTNNwHUfTNFVVe4NmW5qm0jQ9PjaayUz0cCqdZqrVQp4JgsD1eiMZBFO2bXue12w2W62W04vr+w1d10VRhBBKksSybA9jDHvsvfdxoiSJkiiKgiBUKhVBEPfuPM/3br1lRBD9wc71noUBgP+7w/4B5DorbrXMqwIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Now run to book your viewing!\"\n        title=\"Now run to book your viewing!\"\n        src=\"/static/b167f6a479ff3551a706ec1719572d7d/25257/telegram-funda-message-with-stats.png\"\n        srcset=\"/static/b167f6a479ff3551a706ec1719572d7d/e3135/telegram-funda-message-with-stats.png 256w,\n/static/b167f6a479ff3551a706ec1719572d7d/06341/telegram-funda-message-with-stats.png 512w,\n/static/b167f6a479ff3551a706ec1719572d7d/25257/telegram-funda-message-with-stats.png 547w\"\n        sizes=\"(max-width: 547px) 100vw, 547px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Now run to book your viewing!</figcaption>\n  </figure></p>\n<p>There is a very nice <a href=\"https://github.com/nikitaindik/funda-neighbourhoods\" target=\"_blank\" rel=\"noreferrer\">open-source Chrome extension</a> that adds a lot of new data into Funda.nl about the house, so I copied some of its code to add extra info to the houses send to Telegram.</p>\n<p>You can <a href=\"https://github.com/blopa/funda-scraper\" target=\"_blank\" rel=\"noreferrer\">clone this project on GitHub</a>, add your own list of Funda.nl URLs, and the script will automatically run every 30 minutes to check for new houses and send them to Telegram.</p>\n<p>See you in the next one!</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTAzLTEyVDAwOjAwOjAwLjAwMFo=","slug":"/2022/2022-03-12-using-nodejs-and-github-action-to-find-a-house-on-fundanl.en/","path":"/blog/coding/using-nodejs-and-github-action-to-find-a-house-on-fundanl/","locale":"en"},"readingTime":{"minutes":3.645},"frontmatter":{"path":"using-nodejs-and-github-action-to-find-a-house-on-fundanl","allowComments":true,"title":"Using Node.js and GitHub Action to find a house on Funda.nl","date":"2022-03-12T00:00:00.000Z","categories":["coding"],"tags":["funda","house","apartment","node","javascript","github actions","github","cronjob","yml","telegram","puppeteer.js"],"hideExcerpt":false,"subtitle":""}},"categoryImage":{"childImageSharp":{"original":{"width":1920,"height":1080,"src":"/static/categories_coding-aa17d098a6a0d8e0a764a345865f5ffb.jpg"}}}},"pageContext":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTAzLTEyVDAwOjAwOjAwLjAwMFo=","relatedPosts":[{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA5LTEzVDAwOjAwOjAwLjAwMFo=","slug":"/2022/2022-09-13-creating-a-startup-with-github-actions-and-google-forms.en/","path":"/blog/coding/creating-a-startup-with-github-actions-and-google-forms/","locale":"en"},"frontmatter":{"tags":["startup","jamstack","google forms","github actions","react","gatsby","javascript","funda","netherlands","housing market","scraping","puppeteer.js","github"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2022-09-13T00:00:00.000Z","id":null,"path":"creating-a-startup-with-github-actions-and-google-forms","show":true,"title":"Creating a Startup with GitHub Actions and Google Forms","hideExcerpt":false,"subtitle":"How to use JAMStack to kickstart your own Startup"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTA0LTE3VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-04-17-i-pay-0-in-hosting-for-this-website.en/","path":"/blog/coding/i-pay-0-in-hosting-for-this-website/","locale":"en"},"frontmatter":{"tags":["jamstack","javascript","gatsby","reactjs","github","github pages","github actions","frugal","multi-languages","flexsearch","google photos","markdown"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-04-17T00:00:00.000Z","id":null,"path":"i-pay-0-in-hosting-for-this-website","show":true,"title":"I pay $0.00 in hosting for this website","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2VuZXJhbHRydWVudWxsMjAyMS0wMS0zMVQwMDowMDowMC4wMDBa","slug":"/2021/2021-01-31-godammit-telegram.en/","path":"/blog/general/godammit-telegram/","locale":"en"},"frontmatter":{"tags":["whatsapp","sqlite","coding","backup","javascript","telegram","signal","nodejs","node"],"categories":["general"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-01-31T00:00:00.000Z","id":null,"path":"godammit-telegram","show":true,"title":"Godammit Telegram!","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEyLTIwVDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-12-20-creating-instagram-reels-coding-tutorials-automatically-with-openais-gpt.en/","path":"/blog/coding/creating-instagram-reels-coding-tutorials-automatically-with-openais-gpt/","locale":"en"},"frontmatter":{"tags":["openai","gpt","javascript","node","nodejs","instagram"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-12-20T00:00:00.000Z","id":null,"path":"creating-instagram-reels-coding-tutorials-automatically-with-openais-gpt","show":true,"title":"Creating Instagram Reels coding tutorials automatically with OpenAI's GPT","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEwLTI1VDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-10-25-how-to-automatically-create-thumbnails-for-your-videos-with-nodejs.en/","path":"/blog/coding/how-to-automatically-create-thumbnails-for-your-videos-with-nodejs/","locale":"en"},"frontmatter":{"tags":["instagram","thumbnail","node","nodejs","javascript","canvas","image","video"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-10-25T00:00:00.000Z","id":null,"path":"how-to-automatically-create-thumbnails-for-your-videos-with-nodejs","show":true,"title":"How to automatically create thumbnails for your videos with Node.js","hideExcerpt":false,"subtitle":"The best way to create thumbnails for your videos on Instagram"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEwLTE0VDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-10-14-posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations.en/","path":"/blog/coding/posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations/","locale":"en"},"frontmatter":{"tags":["instagram","node","nodejs","javascript","axios","ngrok","ffmpeg","automation"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-10-14T00:00:00.000Z","id":null,"path":"posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations","show":true,"title":"Posting Instagram Reels using Node.js and the art of overcoming limitations","hideExcerpt":false,"subtitle":"After all, why spend 30 seconds doing something manually when you can spend 30 hours automating it?"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTA4LTAyVDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-08-02-using-google-fitness-api-to-calculate-my-tdee-and-more.en/","path":"/blog/coding/using-google-fitness-api-to-calculate-my-tdee-and-more/","locale":"en"},"frontmatter":{"tags":["google cloud","fitness api","google fit","nodejs","node","javascript"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-08-02T00:00:00.000Z","id":null,"path":"using-google-fitness-api-to-calculate-my-tdee-and-more","show":true,"title":"Using Google Fitness API to calculate my TDEE and more","hideExcerpt":false,"subtitle":"From calories to code: Integrating Google Fitness API for personalized health insights"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA1LTA1VDAwOjAwOjAwLjAwMFo=","slug":"/2022/2022-05-05-adding-a-copy-button-to-code-snippets-on-gatsby-the-lazy-way.en/","path":"/blog/coding/adding-a-copy-button-to-code-snippets-on-gatsby-the-lazy-way/","locale":"en"},"frontmatter":{"tags":["gatsby","html","code snippets","node","nodejs","javascript","dom","ast"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2022-05-05T00:00:00.000Z","id":null,"path":"adding-a-copy-button-to-code-snippets-on-gatsby-the-lazy-way","show":true,"title":"Adding a copy button to code snippets on Gatsby: The lazy way","hideExcerpt":false,"subtitle":"Don't feel like creating a Gatsby plugin? Then this blog post is for you."}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTA0LTExVDAwOjAwOjAwLjAwMFo=","slug":"/2022/2022-04-11-how-webpack-handles-dynamic-imports-with-variable-paths.en/","path":"/blog/coding/how-webpack-handles-dynamic-imports-with-variable-paths/","locale":"en"},"frontmatter":{"tags":["webpack","esm","javascript","node","nodejs","coding","dynamic import"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2022-04-11T00:00:00.000Z","id":null,"path":"how-webpack-handles-dynamic-imports-with-variable-paths","show":true,"title":"How Webpack handles dynamic imports with variable paths","hideExcerpt":false,"subtitle":"It's not magic, I promise"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTAxLTA0VDAwOjAwOjAwLjAwMFo=","slug":"/2022/2022-01-04-create-videos-from-code-snippets-with-this-nodejs-script.en/","path":"/blog/coding/create-videos-from-code-snippets-with-this-nodejs-script/","locale":"en"},"frontmatter":{"tags":["node","nodejs","javascript","code snippet","coding","puppeteer"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2022-01-04T00:00:00.000Z","id":null,"path":"create-videos-from-code-snippets-with-this-nodejs-script","show":true,"title":"Create videos from code snippets with this Node.js script","hideExcerpt":false,"subtitle":""}}],"alternativeHtml":"<p>If you want to rent or buy a house in the Netherlands, you better brace yourself because it is no easy task, especially if you’re looking in Amsterdam.</p>\n<p>Applying for rent or bidding on a house is like a job interview, or getting a visa for another country. You need to provide your payment slips, work contract, previous landlords’ recommendations, and more.</p>\n<p>Not only that but many times you don’t even have a chance to apply, because they already have so many people applying that they don’t take applications anymore. Sometimes within 2 days after the house is listed on <a href=\"https://funda.nl/\" target=\"_blank\" rel=\"noreferrer\">Funda.nl</a>, they are already not booking viewings.</p>\n<p>If you at least then manage to book a viewing, you will see the house with many other people and <a href=\"https://dutchreview.com/traveling/cities/amsterdam/an-amsterdam-apartment-with-fair-rent-queue-stretches-around-the-block/\" target=\"_blank\" rel=\"noreferrer\">sometimes even queue for it</a>.</p>\n<p>Because of that, I had to constantly open Funda.nl and check for new houses, so as soon as a new house was available I could book a viewing.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 857px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSUlEQVQoz2WQ60tTYQDG91f0B4i57Vze97xnO26zmwSGIllqNGGrkPBajlnWpg6ZWE4r0lo3IlIqocgv9VVEKFSUcLqFY+u4tjw7Z5d2ds42bxUZXoLMH8/XH8/Do5BWN6TVDUHOCXIums7IPzefvXiJaKTT6TSIYGigQYBCCEBII5JGJAVJDMN3UPBSjpdygrwWk9ejUi6+su4P8xcbWquqqo8a6MN6pNXSDKPV0oiCJNoOBOSuLMhyPPs7IIzNhRyJ7K+EvBbm2OdDttMV5UUM0iNQqKGL9LQWgS2ZAjS15f9tlteT2c3JYP/4vHpZ3vRLgocfCmbcF1rPH2SOw+JSHCJMrcIw/J/s7lZE4qOplYmpkGns04Hx8FSd60HnLddlR1d9W4epyXbuUnu59QbUHcJUSpwg8L0oQtHr79+Y3o7UeOZrveKTM+Zm56myvlqzvbzkXkvDU2tdk7m2qKZJnZ9HEOT/cjjRPVCv7a3MD0Y6uWTXq5kRa/8d50N3W5/L4b7f0NFrbOkuaekBOAYA3CfHeyZmrvp8jf6A08/aZ1njPN/n5Qe9/CAruXvcjUqmuPDIMUhBktzXnFnLXPOkLZO+pe+iIImBGMunhIScionJVFb8FuPLTlSolQUQAmKbPXLaM3xy9GPz9OLch9eRlDchfY6KXk5c4MSFSNIj/fjyeNiuKsgzMJRGg2hag+Nbb+8crigduG171H7FZbnbX/lu8eZc2PaVs7CcdWk77LJlevFstdGgVBKAIklAAEBCAAGABEH8AX6ULwUbFNkZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"funda scraper\" title=\"funda scraper\" src=\"/static/82fc245c2e60c74dd352f6bb36dfa4f4/87817/funda-scraper.png\" srcset=\"/static/82fc245c2e60c74dd352f6bb36dfa4f4/e3135/funda-scraper.png 256w,\n/static/82fc245c2e60c74dd352f6bb36dfa4f4/06341/funda-scraper.png 512w,\n/static/82fc245c2e60c74dd352f6bb36dfa4f4/87817/funda-scraper.png 857w\" sizes=\"(max-width: 857px) 100vw, 857px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span></p>\n<h2 id=\"lets-automate-it\" style=\"position:relative;\"><a href=\"#lets-automate-it\" aria-label=\"lets automate it permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’s automate it</h2>\n<p>The good thing about Funda.nl is that they have a vast variety of filters for your search, and those filters are saved in the URL. Hooray!</p>\n<p>For example, <a href=\"https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/\" target=\"_blank\" rel=\"noreferrer\">this link</a> will list all houses that are listed since 1 day ago, with 2 bedrooms, at least 40m², and a maximum of €2000.</p>\n<p>The results on this page are listed in an HTML <code class=\"language-text\">li</code> element with a class <code class=\"language-text\">search-result</code>, so I can get all elements with the query <code class=\"language-text\">document.querySelectorAll('.search-result')</code>, and inside each of these elements, I can get the link for the house with <code class=\"language-text\">element.querySelectorAll('a').[0].href</code>.</p>\n<p>With <code class=\"language-text\">puppeteer.js</code> I can automate the process of going to that URL and checking if any new house showed up and save it to a file. Since this is a Node.js script, I will use <code class=\"language-text\">jsdom</code> to work with the DOM elements.</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> writeFileSync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> puppeteer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'puppeteer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> jsdom <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">runTask</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">headless</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">goto</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">waitUntil</span><span class=\"token operator\">:</span> <span class=\"token string\">'domcontentloaded'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> htmlString <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">content</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> dom <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">jsdom<span class=\"token punctuation\">.</span>JSDOM</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.search-result'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> urls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    urls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>element<span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span>href<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'urls.json'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">runTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Now I can simply run <code class=\"language-text\">node script.js</code> and I will have all URLs on a <code class=\"language-text\">urls.json</code> file.</p>\n<h2 id=\"sending-new-urls-to-telegram\" style=\"position:relative;\"><a href=\"#sending-new-urls-to-telegram\" aria-label=\"sending new urls to telegram permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sending new URLs to Telegram</h2>\n<p>Instead of saving the URLs to a <code class=\"language-text\">urls.json</code> file, I want to have these URLs sent to a Telegram group using a Telegram bot, for that, I will need to use <code class=\"language-text\">node-fetch</code>.</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> nodeFetch <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'node-fetch'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">runTask</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.telegram.org/bot</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">BOT_API</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/sendMessage</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> element<span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span>href<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">chat_id</span> <span class=\"token operator\">:</span> <span class=\"token constant\">CHAT_ID</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">parse_mode</span> <span class=\"token operator\">:</span> <span class=\"token string\">'markdown'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">runTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>That’s great, but not very useful because I don’t want to have to manually run the script, I will fix that in the next step.</p>\n<h2 id=\"using-github-actions\" style=\"position:relative;\"><a href=\"#using-github-actions\" aria-label=\"using github actions permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using GitHub Actions</h2>\n<p>GitHub Actions is great, I use it all the time for tasks like tests and building my blog, but you can also have <a href=\"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule\" target=\"_blank\" rel=\"noreferrer\">scripts running on a schedule</a> using <code class=\"language-text\">cron</code>.</p>\n<p>For this script, I need to use <a href=\"https://github.com/actions/checkout\" target=\"_blank\" rel=\"noreferrer\">actions/checkout</a> to checkout to my code, and <a href=\"https://github.com/stefanzweifel/git-auto-commit-action\" target=\"_blank\" rel=\"noreferrer\">stefanzweifel/git-auto-commit-action</a> to persist a list of the URLs that were already sent to Telegram.</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run Task\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">cron</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*/30 * * * *\"</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build-and-deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2.4.0\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">ref</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.head_ref <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Running\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          npm cache clean --force\n          npm install\n          npm run task</span>\n        <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">CHAT_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.CHAT_ID <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">BOT_API</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.BOT_API <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> stefanzweifel/git<span class=\"token punctuation\">-</span>auto<span class=\"token punctuation\">-</span>commit<span class=\"token punctuation\">-</span>action@v4\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">commit_message</span><span class=\"token punctuation\">:</span> Update db.json\n          <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> main</code></pre></div></div>\n<p>And that’s it! Now whenever a new house is listed in my URL, I will get a message on Telegram 🎉.</p>\n<h2 id=\"bonus\" style=\"position:relative;\"><a href=\"#bonus\" aria-label=\"bonus permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bonus</h2>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 547px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 107.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEEElEQVQ4y23USWwbVRgH8AjEqXZsOV4SK4snY88be2Y89sy82Tz2jGefccZ2SJyQRApr2SGiRJVoVKgqLkSQYlrRqi1BiAviwAEEHMsBQZWITeWGRBOpwIkThRa4gONEpRV/vcO7/PTpPX3fNxCJRsOhULZQgHW9rNRKkgwAwACGYRgAIJvNopM5dBJDEHTi9gwNDQ1EIpFwOJzNZgVBYPcCIeR6gRBCnueJPEMWIA7oDJJB/pN4PL6PURQVRXHPcDRNQwgFQehXyGT65za5j6PRaCgUomm60+k0Gg3f91utpmVZrutpqkaS5MTEnexOTBCE73me6/qeZ9u2bdm1mqppGsdxCIKgKDp5kP/BFEU2pgLdsEzLUdV6TVWJQiGXzcZisXh8KJlMjIyMjI6OptPpg//K3MIFnJqf9h5a9JYXnMMPdlafX9k41T177kL39Jlu9/T6+qsrK886ltKZneZYii3TZZpMJBI9fCgUIvOlh+ftw4vGXIt5YEl56YVHL54/s7219edff1/d2f32uyvn3nzt6SeWj6w8aZl1RRYUGaZSqf3KeUBN6cJCu+aoZGATjyxWH7vf7W6cvP77Hzdu3Pzx6u7bm28FvtEMfMvUaxUo8n0ciYbCoTwoyixlVai5QJ0N5IZNtqfY+XvFrcuXfvn5p7WjzyzM+romqKrqeoFcUauVWiqZPHhzvlSFRQ3iywvtwK52Wna9VtQq2Im1x4+vHRXYHM8CSRJtr+147VKZF6Xq8PBwHx8qFLiaooiw6Nqmo2vTrXZdN+RqfWZm5r6FJQbKgqKzUFZ13/Q7DFRYTkwmkwORSK8yDkocJ1AUSTM8y3GQF3TTKRbJbvf1Cxc3dct1/GlRMYLZ5YrmjyGgxErJROKgt1ECxzCQQwiSwHCixMm2487OLXx+ZeeTS5clkcdxkpDbgIIIiqfSYwgKEn08OBjOThaKNC1WFNO0JZ73DM2x7dXj61/+8Ov2zm9n3v3QdIJINJYF1CSKxqLhzPj4LYxkcIbhqppp6npNgmpFMAzj5VOb31y7+fXu9Q8++/65FzeaM0tQrALOl402lOuxWOzgw/JlkijQBOboNR5yZYZRasaxV85/+tW1j7d33vnoi9WTbzy1ekLRp8ZzJWX6SEZaHorvdVgkGsmhJGT0IlkCIJfDsFwOA3ieKpY5QS5zAsMJRZohKJousxiWG0MwBAW93h4cHLzn7rvygG4GbdO0TNM0TMOyTMMwTNNwHUfTNFVVe4NmW5qm0jQ9PjaayUz0cCqdZqrVQp4JgsD1eiMZBFO2bXue12w2W62W04vr+w1d10VRhBBKksSybA9jDHvsvfdxoiSJkiiKgiBUKhVBEPfuPM/3br1lRBD9wc71noUBgP+7w/4B5DorbrXMqwIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Now run to book your viewing!\" title=\"Now run to book your viewing!\" src=\"/static/b167f6a479ff3551a706ec1719572d7d/25257/telegram-funda-message-with-stats.png\" srcset=\"/static/b167f6a479ff3551a706ec1719572d7d/e3135/telegram-funda-message-with-stats.png 256w,\n/static/b167f6a479ff3551a706ec1719572d7d/06341/telegram-funda-message-with-stats.png 512w,\n/static/b167f6a479ff3551a706ec1719572d7d/25257/telegram-funda-message-with-stats.png 547w\" sizes=\"(max-width: 547px) 100vw, 547px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Now run to book your viewing!</figcaption>\n  </figure><p></p>\n<p>There is a very nice <a href=\"https://github.com/nikitaindik/funda-neighbourhoods\" target=\"_blank\" rel=\"noreferrer\">open-source Chrome extension</a> that adds a lot of new data into Funda.nl about the house, so I copied some of its code to add extra info to the houses send to Telegram.</p>\n<p>You can <a href=\"https://github.com/blopa/funda-scraper\" target=\"_blank\" rel=\"noreferrer\">clone this project on GitHub</a>, add your own list of Funda.nl URLs, and the script will automatically run every 30 minutes to check for new houses and send them to Telegram.</p>\n<p>See you in the next one!</p>","otherLanguagesUrl":["/pt-br/blog/coding/usando-nodejs-e-github-action-para-encontrar-uma-casa-no-fundanl/"],"rss":{"title":"Using Node.js and GitHub Action to find a house on Funda.nl","description":"Using Node.js and GitHub Action to find a house on Funda.nl","date":"2022-03-12T00:00:00.000Z"},"images":["/static/82fc245c2e60c74dd352f6bb36dfa4f4/87817/funda-scraper.png","/static/b167f6a479ff3551a706ec1719572d7d/25257/telegram-funda-message-with-stats.png"],"videos":[],"comments":[{"Carimbo de data/hora":"3/25/2022 9:03:57","name":"samuel norbury","comment":"Impressive work!","post_path":"using-nodejs-and-github-action-to-find-a-house-on-fundanl","email":null,"twitter":null,"date":"3/25/2022 9:03:57"},{"Carimbo de data/hora":"10/1/2022 10:44:42","name":"Phil","comment":"Niiiiice! It was a fun read!","post_path":"using-nodejs-and-github-action-to-find-a-house-on-fundanl","email":null,"twitter":null,"date":"10/1/2022 10:44:42"},{"Carimbo de data/hora":"8/11/2023 20:26:26","name":"Pablo Spinelli","comment":"Hi Pablo, I'm testing the script and I can't identify the error, basically it doesn't detect any publication. I'll share the main if you notice anything, THANKS A LOT! https://github.com/paspinelli/funda_search/blob/main/src/main.js  ...I did several tests and I can't find it","post_path":"using-nodejs-and-github-action-to-find-a-house-on-fundanl","email_1":"pablo.spinelli@outlook.com","email":null,"twitter":null,"date":"8/11/2023 20:26:26"}],"googleFormData":{"fvv":1,"pageHistory":0,"fbzx":"5566947645549549202","action":"e/1FAIpQLSeST_0jBnLKkEkXGpyx9LWrvV2a1-1F5dr-AcA4wn0BSRyPCw","title":"blog_comment","description":null,"fields":[{"label":"name","description":null,"type":"SHORT_ANSWER","id":"1953327618","required":true},{"label":"email","description":null,"type":"SHORT_ANSWER","id":"1309141965","required":false},{"label":"twitter","description":null,"type":"SHORT_ANSWER","id":"740186305","required":false},{"label":"comment","description":null,"type":"LONG_ANSWER","id":"1663940054","required":true},{"label":"post_path","description":null,"type":"SHORT_ANSWER","id":"1852628638","required":true}],"fieldsOrder":{"740186305":2,"1309141965":1,"1663940054":3,"1852628638":4,"1953327618":0}},"pageType":"blogPost","categoryImage":"/categories_coding.jpg/","slug":"/2022/2022-03-12-using-nodejs-and-github-action-to-find-a-house-on-fundanl.en/","locale":"en","title":"Using Node.js and GitHub Action to find a house on Funda.nl","previous":{"excerpt":"EDIT: Isso só funciona para o React 17 ou inferior, para o…","html":"<p><em><strong>EDIT: Isso só funciona para o React 17 ou inferior, <a href=\"/pt-br/blog/coding/como-acessar-o-state-do-redux-de-um-build-de-producao-do-react-18/\">para o React 18 veja esse post</a>.</strong></em></p>\n<p>Às vezes você quer debugar o state do Redux em produção, mas o <a href=\"https://github.com/zalmoxisus/redux-devtools-extension\" target=\"_blank\" rel=\"noreferrer\">redux-devtools</a> só está habilitado para development, o que fazer numa situação dessas?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1012px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC90lEQVQozx2S22tcVRyFz//iq+CTPhT0RR/ESKEq1kSDCSQYlWpjTMZLTbTGIQmReGkSU0GiJrbgWKitaBpKffHSUJRKOzXBmtiZM+fs62/fzz77zJmR6eN6+BYL1hdhjPf29owxnU4HAFSzSRFinGmtpZR3mnGzheMEHTQRYYKBwCm+00hjxOJWEsVxnCRpnocQCu99yIP3ufd5URQcoBWjOKGEcpBaSA1CUAaEcaW11DriAJRSEAKkYpxzDgCCcwihEEIqEEkr+a/RQAhxDkJIY611znuvtY6uXL509dof31/88ezm+vbWxVv1m51O17msKNoAglGWYsKlIIQKIXQPzLLMh6Kw1kT1+o0Ukf2Dg+t/XmM4NgqKoh1CURRt65zWWnCppTHWamO5tJnPTC85rU3UKUsphfd5WXZASmttCIVSSgjp8zyzWVKP092EpBhhRpkC0VtgjDHaRDZ0lS+73W5RtPMQMu/LsgyhMMa0yzIzjtzGNCGMMsaZEEJKrbQ21mbeR+curFXnp5cW319ZXanVvt3Z+bVWO3P1lytb25e3Lm0H79N6klyP8b8YtzAlhHOhlXJKeueiUx9VXhk5OjoyPDg4MDc9sf7Z0oczr5147sGpkSfO1zbzLMe7KdpHnAGlTEmplJJSSsatNtHq6S9PfjD/xfpXb4yPvXlsaGlxfudM9efKfZXH71mrTnQ7neRGTBqYckYZp1wAKMaAcWlcFq1Upz599/jyyYnjY8/3H3nkheH+9068vvn2kbnhQ2vV8dzn+O8UNxCljDJAmBFKWc8FcM5Fny/NLi9Mz89Mnju7fvTJvrfGR2cmXxp66tFvFis/fL1sjMO3UvRPSjDFhGMMGGNyt6AHL8xMvDj8zMdz71z4bmN2cnSkv6/y8rOHH37gk6mh+vnTWZajmy1yG3MKd+1TjDHo3SV78MbqwuDTh6enjv31+0+/bW28Otg3Pjbw0P33Djx2qHZq1jm/v9tMWghTyrngAEJKDsJlXhvzP7EptDiqnUkUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux state on instagram\"\n        title=\"redux state on instagram\"\n        src=\"/static/7063c62ea526ac52ef9bd28c860aecb6/9d874/redux-state-on-instagram.png\"\n        srcset=\"/static/7063c62ea526ac52ef9bd28c860aecb6/e3135/redux-state-on-instagram.png 256w,\n/static/7063c62ea526ac52ef9bd28c860aecb6/06341/redux-state-on-instagram.png 512w,\n/static/7063c62ea526ac52ef9bd28c860aecb6/9d874/redux-state-on-instagram.png 1012w\"\n        sizes=\"(max-width: 1012px) 100vw, 1012px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"tldr\" style=\"position:relative;\"><a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR</h2>\n<p>Rode o script abaixo no browser.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> internalRoot <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*[id]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> el<span class=\"token operator\">?.</span>_reactRootContainer<span class=\"token operator\">?.</span>_internalRoot<span class=\"token operator\">?.</span>current<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>_reactRootContainer<span class=\"token operator\">?.</span>_internalRoot<span class=\"token operator\">?.</span>current<span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>internalRoot<span class=\"token operator\">?.</span>pendingProps<span class=\"token operator\">?.</span>store <span class=\"token operator\">||</span> internalRoot<span class=\"token operator\">?.</span>stateNode<span class=\"token operator\">?.</span>store <span class=\"token operator\">||</span> internalRoot<span class=\"token operator\">?.</span>memoizedState<span class=\"token operator\">?.</span>element<span class=\"token operator\">?.</span>props<span class=\"token operator\">?.</span>store<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>getState<span class=\"token operator\">?.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"acessando-todos-os-states-do-redux\" style=\"position:relative;\"><a href=\"#acessando-todos-os-states-do-redux\" aria-label=\"acessando todos os states do redux permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Acessando todos os states do Redux</h2>\n<p>Recentemente eu tive que debugar um problema em produção que eu precisava para acessar o state do Redux, então me deparei com <a href=\"https://til-engineering.nulogy.com/Accessing-Redux-Store-Without-Redux-DevTools/\" target=\"_blank\" rel=\"noreferrer\">esta solução</a>, que precisava que a extensão <a href=\"https://github.com/facebook/react-devtools\" target=\"_blank\" rel=\"noreferrer\">React DevTools</a> fosse instalada no browser, eu testei e realmente funcionou, mas depois fiquei pensando como isso poderia ser feito sem o uso de extensões.</p>\n<p>Após pesquisar um pouco, encontrei <a href=\"https://stackoverflow.com/a/57909332/4307769\" target=\"_blank\" rel=\"noreferrer\">esta solução</a> no Stack Overflow, o que me levou a criar o seguinte script:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Traverse a dom element</span>\r\n<span class=\"token keyword\">const</span> stores <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">traverse</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">let</span> store <span class=\"token operator\">=</span>\r\n    element<span class=\"token operator\">?.</span>memoizedState<span class=\"token operator\">?.</span>element<span class=\"token operator\">?.</span>props<span class=\"token operator\">?.</span>store\r\n    <span class=\"token operator\">||</span> element<span class=\"token operator\">?.</span>pendingProps<span class=\"token operator\">?.</span>store\r\n    <span class=\"token operator\">||</span> element<span class=\"token operator\">?.</span>stateNode<span class=\"token operator\">?.</span>store<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    stores<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Find the root element for React</span>\r\n<span class=\"token keyword\">const</span> reactRoot <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*[id]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> el<span class=\"token operator\">?.</span>_reactRootContainer<span class=\"token operator\">?.</span>_internalRoot<span class=\"token operator\">?.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> internalRoot <span class=\"token operator\">=</span> reactRoot<span class=\"token punctuation\">.</span>_reactRootContainer<span class=\"token punctuation\">.</span>_internalRoot<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Traverse the root react element to find all Redux States in the app</span>\r\n<span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>internalRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Após executar este script, todos os states Redux estarão disponíveis na variável <code class=\"language-text\">stores</code>, e você pode acessá-los via <code class=\"language-text\">[...stores].map((store) => store.getState())</code>.</p>\n<p>Nos vemos na próxima, galera!</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTAyLTIwVDAwOjAwOjAwLjAwMFo=","slug":"/2022/2022-02-20-como-acessar-o-estado-do-redux-de-um-production-build-usando-o-console-do-browser.pt-br/","path":"/blog/coding/como-acessar-o-estado-do-redux-de-um-production-build-usando-o-console-do-browser/","locale":"pt-br"},"rawMarkdownBody":"***EDIT: Isso só funciona para o React 17 ou inferior, [para o React 18 veja esse post](/pt-br/blog/coding/como-acessar-o-state-do-redux-de-um-build-de-producao-do-react-18/).***\r\n\r\nÀs vezes você quer debugar o state do Redux em produção, mas o [redux-devtools](https://github.com/zalmoxisus/redux-devtools-extension) só está habilitado para development, o que fazer numa situação dessas?\r\n\r\n![](../../uploads/blog/2022/02/redux-state-on-instagram.png)\r\n\r\n## TL;DR\r\nRode o script abaixo no browser.\r\n\r\n```javascript\r\nconst internalRoot = Array.from(document.querySelectorAll(\"*[id]\")).find((el) => el?._reactRootContainer?._internalRoot?.current)?._reactRootContainer?._internalRoot?.current;\r\nconst state = (internalRoot?.pendingProps?.store || internalRoot?.stateNode?.store || internalRoot?.memoizedState?.element?.props?.store)?.getState?.();\r\n```\r\n\r\n## Acessando todos os states do Redux\r\nRecentemente eu tive que debugar um problema em produção que eu precisava para acessar o state do Redux, então me deparei com [esta solução](https://til-engineering.nulogy.com/Accessing-Redux-Store-Without-Redux-DevTools/), que precisava que a extensão [React DevTools](https://github.com/facebook/react-devtools) fosse instalada no browser, eu testei e realmente funcionou, mas depois fiquei pensando como isso poderia ser feito sem o uso de extensões.\r\n\r\nApós pesquisar um pouco, encontrei [esta solução](https://stackoverflow.com/a/57909332/4307769) no Stack Overflow, o que me levou a criar o seguinte script:\r\n\r\n```javascript\r\n// Traverse a dom element\r\nconst stores = new Set();\r\nconst traverse = (element) => {\r\n  let store =\r\n    element?.memoizedState?.element?.props?.store\r\n    || element?.pendingProps?.store\r\n    || element?.stateNode?.store;\r\n\r\n  if (store) {\r\n    stores.add(store);\r\n  }\r\n\r\n  if (element.child) {\r\n    traverse(element.child);\r\n  }\r\n};\r\n\r\n// Find the root element for React\r\nconst reactRoot = Array.from(document.querySelectorAll(\"*[id]\")).find((el) => el?._reactRootContainer?._internalRoot?.current);\r\n\r\nconst internalRoot = reactRoot._reactRootContainer._internalRoot.current;\r\n\r\n// Traverse the root react element to find all Redux States in the app\r\ntraverse(internalRoot);\r\n```\r\n\r\nApós executar este script, todos os states Redux estarão disponíveis na variável `stores`, e você pode acessá-los via `[...stores].map((store) => store.getState())`.\r\n\r\nNos vemos na próxima, galera!\r\n","frontmatter":{"tags":["redux","react","javascript","browser","console","production build","gambiarra"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2022-02-20T00:00:00.000Z","id":null,"path":"como-acessar-o-estado-do-redux-de-um-production-build-usando-o-console-do-browser","show":true,"title":"Como acessar o state do Redux em produção usando o console do browser","hideExcerpt":false,"subtitle":""}},"next":{"excerpt":"Se você quer alugar ou comprar uma casa na Holanda, é melhor…","html":"<p>Se você quer alugar ou comprar uma casa na Holanda, é melhor se preparar porque não é uma tarefa fácil, especialmente se você estiver procurando em Amsterdam.</p>\n<p>Candidatar-se para alugar ou comprar uma casa é como uma entrevista de emprego ou como obter um visto para outro país. Você precisa fornecer seus contracheques, contrato de trabalho, recomendações de proprietários anteriores e muito mais.</p>\n<p>Não só isso, mas muitas vezes você nem tem a chance de ir ver a casa, porque eles já têm tantos pedidos de pessoas querendo ir ver a casa que eles não precisam aceitar mais. Às vezes, dentro de 2 dias após a casa ser listada no <a href=\"https://funda.nl/\" target=\"_blank\" rel=\"noreferrer\">Funda.nl</a>, eles já não estão agendando visitas.</p>\n<p>Se você pelo menos conseguir marcar uma visita, verá a casa com muitas outras pessoas e <a href=\"https://dutchreview.com/traveling/cities/amsterdam/an-amsterdam-apartment-with-fair-rent-queue-stretches-around-the-block/\" target=\"_blank\" rel=\"noreferrer\">às vezes até fazer fila para isso</a>.</p>\n<p>Por causa disso, eu tive que abrir constantemente o Funda.nl e verificar novas casas, para que assim que uma nova casa estivesse disponível eu pudesse marcar uma visita.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 857px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSUlEQVQoz2WQ60tTYQDG91f0B4i57Vze97xnO26zmwSGIllqNGGrkPBajlnWpg6ZWE4r0lo3IlIqocgv9VVEKFSUcLqFY+u4tjw7Z5d2ds42bxUZXoLMH8/XH8/Do5BWN6TVDUHOCXIums7IPzefvXiJaKTT6TSIYGigQYBCCEBII5JGJAVJDMN3UPBSjpdygrwWk9ejUi6+su4P8xcbWquqqo8a6MN6pNXSDKPV0oiCJNoOBOSuLMhyPPs7IIzNhRyJ7K+EvBbm2OdDttMV5UUM0iNQqKGL9LQWgS2ZAjS15f9tlteT2c3JYP/4vHpZ3vRLgocfCmbcF1rPH2SOw+JSHCJMrcIw/J/s7lZE4qOplYmpkGns04Hx8FSd60HnLddlR1d9W4epyXbuUnu59QbUHcJUSpwg8L0oQtHr79+Y3o7UeOZrveKTM+Zm56myvlqzvbzkXkvDU2tdk7m2qKZJnZ9HEOT/cjjRPVCv7a3MD0Y6uWTXq5kRa/8d50N3W5/L4b7f0NFrbOkuaekBOAYA3CfHeyZmrvp8jf6A08/aZ1njPN/n5Qe9/CAruXvcjUqmuPDIMUhBktzXnFnLXPOkLZO+pe+iIImBGMunhIScionJVFb8FuPLTlSolQUQAmKbPXLaM3xy9GPz9OLch9eRlDchfY6KXk5c4MSFSNIj/fjyeNiuKsgzMJRGg2hag+Nbb+8crigduG171H7FZbnbX/lu8eZc2PaVs7CcdWk77LJlevFstdGgVBKAIklAAEBCAAGABEH8AX6ULwUbFNkZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"funda scraper\"\n        title=\"funda scraper\"\n        src=\"/static/82fc245c2e60c74dd352f6bb36dfa4f4/87817/funda-scraper.png\"\n        srcset=\"/static/82fc245c2e60c74dd352f6bb36dfa4f4/e3135/funda-scraper.png 256w,\n/static/82fc245c2e60c74dd352f6bb36dfa4f4/06341/funda-scraper.png 512w,\n/static/82fc245c2e60c74dd352f6bb36dfa4f4/87817/funda-scraper.png 857w\"\n        sizes=\"(max-width: 857px) 100vw, 857px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"partiu-automatizar\" style=\"position:relative;\"><a href=\"#partiu-automatizar\" aria-label=\"partiu automatizar permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Partiu automatizar!</h2>\n<p>O bom do Funda.nl é que eles possuem uma grande variedade de filtros para a busca, e esses filtros ficam salvos na URL. Nice!</p>\n<p>Por exemplo, <a href=\"https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/\" target=\"_blank\" rel=\"noreferrer\">este link</a> listará todas as casas publicadas desde 1 dia atrás, com 2 quartos, no mínimo 40m² e no máximo €2000 de aluguel.</p>\n<p>Os resultados nesta página estão listados em um elemento HTML <code class=\"language-text\">li</code> com uma classe <code class=\"language-text\">search-result</code>, com isso dá para obter todos os elementos com o <code class=\"language-text\">document.querySelectorAll('.search-result')</code> e dentro de cada um dos desses elementos, posso obter o link para a casa com <code class=\"language-text\">element.querySelectorAll('a').[0].href</code>.</p>\n<p>Agora com o <code class=\"language-text\">puppeteer.js</code> eu posso automatizar um processo de ir a essa URL e verificar se alguma casa nova apareceu e salvá-la em um arquivo. Como este é um script Node.js, usarei o <code class=\"language-text\">jsdom</code> para trabalhar com os elementos DOM.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> writeFileSync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> puppeteer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'puppeteer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> jsdom <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">runTask</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/'</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">headless</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">goto</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">waitUntil</span><span class=\"token operator\">:</span> <span class=\"token string\">'domcontentloaded'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> htmlString <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">content</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> dom <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">jsdom<span class=\"token punctuation\">.</span>JSDOM</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.search-result'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> urls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    urls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>element<span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span>href<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'urls.json'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">runTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Agora eu posso simplesmente executar <code class=\"language-text\">node script.js</code> e terei todas as URLs em um arquivo <code class=\"language-text\">urls.json</code>.</p>\n<h2 id=\"enviando-novas-urls-para-o-telegram\" style=\"position:relative;\"><a href=\"#enviando-novas-urls-para-o-telegram\" aria-label=\"enviando novas urls para o telegram permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enviando novas URLs para o Telegram</h2>\n<p>Em vez de salvar as URLs em um arquivo <code class=\"language-text\">urls.json</code>, quero que essas URLs sejam enviadas para um grupo do Telegram usando um bot, para isso precisarei usar o <code class=\"language-text\">node-fetch</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> nodeFetch <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'node-fetch'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">runTask</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.telegram.org/bot</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">BOT_API</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/sendMessage</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> element<span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span>href<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">chat_id</span> <span class=\"token operator\">:</span> <span class=\"token constant\">CHAT_ID</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">parse_mode</span> <span class=\"token operator\">:</span> <span class=\"token string\">'markdown'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">runTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Isso é ótimo, mas não é muito útil porque não quero ter que executar o script manualmente, então partiu corrigir isso.</p>\n<h2 id=\"usando-o-github-actions\" style=\"position:relative;\"><a href=\"#usando-o-github-actions\" aria-label=\"usando o github actions permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usando o GitHub Actions</h2>\n<p>GitHub Actions é ótimo, eu uso o tempo todo para tarefas como testes e builds do meu blog, mas também pode ter <a href=\"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule\" target=\"_blank\" rel=\"noreferrer\">scripts rodando periódicamente</a> usando <code class=\"language-text\">cron</code>.</p>\n<p>Para este script, preciso usar <a href=\"https://github.com/actions/checkout\" target=\"_blank\" rel=\"noreferrer\">actions/checkout</a> para fazer o checkout do meu código e <a href=\"https://github.com/stefanzweifel/git-auto-commit-action\" target=\"_blank\" rel=\"noreferrer\">stefanzweifel/git-auto-commit-action</a> para persistir uma lista das URLs que já foram enviadas ao Telegram.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run Task\r\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">cron</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*/30 * * * *\"</span>\r\n\r\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">build-and-deploy</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\r\n\r\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\r\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2.4.0\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">ref</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.head_ref <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Running\r\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\r\n          npm cache clean --force\r\n          npm install\r\n          npm run task</span>\r\n        <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">CHAT_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.CHAT_ID <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token key atrule\">BOT_API</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.BOT_API <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> stefanzweifel/git<span class=\"token punctuation\">-</span>auto<span class=\"token punctuation\">-</span>commit<span class=\"token punctuation\">-</span>action@v4\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">commit_message</span><span class=\"token punctuation\">:</span> Update db.json\r\n          <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> main</code></pre></div>\n<p>E é isso! Agora, sempre que uma nova casa estiver listada na minha URL, receberei uma mensagem no Telegram 🎉.</p>\n<h2 id=\"bonus\" style=\"position:relative;\"><a href=\"#bonus\" aria-label=\"bonus permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bonus</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 547px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEEElEQVQ4y23USWwbVRgH8AjEqXZsOV4SK4snY88be2Y89sy82Tz2jGefccZ2SJyQRApr2SGiRJVoVKgqLkSQYlrRqi1BiAviwAEEHMsBQZWITeWGRBOpwIkThRa4gONEpRV/vcO7/PTpPX3fNxCJRsOhULZQgHW9rNRKkgwAwACGYRgAIJvNopM5dBJDEHTi9gwNDQ1EIpFwOJzNZgVBYPcCIeR6gRBCnueJPEMWIA7oDJJB/pN4PL6PURQVRXHPcDRNQwgFQehXyGT65za5j6PRaCgUomm60+k0Gg3f91utpmVZrutpqkaS5MTEnexOTBCE73me6/qeZ9u2bdm1mqppGsdxCIKgKDp5kP/BFEU2pgLdsEzLUdV6TVWJQiGXzcZisXh8KJlMjIyMjI6OptPpg//K3MIFnJqf9h5a9JYXnMMPdlafX9k41T177kL39Jlu9/T6+qsrK886ltKZneZYii3TZZpMJBI9fCgUIvOlh+ftw4vGXIt5YEl56YVHL54/s7219edff1/d2f32uyvn3nzt6SeWj6w8aZl1RRYUGaZSqf3KeUBN6cJCu+aoZGATjyxWH7vf7W6cvP77Hzdu3Pzx6u7bm28FvtEMfMvUaxUo8n0ciYbCoTwoyixlVai5QJ0N5IZNtqfY+XvFrcuXfvn5p7WjzyzM+romqKrqeoFcUauVWiqZPHhzvlSFRQ3iywvtwK52Wna9VtQq2Im1x4+vHRXYHM8CSRJtr+147VKZF6Xq8PBwHx8qFLiaooiw6Nqmo2vTrXZdN+RqfWZm5r6FJQbKgqKzUFZ13/Q7DFRYTkwmkwORSK8yDkocJ1AUSTM8y3GQF3TTKRbJbvf1Cxc3dct1/GlRMYLZ5YrmjyGgxErJROKgt1ECxzCQQwiSwHCixMm2487OLXx+ZeeTS5clkcdxkpDbgIIIiqfSYwgKEn08OBjOThaKNC1WFNO0JZ73DM2x7dXj61/+8Ov2zm9n3v3QdIJINJYF1CSKxqLhzPj4LYxkcIbhqppp6npNgmpFMAzj5VOb31y7+fXu9Q8++/65FzeaM0tQrALOl402lOuxWOzgw/JlkijQBOboNR5yZYZRasaxV85/+tW1j7d33vnoi9WTbzy1ekLRp8ZzJWX6SEZaHorvdVgkGsmhJGT0IlkCIJfDsFwOA3ieKpY5QS5zAsMJRZohKJousxiWG0MwBAW93h4cHLzn7rvygG4GbdO0TNM0TMOyTMMwTNNwHUfTNFVVe4NmW5qm0jQ9PjaayUz0cCqdZqrVQp4JgsD1eiMZBFO2bXue12w2W62W04vr+w1d10VRhBBKksSybA9jDHvsvfdxoiSJkiiKgiBUKhVBEPfuPM/3br1lRBD9wc71noUBgP+7w/4B5DorbrXMqwIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Agora corre pra marcar uma visita na casa!\"\n        title=\"Agora corre pra marcar uma visita na casa!\"\n        src=\"/static/b167f6a479ff3551a706ec1719572d7d/25257/telegram-funda-message-with-stats.png\"\n        srcset=\"/static/b167f6a479ff3551a706ec1719572d7d/e3135/telegram-funda-message-with-stats.png 256w,\n/static/b167f6a479ff3551a706ec1719572d7d/06341/telegram-funda-message-with-stats.png 512w,\n/static/b167f6a479ff3551a706ec1719572d7d/25257/telegram-funda-message-with-stats.png 547w\"\n        sizes=\"(max-width: 547px) 100vw, 547px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Agora corre pra marcar uma visita na casa!</figcaption>\n  </figure></p>\n<p>Existe uma <a href=\"https://github.com/nikitaindik/funda-neighbourhoods\" target=\"_blank\" rel=\"noreferrer\">extensão para Chrome de código aberto muito boa</a> que adiciona muitos dados novos ao Funda.nl sobre a casa, então copiei algumas partes do código desse projeto para adicione informações extras às casas enviadas para o Telegram.</p>\n<p>Você pode <a href=\"https://github.com/blopa/funda-scraper\" target=\"_blank\" rel=\"noreferrer\">clonar este projeto no GitHub</a>, adicionar sua própria lista de URLs do Funda.nl e o script será executado automaticamente a cada 30 minutos para verificar novas casas e enviá-las para o Telegram.</p>\n<p>Até a próxima, pessoal!</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIyLTAzLTEyVDAwOjAwOjAwLjAwMFo=","slug":"/2022/2022-03-12-usando-nodejs-e-github-action-para-encontrar-uma-casa-no-fundanl.pt-br/","path":"/blog/coding/usando-nodejs-e-github-action-para-encontrar-uma-casa-no-fundanl/","locale":"pt-br"},"rawMarkdownBody":"Se você quer alugar ou comprar uma casa na Holanda, é melhor se preparar porque não é uma tarefa fácil, especialmente se você estiver procurando em Amsterdam.\r\n\r\nCandidatar-se para alugar ou comprar uma casa é como uma entrevista de emprego ou como obter um visto para outro país. Você precisa fornecer seus contracheques, contrato de trabalho, recomendações de proprietários anteriores e muito mais.\r\n\r\nNão só isso, mas muitas vezes você nem tem a chance de ir ver a casa, porque eles já têm tantos pedidos de pessoas querendo ir ver a casa que eles não precisam aceitar mais. Às vezes, dentro de 2 dias após a casa ser listada no [Funda.nl](https://funda.nl/), eles já não estão agendando visitas.\r\n\r\nSe você pelo menos conseguir marcar uma visita, verá a casa com muitas outras pessoas e [às vezes até fazer fila para isso](https://dutchreview.com/traveling/cities/amsterdam/an-amsterdam-apartment-with-fair-rent-queue-stretches-around-the-block/).\r\n\r\nPor causa disso, eu tive que abrir constantemente o Funda.nl e verificar novas casas, para que assim que uma nova casa estivesse disponível eu pudesse marcar uma visita.\r\n\r\n![](../../uploads/blog/2022/03/funda-scraper.png)\r\n\r\n## Partiu automatizar!\r\nO bom do Funda.nl é que eles possuem uma grande variedade de filtros para a busca, e esses filtros ficam salvos na URL. Nice!\r\n\r\nPor exemplo, [este link](https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/) listará todas as casas publicadas desde 1 dia atrás, com 2 quartos, no mínimo 40m² e no máximo €2000 de aluguel.\r\n\r\nOs resultados nesta página estão listados em um elemento HTML `li` com uma classe `search-result`, com isso dá para obter todos os elementos com o `document.querySelectorAll('.search-result')` e dentro de cada um dos desses elementos, posso obter o link para a casa com `element.querySelectorAll('a').[0].href`.\r\n\r\nAgora com o `puppeteer.js` eu posso automatizar um processo de ir a essa URL e verificar se alguma casa nova apareceu e salvá-la em um arquivo. Como este é um script Node.js, usarei o `jsdom` para trabalhar com os elementos DOM.\r\n\r\n```javascript\r\nconst { writeFileSync } = require('fs');\r\nconst puppeteer = require('puppeteer');\r\nconst jsdom = require('jsdom');\r\n\r\nconst runTask = async () => {\r\n  const url = 'https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/';\r\n  const browser = await puppeteer.launch({\r\n    headless: true,\r\n  });\r\n\r\n  const page = await browser.newPage();\r\n  await page.goto(url, { waitUntil: 'domcontentloaded' });\r\n\r\n  const htmlString = await page.content();\r\n  const dom = new jsdom.JSDOM(htmlString);\r\n  const result = dom.window.document.querySelectorAll('.search-result');\r\n\r\n  const urls = [];\r\n  for (const element of result) {\r\n    urls.push(element?.querySelectorAll('a')?.[0]?.href);\r\n  }\r\n\r\n  writeFileSync('urls.json', JSON.stringify(urls));\r\n}\r\n\r\nrunTask();\r\n```\r\n\r\nAgora eu posso simplesmente executar `node script.js` e terei todas as URLs em um arquivo `urls.json`.\r\n\r\n## Enviando novas URLs para o Telegram\r\nEm vez de salvar as URLs em um arquivo `urls.json`, quero que essas URLs sejam enviadas para um grupo do Telegram usando um bot, para isso precisarei usar o `node-fetch`.\r\n\r\n```javascript\r\nconst nodeFetch = require('node-fetch');\r\n\r\nconst runTask = async () => {\r\n  for (const element of result) {\r\n    nodeFetch(`https://api.telegram.org/bot${BOT_API}/sendMessage`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        text: element?.querySelectorAll('a')?.[0]?.href,\r\n        chat_id : CHAT_ID,\r\n        parse_mode : 'markdown',\r\n      }),\r\n    });\r\n  }\r\n}\r\n\r\nrunTask();\r\n```\r\n\r\nIsso é ótimo, mas não é muito útil porque não quero ter que executar o script manualmente, então partiu corrigir isso.\r\n\r\n## Usando o GitHub Actions\r\nGitHub Actions é ótimo, eu uso o tempo todo para tarefas como testes e builds do meu blog, mas também pode ter [scripts rodando periódicamente](https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule) usando `cron`.\r\n\r\nPara este script, preciso usar [actions/checkout](https://github.com/actions/checkout) para fazer o checkout do meu código e [stefanzweifel/git-auto-commit-action](https://github.com/stefanzweifel/git-auto-commit-action) para persistir uma lista das URLs que já foram enviadas ao Telegram.\r\n\r\n```yaml\r\nname: Run Task\r\non:\r\n  workflow_dispatch:\r\n  schedule:\r\n    - cron: \"*/30 * * * *\"\r\n\r\njobs:\r\n  build-and-deploy:\r\n    runs-on: ubuntu-latest\r\n\r\n    steps:\r\n      - name: Checkout\r\n        uses: actions/checkout@v2.4.0\r\n        with:\r\n          ref: ${{ github.head_ref }}\r\n\r\n      - name: Running\r\n        run: |\r\n          npm cache clean --force\r\n          npm install\r\n          npm run task\r\n        env:\r\n          CHAT_ID: ${{ secrets.CHAT_ID }}\r\n          BOT_API: ${{ secrets.BOT_API }}\r\n\r\n      - uses: stefanzweifel/git-auto-commit-action@v4\r\n        with:\r\n          commit_message: Update db.json\r\n          branch: main\r\n```\r\n\r\nE é isso! Agora, sempre que uma nova casa estiver listada na minha URL, receberei uma mensagem no Telegram 🎉.\r\n\r\n## Bonus\r\n![Agora corre pra marcar uma visita na casa!](../../uploads/blog/2022/03/telegram-funda-message-with-stats.png)\r\n\r\nExiste uma [extensão para Chrome de código aberto muito boa](https://github.com/nikitaindik/funda-neighbourhoods) que adiciona muitos dados novos ao Funda.nl sobre a casa, então copiei algumas partes do código desse projeto para adicione informações extras às casas enviadas para o Telegram.\r\n\r\nVocê pode [clonar este projeto no GitHub](https://github.com/blopa/funda-scraper), adicionar sua própria lista de URLs do Funda.nl e o script será executado automaticamente a cada 30 minutos para verificar novas casas e enviá-las para o Telegram.\r\n\r\nAté a próxima, pessoal!\r\n","frontmatter":{"tags":["funda","casa","apartamento","node","javascript","github actions","github","cronjob","yml","telegram","puppeteer.js"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2022-03-12T00:00:00.000Z","id":null,"path":"usando-nodejs-e-github-action-para-encontrar-uma-casa-no-fundanl","show":true,"title":"Usando Node.js e GitHub Action para encontrar uma casa no Funda.nl","hideExcerpt":false,"subtitle":""}},"language":"en","intl":{"language":"en","languages":["en","pt-br"],"messages":{"site_title":"pablo.gg","title":"Title","author":"@thepiratepablo","search_placeholder":"Search...","about":"About","photos":"Photos","archive":"Archive","contact":"Contact","close":"Close","contact_page":"Contact page","see_more":"See more posts","built_with":"Built with ","buy_me_a_soda":"Buy me a soda","blog":"Blog","blog_posts":"Blog posts","go_to_post":"Go to post","search":"Search","loading":"Loading...","search_results":"Search results","search_results_for":"{quantity} search results for: \"{query}\"","search_for_query":"Search for \"{query}\"","no_results":"No results","home":"Home","description":"Yet another developer personal blog","go_back":"Go back to the homepage","thats_me":"That's me!","got_it":"Got it!","check_it_out":"Check it out!","we_are":"We are","e3":"E3","away_from_next_sgf":"away from Summer Game Fest 2025","away_from_next_gamescom":"away from Gamescom 2024","sgf_countdown":"Summer Game Fest Countdown","gamescom_countdown":"Gamescom Countdown","e3_paragraph_1":"This page once featured a countdown to the next E3 event, a moment that countless gamers and industry professionals looked forward to each year. E3 was not just an event; it was a celebration of our shared passion for video games, a place where dreams were realized, and memories were made.","e3_paragraph_2":"From the electrifying announcements to the hands-on demos, E3 was the heartbeat of the gaming world. It brought together people from all corners of the globe, united by their love for games. For many, it was a chance to meet their heroes, discover new titles, and experience the thrill of the latest innovations in gaming technology.","e3_paragraph_3":"However, as the gaming landscape has evolved, so too has the way we connect and celebrate our passion. While E3 has come to an end, the spirit of excitement and community it fostered lives on. We now look forward to new ways of coming together, sharing our love for games, and creating new memories.","e3_paragraph_4":"Though the countdown is gone, the legacy of E3 will forever remain in our hearts, reminding us of the incredible journeys we've taken and the bonds we've formed along the way.","sec":"Sec","secs":"Secs","min":"Min","mins":"Mins","hour":"Hour","hours":"Hours","day":"Day","days":"Days","month":"Month","months":"Months","year":"Year","years":"Years","recent_posts":"Recent posts","email":"Email","twitter":"Twitter","name":"Name","page":"Page","fill_this_want_reply":"Fill this in if you want me to contact you back","sorry_this_post_unavailable_language":"Sorry, this post is not available in the language you picked","language":"Language","comment":"Comment","comments":"Comments","no_comments":"No comments yet.","post_comment":"Post comment","send_message":"Send message","message":"Message","post_a_comment":"Post a comment","your_comment_submitted":"Your comment has been successfully submitted.","your_message_submitted":"Your message has been successfully submitted.","on":"on","ok":"Ok","copy":"Copy","copied":"Copied","photo_num":"Photo {num}","the_matrix_has_you":"The Matrix has you...","about_paragraph_1":"A technology enthusiast from an early age, I have always been interested in computers and video games.","about_paragraph_2":"I graduated in Information Technology at Estácio de Sá University and always try to find out about new technologies and get involved in new development projects, some of which the code can be found on GitHub.","cookie_banner_consent":"By using this website you agree to our use of cookies to deliver a better experience.","written_in":"Written in ","no_post_this_tag":"No post in English include this tag.","tags":"Tags","tag_colon":"Tag: ","tags_colon":"Tags: ","posts_tagged":"Posts tagged with ","categories":"Categories","category":"Category","category_colon":"Category: ","posts_on_category":"Posts on category ","related_posts":"Related posts","read_time":"🕒 {time} min. read","create_post":"Create Post","show":"Show","date":"Date","download":"Download","add_tag":"Add Tag","hide_excerpt":"Hide Excerpt","publish_on_medium":"Publish on Medium","allow_comments":"Allow Comments","subtitle":"Subtitle","you_must_be_truly_desperate":"You must be truly desperate to come to me for help","game.game_title":"pablo.gg - The Game","game.next":"Next","game.ok":"Ok","game.loading_asset_colon":"Loading asset:","game.loading":"Loading...","game.characters.npc_01":"Frost","game.characters.npc_02":"Gavin","game.characters.npc_03":"Giles","game.characters.npc_04":"Godfrey","game.characters.npc_05":"Hugh","game.characters.npc_06":"Ivar","game.characters.npc_07":"Leopold","game.characters.npc_08":"Lucian","game.characters.npc_09":"Gumercindo","game.characters.npc_10":"Mr. Flower","game.characters.npc_11":"Maxim","game.characters.npc_12":"Milo","game.characters.npc_13":"Otto","game.characters.npc_14":"Palmer","game.characters.npc_15":"Quentin","game.characters.npc_16":"Sebastian","game.characters.npc_17":"Neville","game.characters.npc_18":"Cassian","game.characters.npc_19":"Balthasar","game.characters.sign_01":"Sign","game.characters.book_01":"Book","game.characters.home_page_city_sign":"Sign","game.characters.coding_category_city_sign_01":"Sign","game.characters.coding_category_city_sign_02":"Sign","game.characters.events_category_city_sign":"Sign","game.characters.funny_category_city_sign":"Sign","game.characters.gadgets_category_city_sign_01":"Sign","game.characters.gadgets_category_city_sign_02":"Sign","game.characters.games_category_city_sign":"Sign","game.characters.general_category_city_sign":"Sign","game.characters.tips_category_city_sign":"Sign","game.characters.toys_category_city_sign":"Sign","game.characters.sword":"Info","game.characters.push":"Info","game.gamepad.a_button":"A Button","game.gamepad.b_button":"B Button","game.gamepad.d_pad_left":"D-Pad Left","game.gamepad.d_pad_up":"D-Pad Up","game.gamepad.d_pad_right":"D-Pad Right","game.gamepad.d_pad_down":"D-Pad Down","game.gamepad.start_button":"Start Button","game.menu.start":"Start","game.menu.exit":"Exit","game.menu.settings":"Settings","game.game_over.game_over":"Game Over","game.game_over.retry":"Retry","game.game_over.exit":"Exit","game.start_menu.save_game":"Save Game","game.start_menu.exit":"Exit","game.browse_posts.choose_a_post":"Choose a Post to read","game.dialogs.npc_01.01":"Hey, you're finally awake!","game.dialogs.npc_01.02":"What, you don't know where you are?","game.dialogs.npc_01.03":"Don't be silly, you're at the Home Page City, remember?","game.dialogs.npc_01.04":"This city was founded by Pablo Montenegro to be the start of your journey","game.dialogs.npc_01.05":"Go explore the world and find other cities where you can read the accumulated knowledge of our civilization...","game.dialogs.npc_01.06":"... some people call it \"Blog Posts\", I don't know why...","game.dialogs.npc_02.01":"Be careful with the Slimes that live in the wild.","game.dialogs.npc_02.02":"Press SPACE to use your sword","game.dialogs.npc_02.03":"What is SPACE? I have no idea.","game.dialogs.npc_03.01":"Hello, welcome to our library","game.dialogs.npc_03.02":"We only have one book, which contains all of this city category publications.","game.dialogs.npc_03.03":"Go check it out!","game.dialogs.npc_04.01":"I like snails","game.dialogs.npc_05.01":"Incomplete sentences may cause some","game.dialogs.npc_06.01":"Red is greener than purple, for sure.","game.dialogs.npc_07.01":"Having a beard is the new not having a beard","game.dialogs.npc_08.01":"Sup","game.dialogs.npc_09.01":"\" - Cooper, what are you doing?\"\n\" - Docking.\"","game.dialogs.npc_10.01":"I should buy a boat","game.dialogs.npc_11.01":"Have you heard the me neither joke? Me neither.","game.dialogs.npc_12.01":"I clean toilet and rescue princesses, good life, yes?","game.dialogs.npc_13.01":"We want the airwaves back","game.dialogs.npc_14.01":"Save the cheerleader, save the world","game.dialogs.npc_15.01":"Hello, how are you?","game.dialogs.npc_15.02":"Ok bye!","game.dialogs.npc_16.01":"A kangaroo is really just a rabbit on steroids","game.dialogs.npc_17.01":"For the 216th time, he said he would quit drinking soda after this last Coke","game.dialogs.npc_18.01":"Nothing and everything is possimpible","game.dialogs.npc_19.01":"For a city called \"Events\", there isn't much going on...","game.dialogs.sign_01.01":"Congrats, you can read this!","game.dialogs.book_01.01":"Hey, thanks for trying out this very weird way to access my website","game.dialogs.book_01.02":"This project wouldn't be possible without the awesome open-source work of many people, like:","game.dialogs.book_01.03":"ArMM1998 - For the characters sprites and tilesets","game.dialogs.book_01.04":"PixElthen - For the slime sprites","game.dialogs.book_01.05":"pixelartm - For the pirate hat sprites","game.dialogs.book_01.06":"jkjkke - For the Game Over screen background","game.dialogs.book_01.07":"KnoblePersona - For the Main Menu screen background","game.dialogs.book_01.08":"Min - For the open book sprite","game.dialogs.book_01.09":"And of course, Richard Davey for making Phaser.io!","game.dialogs.home_page_city_sign":"City of Home Page","game.dialogs.coding_category_city_sign.01":"City of Coding Category","game.dialogs.coding_category_city_sign.02":"City of Coding Category","game.dialogs.events_category_city_sign":"City of Events Category","game.dialogs.funny_category_city_sign":"City of Funny Category","game.dialogs.gadgets_category_city_sign.01":"City of Gadgets Category","game.dialogs.gadgets_category_city_sign.02":"City of Gadgets Category","game.dialogs.games_category_city_sign":"City of Games Category","game.dialogs.general_category_city_sign":"City of General Category","game.dialogs.tips_category_city_sign":"City of Tips Category","game.dialogs.toys_category_city_sign":"City of Toys Category","game.dialogs.sword_item_description":"You can now attack, press SPACE to use your sword.","game.dialogs.push_item_description":"Now you can push some objects, press SPACE in front of a object to use push it.","zelda_timeline.title":"Zelda Timeline","zelda_timeline.timeline_split":"Timeline Split","zelda_timeline.timeline_unification":"Timeline Unification","zelda_timeline.icons_from":"The icons used on this page are from zeldauniverse.net and game-icons.net","zelda_timeline.creation":"Creation","zelda_timeline.creation_of_land_sky":"The Creation of the Land and Sky","zelda_timeline.goddess_hylia_and_sky_era":"Goddess Hylia and Sky Era","zelda_timeline.skyward_sword":"Skyward Sword","zelda_timeline.the_ancient_battle":"The Ancient Battle and the reincarnation of the Goddess Hylia","zelda_timeline.return_to_surface":"Return to the surface","zelda_timeline.era_of_chaos":"Era of Chaos","zelda_timeline.sacred_realm_sealed":"The Sacred Realm is Sealed","zelda_timeline.era_of_prosperity":"Era of Prosperity","zelda_timeline.establishment_of_hyrule":"The Hyrule Kingdom is established","zelda_timeline.force_era":"Force Era","zelda_timeline.the_minish_cap":"The Minish Cap","zelda_timeline.rise_of_evil_vaati":"The Rise of the Evil Vaati","zelda_timeline.four_swords":"Four Swords","zelda_timeline.resurrection_of_vaati":"The Resurrection of Vaati","zelda_timeline.era_of_the_hero_of_time":"Era of the Hero of Time","zelda_timeline.hyrulean_civil_war":"Hyrulean Civil War","zelda_timeline.ocarina_of_time":"Ocarina of Time","zelda_timeline.sacred_realm_becomes_dark_world":"The Sacred Realm Becomes the Dark World","zelda_timeline.ganondorf_becomes_ganon":"Ganondorf becomes Ganon","zelda_timeline.hero_is_defeated":"Hero is defeated","zelda_timeline.decline_of_last_hero":"The Decline of Hyrule and the Last Hero","zelda_timeline.the_imprisoning_war":"The Imprisoning War","zelda_timeline.era_of_dark_and_light":"Era of Light and Dark","zelda_timeline.a_link_to_the_past":"A Link to the Past","zelda_timeline.resurrection_of_ganon":"The Resurrection of Ganon","zelda_timeline.resurrection_of_ganon_is_prevented":"The Resurrection of Ganon is prevented","zelda_timeline.links_awakening":"Link's Awakening","zelda_timeline.oracle_of_ages_and_seasons":"Oracle of Ages and Oracle of Seasons","zelda_timeline.a_link_between_worlds":"A Link Between Worlds","zelda_timeline.tri_force_heroes":"Tri Force Heroes","zelda_timeline.the_gold_era":"The Gold Era","zelda_timeline.monarchs_of_hyrule_use_triforce":"The Monarchs of Hyrule Use the Triforce","zelda_timeline.era_of_decline":"The Era of Decline","zelda_timeline.tragedy_of_princess_zelda_1":"The Tragedy of Princess Zelda I","zelda_timeline.the_legend_of_zelda":"The Legend of Zelda","zelda_timeline.adventure_of_link":"Adventure of Link","zelda_timeline.hero_defeated":"Hero Defeated","zelda_timeline.child_era":"Child Era","zelda_timeline.adult_era":"Adult Era","zelda_timeline.sacred_realm_protected":"The Sacred Realm Remains Protected","zelda_timeline.twilight_realm_and_legacy_of_hero":"The Twilight Realm and the Legacy of the Hero","zelda_timeline.majoras_mask":"Majora's Mask","zelda_timeline.prince_of_thieves_is_executed":"The Demon Thief, Ganondorf, Is Executed","zelda_timeline.twilight_era":"The Twilight Era","zelda_timeline.twilight_princess":"Twilight Princess","zelda_timeline.shadow_invasion":"The Shadow Invasion","zelda_timeline.shadow_era":"The Shadow Era","zelda_timeline.four_swords_adventures":"Four Swords Adventures","zelda_timeline.reincarnation_of_ganondorf":"The Reincarnation of Ganondorf","zelda_timeline.ganondorf_is_sealed":"Ganondorf is sealed","zelda_timeline.hero_of_wind_and_new_world":"The Hero of Wind and a New World","zelda_timeline.era_without_a_hero":"The Era without a Hero","zelda_timeline.ganondorf_is_resurrected":"Ganondorf is Resurrected","zelda_timeline.hyrule_is_sealed_and_flooded":"Hyrule is sealed and then flooded","zelda_timeline.era_of_the_great_sea":"The Era of the Great Sea","zelda_timeline.the_wind_waker":"The Wind Waker","zelda_timeline.era_of_the_great_voyage":"The Era of the Great Voyage","zelda_timeline.phantom_hourglass":"Phantom Hourglass","zelda_timeline.era_of_hyrule_rebirth":"The Era of Hyrule's Rebirth","zelda_timeline.new_continent_discovered":"New Continent Discovered","zelda_timeline.new_hyrule_is_founded":"A New Hyrule Kingdom is founded","zelda_timeline.spirit_tracks":"Spirit Tracks","zelda_timeline.evil_king_malladus_is_resurrected":"The Evil King Malladus is Resurrected","zelda_timeline.age_of_calamity":"Age of Calamity","zelda_timeline.breath_of_the_wild":"Breath of the Wild","zelda_timeline.era_of_the_wilds":"Era of the Wilds","zelda_timeline.calamity_ganon_is_sealed":"Calamity Ganon is Sealed. Technology is banned, leading some Sheikah to form the Yiga Clan","zelda_timeline.divine_beasts_are_cleansed":"The Divine Beasts are cleansed and Calamity Ganon is Sealed","zelda_timeline.tears_of_the_kingdom":"Tears of the Kingdom","zelda_timeline.hyrule_kingdom_is_teared_apart":"Ganondorf is Resurrected (I think?)","blog_categories.games":"Games","blog_categories.general":"General","blog_categories.tips":"Tips","blog_categories.events":"Events","blog_categories.coding":"Coding","blog_categories.funny":"Funny","blog_categories.toys":"Toys","blog_categories.gadgets":"Gadgets","forty_two_page.title":"Forty Two","forty_two_page.description":"So long and thanks for all the fish!","projects_page.title":"Projects","projects_page.description":"Here is a list of some of my favorites personal projects.","projects_page.gatsbyMaterialUiBlogDescription":"A simple Gatsby Blog Starter with Material UI.","projects_page.contractBuilderDescription":"Contract Builder is a free open-source project that allows anyone to easily maintain and build any kind of contract (legal documents, lawsuit, rent, agreements, construction and so on) using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom contract, now she is able to do it in less than 5 minutes. Hooray!","projects_page.resumeBuilderDescription":"Resume Builder is a free open-source project that allows anyone to easily maintain and build any kind of resume using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom resumes.","projects_page.magentoChatbotDescription":"With this module you can fully integrate your Magento store with the most popular chat apps in the market. This means that by simply installing this module and a few clicks you can have a new way to show and sell your products to your clients. Very easy to use! Try now, it's FREE.","projects_page.jamStackSortenerDescription":"This is a basic URL shortener POC build with Gatsby.","projects_page.gotinhaDescription":"It was always my dream to make my own game, and after trying Unity a couple years ago, I decided to try it again with something I'm more familiar with: Javascript. As a frontend developer, Javascript is already the language that I write most of my code at work and also in my personal projects, and after a quick search I was able to find the amazing PhaserJS Framework for building 2D web games.","e3_2012_photos.title":"E3 2012","e3_2012_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for Nintendo Blast.","e3_2013_photos.title":"E3 2013","e3_2013_photos.description":"On June 2013 I attended E3 as a media press for a full coverage for Game Blast.","e3_2014_photos.title":"E3 2014","e3_2014_photos.description":"On June 2014 I attended E3 as a media press for a full coverage for Game Blast.","e3_2015_photos.title":"E3 2015","e3_2015_photos.description":"On June 2015 I attended E3 as a media press for a full coverage for Game Blast and Game Over TV.","e3_2017_photos.title":"E3 2017","e3_2017_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for PlayReplay and Game Over TV.","e3_2019_photos.title":"E3 2019","e3_2019_photos.description":"On June 2019 I attended E3 as a media press for a full coverage for PlayReplay.","gamescom_2019_photos.title":"Gamescom 2019","gamescom_2019_photos.description":"On August 2019 I attended Gamescom as a media press for a full coverage for PlayReplay.","san_francisco_2019_photos.title":"San Francisco 2019","san_francisco_2019_photos.description":"On September 2019 I've traveled to San Francisco for the Metallica S&M2 concert.","notfound.title":"404: Not found","notfound.header":"404 NOT FOUND","notfound.description":"Sorry, this page doesn't seem to exist. Perhaps the archives are incomplete?","seo_keywords.developer":"developer","seo_keywords.development":"development","seo_keywords.javascript":"javascript","seo_keywords.es6":"es6","seo_keywords.e3":"e3","seo_keywords.sgf":"sgf","seo_keywords.gamescom":"gamescom","seo_keywords.countdown":"countdown","seo_keywords.archive":"archive","seo_keywords.about_me":"about me","seo_keywords.personal_blog":"personal blog","seo_keywords.personal_projects":"personal projects","seo_keywords.travels":"travels","seo_keywords.tips":"tips","seo_keywords.lifehacks":"lifehacks","seo_keywords.reviews":"reviews","seo_keywords.games":"games","seo_keywords.timeline":"timeline","seo_keywords.photos":"photos","cookie_law.we_use_cookies":"We use cookies to ensure you get the best experience on our website. By using our website you agree to our ","cookie_law.title":"Cookie policy","cookie_law.what_are_cookies":"What are cookies?","cookie_law.what_are_cookies_text":"As is common practice with almost all professional websites this site uses cookies, which are tiny files that are downloaded to your computer, to improve your experience. This page describes what information they gather, how we use it and why we sometimes need to store these cookies. We will also share how you can prevent these cookies from being stored however this may downgrade or 'break' certain elements of the sites functionality. For more general information on cookies, please read ","cookie_law.what_are_cookies_more_info_url":"https://en.wikipedia.org/wiki/HTTP_cookie","cookie_law.how_we_use_cookies":"How we use cookies","cookie_law.how_we_use_cookies_text":"We use cookies for a variety of reasons detailed below. Unfortunately in most cases there are no industry standard options for disabling cookies without completely disabling the functionality and features they add to this site. It is recommended that you leave on all cookies if you are not sure whether you need them or not in case they are used to provide a service that you use.","cookie_law.disabling_cookies":"Disabling cookies","cookie_law.disabling_cookies_text":"You can prevent the setting of cookies by adjusting the settings on your browser (see your browser Help for how to do this). Be aware that disabling cookies will affect the functionality of this and many other websites that you visit. Disabling cookies will usually result in also disabling certain functionality and features of the this site. Therefore it is recommended that you do not disable cookies.","cookie_law.the_cookies_we_set":"The cookies we set","cookie_law.site_preferences_cookie":"Site preferences cookies","cookie_law.site_preferences_cookie_text":"In order to provide you with a great experience on this site we provide the functionality to set your preferences for how this site runs when you use it. In order to remember your preferences we need to set cookies so that this information can be called whenever you interact with a page is affected by your preferences.","cookie_law.third_party_cookies":"Third party cookies","cookie_law.third_party_cookies_text":"In some special cases we also use cookies provided by trusted third parties. The following section details which third party cookies you might encounter through this site.","cookie_law.third_party_cookies_item_1":"This site uses Google Analytics which is one of the most widespread and trusted analytics solution on the web for helping us to understand how you use the site and ways that we can improve your experience. These cookies may track things such as how long you spend on the site and the pages that you visit so we can continue to produce engaging content. For more information on Google Analytics cookies, see the official Google Analytics page.","cookie_law.third_party_cookies_item_2":"From time to time we test new features and make subtle changes to the way that the site is delivered. When we are still testing new features these cookies may be used to ensure that you receive a consistent experience whilst on the site whilst ensuring we understand which optimisations our users appreciate the most.","cookie_law.more_information":"More information","cookie_law.more_information_text":"Hopefully that has clarified things for you and as was previously mentioned if there is something that you aren't sure whether you need or not it's usually safer to leave cookies enabled in case it does interact with one of the features you use on our site. However if you are still looking for more information then you can contact us through our "},"routed":true,"originalPath":"/blog/coding/using-nodejs-and-github-action-to-find-a-house-on-fundanl/","redirect":true,"redirectDefaultLanguageToRoot":false,"defaultLanguage":"en","fallbackLanguage":"","ignoredPaths":[]},"blogLocale":"en"}},
    "staticQueryHashes": ["1156153307","1355482417","1591365477","1628619374","2127381735","2288279559","26159077","3566410298","3649515864","3847325417","3982724423","928834867"]}