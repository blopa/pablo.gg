{
    "componentChunkName": "component---src-templates-blog-post-jsx",
    "path": "/en/blog/coding/transforming-manga-pages-for-western-readers/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://pablo.gg"}},"markdownRemark":{"id":"70a65006-9673-5a4f-8019-45e3e31fd513","excerpt":"Navigating the intricacies of manga as a Western reader can feel a bit like debugging assembly code, frustrating, and with a high risk of getting it all wrong…","html":"<p>Navigating the intricacies of manga as a Western reader can feel a bit like debugging assembly code, frustrating, and with a high risk of getting it all wrong. But fear not, my fellow manga misfits! With a pinch of Python code, and a heaping spoonful of programming prowess, I’ve created a masterpiece script to transform manga pages for Western consumption.</p>\n<p>So if you’re quite lazy, like me, this script is for you.</p>\n<p><strong>Disclaimer:</strong> This project is a fun exploration into image processing with Python. It’s not intended to undermine the traditional manga experience but rather to provide an alternative for those who might struggle with it.</p>\n<h2 id=\"but-why\" style=\"position:relative;\"><a href=\"#but-why\" aria-label=\"but why permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>But… why?</h2>\n<p>As a colossal Dragon Ball fan, waiting for the new season of “Dragon Ball Super” has felt like an impossible task, even though I’ve already been waiting for seven years. With the new season not even confirmed to happen yet, and Dragon Ball Daima just around the corner, my only recourse to finally learn who Moro is was the manga. However, the traditional manga format, read from right to left, completely obliterates my monkey brain (perhaps with some dyslexic tendencies) and Western reading habits.</p>\n<h2 id=\"this-foss-project-is-brought-to-you-by\" style=\"position:relative;\"><a href=\"#this-foss-project-is-brought-to-you-by\" aria-label=\"this foss project is brought to you by permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>This FOSS project is brought to you by</h2>\n<h3 id=\"easyocr\" style=\"position:relative;\"><a href=\"#easyocr\" aria-label=\"easyocr permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>easyOCR</h3>\n<p>Let’s take a moment to sing praises for <code class=\"language-text\">easyOCR</code>, the hero of this project. It not only reads text from images — it provides the precise coordinates (x, y) along with width and height.</p>\n<p>This is crucial because, in our script, knowing where the text lives is the first step in the magical process of flipping it correctly, and most OCR tools don’t provide this level of detail. With this information, we can mirror the image while keeping the text in the right place, so it reads left to right.</p>\n<p>You can read more about <code class=\"language-text\">easyOCR</code> <a href=\"https://github.com/JaidedAI/EasyOCR\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<h3 id=\"chatgpt\" style=\"position:relative;\"><a href=\"#chatgpt\" aria-label=\"chatgpt permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChatGPT</h3>\n<p>ChatGPT is like that friend who insists on reading the instructions when you just want to put the furniture together and see what happens.</p>\n<p>It was great working with <code class=\"language-text\">easyOCR</code> and <code class=\"language-text\">PIL</code> to read the data and manipulate the images, but when it came to flipping the text to it’s correct position, I needed a little more help.</p>\n<p>Also, things like make the script work with different params from the command line, and writing the README.md file, ChatGPT was there to help me.</p>\n<p>Well, actually for the README.md file, I just used Copilot, since it had the full context of the code and the project. But I guess “potato, potahto”.</p>\n<h3 id=\"the-art-of-procrastination\" style=\"position:relative;\"><a href=\"#the-art-of-procrastination\" aria-label=\"the art of procrastination permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The art of procrastination</h3>\n<p>I could have spent my time learning how to read manga the traditional way, but where’s the fun in that? Instead, I decided to create a Python script that would do the heavy lifting for me. And so, the <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a> was born.</p>\n<h2 id=\"the-magical-mirror-\" style=\"position:relative;\"><a href=\"#the-magical-mirror-\" aria-label=\"the magical mirror  permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Magical Mirror ✨</h2>\n<p>Ok but how can we actually do this without having to re-draw the whole manga page? Are we really going to hire someone on Fiverr to do this for us? No, we’re not. We’re going to use Python.</p>\n<p>Imagine mirroring a manga page in a way that doesn’t make your brain hurt. That’s what we’re doing here.</p>\n<p>We flip the whole image horizontally but carefully reposition the text, so it reads left to right, just like a Western comic. It’s a bit like a sticker book, where you can peel off the text, use Python to flip the page horizontally and stick it back on the other side. That’s how they work back in the days, right?</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHszbJKD//EABoQAAMAAwEAAAAAAAAAAAAAAAECAwAREjH/2gAIAQEAAQUCQDN7Po4oHorkSSvP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgIBBQAAAAAAAAAAAAAAAAECETEDQYGRof/aAAgBAQAGPwKtxqOn2J1VjcY+jTVXkwnyf//EABoQAQEBAQADAAAAAAAAAAAAAAERACFBUZH/2gAIAQEAAT8hloL70vMvpR4QQ0CVAZoiPu7DqE6L9wkMjxc//9oADAMBAAIAAwAAABDAz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQADAQEAAwAAAAAAAAAAAAEAESExUUFhkf/aAAgBAQABPxAKHo+A4jAU9ApdPN57kBBsRyz6i8hoKRLz8gu6KLDiPrCqcpljZTTrMyf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"A boy placing stickers in a sticker book, from which a Python snake emerges to help\"\n        title=\"A boy placing stickers in a sticker book, from which a Python snake emerges to help\"\n        src=\"/static/d17cb3dc28424401404395a9b03cef41/63217/python-snake-stickers.jpg\"\n        srcset=\"/static/d17cb3dc28424401404395a9b03cef41/db830/python-snake-stickers.jpg 256w,\n/static/d17cb3dc28424401404395a9b03cef41/8102f/python-snake-stickers.jpg 512w,\n/static/d17cb3dc28424401404395a9b03cef41/63217/python-snake-stickers.jpg 1024w,\n/static/d17cb3dc28424401404395a9b03cef41/f2d78/python-snake-stickers.jpg 1359w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">A boy placing stickers in a sticker book, from which a Python snake emerges to help</figcaption>\n  </figure></p>\n<p>(this is what DALL·E thinks the joke above looks like)</p>\n<h2 id=\"coding\" style=\"position:relative;\"><a href=\"#coding\" aria-label=\"coding permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Coding</h2>\n<p>As mentioned before, thanks to <code class=\"language-text\">easyOCR</code>’s meticulous text mapping, we can pinpoint where text blocks start and end. We use this info to keep our text from turning into an unreadable mirrored mess after flipping.</p>\n<p>So first, we create a function called <code class=\"language-text\">extract_text_from_manga</code> that loads the image and use <code class=\"language-text\">easyOCR</code> to detect the text blocks and their coordinates and returns a JSON with the data.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">extract_text_from_manga</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    reader <span class=\"token operator\">=</span> easyocr<span class=\"token punctuation\">.</span>Reader<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'en'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> Image<span class=\"token punctuation\">.</span>Image<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        base_image <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\r\n\r\n    results <span class=\"token operator\">=</span> reader<span class=\"token punctuation\">.</span>readtext<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> detail<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n    extracted_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n    <span class=\"token keyword\">for</span> result <span class=\"token keyword\">in</span> results<span class=\"token punctuation\">:</span>\r\n        data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">:</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"location\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> point <span class=\"token keyword\">in</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"width\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"height\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        extracted_data<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">return</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>extracted_data<span class=\"token punctuation\">,</span> ensure_ascii<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>With this data, we can now reposition the texts by creating a new function, <code class=\"language-text\">create_image_with_inverted_text_placement</code>, which takes text position data and creates a new image.</p>\n<p>This function adds the texts to their respective positions but inverts them horizontally. For example, if a text is originally positioned at 10 in an image with a width of 100, its new position becomes 90 due to the inversion (calculated as 100 - 10 = 90).</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">create_image_with_inverted_text_placement</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    width<span class=\"token punctuation\">,</span> height <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>size\r\n    new_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>new<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n    data <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">for</span> index<span class=\"token punctuation\">,</span> item <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'location'</span><span class=\"token punctuation\">]</span>\r\n        box_width<span class=\"token punctuation\">,</span> box_height <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">]</span>\r\n        <span class=\"token keyword\">if</span> box_width <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token keyword\">or</span> box_height <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">continue</span>\r\n\r\n        new_x <span class=\"token operator\">=</span> width <span class=\"token operator\">-</span> x <span class=\"token operator\">-</span> box_width\r\n        cropped_image <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>crop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x <span class=\"token operator\">+</span> box_width<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> box_height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n        cropped_image <span class=\"token operator\">=</span> cropped_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\r\n        new_image<span class=\"token punctuation\">.</span>paste<span class=\"token punctuation\">(</span>cropped_image<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>new_x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cropped_image<span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">return</span> new_image</code></pre></div>\n<p>Now the final step is to take the original image, flip it horizontally, and paste the transparent image with the texts on top of it. This is done by the <code class=\"language-text\">overlay_flipped_with_transparent</code> function, which takes the base image, the transparent image with the text, and the path to save the final output image.</p>\n<p>The function flips the base image, converts it to RGBA, and then uses <code class=\"language-text\">Image.alpha_composite</code> to overlay the flipped image with the transparent image. Finally, it saves the output image to the specified path.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">overlay_flipped_with_transparent</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token operator\">=</span><span class=\"token string\">'final_output_image.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    flipped_base_image <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>transpose<span class=\"token punctuation\">(</span>Image<span class=\"token punctuation\">.</span>FLIP_LEFT_RIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">if</span> transparent_image<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">!=</span> <span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">:</span>\r\n        transparent_image <span class=\"token operator\">=</span> transparent_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\r\n\r\n    combined_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>alpha_composite<span class=\"token punctuation\">(</span>flipped_base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">if</span> final_output_image_path<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">'.jpg'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> final_output_image_path<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">'.jpeg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        combined_image <span class=\"token operator\">=</span> combined_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGB'</span><span class=\"token punctuation\">)</span>\r\n\r\n    combined_image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>final_output_image_path<span class=\"token punctuation\">)</span></code></pre></div>\n<p>So, putting it all together, we can now extract the text from the manga image, invert the text positions, and overlay the flipped image with the text in the correct position. The result is a manga page that reads from left to right, just like a Western comic.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">do_task</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        base_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\r\n    extracted_text <span class=\"token operator\">=</span> extract_text_from_manga<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\r\n    base_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> base_image\r\n    transparent_image <span class=\"token operator\">=</span> create_image_with_inverted_text_placement<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> extracted_text<span class=\"token punctuation\">)</span>\r\n    overlay_flipped_with_transparent<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token punctuation\">)</span></code></pre></div>\n<p>And that’s it! Of course there’s more code to account for different scenarios, like processing multiple images or CBR files, but the core logic remains the same. You can check the full script <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<h2 id=\"how-to-use-it\" style=\"position:relative;\"><a href=\"#how-to-use-it\" aria-label=\"how to use it permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use it</h2>\n<p>To get started with the <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a>, you’ll first need to ensure your environment is set up correctly:</p>\n<ol>\n<li>\n<p><strong>Clone or Download the Script</strong>: Get a copy of the script from our repository. If you’re familiar with Git, you can clone it; otherwise, simply download the zip file and extract it to a convenient location on your computer.</p>\n</li>\n<li>\n<p><strong>Install Dependencies</strong>: Open your terminal and navigate to the script’s directory. Install all required dependencies by running:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-r</span> requirements.txt</code></pre></div>\n</li>\n<li>\n<p><strong>Prepare Your Manga Files</strong>: Make sure your manga pages are in a supported format (common image formats like JPG, PNG are perfect). Organize the pages in a single directory if you have multiple files.</p>\n</li>\n<li>\n<p><strong>Run the Script</strong>: Use the command line to specify the source and the output directory. If you don’t specify an output directory, the script will automatically create one. Here’s how you can run the script:</p>\n<ul>\n<li>To convert a single manga page:\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga_page.jpg <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div>\n</li>\n<li>To convert multiple pages stored in a folder:\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga_folder <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div>\n</li>\n<li>To convert a CBR file:\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga.cbr <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Check the results</strong>: Once the script has finished processing, check the output directory for your newly transformed comic pages.</p>\n</li>\n</ol>\n<h2 id=\"some-caveats\" style=\"position:relative;\"><a href=\"#some-caveats\" aria-label=\"some caveats permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Some caveats</h2>\n<p>While the <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a> aims to simplify your manga reading experience, there are a few points to keep in mind:</p>\n<ul>\n<li><strong>Quality of Text Recognition</strong>: The accuracy of text detection can vary based on the quality of the manga images. High-resolution images tend to yield better results.</li>\n<li><strong>Cultural Nuances</strong>: Flipping the images can sometimes disrupt the original artistic intent or the flow of the story. Certain visual elements intended to be on one side of the page might not translate well when mirrored.</li>\n<li><strong>Performance</strong>: Processing multiple or high-resolution manga pages can be computationally intensive, especially if you don’t use a GPU.</li>\n<li><strong>Specific Glitches</strong>: If the text overlays significant visual elements (like a “BOOOM” in the middle of a character drawing), the part of the image underneath the text will be flipped, which could result in a glitched visual. This is due to the script flipping the entire page except for the text areas.</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 569px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 150%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGpUlEQVQ4yy2Vb0xS3x/H7+ppqzWz5eZq63mrZ9XaWvVrucJ0/rkynNrUxYP+TKUcuFx/lNQxMTWNBHRoJPmPoCQBUZTpxYFeVCDRKZB5vcDlXi4Eaqmc75Tf69F5cj7nnPfn/f4cyOfzBQIBsVj8/ft3AIDVahWJRC9fvnz//r3ZbF5eXvb7/Tab7cePHzKZbGJiQqPRfPv2ra2tjcViQX6/v+qQ4uJivV5vMpkUCkVLS0t9ff3i4mIkEgmFQj6fLxKJqA/59OkTn8+XyWQNDQ3Q3Nzc5cuXL168eP36dS6X+/HjR6FQKBKJVCqVx+OhKIogiD9//gAAzGbzw4cPeTyeVCpdX1/X6XSQVqu9dOmSRCKpr6/PzMy0WCy9vb11dXX9/f04jgeDQZIkt7a2AABqtVqhULS2tg4MDESjUalUCi0vLysUilgs5nK57t69W1NTMzk5OTs7S9M0QRAul2tlZSVx88bGxoaGhpmZmV+/fmEYNjk5CW1vb0ej0WAwuLq6yufzX79+PTIygqIoTdM/f/5EUdTr9dpstsXFxYmJCRRFHQ4HiqLDw8NNTU1QIBBYWFiYm5sLBoNqtbqurk4oFCIIQtN0OBymafrfv38YhlEURZJkLBZDEGRgYEAkEn3+/BnS6XQSiQRF0YqKCgiCJBLJ4uJid3f3ysoKOCQaja6trSXW4XB4aGhILBYbDAav1wv19vZCEHTkyJGjR49CENTY2OjxeJaXl9fW1iiKAgDQNJ0Q7O/fv+vr6xRFzc/PWywWh8MBWSyWnJycwsLCoqIiGIa1Wi2O4wRB+P1+p9OJ4zhFUUql0ul02mw2t9ttsVhMJtPU1JTb7Ya2trb29vYoivp3CHmIz+fDcZym6cRTURS12+06na6mpqaiooLD4Uil0rGxMQjDMKfT6fP5CIIIhUKRSGR7ezsUCm1sbHi93q2tLbvdLpFIfv/+bTQau7q6JBJJe3t7f39/Z2cnRBDE0tISSZJut9vj8bjd7kShQCDgcrkwDENRVC6Xc7lcHo9nMBh4PN6XL18SboEoigqFQtvb238OScgTj8dpmsZx3O/37+7uJjS/cuWKWq0uKyszGAxSqXRpaenAJPF4fH9/PxqN0jS9u7tLkmRfX19ra2tXVxeO4/F4XKPR7O/v19bWfvjwAQCAYRiXy93c3ITGxsY6OjoQBHG73QRBjIyMZGZmCgSCvr6+/v5+s9kMAMjKylKpVOPj42lpacPDwxwOZ3BwcHd3F6qsrBQKhRwOB4bhtra2wsJCJpNptVp7eno0Go1CoaAoSiAQ1NfXz8/Pv3jxQqfT2e12r9dLkiS0uroqFAqdTqdSqRQKhXK5vK+vLyMjo7u7OxwOT01Neb1evV6vUqlMJpNIJNrZ2UEQZHJycnBw8KBVbDa7vb29qampuroaABCLxZRKZVVV1dDQ0OzsrMlkWlhYWF1d7erq4nA4QqFQo9EgCPLmzRvIarU+e/YsKysrOzsbRVEMwwAAYrGYzWbzeLyEMcrKysrLyysqKp4/f56fn4/jOACAx+NB09PTMAxnZWXp9fqOjg6bzabX669evVpSUgLDcHV1dVFREZPJzM/PZ7FYRUVF6enpHR0dAID8/HzIaDReu3aNwWA8ePDgwoULIpGIyWTevHmTwWDcuHGDy+Xeu3fv1q1bt2/f/t8hd+7cYTAYb9++ZTAYkEqlOnbsWHJy8okTJ1JTU0+fPn3u3LnU1NSkpKTjx4+XlJScP3/+5MmTycnJSUlJycnJp06dOnPmTEpKytmzZyGz2ZyRkQHDcF5eXk5OTl5eXnZ2NpPJLC0tLS4uFggEBQUFOTk5TCaTxWLBMJybmwvDMIvFys3NPUhVAp/Pl0hYLBaz2Wzl5eWPHz+urKzEMGxzc9Nms6EoGgwGI5FIOByOx+MAACiRAb/fbzKZEpPN4XB0dnaWlpaWl5enpKQgCKJQKBobG7VaLYqiHo+HIIidnZ14PA6RJLmxsdHT02MwGMbHx+fn52dmZlZWVsbHxwEAzc3NT548qaysZLPZX79+nZqamp2dtdvte3t7BydHIpFAIMDj8dhstkAgmJmZGRkZ2dnZWVhYePfuXXp6+qtXr0pKSjgcjkwmm5ubk8vlCIIkRtrBd4Oi6PT09KNHj/h8/ujoqFqtTrQxLS1tbGzM6XRKJJKnT5/K5XKr1SoWi00m0/83b25uqtVqu93e0tLC4XCam5s7OztJkqytrTUajZmZmffv3zcYDDKZrKCgQCwWK5XK0dHRhGD/AWVownytEmZHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"glitched manga page\"\n        title=\"glitched manga page\"\n        src=\"/static/f70dec21cf63a8d87241917f2b71a8ea/7ca0c/glitched-manga-page.png\"\n        srcset=\"/static/f70dec21cf63a8d87241917f2b71a8ea/e3135/glitched-manga-page.png 256w,\n/static/f70dec21cf63a8d87241917f2b71a8ea/06341/glitched-manga-page.png 512w,\n/static/f70dec21cf63a8d87241917f2b71a8ea/7ca0c/glitched-manga-page.png 569w\"\n        sizes=\"(max-width: 569px) 100vw, 569px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">glitched manga page</figcaption>\n  </figure></p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>We’ve bridged the gap between East and West with a few lines of Python, transforming right-to-left manga into left-to-right page-turners. Now, you can enjoy “Dragon Ball Super” without feeling like you’re reading a book in a mirror.</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA1LTAxVDAwOjAwOjAwLjAwMFo=","slug":"/2024/2024-05-01-transforming-manga-pages-for-western-readers.en/","path":"/blog/coding/transforming-manga-pages-for-western-readers/","locale":"en"},"readingTime":{"minutes":7.605},"frontmatter":{"path":"transforming-manga-pages-for-lazy-western-readers","allowComments":true,"title":"Transforming manga pages for lazy western readers","date":"2024-05-01T00:00:00.000Z","categories":["coding"],"tags":["python","manga","image processing","easyocr","PIL","comic","transformation"],"hideExcerpt":false,"subtitle":"When being lazy is the only option"}},"categoryImage":{"childImageSharp":{"original":{"width":1920,"height":1080,"src":"/static/categories_coding-aa17d098a6a0d8e0a764a345865f5ffb.jpg"}}}},"pageContext":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA1LTAxVDAwOjAwOjAwLjAwMFo=","relatedPosts":[{"fields":{"postHashId":"Z2VuZXJhbHRydWVudWxsMjAyMS0wMS0yNFQwMDowMDowMC4wMDBa","slug":"/2021/2021-01-24-godammit-whatsapp.en/","path":"/blog/general/godammit-whatsapp/","locale":"en"},"frontmatter":{"tags":["whatsapp","sqlite","coding","backup","python","telegram","signal"],"categories":["general"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-01-24T00:00:00.000Z","id":null,"path":"godammit-whatsapp","show":true,"title":"Godammit Whatsapp!","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTEwLTI1VDAwOjAwOjAwLjAwMFo=","slug":"/2024/2024-10-25-sharing-encrypted-laravel-cookies-with-next-js.en/","path":"/blog/coding/sharing-encrypted-laravel-cookies-with-next-js/","locale":"en"},"frontmatter":{"tags":["laravel","next.js","cookies","encryption","synchronization","web development","php","javascript"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2024-10-25T00:00:00.000Z","id":null,"path":"sharing-encrypted-laravel-cookies-with-next-js","show":true,"title":"Sharing encrypted Laravel cookies with Next.js","hideExcerpt":false,"subtitle":"Bridging Laravel and Next.js: How we synchronized encrypted cookies between two different frameworks."}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA5LTIxVDAwOjAwOjAwLjAwMFo=","slug":"/2024/2024-09-21-musclog-leveraging-my-reactjs-experience-to-build-a-react-native-app.en/","path":"/blog/coding/musclog-leveraging-my-reactjs-experience-to-build-a-react-native-app/","locale":"en"},"frontmatter":{"tags":["react","react native","expo","android","workout","tracker","logger","musclog"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2024-09-21T00:00:00.000Z","id":null,"path":"musclog-leveraging-my-reactjs-experience-to-build-a-react-native-app","show":true,"title":"Musclog: Leveraging my React.js experience to build a React Native App","hideExcerpt":false,"subtitle":"From Bodybuilding to Codebuilding: Crafting a comprehensive fitness App using React Native and Expo"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA2LTE2VDAwOjAwOjAwLjAwMFo=","slug":"/2024/2024-06-16-tracking-my-working-hours-on-personal-projects-ssing-nodejs.en/","path":"/blog/coding/tracking-my-working-hours-on-personal-projects-ssing-nodejs/","locale":"en"},"frontmatter":{"tags":["nodejs","git","foss","javascript","simple-git","math"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2024-06-16T00:00:00.000Z","id":null,"path":"tracking-my-working-hours-on-personal-projects-using-nodejs","show":true,"title":"Tracking my working hours on personal projects using Node.js","hideExcerpt":false,"subtitle":"Finding out the hard way that some information are not supposed to be known"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEyLTIwVDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-12-20-creating-instagram-reels-coding-tutorials-automatically-with-openais-gpt.en/","path":"/blog/coding/creating-instagram-reels-coding-tutorials-automatically-with-openais-gpt/","locale":"en"},"frontmatter":{"tags":["openai","gpt","javascript","node","nodejs","instagram"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-12-20T00:00:00.000Z","id":null,"path":"creating-instagram-reels-coding-tutorials-automatically-with-openais-gpt","show":true,"title":"Creating Instagram Reels coding tutorials automatically with OpenAI's GPT","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEwLTI1VDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-10-25-how-to-automatically-create-thumbnails-for-your-videos-with-nodejs.en/","path":"/blog/coding/how-to-automatically-create-thumbnails-for-your-videos-with-nodejs/","locale":"en"},"frontmatter":{"tags":["instagram","thumbnail","node","nodejs","javascript","canvas","image","video"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-10-25T00:00:00.000Z","id":null,"path":"how-to-automatically-create-thumbnails-for-your-videos-with-nodejs","show":true,"title":"How to automatically create thumbnails for your videos with Node.js","hideExcerpt":false,"subtitle":"The best way to create thumbnails for your videos on Instagram"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEwLTE0VDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-10-14-posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations.en/","path":"/blog/coding/posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations/","locale":"en"},"frontmatter":{"tags":["instagram","node","nodejs","javascript","axios","ngrok","ffmpeg","automation"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-10-14T00:00:00.000Z","id":null,"path":"posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations","show":true,"title":"Posting Instagram Reels using Node.js and the art of overcoming limitations","hideExcerpt":false,"subtitle":"After all, why spend 30 seconds doing something manually when you can spend 30 hours automating it?"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTA5LTA0VDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-09-04-my-blog-now-has-stories-and-im-not-sure-why.en/","path":"/blog/coding/my-blog-now-has-stories-and-im-not-sure-why/","locale":"en"},"frontmatter":{"tags":["instagram","instagram stories","unnecessary inventions","gatsby","react","javascript"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-09-04T00:00:00.000Z","id":null,"path":"my-blog-now-has-stories-and-im-not-sure-why","show":true,"title":"My blog now has Stories, and I'm not sure why","hideExcerpt":false,"subtitle":"The saga of \"Well, It's here now\""}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTA4LTAyVDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-08-02-using-google-fitness-api-to-calculate-my-tdee-and-more.en/","path":"/blog/coding/using-google-fitness-api-to-calculate-my-tdee-and-more/","locale":"en"},"frontmatter":{"tags":["google cloud","fitness api","google fit","nodejs","node","javascript"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-08-02T00:00:00.000Z","id":null,"path":"using-google-fitness-api-to-calculate-my-tdee-and-more","show":true,"title":"Using Google Fitness API to calculate my TDEE and more","hideExcerpt":false,"subtitle":"From calories to code: Integrating Google Fitness API for personalized health insights"}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTAxLTIyVDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-01-22-creating-rest-api-endpoints-to-my-gatsby-blog.en/","path":"/blog/coding/creating-rest-api-endpoints-to-my-gatsby-blog/","locale":"en"},"frontmatter":{"tags":["gatsby","react","rest api","api"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-01-22T00:00:00.000Z","id":null,"path":"creating-rest-api-endpoints-to-my-gatsby-blog","show":true,"title":"Creating Rest API endpoints to my Gatsby blog","hideExcerpt":false,"subtitle":"Learn how to add API endpoints to Gatsby v3 using the onPostBuild method and create JSON files with a global variable"}}],"alternativeHtml":"<p>Navigating the intricacies of manga as a Western reader can feel a bit like debugging assembly code, frustrating, and with a high risk of getting it all wrong. But fear not, my fellow manga misfits! With a pinch of Python code, and a heaping spoonful of programming prowess, I’ve created a masterpiece script to transform manga pages for Western consumption.</p>\n<p>So if you’re quite lazy, like me, this script is for you.</p>\n<p><strong>Disclaimer:</strong> This project is a fun exploration into image processing with Python. It’s not intended to undermine the traditional manga experience but rather to provide an alternative for those who might struggle with it.</p>\n<h2 id=\"but-why\" style=\"position:relative;\"><a href=\"#but-why\" aria-label=\"but why permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>But… why?</h2>\n<p>As a colossal Dragon Ball fan, waiting for the new season of “Dragon Ball Super” has felt like an impossible task, even though I’ve already been waiting for seven years. With the new season not even confirmed to happen yet, and Dragon Ball Daima just around the corner, my only recourse to finally learn who Moro is was the manga. However, the traditional manga format, read from right to left, completely obliterates my monkey brain (perhaps with some dyslexic tendencies) and Western reading habits.</p>\n<h2 id=\"this-foss-project-is-brought-to-you-by\" style=\"position:relative;\"><a href=\"#this-foss-project-is-brought-to-you-by\" aria-label=\"this foss project is brought to you by permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>This FOSS project is brought to you by</h2>\n<h3 id=\"easyocr\" style=\"position:relative;\"><a href=\"#easyocr\" aria-label=\"easyocr permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>easyOCR</h3>\n<p>Let’s take a moment to sing praises for <code class=\"language-text\">easyOCR</code>, the hero of this project. It not only reads text from images — it provides the precise coordinates (x, y) along with width and height.</p>\n<p>This is crucial because, in our script, knowing where the text lives is the first step in the magical process of flipping it correctly, and most OCR tools don’t provide this level of detail. With this information, we can mirror the image while keeping the text in the right place, so it reads left to right.</p>\n<p>You can read more about <code class=\"language-text\">easyOCR</code> <a href=\"https://github.com/JaidedAI/EasyOCR\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<h3 id=\"chatgpt\" style=\"position:relative;\"><a href=\"#chatgpt\" aria-label=\"chatgpt permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChatGPT</h3>\n<p>ChatGPT is like that friend who insists on reading the instructions when you just want to put the furniture together and see what happens.</p>\n<p>It was great working with <code class=\"language-text\">easyOCR</code> and <code class=\"language-text\">PIL</code> to read the data and manipulate the images, but when it came to flipping the text to it’s correct position, I needed a little more help.</p>\n<p>Also, things like make the script work with different params from the command line, and writing the README.md file, ChatGPT was there to help me.</p>\n<p>Well, actually for the README.md file, I just used Copilot, since it had the full context of the code and the project. But I guess “potato, potahto”.</p>\n<h3 id=\"the-art-of-procrastination\" style=\"position:relative;\"><a href=\"#the-art-of-procrastination\" aria-label=\"the art of procrastination permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The art of procrastination</h3>\n<p>I could have spent my time learning how to read manga the traditional way, but where’s the fun in that? Instead, I decided to create a Python script that would do the heavy lifting for me. And so, the <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a> was born.</p>\n<h2 id=\"the-magical-mirror-\" style=\"position:relative;\"><a href=\"#the-magical-mirror-\" aria-label=\"the magical mirror  permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Magical Mirror ✨</h2>\n<p>Ok but how can we actually do this without having to re-draw the whole manga page? Are we really going to hire someone on Fiverr to do this for us? No, we’re not. We’re going to use Python.</p>\n<p>Imagine mirroring a manga page in a way that doesn’t make your brain hurt. That’s what we’re doing here.</p>\n<p>We flip the whole image horizontally but carefully reposition the text, so it reads left to right, just like a Western comic. It’s a bit like a sticker book, where you can peel off the text, use Python to flip the page horizontally and stick it back on the other side. That’s how they work back in the days, right?</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHszbJKD//EABoQAAMAAwEAAAAAAAAAAAAAAAECAwAREjH/2gAIAQEAAQUCQDN7Po4oHorkSSvP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgIBBQAAAAAAAAAAAAAAAAECETEDQYGRof/aAAgBAQAGPwKtxqOn2J1VjcY+jTVXkwnyf//EABoQAQEBAQADAAAAAAAAAAAAAAERACFBUZH/2gAIAQEAAT8hloL70vMvpR4QQ0CVAZoiPu7DqE6L9wkMjxc//9oADAMBAAIAAwAAABDAz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQADAQEAAwAAAAAAAAAAAAEAESExUUFhkf/aAAgBAQABPxAKHo+A4jAU9ApdPN57kBBsRyz6i8hoKRLz8gu6KLDiPrCqcpljZTTrMyf/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"A boy placing stickers in a sticker book, from which a Python snake emerges to help\" title=\"A boy placing stickers in a sticker book, from which a Python snake emerges to help\" src=\"/static/d17cb3dc28424401404395a9b03cef41/63217/python-snake-stickers.jpg\" srcset=\"/static/d17cb3dc28424401404395a9b03cef41/db830/python-snake-stickers.jpg 256w,\n/static/d17cb3dc28424401404395a9b03cef41/8102f/python-snake-stickers.jpg 512w,\n/static/d17cb3dc28424401404395a9b03cef41/63217/python-snake-stickers.jpg 1024w,\n/static/d17cb3dc28424401404395a9b03cef41/f2d78/python-snake-stickers.jpg 1359w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">A boy placing stickers in a sticker book, from which a Python snake emerges to help</figcaption>\n  </figure><p></p>\n<p>(this is what DALL·E thinks the joke above looks like)</p>\n<h2 id=\"coding\" style=\"position:relative;\"><a href=\"#coding\" aria-label=\"coding permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Coding</h2>\n<p>As mentioned before, thanks to <code class=\"language-text\">easyOCR</code>’s meticulous text mapping, we can pinpoint where text blocks start and end. We use this info to keep our text from turning into an unreadable mirrored mess after flipping.</p>\n<p>So first, we create a function called <code class=\"language-text\">extract_text_from_manga</code> that loads the image and use <code class=\"language-text\">easyOCR</code> to detect the text blocks and their coordinates and returns a JSON with the data.</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">extract_text_from_manga</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    reader <span class=\"token operator\">=</span> easyocr<span class=\"token punctuation\">.</span>Reader<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'en'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> Image<span class=\"token punctuation\">.</span>Image<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        base_image <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\n\n    results <span class=\"token operator\">=</span> reader<span class=\"token punctuation\">.</span>readtext<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> detail<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    extracted_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">for</span> result <span class=\"token keyword\">in</span> results<span class=\"token punctuation\">:</span>\n        data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">:</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"location\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> point <span class=\"token keyword\">in</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"width\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"height\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        extracted_data<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>extracted_data<span class=\"token punctuation\">,</span> ensure_ascii<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div></div>\n<p>With this data, we can now reposition the texts by creating a new function, <code class=\"language-text\">create_image_with_inverted_text_placement</code>, which takes text position data and creates a new image.</p>\n<p>This function adds the texts to their respective positions but inverts them horizontally. For example, if a text is originally positioned at 10 in an image with a width of 100, its new position becomes 90 due to the inversion (calculated as 100 - 10 = 90).</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">create_image_with_inverted_text_placement</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    width<span class=\"token punctuation\">,</span> height <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>size\n    new_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>new<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    data <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> index<span class=\"token punctuation\">,</span> item <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'location'</span><span class=\"token punctuation\">]</span>\n        box_width<span class=\"token punctuation\">,</span> box_height <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">if</span> box_width <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token keyword\">or</span> box_height <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">continue</span>\n\n        new_x <span class=\"token operator\">=</span> width <span class=\"token operator\">-</span> x <span class=\"token operator\">-</span> box_width\n        cropped_image <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>crop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x <span class=\"token operator\">+</span> box_width<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> box_height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        cropped_image <span class=\"token operator\">=</span> cropped_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\n        new_image<span class=\"token punctuation\">.</span>paste<span class=\"token punctuation\">(</span>cropped_image<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>new_x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cropped_image<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> new_image</code></pre></div></div>\n<p>Now the final step is to take the original image, flip it horizontally, and paste the transparent image with the texts on top of it. This is done by the <code class=\"language-text\">overlay_flipped_with_transparent</code> function, which takes the base image, the transparent image with the text, and the path to save the final output image.</p>\n<p>The function flips the base image, converts it to RGBA, and then uses <code class=\"language-text\">Image.alpha_composite</code> to overlay the flipped image with the transparent image. Finally, it saves the output image to the specified path.</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">overlay_flipped_with_transparent</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token operator\">=</span><span class=\"token string\">'final_output_image.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    flipped_base_image <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>transpose<span class=\"token punctuation\">(</span>Image<span class=\"token punctuation\">.</span>FLIP_LEFT_RIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> transparent_image<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">!=</span> <span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">:</span>\n        transparent_image <span class=\"token operator\">=</span> transparent_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\n\n    combined_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>alpha_composite<span class=\"token punctuation\">(</span>flipped_base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> final_output_image_path<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">'.jpg'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> final_output_image_path<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">'.jpeg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        combined_image <span class=\"token operator\">=</span> combined_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGB'</span><span class=\"token punctuation\">)</span>\n\n    combined_image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>final_output_image_path<span class=\"token punctuation\">)</span></code></pre></div></div>\n<p>So, putting it all together, we can now extract the text from the manga image, invert the text positions, and overlay the flipped image with the text in the correct position. The result is a manga page that reads from left to right, just like a Western comic.</p>\n<div class=\"copy-code-block\"><button tabindex=\"3\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">do_task</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        base_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\n    extracted_text <span class=\"token operator\">=</span> extract_text_from_manga<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\n    base_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> base_image\n    transparent_image <span class=\"token operator\">=</span> create_image_with_inverted_text_placement<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> extracted_text<span class=\"token punctuation\">)</span>\n    overlay_flipped_with_transparent<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token punctuation\">)</span></code></pre></div></div>\n<p>And that’s it! Of course there’s more code to account for different scenarios, like processing multiple images or CBR files, but the core logic remains the same. You can check the full script <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<h2 id=\"how-to-use-it\" style=\"position:relative;\"><a href=\"#how-to-use-it\" aria-label=\"how to use it permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use it</h2>\n<p>To get started with the <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a>, you’ll first need to ensure your environment is set up correctly:</p>\n<ol>\n<li>\n<p><strong>Clone or Download the Script</strong>: Get a copy of the script from our repository. If you’re familiar with Git, you can clone it; otherwise, simply download the zip file and extract it to a convenient location on your computer.</p>\n</li>\n<li>\n<p><strong>Install Dependencies</strong>: Open your terminal and navigate to the script’s directory. Install all required dependencies by running:</p>\n<div class=\"copy-code-block\"><button tabindex=\"4\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-r</span> requirements.txt</code></pre></div></div>\n</li>\n<li>\n<p><strong>Prepare Your Manga Files</strong>: Make sure your manga pages are in a supported format (common image formats like JPG, PNG are perfect). Organize the pages in a single directory if you have multiple files.</p>\n</li>\n<li>\n<p><strong>Run the Script</strong>: Use the command line to specify the source and the output directory. If you don’t specify an output directory, the script will automatically create one. Here’s how you can run the script:</p>\n<ul>\n<li>To convert a single manga page:\n<div class=\"copy-code-block\"><button tabindex=\"5\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga_page.jpg <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div></div>\n</li>\n<li>To convert multiple pages stored in a folder:\n<div class=\"copy-code-block\"><button tabindex=\"6\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga_folder <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div></div>\n</li>\n<li>To convert a CBR file:\n<div class=\"copy-code-block\"><button tabindex=\"7\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga.cbr <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div></div>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Check the results</strong>: Once the script has finished processing, check the output directory for your newly transformed comic pages.</p>\n</li>\n</ol>\n<h2 id=\"some-caveats\" style=\"position:relative;\"><a href=\"#some-caveats\" aria-label=\"some caveats permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Some caveats</h2>\n<p>While the <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a> aims to simplify your manga reading experience, there are a few points to keep in mind:</p>\n<ul>\n<li><strong>Quality of Text Recognition</strong>: The accuracy of text detection can vary based on the quality of the manga images. High-resolution images tend to yield better results.</li>\n<li><strong>Cultural Nuances</strong>: Flipping the images can sometimes disrupt the original artistic intent or the flow of the story. Certain visual elements intended to be on one side of the page might not translate well when mirrored.</li>\n<li><strong>Performance</strong>: Processing multiple or high-resolution manga pages can be computationally intensive, especially if you don’t use a GPU.</li>\n<li><strong>Specific Glitches</strong>: If the text overlays significant visual elements (like a “BOOOM” in the middle of a character drawing), the part of the image underneath the text will be flipped, which could result in a glitched visual. This is due to the script flipping the entire page except for the text areas.</li>\n</ul>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 569px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 150%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGpUlEQVQ4yy2Vb0xS3x/H7+ppqzWz5eZq63mrZ9XaWvVrucJ0/rkynNrUxYP+TKUcuFx/lNQxMTWNBHRoJPmPoCQBUZTpxYFeVCDRKZB5vcDlXi4Eaqmc75Tf69F5cj7nnPfn/f4cyOfzBQIBsVj8/ft3AIDVahWJRC9fvnz//r3ZbF5eXvb7/Tab7cePHzKZbGJiQqPRfPv2ra2tjcViQX6/v+qQ4uJivV5vMpkUCkVLS0t9ff3i4mIkEgmFQj6fLxKJqA/59OkTn8+XyWQNDQ3Q3Nzc5cuXL168eP36dS6X+/HjR6FQKBKJVCqVx+OhKIogiD9//gAAzGbzw4cPeTyeVCpdX1/X6XSQVqu9dOmSRCKpr6/PzMy0WCy9vb11dXX9/f04jgeDQZIkt7a2AABqtVqhULS2tg4MDESjUalUCi0vLysUilgs5nK57t69W1NTMzk5OTs7S9M0QRAul2tlZSVx88bGxoaGhpmZmV+/fmEYNjk5CW1vb0ej0WAwuLq6yufzX79+PTIygqIoTdM/f/5EUdTr9dpstsXFxYmJCRRFHQ4HiqLDw8NNTU1QIBBYWFiYm5sLBoNqtbqurk4oFCIIQtN0OBymafrfv38YhlEURZJkLBZDEGRgYEAkEn3+/BnS6XQSiQRF0YqKCgiCJBLJ4uJid3f3ysoKOCQaja6trSXW4XB4aGhILBYbDAav1wv19vZCEHTkyJGjR49CENTY2OjxeJaXl9fW1iiKAgDQNJ0Q7O/fv+vr6xRFzc/PWywWh8MBWSyWnJycwsLCoqIiGIa1Wi2O4wRB+P1+p9OJ4zhFUUql0ul02mw2t9ttsVhMJtPU1JTb7Ya2trb29vYoivp3CHmIz+fDcZym6cRTURS12+06na6mpqaiooLD4Uil0rGxMQjDMKfT6fP5CIIIhUKRSGR7ezsUCm1sbHi93q2tLbvdLpFIfv/+bTQau7q6JBJJe3t7f39/Z2cnRBDE0tISSZJut9vj8bjd7kShQCDgcrkwDENRVC6Xc7lcHo9nMBh4PN6XL18SboEoigqFQtvb238OScgTj8dpmsZx3O/37+7uJjS/cuWKWq0uKyszGAxSqXRpaenAJPF4fH9/PxqN0jS9u7tLkmRfX19ra2tXVxeO4/F4XKPR7O/v19bWfvjwAQCAYRiXy93c3ITGxsY6OjoQBHG73QRBjIyMZGZmCgSCvr6+/v5+s9kMAMjKylKpVOPj42lpacPDwxwOZ3BwcHd3F6qsrBQKhRwOB4bhtra2wsJCJpNptVp7eno0Go1CoaAoSiAQ1NfXz8/Pv3jxQqfT2e12r9dLkiS0uroqFAqdTqdSqRQKhXK5vK+vLyMjo7u7OxwOT01Neb1evV6vUqlMJpNIJNrZ2UEQZHJycnBw8KBVbDa7vb29qampuroaABCLxZRKZVVV1dDQ0OzsrMlkWlhYWF1d7erq4nA4QqFQo9EgCPLmzRvIarU+e/YsKysrOzsbRVEMwwAAYrGYzWbzeLyEMcrKysrLyysqKp4/f56fn4/jOACAx+NB09PTMAxnZWXp9fqOjg6bzabX669evVpSUgLDcHV1dVFREZPJzM/PZ7FYRUVF6enpHR0dAID8/HzIaDReu3aNwWA8ePDgwoULIpGIyWTevHmTwWDcuHGDy+Xeu3fv1q1bt2/f/t8hd+7cYTAYb9++ZTAYkEqlOnbsWHJy8okTJ1JTU0+fPn3u3LnU1NSkpKTjx4+XlJScP3/+5MmTycnJSUlJycnJp06dOnPmTEpKytmzZyGz2ZyRkQHDcF5eXk5OTl5eXnZ2NpPJLC0tLS4uFggEBQUFOTk5TCaTxWLBMJybmwvDMIvFys3NPUhVAp/Pl0hYLBaz2Wzl5eWPHz+urKzEMGxzc9Nms6EoGgwGI5FIOByOx+MAACiRAb/fbzKZEpPN4XB0dnaWlpaWl5enpKQgCKJQKBobG7VaLYqiHo+HIIidnZ14PA6RJLmxsdHT02MwGMbHx+fn52dmZlZWVsbHxwEAzc3NT548qaysZLPZX79+nZqamp2dtdvte3t7BydHIpFAIMDj8dhstkAgmJmZGRkZ2dnZWVhYePfuXXp6+qtXr0pKSjgcjkwmm5ubk8vlCIIkRtrBd4Oi6PT09KNHj/h8/ujoqFqtTrQxLS1tbGzM6XRKJJKnT5/K5XKr1SoWi00m0/83b25uqtVqu93e0tLC4XCam5s7OztJkqytrTUajZmZmffv3zcYDDKZrKCgQCwWK5XK0dHRhGD/AWVownytEmZHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"glitched manga page\" title=\"glitched manga page\" src=\"/static/f70dec21cf63a8d87241917f2b71a8ea/7ca0c/glitched-manga-page.png\" srcset=\"/static/f70dec21cf63a8d87241917f2b71a8ea/e3135/glitched-manga-page.png 256w,\n/static/f70dec21cf63a8d87241917f2b71a8ea/06341/glitched-manga-page.png 512w,\n/static/f70dec21cf63a8d87241917f2b71a8ea/7ca0c/glitched-manga-page.png 569w\" sizes=\"(max-width: 569px) 100vw, 569px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">glitched manga page</figcaption>\n  </figure><p></p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>We’ve bridged the gap between East and West with a few lines of Python, transforming right-to-left manga into left-to-right page-turners. Now, you can enjoy “Dragon Ball Super” without feeling like you’re reading a book in a mirror.</p>","otherLanguagesUrl":["/pt-br/blog/coding/transformando-paginas-de-manga-para-leitores-ocidentais-preguicosos/"],"rss":{"title":"Transforming manga pages for lazy western readers","description":"Transforming manga pages for lazy western readers","date":"2024-05-01T00:00:00.000Z"},"images":["/static/d17cb3dc28424401404395a9b03cef41/63217/python-snake-stickers.jpg","/static/f70dec21cf63a8d87241917f2b71a8ea/7ca0c/glitched-manga-page.png"],"videos":[],"comments":[],"googleFormData":{"fvv":1,"pageHistory":0,"fbzx":"5566947645549549202","action":"e/1FAIpQLSeST_0jBnLKkEkXGpyx9LWrvV2a1-1F5dr-AcA4wn0BSRyPCw","title":"blog_comment","description":null,"fields":[{"label":"name","description":null,"type":"SHORT_ANSWER","id":"1953327618","required":true},{"label":"email","description":null,"type":"SHORT_ANSWER","id":"1309141965","required":false},{"label":"twitter","description":null,"type":"SHORT_ANSWER","id":"740186305","required":false},{"label":"comment","description":null,"type":"LONG_ANSWER","id":"1663940054","required":true},{"label":"post_path","description":null,"type":"SHORT_ANSWER","id":"1852628638","required":true}],"fieldsOrder":{"740186305":2,"1309141965":1,"1663940054":3,"1852628638":4,"1953327618":0}},"pageType":"blogPost","categoryImage":"/categories_coding.jpg/","slug":"/2024/2024-05-01-transforming-manga-pages-for-western-readers.en/","locale":"en","title":"Transforming manga pages for lazy western readers","previous":{"excerpt":"Após criar um script Node.js para postar automaticamente…","html":"<p>Após criar um script Node.js para <a href=\"/pt-br/blog/coding/publicando-reels-no-instagram-usando-nodejs-e-a-arte-de-superar-limitacoes/\">postar automaticamente Reels no Instagram</a> e outro para <a href=\"/pt-br/blog/coding/como-criar-thumbnails-para-seus-videos-automaticamente-com-nodejs/\">gerar automaticamente miniaturas para Reels no Instagram</a>, o que vem a seguir? Gerar automaticamente o conteúdo do vídeo, claro!</p>\n<p>Neste post, vou mostrar como usar o GPT-3.5 da OpenAI para gerar o conteúdo de um vídeo tutorial de programação. Vou usar o mesmo script Node.js que usei nos posts anteriores, além de um <code class=\"language-text\">create-react-app</code> que será usado para digitar o código do tutorial gerado.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADKElEQVQozwXBWUzTBwDA4T+DcTnAEKAUWqUDWi5rAaFgBbMqZ01bYAhylk5aOZxU1kKhwEBhKIhYFDBgZIBAq5I5QAScWyRbsiW7spctZG9L9uLDkmXJnvbb9wlRUg1yWTpnM3OxX+7gxfYcvxy8xLt0n5qCCyi1TRwpNnG0uhVphZUjla2IKqxElF0iUn+JaIMFsd5CUEox/qIchFiZlix5Nm3nythxD/L3gRf++5G/DnZxj6+i7VsnzrGGpGsVyexLRJ4fiNv4lXj7BKHv1RKibye0yk6wugr/2HwEkUyLIimbkpJyrg1e5+fvHvHmjx02th/TbhtA23iFQ6dbEDm8FP0Dx/+FuDcQ2zvLO7UODrseIH/4JWEV3fjF5COEywqRHTtNhs5EUccI888esPX9Fs2L65yq/xCxsYfUvmWy7j4j+dE+0Ss/IXvxG0enPCTOrJKz8ZrEtdeEVfbiKz2LECY3ID6hJ73OTp5zEuvdSQY+W6Hy08/JsjpJndxB3uUhvcSCkFTDsYZ7qKdf8e7aLineTdS736Dc3Ceq8RqCzIgQmFqNuKiFAtcw6v5bGO7MYb4ziXFqCcnt31E+/xPZ4rdIbA8JufqU8Cvr5I1tUrj8hLTlFRSLXtK924ibbyIoGhCEjDbiG7spuH4LVb8b2+MVdENuDB+PYVjYI9bUR8r0GrnrX5C79QqV52skM/uY51fRjI4jd1zl5JCLGPM4gsqGEJDRQHjpZTRj81i8HipnF4g03eCMzUW1s5MAZT7Fjh4uToxiGujAPPIRF929WEd7aOw2k1RVTnzNeSKrBxHU/QiBqgZ8dG5iHEsoemeIsN4ktGkYqbGdpGYXhzM1pL1vIt95D/86D4JugZP229RP9JGgKySksJwIQwVB+j6EU8MIvqpWgnVu/BLOEJGsISL3HGH1nYiNzeS02Ui0ucg0WZDqaznR1ImvsoK0Fgel07NElpbhc95EQJ0ZP50TIbMHwVdxAf8sC28n5BF0XEuw/gMktiGSu8ZQLT4n/pNpsm9MIfPuod37iui5ZaJGp4gdneOQsQn/FieBI/d5q2wQH3kr/wMcxNdOxLj/fAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AI trabalhando\"\n        title=\"AI trabalhando\"\n        src=\"/static/cdcc77b7fb8d6bdf43386ce698ba2c79/42a19/auto-generating-tutorials.png\"\n        srcset=\"/static/cdcc77b7fb8d6bdf43386ce698ba2c79/e3135/auto-generating-tutorials.png 256w,\n/static/cdcc77b7fb8d6bdf43386ce698ba2c79/06341/auto-generating-tutorials.png 512w,\n/static/cdcc77b7fb8d6bdf43386ce698ba2c79/42a19/auto-generating-tutorials.png 1024w,\n/static/cdcc77b7fb8d6bdf43386ce698ba2c79/e8464/auto-generating-tutorials.png 1536w,\n/static/cdcc77b7fb8d6bdf43386ce698ba2c79/445c6/auto-generating-tutorials.png 1792w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">AI trabalhando</figcaption>\n  </figure></p>\n<h2 id=\"engenharia-de-prompts\" style=\"position:relative;\"><a href=\"#engenharia-de-prompts\" aria-label=\"engenharia de prompts permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Engenharia de prompts</h2>\n<p>A primeira pergunta que tive que me fazer foi: como posso pedir ao GPT-3.5 para gerar um tutorial de programação? Quero dizer, não posso simplesmente pedir para ele gerar um tutorial de programação, certo? Preciso dar um contexto, alguma informação, algo com que ele possa trabalhar.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpklEQVQoz4WSaY6cMBCF+xg9wwyLjfcFGwxmb6DpZZLc/zwJTdKKlIxGerL8431Vr8o+DNN5udz7cZmW63r7hoiAmBGuEZVhgo5B9Pqe/KtjEAHEDnU3jtPaDXPTncZ5VaYo665q+rxsirIJE/TyFn8KA8Qo1ynhEHMqNEgpFRlmCmKOqAxCcAyip17fkyAEQQhe3uINJlzlZZ3llTJO29I6L3Se5ZXznSkq59u8bKzzvh1M4bmyEG9tkpQyaQ6Yyp0UympbKuMI1zsvs0IZpx7nw1MgKiOAY0hCgDeYSWNdra1j0mR5tZUwrqp7ZQrrvPOtzAqu7N7A+c75zjqvjKMiOwht5/V2uf9wVdsO83S+LZf7OF/60+Kqdlquw7TW3bjevp+vH0132uI8ym2dk5QhqriyKREpEUwaJu2eHFGJmaIioyLjygqdE6ZiSJKURntsKrKq6bV1Zd0X1RYySWmS0t30vO9KUgoQA4jFkGwwxHz/EoTr/YX+Nn2m37DQth2mP5uou3Eb27o6huRrGCCGmcJUIiIQEeQxJCLimfm/iiH5te2fhep7nFSF4lsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"O futuro está aqui\"\n        title=\"O futuro está aqui\"\n        src=\"/static/f74dd4bc90e600f64b196b06fb41b1db/42a19/programming-2050.png\"\n        srcset=\"/static/f74dd4bc90e600f64b196b06fb41b1db/e3135/programming-2050.png 256w,\n/static/f74dd4bc90e600f64b196b06fb41b1db/06341/programming-2050.png 512w,\n/static/f74dd4bc90e600f64b196b06fb41b1db/42a19/programming-2050.png 1024w,\n/static/f74dd4bc90e600f64b196b06fb41b1db/69083/programming-2050.png 1158w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">O futuro está aqui</figcaption>\n  </figure></p>\n<p>Nesta nova era de trabalhar com modelos de linguagem, é estranho que, se você quer que o modelo faça algo, você só precisa pedir. Então, comecei criando uma lista de coisas que eu queria que estivessem no vídeo, como:</p>\n<ul>\n<li>Um título</li>\n<li>Uma descrição</li>\n<li>O próprio código</li>\n<li>Uma lista de ideias que já usei antes</li>\n<li>Uma lista de coisas a evitar</li>\n</ul>\n<p>E então comecei a pensar em como eu poderia usar essa informação para pedir ao GPT-3.5 para gerar um tutorial de programação. Cheguei ao seguinte prompt:</p>\n<blockquote>\n<p>Respire fundo, relaxe e pense analiticamente sobre o problema que está tentando resolver.\r\nTenho um arquivo JSON para um script de um tutorial de programação em vídeo para Reels no Instagram, que se parece com isto:\r\n&#x3C;EXEMPLO_JSON_AQUI>\r\nPor favor, use este modelo para gerar um novo script para um tutorial de programação em vídeo para Reels no Instagram.\r\nEvite usar as seguintes ideias:\r\n&#x3C;IDEIAS_UTILIZADAS>\r\nE evite os seguintes tópicos:\r\n&#x3C;TÓPICOS_A_EVITAR>\r\nCertifique-se de responder apenas com um arquivo JSON com a mesma estrutura do que eu te dei e nada mais.</p>\n</blockquote>\n<p>Após elaborar este prompt, testei-o algumas vezes no ChatGPT, e parecia bom, mas como esperado, às vezes a saída não era um formato JSON válido, e foi então que aprendi sobre <a href=\"https://openai.com/blog/function-calling-and-other-api-updates\" target=\"_blank\" rel=\"noreferrer\">chamadas de função</a>.</p>\n<h2 id=\"function-calling\" style=\"position:relative;\"><a href=\"#function-calling\" aria-label=\"function calling permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Function calling</h2>\n<p>Chamadas de função são uma nova funcionalidade da API da OpenAI que permite chamar uma função a partir do prompt, e isso ajuda a garantir que a saída do GPT seja o que você espera.</p>\n<p>No meu caso, criei uma função chamada <code class=\"language-text\">generateTutorialViaOpenAi</code> que recebe o arquivo JSON com o script para o vídeo e retorna um novo arquivo JSON com o script para o vídeo.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> OpenAI <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'openai'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> openai <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OpenAI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">apiKey</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">OPENAI_API_KEY</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateTutorialViaOpenAi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prompt</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> schema <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">required</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'commands'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'files'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'description'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">properties</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'A nice and catchy description for the tutorial.'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">commands</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'A string with the code and commands to use for the tutorial. It must not be empty.'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'array'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'The list of files that are going to be used in the tutorial. One of them MUST be index.html'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'A file that is going to be used in the tutorial'</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">required</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'content'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">properties</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'The name of the file'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'The content of the file. Should be empty for the file that is going to be typed from the script.'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> reelsCommands <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> openai<span class=\"token punctuation\">.</span>chat<span class=\"token punctuation\">.</span>completions<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token string\">'gpt-3.5-turbo'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">messages</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n      <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">role</span><span class=\"token operator\">:</span> <span class=\"token string\">'system'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">'You are a helpful programming professor.'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">role</span><span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> prompt <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">functions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'generate_tutorial'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">parameters</span><span class=\"token operator\">:</span> schema <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">function_call</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'generate_tutorial'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> reelsCommands<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Como você pode ver, o objeto <code class=\"language-text\">schema</code> é a chave aqui, garantindo que a saída do GPT seja o que eu espero.</p>\n<h2 id=\"gerando-o-video\" style=\"position:relative;\"><a href=\"#gerando-o-video\" aria-label=\"gerando o video permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gerando o vídeo</h2>\n<p>Agora que tenho um arquivo JSON gerado sob demanda pela OpenAI, preciso de alguma forma convertê-lo em um vídeo, e é aqui que o script Puppeteer.js entra em cena.</p>\n<p>Não vou entrar em muitos detalhes aqui porque esta é, na verdade, a parte mais complexa, e merece seu próprio post um dia, mas em resumo, estou usando Puppeteer.js para abrir um navegador Chrome sem cabeçalho, carregar um aplicativo React, e usando <a href=\"https://www.npmjs.com/package/react-ace\" target=\"_blank\" rel=\"noreferrer\">react-ace</a> para o destaque de código, então com Puppeteer.js estou digitando o código e tirando uma captura de tela da página e salvando-a como um arquivo PNG usando o <a href=\"https://chromedevtools.github.io/devtools-protocol/tot/Page/#event-screencastFrame\" target=\"_blank\" rel=\"noreferrer\">‘Page.screencastFrame’</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> allFrames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">pages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">target</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">createCDPSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nclient<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Page.screencastFrame'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> sessionId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Page.screencastFrameAck'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> sessionId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  allFrames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Depois disso, estou usando <a href=\"https://ffmpeg.org/\" target=\"_blank\" rel=\"noreferrer\">ffmpeg</a> para converter os arquivos PNG em um vídeo.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> ffmpeg <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fluent-ffmpeg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> ffmpegPath <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ffmpeg-static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> ffprobe <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ffprobe-static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\nffmpeg<span class=\"token punctuation\">.</span><span class=\"token function\">setFfmpegPath</span><span class=\"token punctuation\">(</span>ffmpegPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nffmpeg<span class=\"token punctuation\">.</span><span class=\"token function\">setFfprobePath</span><span class=\"token punctuation\">(</span>ffprobe<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createVideoFromFrames</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token parameter\">fps<span class=\"token punctuation\">,</span>\r\n  frames<span class=\"token punctuation\">,</span>\r\n  outputPath</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> tempOutput <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>outputPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.temp</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">ffmpeg</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">input</span><span class=\"token punctuation\">(</span>frames<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">inputFPS</span><span class=\"token punctuation\">(</span>fps<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">toFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mp4'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">videoCodec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'libx264'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">videoBitrate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'5000k'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addOption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-crf'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'23'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addOption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-g'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'30'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addOption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-profile:v'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'high'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addOption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-level'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'4.0'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> resolve<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>tempOutput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">ffmpeg</span><span class=\"token punctuation\">(</span>tempOutput<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fps</span><span class=\"token punctuation\">(</span><span class=\"token constant\">FPS</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> resolve<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">output</span><span class=\"token punctuation\">(</span>outputPath<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"juntando-tudo\" style=\"position:relative;\"><a href=\"#juntando-tudo\" aria-label=\"juntando tudo permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Juntando tudo</h2>\n<p>Agora que tenho todas as peças, só preciso uni-las. Criei um novo script Node.js que irá:</p>\n<ul>\n<li>Gerar um novo arquivo JSON com o script para o vídeo</li>\n<li>Gerar um novo vídeo com o script para o vídeo</li>\n<li>Gerar uma nova miniatura para o vídeo</li>\n<li>Postar o vídeo no Instagram Reels</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> generateTutorialViaOpenAi <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./generate-tutorial-via-openai'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> generateImageForPost <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./generate-image-for-post'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> generateVideoForPost <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./generate-video-for-post'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> postVideoToInstagramReels <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./post-video-to-instagram-reels'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> prompt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./prompt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateTutorial</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> reelsCommands <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">generateTutorialViaOpenAi</span><span class=\"token punctuation\">(</span>prompt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> description<span class=\"token punctuation\">,</span> commands<span class=\"token punctuation\">,</span> files <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> reelsCommands<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>choices<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> outputPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./output/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> thumbnailPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>outputPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/thumbnail.png</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> videoPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>outputPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/video.mp4</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token function\">generateImageForPost</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">'./assets/background.png'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'./assets/foreground.png'</span><span class=\"token punctuation\">,</span>\r\n    description<span class=\"token punctuation\">,</span>\r\n    thumbnailPath\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token function\">generateVideoForPost</span><span class=\"token punctuation\">(</span>commands<span class=\"token punctuation\">,</span> files<span class=\"token punctuation\">,</span> videoPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token function\">postVideoToInstagramReels</span><span class=\"token punctuation\">(</span>description<span class=\"token punctuation\">,</span> videoPath<span class=\"token punctuation\">,</span> thumbnailPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token function\">generateTutorial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>O código real que estou usando é um pouco mais complexo, mas essa é a ideia geral.</p>\n<h2 id=\"prova-de-conceito\" style=\"position:relative;\"><a href=\"#prova-de-conceito\" aria-label=\"prova de conceito permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prova de conceito</h2>\n<p>Claro que depois de fazer todo esse trabalho, eu tinha que testá-lo, então criei uma <a href=\"https://www.instagram.com/anchorarray/\" target=\"_blank\" rel=\"noreferrer\">nova conta no Instagram</a> que postará um novo tutorial todos os dias, e sempre evitará ideias e tópicos existentes, bem, pelo menos em teoria…</p>\n<p><div class=\"instagram-embed\"><iframe src=\"https://instagram.com/p/C1OpOUzsfwd/embed\" frameborder=\"0\" allowfullscreen scrolling=\"no\" allowtransparency width=\"400\" height=\"400\"></iframe></div></p>\n<p>… mas a realidade acabou sendo que os tutoriais gerados não são tão bons, e não tenho certeza se é devido ao prompt que estou usando, ou devido ao próprio modelo, mas tenho certeza que é uma combinação de ambos. Por alguma razão, ele continua gerando os mesmos tutoriais, sempre relacionados a colorir coisas usando CSS.</p>\n<p>Estive executando esta conta por 3 meses agora, e ela obteve apenas 38 seguidores até hoje e alcançou 466 contas nos últimos 30 dias, então não tenho certeza se vale a pena continuar com ela, mesmo que seja totalmente automatizada e o custo total até agora foi de apenas U$1.00.</p>\n<p>Acho que a melhor abordagem aqui é uma híbrida, onde gero meus próprios scripts e uso meu código Node.js para gerar o vídeo e postá-lo no Instagram Reels, o que já automatiza muito do trabalho.</p>\n<h2 id=\"conclusao\" style=\"position:relative;\"><a href=\"#conclusao\" aria-label=\"conclusao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusão</h2>\n<p>Estou realmente animado com esta nova era de trabalho com modelos de linguagem. Tenho certeza de que veremos muitas coisas legais sendo criadas nos próximos anos.</p>\n<p>Mesmo que este projeto não tenha funcionado como esperado, aprendi muito sobre a API da OpenAI e como usá-la, e tenho certeza de que a usarei no futuro.</p>\n<p>Espero que tenham gostado deste post, e não se esqueçam de conferir como <a href=\"/pt-br/blog/coding/publicando-reels-no-instagram-usando-nodejs-e-a-arte-de-superar-limitacoes/\">postar automaticamente Reels no Instagram usando Node.js</a> e <a href=\"/pt-br/blog/coding/como-criar-thumbnails-para-seus-videos-automaticamente-com-nodejs/\">como gerar automaticamente miniaturas para seus vídeos com Node.js</a>.</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEyLTIwVDAwOjAwOjAwLjAwMFo=","slug":"/2023/2023-12-20-como-automatizar-a-criacao-de-instagram-reels-usando-gpt-da-openai.pt-br/","path":"/blog/coding/como-automatizar-a-criacao-de-instagram-reels-usando-gpt-da-openai/","locale":"pt-br"},"rawMarkdownBody":"Após criar um script Node.js para [postar automaticamente Reels no Instagram](/pt-br/blog/coding/publicando-reels-no-instagram-usando-nodejs-e-a-arte-de-superar-limitacoes/) e outro para [gerar automaticamente miniaturas para Reels no Instagram](/pt-br/blog/coding/como-criar-thumbnails-para-seus-videos-automaticamente-com-nodejs/), o que vem a seguir? Gerar automaticamente o conteúdo do vídeo, claro!\r\n\r\nNeste post, vou mostrar como usar o GPT-3.5 da OpenAI para gerar o conteúdo de um vídeo tutorial de programação. Vou usar o mesmo script Node.js que usei nos posts anteriores, além de um `create-react-app` que será usado para digitar o código do tutorial gerado.\r\n\r\n![AI trabalhando](../../uploads/blog/2023/12/auto-generating-tutorials.png)\r\n\r\n## Engenharia de prompts\r\nA primeira pergunta que tive que me fazer foi: como posso pedir ao GPT-3.5 para gerar um tutorial de programação? Quero dizer, não posso simplesmente pedir para ele gerar um tutorial de programação, certo? Preciso dar um contexto, alguma informação, algo com que ele possa trabalhar.\r\n\r\n![O futuro está aqui](../../uploads/blog/2023/12/programming-2050.png)\r\n\r\nNesta nova era de trabalhar com modelos de linguagem, é estranho que, se você quer que o modelo faça algo, você só precisa pedir. Então, comecei criando uma lista de coisas que eu queria que estivessem no vídeo, como:\r\n\r\n- Um título\r\n- Uma descrição\r\n- O próprio código\r\n- Uma lista de ideias que já usei antes\r\n- Uma lista de coisas a evitar\r\n\r\nE então comecei a pensar em como eu poderia usar essa informação para pedir ao GPT-3.5 para gerar um tutorial de programação. Cheguei ao seguinte prompt:\r\n\r\n> Respire fundo, relaxe e pense analiticamente sobre o problema que está tentando resolver.\r\n> Tenho um arquivo JSON para um script de um tutorial de programação em vídeo para Reels no Instagram, que se parece com isto:\r\n> <EXEMPLO_JSON_AQUI>\r\n> Por favor, use este modelo para gerar um novo script para um tutorial de programação em vídeo para Reels no Instagram.\r\n> Evite usar as seguintes ideias:\r\n> <IDEIAS_UTILIZADAS>\r\n> E evite os seguintes tópicos:\r\n> <TÓPICOS_A_EVITAR>\r\n> Certifique-se de responder apenas com um arquivo JSON com a mesma estrutura do que eu te dei e nada mais.\r\n\r\nApós elaborar este prompt, testei-o algumas vezes no ChatGPT, e parecia bom, mas como esperado, às vezes a saída não era um formato JSON válido, e foi então que aprendi sobre [chamadas de função](https://openai.com/blog/function-calling-and-other-api-updates).\r\n\r\n## Function calling\r\nChamadas de função são uma nova funcionalidade da API da OpenAI que permite chamar uma função a partir do prompt, e isso ajuda a garantir que a saída do GPT seja o que você espera.\r\n\r\nNo meu caso, criei uma função chamada `generateTutorialViaOpenAi` que recebe o arquivo JSON com o script para o vídeo e retorna um novo arquivo JSON com o script para o vídeo.\r\n\r\n```javascript\r\nconst OpenAI = require('openai');\r\n\r\nconst openai = new OpenAI({\r\n  apiKey: process.env.OPENAI_API_KEY,\r\n});\r\n\r\nconst generateTutorialViaOpenAi = async (prompt) => {\r\n  const schema = {\r\n    type: 'object',\r\n    required: ['commands', 'files', 'description'],\r\n    properties: {\r\n      description: {\r\n        type: 'string',\r\n        description: 'A nice and catchy description for the tutorial.',\r\n      },\r\n      commands: {\r\n        type: 'string',\r\n        description: 'A string with the code and commands to use for the tutorial. It must not be empty.',\r\n      },\r\n      files: {\r\n        type: 'array',\r\n        description: 'The list of files that are going to be used in the tutorial. One of them MUST be index.html',\r\n        items: {\r\n          type: 'object',\r\n          description: 'A file that is going to be used in the tutorial',\r\n          required: ['name', 'content'],\r\n          properties: {\r\n            name: {\r\n              type: 'string',\r\n              description: 'The name of the file',\r\n            },\r\n            content: {\r\n              type: 'string',\r\n              description: 'The content of the file. Should be empty for the file that is going to be typed from the script.',\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  const reelsCommands = await openai.chat.completions.create({\r\n    model: 'gpt-3.5-turbo',\r\n    messages: [\r\n      { role: 'system', content: 'You are a helpful programming professor.' },\r\n      { role: 'user', content: prompt },\r\n    ],\r\n    functions: [{ name: 'generate_tutorial', parameters: schema }],\r\n    function_call: { name: 'generate_tutorial' },\r\n  });\r\n\r\n  return reelsCommands;\r\n};\r\n```\r\n\r\nComo você pode ver, o objeto `schema` é a chave aqui, garantindo que a saída do GPT seja o que eu espero.\r\n\r\n## Gerando o vídeo\r\nAgora que tenho um arquivo JSON gerado sob demanda pela OpenAI, preciso de alguma forma convertê-lo em um vídeo, e é aqui que o script Puppeteer.js entra em cena.\r\n\r\nNão vou entrar em muitos detalhes aqui porque esta é, na verdade, a parte mais complexa, e merece seu próprio post um dia, mas em resumo, estou usando Puppeteer.js para abrir um navegador Chrome sem cabeçalho, carregar um aplicativo React, e usando [react-ace](https://www.npmjs.com/package/react-ace) para o destaque de código, então com Puppeteer.js estou digitando o código e tirando uma captura de tela da página e salvando-a como um arquivo PNG usando o ['Page.screencastFrame'](https://chromedevtools.github.io/devtools-protocol/tot/Page/#event-screencastFrame).\r\n\r\n```javascript\r\nconst allFrames = [];\r\nconst browser = await puppeteer.launch();\r\nconst [page] = await browser.pages();\r\nconst client = await page.target().createCDPSession();\r\nclient.on('Page.screencastFrame', async ({ data, sessionId }) => {\r\n  await client.send('Page.screencastFrameAck', { sessionId });\r\n  allFrames.push(data);\r\n});\r\n```\r\n\r\nDepois disso, estou usando [ffmpeg](https://ffmpeg.org/) para converter os arquivos PNG em um vídeo.\r\n\r\n```javascript\r\nconst ffmpeg = require('fluent-ffmpeg');\r\nconst ffmpegPath = require('ffmpeg-static');\r\nconst ffprobe = require('ffprobe-static');\r\n\r\nffmpeg.setFfmpegPath(ffmpegPath);\r\nffmpeg.setFfprobePath(ffprobe.path);\r\n\r\nconst createVideoFromFrames = async (\r\n  fps,\r\n  frames,\r\n  outputPath\r\n) => {\r\n  const tempOutput = `${outputPath}.temp`;\r\n  await new Promise((resolve, reject) => {\r\n    ffmpeg()\r\n      .input(frames)\r\n      .inputFPS(fps)\r\n      .toFormat('mp4')\r\n      .videoCodec('libx264')\r\n      .videoBitrate('5000k')\r\n      .addOption('-crf', '23')\r\n      .addOption('-g', '30')\r\n      .addOption('-profile:v', 'high')\r\n      .addOption('-level', '4.0')\r\n      .on('end', resolve)\r\n      .on('error', reject)\r\n      .save(tempOutput);\r\n  });\r\n\r\n  await new Promise((resolve, reject) => {\r\n    ffmpeg(tempOutput)\r\n      .fps(FPS)\r\n      .on('end', resolve)\r\n      .on('error', reject)\r\n      .output(outputPath)\r\n      .run();\r\n  });\r\n};\r\n```\r\n\r\n## Juntando tudo\r\nAgora que tenho todas as peças, só preciso uni-las. Criei um novo script Node.js que irá:\r\n\r\n- Gerar um novo arquivo JSON com o script para o vídeo\r\n- Gerar um novo vídeo com o script para o vídeo\r\n- Gerar uma nova miniatura para o vídeo\r\n- Postar o vídeo no Instagram Reels\r\n\r\n```javascript\r\nconst generateTutorialViaOpenAi = require('./generate-tutorial-via-openai');\r\nconst generateImageForPost = require('./generate-image-for-post');\r\nconst generateVideoForPost = require('./generate-video-for-post');\r\nconst postVideoToInstagramReels = require('./post-video-to-instagram-reels');\r\nconst prompt = require('./prompt');\r\n\r\nconst generateTutorial = async () => {\r\n  const reelsCommands = await generateTutorialViaOpenAi(prompt);\r\n  const { description, commands, files } = reelsCommands.data.choices[0].value;\r\n\r\n  const outputPath = `./output/${Date.now()}`;\r\n  const thumbnailPath = `${outputPath}/thumbnail.png`;\r\n  const videoPath = `${outputPath}/video.mp4`;\r\n\r\n  await generateImageForPost(\r\n    './assets/background.png',\r\n    './assets/foreground.png',\r\n    description,\r\n    thumbnailPath\r\n  );\r\n\r\n  await generateVideoForPost(commands, files, videoPath);\r\n\r\n  await postVideoToInstagramReels(description, videoPath, thumbnailPath);\r\n};\r\n\r\ngenerateTutorial();\r\n```\r\n\r\nO código real que estou usando é um pouco mais complexo, mas essa é a ideia geral.\r\n\r\n## Prova de conceito\r\nClaro que depois de fazer todo esse trabalho, eu tinha que testá-lo, então criei uma [nova conta no Instagram](https://www.instagram.com/anchorarray/) que postará um novo tutorial todos os dias, e sempre evitará ideias e tópicos existentes, bem, pelo menos em teoria...\r\n\r\n![instagram](C1OpOUzsfwd)\r\n\r\n... mas a realidade acabou sendo que os tutoriais gerados não são tão bons, e não tenho certeza se é devido ao prompt que estou usando, ou devido ao próprio modelo, mas tenho certeza que é uma combinação de ambos. Por alguma razão, ele continua gerando os mesmos tutoriais, sempre relacionados a colorir coisas usando CSS.\r\n\r\nEstive executando esta conta por 3 meses agora, e ela obteve apenas 38 seguidores até hoje e alcançou 466 contas nos últimos 30 dias, então não tenho certeza se vale a pena continuar com ela, mesmo que seja totalmente automatizada e o custo total até agora foi de apenas U$1.00.\r\n\r\nAcho que a melhor abordagem aqui é uma híbrida, onde gero meus próprios scripts e uso meu código Node.js para gerar o vídeo e postá-lo no Instagram Reels, o que já automatiza muito do trabalho.\r\n\r\n## Conclusão\r\nEstou realmente animado com esta nova era de trabalho com modelos de linguagem. Tenho certeza de que veremos muitas coisas legais sendo criadas nos próximos anos.\r\n\r\nMesmo que este projeto não tenha funcionado como esperado, aprendi muito sobre a API da OpenAI e como usá-la, e tenho certeza de que a usarei no futuro.\r\n\r\nEspero que tenham gostado deste post, e não se esqueçam de conferir como [postar automaticamente Reels no Instagram usando Node.js](/pt-br/blog/coding/publicando-reels-no-instagram-usando-nodejs-e-a-arte-de-superar-limitacoes/) e [como gerar automaticamente miniaturas para seus vídeos com Node.js](/pt-br/blog/coding/como-criar-thumbnails-para-seus-videos-automaticamente-com-nodejs/).\r\n","frontmatter":{"tags":["openai","gpt","javascript","node","nodejs","instagram"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2023-12-20T00:00:00.000Z","id":null,"path":"como-automatizar-a-criacao-de-instagram-reels-usando-gpt-da-openai","show":true,"title":"Como automatizar a criação de Instagram Reels usando GPT da OpenAI","hideExcerpt":false,"subtitle":""}},"next":{"excerpt":"Navegar pelas complexidades do mangá como um leitor…","html":"<p>Navegar pelas complexidades do mangá como um leitor ocidental pode ser comparável a depurar código assembly: frustrante e com um alto risco de errar completamente. Mas não tema, meus companheiros desajustados de mangá! Com uma pitada de código Python e uma boa dose de habilidade em programação, criei um script magistral para adaptar as páginas de mangá para o consumo ocidental.</p>\n<p>Então, se você é meio preguiçoso, como eu, este script é para você.</p>\n<p><strong>Aviso:</strong> Este projeto é uma exploração divertida no processamento de imagens com Python. Não tem a intenção de depreciar a experiência tradicional de mangá, mas sim oferecer uma alternativa para aqueles que possam ter dificuldades com ela.</p>\n<h2 id=\"mas-por-que\" style=\"position:relative;\"><a href=\"#mas-por-que\" aria-label=\"mas por que permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mas… por quê?</h2>\n<p>Como um fã colossal de Dragon Ball, esperar pela nova temporada de “Dragon Ball Super” tem se sentido como uma tarefa impossível, mesmo já tendo esperado por sete anos. Com a nova temporada ainda sem confirmação de que vai acontecer, e Dragon Ball Daima logo ali, minha única alternativa para finalmente descobrir quem é Moro foi o mangá. No entanto, o formato tradicional do mangá, lido da direita para a esquerda, destrói completamente meu cérebro de macaco (talvez com algumas tendências disléxicas) e hábitos de leitura ocidentais.</p>\n<h2 id=\"este-projeto-foss-e-apresentado-por\" style=\"position:relative;\"><a href=\"#este-projeto-foss-e-apresentado-por\" aria-label=\"este projeto foss e apresentado por permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Este projeto FOSS é apresentado por</h2>\n<h3 id=\"easyocr\" style=\"position:relative;\"><a href=\"#easyocr\" aria-label=\"easyocr permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>easyOCR</h3>\n<p>Vamos reservar um momento para cantar os louvores do <code class=\"language-text\">easyOCR</code>, o herói deste projeto. Ele não apenas lê texto de imagens — ele fornece as coordenadas precisas (x, y) junto com largura e altura.</p>\n<p>Isso é crucial porque, em nosso script, saber onde o texto está localizado é o primeiro passo no processo mágico de virá-lo corretamente, e a maioria das ferramentas de OCR não oferece esse nível de detalhe. Com essa informação, podemos espelhar a imagem mantendo o texto no lugar certo, para que seja lido da esquerda para a direita.</p>\n<p>Você pode ler mais sobre o <code class=\"language-text\">easyOCR</code> <a href=\"https://github.com/JaidedAI/EasyOCR\" target=\"_blank\" rel=\"noreferrer\">aqui</a>.</p>\n<h3 id=\"chatgpt\" style=\"position:relative;\"><a href=\"#chatgpt\" aria-label=\"chatgpt permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChatGPT</h3>\n<p>ChatGPT é como aquele amigo que insiste em ler as instruções quando você só quer montar os móveis e ver o que acontece.</p>\n<p>Foi ótimo trabalhar com o <code class=\"language-text\">easyOCR</code> e o <code class=\"language-text\">PIL</code> para ler os dados e manipular as imagens, mas quando chegou a hora de virar o texto para a posição correta, eu precisei de um pouco mais de ajuda.</p>\n<p>Além disso, coisas como fazer o script funcionar com diferentes parâmetros da linha de comando e escrever o arquivo README.md, o ChatGPT estava lá para me ajudar.</p>\n<p>Bem, na verdade para o arquivo README.md, eu apenas usei o Copilot, já que ele tinha o contexto completo do código e do projeto. Mas eu acho que dá no mesmo, né?</p>\n<h3 id=\"a-arte-da-procrastinacao\" style=\"position:relative;\"><a href=\"#a-arte-da-procrastinacao\" aria-label=\"a arte da procrastinacao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A arte da procrastinação</h3>\n<p>Eu poderia ter gastado meu tempo aprendendo a ler mangá do modo tradicional, mas onde está a diversão nisso? Em vez disso, decidi criar um script Python que fizesse o trabalho pesado por mim. E assim nasceu o <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a>.</p>\n<h2 id=\"o-espelho-magico-\" style=\"position:relative;\"><a href=\"#o-espelho-magico-\" aria-label=\"o espelho magico  permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>O Espelho Mágico ✨</h2>\n<p>Ok, mas como podemos fazer isso sem ter que redesenhar toda a página do mangá? Vamos realmente contratar alguém no Fiverr para fazer isso por nós? Não, não vamos. Vamos usar Python.</p>\n<p>Imagine espelhar uma página de mangá de uma maneira que não faça seu cérebro doer. É isso que estamos fazendo aqui.</p>\n<p>Viramos toda a imagem horizontalmente, mas reposicionamos cuidadosamente o texto, para que ele seja lido da esquerda para a direita, assim como um quadrinho ocidental. É um pouco como um livro de adesivos, onde você pode descolar o texto, usar Python para virar a página horizontalmente e colá-lo de volta do outro lado. Era assim que funcionava antigamente, certo?</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHszbJKD//EABoQAAMAAwEAAAAAAAAAAAAAAAECAwAREjH/2gAIAQEAAQUCQDN7Po4oHorkSSvP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgIBBQAAAAAAAAAAAAAAAAECETEDQYGRof/aAAgBAQAGPwKtxqOn2J1VjcY+jTVXkwnyf//EABoQAQEBAQADAAAAAAAAAAAAAAERACFBUZH/2gAIAQEAAT8hloL70vMvpR4QQ0CVAZoiPu7DqE6L9wkMjxc//9oADAMBAAIAAwAAABDAz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQADAQEAAwAAAAAAAAAAAAEAESExUUFhkf/aAAgBAQABPxAKHo+A4jAU9ApdPN57kBBsRyz6i8hoKRLz8gu6KLDiPrCqcpljZTTrMyf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Um garoto colocando adesivos em um livro de adesivos, de onde emerge uma cobra Python para ajudar\"\n        title=\"Um garoto colocando adesivos em um livro de adesivos, de onde emerge uma cobra Python para ajudar\"\n        src=\"/static/d17cb3dc28424401404395a9b03cef41/63217/python-snake-stickers.jpg\"\n        srcset=\"/static/d17cb3dc28424401404395a9b03cef41/db830/python-snake-stickers.jpg 256w,\n/static/d17cb3dc28424401404395a9b03cef41/8102f/python-snake-stickers.jpg 512w,\n/static/d17cb3dc28424401404395a9b03cef41/63217/python-snake-stickers.jpg 1024w,\n/static/d17cb3dc28424401404395a9b03cef41/f2d78/python-snake-stickers.jpg 1359w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Um garoto colocando adesivos em um livro de adesivos, de onde emerge uma cobra Python para ajudar</figcaption>\n  </figure></p>\n<p>(isso é o que a DALL·E acha que a piada acima parece)</p>\n<h2 id=\"programando\" style=\"position:relative;\"><a href=\"#programando\" aria-label=\"programando permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Programando</h2>\n<p>Como mencionado anteriormente, graças ao mapeamento meticuloso de texto do <code class=\"language-text\">easyOCR</code>, podemos identificar onde os blocos de texto começam e terminam. Usamos essa informação para evitar que nosso texto se torne uma bagunça espelhada ilegível após ser virado.</p>\n<p>Então, primeiro criamos uma função chamada <code class=\"language-text\">extract_text_from_manga</code> que carrega a imagem e usa o <code class=\"language-text\">easyOCR</code> para detectar os blocos de texto e suas coordenadas, e retorna um JSON com os dados.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">extract_text_from_manga</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    reader <span class=\"token operator\">=</span> easyocr<span class=\"token punctuation\">.</span>Reader<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'en'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> Image<span class=\"token punctuation\">.</span>Image<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        base_image <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\r\n\r\n    results <span class=\"token operator\">=</span> reader<span class=\"token punctuation\">.</span>readtext<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> detail<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n    extracted_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n    <span class=\"token keyword\">for</span> result <span class=\"token keyword\">in</span> results<span class=\"token punctuation\">:</span>\r\n        data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">:</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"location\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> point <span class=\"token keyword\">in</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"width\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"height\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        extracted_data<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">return</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>extracted_data<span class=\"token punctuation\">,</span> ensure_ascii<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Com esses dados, agora podemos reposicionar os textos criando uma nova função, <code class=\"language-text\">create_image_with_inverted_text_placement</code>, que recebe os dados de posição do texto e cria uma nova imagem.</p>\n<p>Esta função adiciona os textos às suas respectivas posições, mas os inverte horizontalmente. Por exemplo, se um texto está originalmente posicionado em 10 em uma imagem com uma largura de 100, sua nova posição torna-se 90 devido à inversão (calculada como 100 - 10 = 90).</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">create_image_with_inverted_text_placement</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    width<span class=\"token punctuation\">,</span> height <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>size\r\n    new_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>new<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n    data <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">for</span> index<span class=\"token punctuation\">,</span> item <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'location'</span><span class=\"token punctuation\">]</span>\r\n        box_width<span class=\"token punctuation\">,</span> box_height <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">]</span>\r\n        <span class=\"token keyword\">if</span> box_width <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token keyword\">or</span> box_height <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">continue</span>\r\n\r\n        new_x <span class=\"token operator\">=</span> width <span class=\"token operator\">-</span> x <span class=\"token operator\">-</span> box_width\r\n        cropped_image <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>crop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x <span class=\"token operator\">+</span> box_width<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> box_height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n        cropped_image <span class=\"token operator\">=</span> cropped_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\r\n        new_image<span class=\"token punctuation\">.</span>paste<span class=\"token punctuation\">(</span>cropped_image<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>new_x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cropped_image<span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">return</span> new_image</code></pre></div>\n<p>Agora o último passo é pegar a imagem original, virá-la horizontalmente e colar a imagem transparente com os textos em cima dela. Isso é feito pela função <code class=\"language-text\">overlay_flipped_with_transparent</code>, que recebe a imagem base, a imagem transparente com o texto e o caminho para salvar a imagem de saída final.</p>\n<p>A função vira a imagem base, a converte para RGBA e então usa <code class=\"language-text\">Image.alpha_composite</code> para sobrepor a imagem virada com a imagem transparente. Por fim, ela salva a imagem de saída no caminho especificado.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">overlay_flipped_with_transparent</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token operator\">=</span><span class=\"token string\">'final_output_image.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    flipped_base_image <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>transpose<span class=\"token punctuation\">(</span>Image<span class=\"token punctuation\">.</span>FLIP_LEFT_RIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">if</span> transparent_image<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">!=</span> <span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">:</span>\r\n        transparent_image <span class=\"token operator\">=</span> transparent_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\r\n\r\n    combined_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>alpha_composite<span class=\"token punctuation\">(</span>flipped_base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">if</span> final_output_image_path<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">'.jpg'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> final_output_image_path<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">'.jpeg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        combined_image <span class=\"token operator\">=</span> combined_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGB'</span><span class=\"token punctuation\">)</span>\r\n\r\n    combined_image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>final_output_image_path<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Então, juntando tudo, agora podemos extrair o texto da imagem do mangá, inverter as posições do texto e sobrepor a imagem virada com o texto na posição correta. O resultado é uma página de mangá que se lê da esquerda para a direita, assim como um quadrinho ocidental.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">do_task</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        base_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\r\n    extracted_text <span class=\"token operator\">=</span> extract_text_from_manga<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\r\n    base_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> base_image\r\n    transparent_image <span class=\"token operator\">=</span> create_image_with_inverted_text_placement<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> extracted_text<span class=\"token punctuation\">)</span>\r\n    overlay_flipped_with_transparent<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token punctuation\">)</span></code></pre></div>\n<p>E é isso! Claro, há mais código para lidar com diferentes cenários, como processar várias imagens ou arquivos CBR, mas a lógica principal permanece a mesma. Você pode conferir o script completo <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">aqui</a>.</p>\n<h2 id=\"como-usar\" style=\"position:relative;\"><a href=\"#como-usar\" aria-label=\"como usar permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Como usar</h2>\n<p>Para começar com o <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a>, você primeiro precisa garantir que seu ambiente esteja configurado corretamente:</p>\n<ol>\n<li>\n<p><strong>Clone ou Baixe o Script</strong>: Obtenha uma cópia do script de nosso repositório. Se você está familiarizado com o Git, pode cloná-lo; caso contrário, basta baixar o arquivo zip e extrair para um local conveniente em seu computador.</p>\n</li>\n<li>\n<p><strong>Instale as Dependências</strong>: Abra seu terminal e navegue até o diretório do script. Instale todas as dependências necessárias executando:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-r</span> requirements.txt</code></pre></div>\n</li>\n<li>\n<p><strong>Prepare seus arquivos de mangá</strong>: Certifique-se de que suas páginas de mangá estejam em um formato suportado (formatos comuns de imagem como JPG, PNG são perfeitos). Organize as páginas em um único diretório se você tiver vários arquivos.</p>\n</li>\n<li>\n<p><strong>Execute o Script</strong>: Use a linha de comando para especificar o diretório de origem e o diretório de saída. Se você não especificar um diretório de saída, o script criará um automaticamente. Veja como você pode executar o script:</p>\n<ul>\n<li>Para converter uma única página de mangá:\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga_page.jpg <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div>\n</li>\n<li>Para converter várias páginas armazenadas em uma pasta:\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga_folder <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div>\n</li>\n<li>Para converter um arquivo CBR:\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga.cbr <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Verifique os resultados</strong>: Depois que o script terminar de processar, verifique o diretório de saída para suas novas páginas de quadrinhos transformadas.</p>\n</li>\n</ol>\n<h2 id=\"consideracoes\" style=\"position:relative;\"><a href=\"#consideracoes\" aria-label=\"consideracoes permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Considerações</h2>\n<p>Embora o <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a> tenha como objetivo simplificar sua experiência de leitura de mangá, há alguns pontos a serem considerados:</p>\n<ul>\n<li><strong>Qualidade do Reconhecimento de Texto</strong>: A precisão da detecção de texto pode variar com base na qualidade das imagens do mangá. Imagens de alta resolução tendem a produzir melhores resultados.</li>\n<li><strong>Nuanças Culturais</strong>: A inversão das imagens às vezes pode perturbar a intenção artística original ou o fluxo da história. Certos elementos visuais destinados a estar em um lado da página podem não se traduzir bem quando espelhados.</li>\n<li><strong>Desempenho</strong>: O processamento de várias páginas de mangá ou de alta resolução pode ser intensivo computacionalmente, especialmente se você não estiver usando uma GPU.</li>\n<li><strong>Falhas Específicas</strong>: Se o texto sobrepuser elementos visuais significativos (como um “BOOOM” no meio de um desenho de personagem), a parte da imagem sob o texto será virada, o que poderia resultar em uma visualização com falha. Isso ocorre devido ao script virar a página inteira, exceto as áreas de texto.</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 569px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 150%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGpUlEQVQ4yy2Vb0xS3x/H7+ppqzWz5eZq63mrZ9XaWvVrucJ0/rkynNrUxYP+TKUcuFx/lNQxMTWNBHRoJPmPoCQBUZTpxYFeVCDRKZB5vcDlXi4Eaqmc75Tf69F5cj7nnPfn/f4cyOfzBQIBsVj8/ft3AIDVahWJRC9fvnz//r3ZbF5eXvb7/Tab7cePHzKZbGJiQqPRfPv2ra2tjcViQX6/v+qQ4uJivV5vMpkUCkVLS0t9ff3i4mIkEgmFQj6fLxKJqA/59OkTn8+XyWQNDQ3Q3Nzc5cuXL168eP36dS6X+/HjR6FQKBKJVCqVx+OhKIogiD9//gAAzGbzw4cPeTyeVCpdX1/X6XSQVqu9dOmSRCKpr6/PzMy0WCy9vb11dXX9/f04jgeDQZIkt7a2AABqtVqhULS2tg4MDESjUalUCi0vLysUilgs5nK57t69W1NTMzk5OTs7S9M0QRAul2tlZSVx88bGxoaGhpmZmV+/fmEYNjk5CW1vb0ej0WAwuLq6yufzX79+PTIygqIoTdM/f/5EUdTr9dpstsXFxYmJCRRFHQ4HiqLDw8NNTU1QIBBYWFiYm5sLBoNqtbqurk4oFCIIQtN0OBymafrfv38YhlEURZJkLBZDEGRgYEAkEn3+/BnS6XQSiQRF0YqKCgiCJBLJ4uJid3f3ysoKOCQaja6trSXW4XB4aGhILBYbDAav1wv19vZCEHTkyJGjR49CENTY2OjxeJaXl9fW1iiKAgDQNJ0Q7O/fv+vr6xRFzc/PWywWh8MBWSyWnJycwsLCoqIiGIa1Wi2O4wRB+P1+p9OJ4zhFUUql0ul02mw2t9ttsVhMJtPU1JTb7Ya2trb29vYoivp3CHmIz+fDcZym6cRTURS12+06na6mpqaiooLD4Uil0rGxMQjDMKfT6fP5CIIIhUKRSGR7ezsUCm1sbHi93q2tLbvdLpFIfv/+bTQau7q6JBJJe3t7f39/Z2cnRBDE0tISSZJut9vj8bjd7kShQCDgcrkwDENRVC6Xc7lcHo9nMBh4PN6XL18SboEoigqFQtvb238OScgTj8dpmsZx3O/37+7uJjS/cuWKWq0uKyszGAxSqXRpaenAJPF4fH9/PxqN0jS9u7tLkmRfX19ra2tXVxeO4/F4XKPR7O/v19bWfvjwAQCAYRiXy93c3ITGxsY6OjoQBHG73QRBjIyMZGZmCgSCvr6+/v5+s9kMAMjKylKpVOPj42lpacPDwxwOZ3BwcHd3F6qsrBQKhRwOB4bhtra2wsJCJpNptVp7eno0Go1CoaAoSiAQ1NfXz8/Pv3jxQqfT2e12r9dLkiS0uroqFAqdTqdSqRQKhXK5vK+vLyMjo7u7OxwOT01Neb1evV6vUqlMJpNIJNrZ2UEQZHJycnBw8KBVbDa7vb29qampuroaABCLxZRKZVVV1dDQ0OzsrMlkWlhYWF1d7erq4nA4QqFQo9EgCPLmzRvIarU+e/YsKysrOzsbRVEMwwAAYrGYzWbzeLyEMcrKysrLyysqKp4/f56fn4/jOACAx+NB09PTMAxnZWXp9fqOjg6bzabX669evVpSUgLDcHV1dVFREZPJzM/PZ7FYRUVF6enpHR0dAID8/HzIaDReu3aNwWA8ePDgwoULIpGIyWTevHmTwWDcuHGDy+Xeu3fv1q1bt2/f/t8hd+7cYTAYb9++ZTAYkEqlOnbsWHJy8okTJ1JTU0+fPn3u3LnU1NSkpKTjx4+XlJScP3/+5MmTycnJSUlJycnJp06dOnPmTEpKytmzZyGz2ZyRkQHDcF5eXk5OTl5eXnZ2NpPJLC0tLS4uFggEBQUFOTk5TCaTxWLBMJybmwvDMIvFys3NPUhVAp/Pl0hYLBaz2Wzl5eWPHz+urKzEMGxzc9Nms6EoGgwGI5FIOByOx+MAACiRAb/fbzKZEpPN4XB0dnaWlpaWl5enpKQgCKJQKBobG7VaLYqiHo+HIIidnZ14PA6RJLmxsdHT02MwGMbHx+fn52dmZlZWVsbHxwEAzc3NT548qaysZLPZX79+nZqamp2dtdvte3t7BydHIpFAIMDj8dhstkAgmJmZGRkZ2dnZWVhYePfuXXp6+qtXr0pKSjgcjkwmm5ubk8vlCIIkRtrBd4Oi6PT09KNHj/h8/ujoqFqtTrQxLS1tbGzM6XRKJJKnT5/K5XKr1SoWi00m0/83b25uqtVqu93e0tLC4XCam5s7OztJkqytrTUajZmZmffv3zcYDDKZrKCgQCwWK5XK0dHRhGD/AWVownytEmZHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"página de mangá com falha\"\n        title=\"página de mangá com falha\"\n        src=\"/static/f70dec21cf63a8d87241917f2b71a8ea/7ca0c/glitched-manga-page.png\"\n        srcset=\"/static/f70dec21cf63a8d87241917f2b71a8ea/e3135/glitched-manga-page.png 256w,\n/static/f70dec21cf63a8d87241917f2b71a8ea/06341/glitched-manga-page.png 512w,\n/static/f70dec21cf63a8d87241917f2b71a8ea/7ca0c/glitched-manga-page.png 569w\"\n        sizes=\"(max-width: 569px) 100vw, 569px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">página de mangá com falha</figcaption>\n  </figure></p>\n<h2 id=\"conclusao\" style=\"position:relative;\"><a href=\"#conclusao\" aria-label=\"conclusao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusão</h2>\n<p>Nós construímos uma ponte entre Oriente e Ocidente com algumas linhas de Python, transformando mangás de leitura da direita para a esquerda em quadrinhos de leitura da esquerda para a direita. Agora, você pode desfrutar de “Dragon Ball Super” sem sentir que está lendo um livro em um espelho.</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA1LTAxVDAwOjAwOjAwLjAwMFo=","slug":"/2024/2024-05-01-transformando-paginas-de-manga-para-leitores-ocidentais-preguicosos.pt-br/","path":"/blog/coding/transformando-paginas-de-manga-para-leitores-ocidentais-preguicosos/","locale":"pt-br"},"rawMarkdownBody":"Navegar pelas complexidades do mangá como um leitor ocidental pode ser comparável a depurar código assembly: frustrante e com um alto risco de errar completamente. Mas não tema, meus companheiros desajustados de mangá! Com uma pitada de código Python e uma boa dose de habilidade em programação, criei um script magistral para adaptar as páginas de mangá para o consumo ocidental.\r\n\r\nEntão, se você é meio preguiçoso, como eu, este script é para você.\r\n\r\n**Aviso:** Este projeto é uma exploração divertida no processamento de imagens com Python. Não tem a intenção de depreciar a experiência tradicional de mangá, mas sim oferecer uma alternativa para aqueles que possam ter dificuldades com ela.\r\n\r\n## Mas... por quê?\r\nComo um fã colossal de Dragon Ball, esperar pela nova temporada de \"Dragon Ball Super\" tem se sentido como uma tarefa impossível, mesmo já tendo esperado por sete anos. Com a nova temporada ainda sem confirmação de que vai acontecer, e Dragon Ball Daima logo ali, minha única alternativa para finalmente descobrir quem é Moro foi o mangá. No entanto, o formato tradicional do mangá, lido da direita para a esquerda, destrói completamente meu cérebro de macaco (talvez com algumas tendências disléxicas) e hábitos de leitura ocidentais.\r\n\r\n## Este projeto FOSS é apresentado por\r\n\r\n### easyOCR\r\nVamos reservar um momento para cantar os louvores do `easyOCR`, o herói deste projeto. Ele não apenas lê texto de imagens — ele fornece as coordenadas precisas (x, y) junto com largura e altura.\r\n\r\nIsso é crucial porque, em nosso script, saber onde o texto está localizado é o primeiro passo no processo mágico de virá-lo corretamente, e a maioria das ferramentas de OCR não oferece esse nível de detalhe. Com essa informação, podemos espelhar a imagem mantendo o texto no lugar certo, para que seja lido da esquerda para a direita.\r\n\r\nVocê pode ler mais sobre o `easyOCR` [aqui](https://github.com/JaidedAI/EasyOCR).\r\n\r\n### ChatGPT\r\nChatGPT é como aquele amigo que insiste em ler as instruções quando você só quer montar os móveis e ver o que acontece.\r\n\r\nFoi ótimo trabalhar com o `easyOCR` e o `PIL` para ler os dados e manipular as imagens, mas quando chegou a hora de virar o texto para a posição correta, eu precisei de um pouco mais de ajuda.\r\n\r\nAlém disso, coisas como fazer o script funcionar com diferentes parâmetros da linha de comando e escrever o arquivo README.md, o ChatGPT estava lá para me ajudar.\r\n\r\nBem, na verdade para o arquivo README.md, eu apenas usei o Copilot, já que ele tinha o contexto completo do código e do projeto. Mas eu acho que dá no mesmo, né?\r\n\r\n### A arte da procrastinação\r\nEu poderia ter gastado meu tempo aprendendo a ler mangá do modo tradicional, mas onde está a diversão nisso? Em vez disso, decidi criar um script Python que fizesse o trabalho pesado por mim. E assim nasceu o [Manga to Comics Converter](https://github.com/blopa/manga-converter).\r\n\r\n## O Espelho Mágico ✨\r\nOk, mas como podemos fazer isso sem ter que redesenhar toda a página do mangá? Vamos realmente contratar alguém no Fiverr para fazer isso por nós? Não, não vamos. Vamos usar Python.\r\n\r\nImagine espelhar uma página de mangá de uma maneira que não faça seu cérebro doer. É isso que estamos fazendo aqui.\r\n\r\nViramos toda a imagem horizontalmente, mas reposicionamos cuidadosamente o texto, para que ele seja lido da esquerda para a direita, assim como um quadrinho ocidental. É um pouco como um livro de adesivos, onde você pode descolar o texto, usar Python para virar a página horizontalmente e colá-lo de volta do outro lado. Era assim que funcionava antigamente, certo?\r\n\r\n![Um garoto colocando adesivos em um livro de adesivos, de onde emerge uma cobra Python para ajudar](../../uploads/blog/2024/05/python-snake-stickers.jpg)\r\n\r\n(isso é o que a DALL·E acha que a piada acima parece)\r\n\r\n## Programando\r\nComo mencionado anteriormente, graças ao mapeamento meticuloso de texto do `easyOCR`, podemos identificar onde os blocos de texto começam e terminam. Usamos essa informação para evitar que nosso texto se torne uma bagunça espelhada ilegível após ser virado.\r\n\r\nEntão, primeiro criamos uma função chamada `extract_text_from_manga` que carrega a imagem e usa o `easyOCR` para detectar os blocos de texto e suas coordenadas, e retorna um JSON com os dados.\r\n\r\n```python\r\ndef extract_text_from_manga(base_image):\r\n    reader = easyocr.Reader(['en'])\r\n    if isinstance(base_image, Image.Image):\r\n        base_image = np.array(base_image)\r\n\r\n    results = reader.readtext(base_image, detail=1)\r\n    extracted_data = []\r\n    for result in results:\r\n        data = {\r\n            \"text\": result[1],\r\n            \"location\": [int(point) for point in result[0][0]],\r\n            \"width\": int(result[0][2][0] - result[0][0][0]),\r\n            \"height\": int(result[0][2][1] - result[0][0][1])\r\n        }\r\n        extracted_data.append(data)\r\n    return json.dumps(extracted_data, ensure_ascii=False)\r\n```\r\n\r\nCom esses dados, agora podemos reposicionar os textos criando uma nova função, `create_image_with_inverted_text_placement`, que recebe os dados de posição do texto e cria uma nova imagem.\r\n\r\nEsta função adiciona os textos às suas respectivas posições, mas os inverte horizontalmente. Por exemplo, se um texto está originalmente posicionado em 10 em uma imagem com uma largura de 100, sua nova posição torna-se 90 devido à inversão (calculada como 100 - 10 = 90).\r\n\r\n```python\r\ndef create_image_with_inverted_text_placement(base_image, data):\r\n    width, height = base_image.size\r\n    new_image = Image.new('RGBA', (width, height), (255, 255, 255, 0))\r\n\r\n    data = json.loads(data)\r\n    for index, item in enumerate(data):\r\n        x, y = item['location']\r\n        box_width, box_height = item['width'], item['height']\r\n        if box_width <= 0 or box_height <= 0:\r\n            continue\r\n\r\n        new_x = width - x - box_width\r\n        cropped_image = base_image.crop((x, y, x + box_width, y + box_height))\r\n        cropped_image = cropped_image.convert('RGBA')\r\n        new_image.paste(cropped_image, (new_x, y), cropped_image)\r\n\r\n    return new_image\r\n```\r\n\r\nAgora o último passo é pegar a imagem original, virá-la horizontalmente e colar a imagem transparente com os textos em cima dela. Isso é feito pela função `overlay_flipped_with_transparent`, que recebe a imagem base, a imagem transparente com o texto e o caminho para salvar a imagem de saída final.\r\n\r\nA função vira a imagem base, a converte para RGBA e então usa `Image.alpha_composite` para sobrepor a imagem virada com a imagem transparente. Por fim, ela salva a imagem de saída no caminho especificado.\r\n\r\n```python\r\ndef overlay_flipped_with_transparent(base_image, transparent_image, final_output_image_path='final_output_image.png'):\r\n    flipped_base_image = base_image.transpose(Image.FLIP_LEFT_RIGHT).convert('RGBA')\r\n\r\n    if transparent_image.mode != 'RGBA':\r\n        transparent_image = transparent_image.convert('RGBA')\r\n\r\n    combined_image = Image.alpha_composite(flipped_base_image, transparent_image)\r\n\r\n    if final_output_image_path.lower().endswith('.jpg') or final_output_image_path.lower().endswith('.jpeg'):\r\n        combined_image = combined_image.convert('RGB')\r\n\r\n    combined_image.save(final_output_image_path)\r\n```\r\n\r\nEntão, juntando tudo, agora podemos extrair o texto da imagem do mangá, inverter as posições do texto e sobrepor a imagem virada com o texto na posição correta. O resultado é uma página de mangá que se lê da esquerda para a direita, assim como um quadrinho ocidental.\r\n\r\n```python\r\ndef do_task(base_image, final_output_image_path):\r\n    if isinstance(base_image, str):\r\n        base_image = Image.open(base_image)\r\n    extracted_text = extract_text_from_manga(base_image)\r\n    base_image = Image.open(base_image) if isinstance(base_image, str) else base_image\r\n    transparent_image = create_image_with_inverted_text_placement(base_image, extracted_text)\r\n    overlay_flipped_with_transparent(base_image, transparent_image, final_output_image_path)\r\n```\r\n\r\nE é isso! Claro, há mais código para lidar com diferentes cenários, como processar várias imagens ou arquivos CBR, mas a lógica principal permanece a mesma. Você pode conferir o script completo [aqui](https://github.com/blopa/manga-converter).\r\n\r\n## Como usar\r\nPara começar com o [Manga to Comics Converter](https://github.com/blopa/manga-converter), você primeiro precisa garantir que seu ambiente esteja configurado corretamente:\r\n\r\n1. **Clone ou Baixe o Script**: Obtenha uma cópia do script de nosso repositório. Se você está familiarizado com o Git, pode cloná-lo; caso contrário, basta baixar o arquivo zip e extrair para um local conveniente em seu computador.\r\n\r\n2. **Instale as Dependências**: Abra seu terminal e navegue até o diretório do script. Instale todas as dependências necessárias executando:\r\n    ```bash\r\n    pip install -r requirements.txt\r\n    ```\r\n\r\n3. **Prepare seus arquivos de mangá**: Certifique-se de que suas páginas de mangá estejam em um formato suportado (formatos comuns de imagem como JPG, PNG são perfeitos). Organize as páginas em um único diretório se você tiver vários arquivos.\r\n\r\n4. **Execute o Script**: Use a linha de comando para especificar o diretório de origem e o diretório de saída. Se você não especificar um diretório de saída, o script criará um automaticamente. Veja como você pode executar o script:\r\n    - Para converter uma única página de mangá:\r\n        ```bash\r\n        python3 script.py --source manga_page.jpg --output comic_folder\r\n        ```\r\n    - Para converter várias páginas armazenadas em uma pasta:\r\n        ```bash\r\n        python3 script.py --source manga_folder --output comic_folder\r\n        ```\r\n    - Para converter um arquivo CBR:\r\n        ```bash\r\n        python3 script.py --source manga.cbr --output comic_folder\r\n        ```\r\n\r\n5. **Verifique os resultados**: Depois que o script terminar de processar, verifique o diretório de saída para suas novas páginas de quadrinhos transformadas.\r\n\r\n## Considerações\r\nEmbora o [Manga to Comics Converter](https://github.com/blopa/manga-converter) tenha como objetivo simplificar sua experiência de leitura de mangá, há alguns pontos a serem considerados:\r\n\r\n- **Qualidade do Reconhecimento de Texto**: A precisão da detecção de texto pode variar com base na qualidade das imagens do mangá. Imagens de alta resolução tendem a produzir melhores resultados.\r\n- **Nuanças Culturais**: A inversão das imagens às vezes pode perturbar a intenção artística original ou o fluxo da história. Certos elementos visuais destinados a estar em um lado da página podem não se traduzir bem quando espelhados.\r\n- **Desempenho**: O processamento de várias páginas de mangá ou de alta resolução pode ser intensivo computacionalmente, especialmente se você não estiver usando uma GPU.\r\n- **Falhas Específicas**: Se o texto sobrepuser elementos visuais significativos (como um \"BOOOM\" no meio de um desenho de personagem), a parte da imagem sob o texto será virada, o que poderia resultar em uma visualização com falha. Isso ocorre devido ao script virar a página inteira, exceto as áreas de texto.\r\n\r\n![página de mangá com falha](../../uploads/blog/2024/05/glitched-manga-page.png)\r\n\r\n## Conclusão\r\nNós construímos uma ponte entre Oriente e Ocidente com algumas linhas de Python, transformando mangás de leitura da direita para a esquerda em quadrinhos de leitura da esquerda para a direita. Agora, você pode desfrutar de \"Dragon Ball Super\" sem sentir que está lendo um livro em um espelho.\r\n","frontmatter":{"tags":["python","manga","processamento de imagens","easyocr","PIL","quadrinhos","transformação"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2024-05-01T00:00:00.000Z","id":null,"path":"transformando-paginas-de-manga-para-leitores-ocidentais-preguicosos","show":true,"title":"Transformando páginas de mangá para leitores ocidentais preguiçosos","hideExcerpt":false,"subtitle":"Quando ser preguiçoso é a única opção"}},"language":"en","intl":{"language":"en","languages":["en","pt-br"],"messages":{"site_title":"pablo.gg","title":"Title","author":"@thepiratepablo","search_placeholder":"Search...","about":"About","photos":"Photos","archive":"Archive","contact":"Contact","close":"Close","contact_page":"Contact page","see_more":"See more posts","built_with":"Built with ","buy_me_a_soda":"Buy me a soda","blog":"Blog","blog_posts":"Blog posts","go_to_post":"Go to post","search":"Search","loading":"Loading...","search_results":"Search results","search_results_for":"{quantity} search results for: \"{query}\"","search_for_query":"Search for \"{query}\"","no_results":"No results","home":"Home","description":"Yet another developer personal blog","go_back":"Go back to the homepage","thats_me":"That's me!","got_it":"Got it!","check_it_out":"Check it out!","we_are":"We are","e3":"E3","away_from_next_sgf":"away from Summer Game Fest 2025","away_from_next_gamescom":"away from Gamescom 2024","sgf_countdown":"Summer Game Fest Countdown","gamescom_countdown":"Gamescom Countdown","e3_paragraph_1":"This page once featured a countdown to the next E3 event, a moment that countless gamers and industry professionals looked forward to each year. E3 was not just an event; it was a celebration of our shared passion for video games, a place where dreams were realized, and memories were made.","e3_paragraph_2":"From the electrifying announcements to the hands-on demos, E3 was the heartbeat of the gaming world. It brought together people from all corners of the globe, united by their love for games. For many, it was a chance to meet their heroes, discover new titles, and experience the thrill of the latest innovations in gaming technology.","e3_paragraph_3":"However, as the gaming landscape has evolved, so too has the way we connect and celebrate our passion. While E3 has come to an end, the spirit of excitement and community it fostered lives on. We now look forward to new ways of coming together, sharing our love for games, and creating new memories.","e3_paragraph_4":"Though the countdown is gone, the legacy of E3 will forever remain in our hearts, reminding us of the incredible journeys we've taken and the bonds we've formed along the way.","sec":"Sec","secs":"Secs","min":"Min","mins":"Mins","hour":"Hour","hours":"Hours","day":"Day","days":"Days","month":"Month","months":"Months","year":"Year","years":"Years","recent_posts":"Recent posts","email":"Email","twitter":"Twitter","name":"Name","page":"Page","fill_this_want_reply":"Fill this in if you want me to contact you back","sorry_this_post_unavailable_language":"Sorry, this post is not available in the language you picked","language":"Language","comment":"Comment","comments":"Comments","no_comments":"No comments yet.","post_comment":"Post comment","send_message":"Send message","message":"Message","post_a_comment":"Post a comment","your_comment_submitted":"Your comment has been successfully submitted.","your_message_submitted":"Your message has been successfully submitted.","on":"on","ok":"Ok","copy":"Copy","copied":"Copied","photo_num":"Photo {num}","the_matrix_has_you":"The Matrix has you...","about_paragraph_1":"A technology enthusiast from an early age, I have always been interested in computers and video games.","about_paragraph_2":"I graduated in Information Technology at Estácio de Sá University and always try to find out about new technologies and get involved in new development projects, some of which the code can be found on GitHub.","cookie_banner_consent":"By using this website you agree to our use of cookies to deliver a better experience.","written_in":"Written in ","no_post_this_tag":"No post in English include this tag.","tags":"Tags","tag_colon":"Tag: ","tags_colon":"Tags: ","posts_tagged":"Posts tagged with ","categories":"Categories","category":"Category","category_colon":"Category: ","posts_on_category":"Posts on category ","related_posts":"Related posts","read_time":"🕒 {time} min. read","create_post":"Create Post","show":"Show","date":"Date","download":"Download","add_tag":"Add Tag","hide_excerpt":"Hide Excerpt","publish_on_medium":"Publish on Medium","allow_comments":"Allow Comments","subtitle":"Subtitle","you_must_be_truly_desperate":"You must be truly desperate to come to me for help","game.game_title":"pablo.gg - The Game","game.next":"Next","game.ok":"Ok","game.loading_asset_colon":"Loading asset:","game.loading":"Loading...","game.characters.npc_01":"Frost","game.characters.npc_02":"Gavin","game.characters.npc_03":"Giles","game.characters.npc_04":"Godfrey","game.characters.npc_05":"Hugh","game.characters.npc_06":"Ivar","game.characters.npc_07":"Leopold","game.characters.npc_08":"Lucian","game.characters.npc_09":"Gumercindo","game.characters.npc_10":"Mr. Flower","game.characters.npc_11":"Maxim","game.characters.npc_12":"Milo","game.characters.npc_13":"Otto","game.characters.npc_14":"Palmer","game.characters.npc_15":"Quentin","game.characters.npc_16":"Sebastian","game.characters.npc_17":"Neville","game.characters.npc_18":"Cassian","game.characters.npc_19":"Balthasar","game.characters.sign_01":"Sign","game.characters.book_01":"Book","game.characters.home_page_city_sign":"Sign","game.characters.coding_category_city_sign_01":"Sign","game.characters.coding_category_city_sign_02":"Sign","game.characters.events_category_city_sign":"Sign","game.characters.funny_category_city_sign":"Sign","game.characters.gadgets_category_city_sign_01":"Sign","game.characters.gadgets_category_city_sign_02":"Sign","game.characters.games_category_city_sign":"Sign","game.characters.general_category_city_sign":"Sign","game.characters.tips_category_city_sign":"Sign","game.characters.toys_category_city_sign":"Sign","game.characters.sword":"Info","game.characters.push":"Info","game.gamepad.a_button":"A Button","game.gamepad.b_button":"B Button","game.gamepad.d_pad_left":"D-Pad Left","game.gamepad.d_pad_up":"D-Pad Up","game.gamepad.d_pad_right":"D-Pad Right","game.gamepad.d_pad_down":"D-Pad Down","game.gamepad.start_button":"Start Button","game.menu.start":"Start","game.menu.exit":"Exit","game.menu.settings":"Settings","game.game_over.game_over":"Game Over","game.game_over.retry":"Retry","game.game_over.exit":"Exit","game.start_menu.save_game":"Save Game","game.start_menu.exit":"Exit","game.browse_posts.choose_a_post":"Choose a Post to read","game.dialogs.npc_01.01":"Hey, you're finally awake!","game.dialogs.npc_01.02":"What, you don't know where you are?","game.dialogs.npc_01.03":"Don't be silly, you're at the Home Page City, remember?","game.dialogs.npc_01.04":"This city was founded by Pablo Montenegro to be the start of your journey","game.dialogs.npc_01.05":"Go explore the world and find other cities where you can read the accumulated knowledge of our civilization...","game.dialogs.npc_01.06":"... some people call it \"Blog Posts\", I don't know why...","game.dialogs.npc_02.01":"Be careful with the Slimes that live in the wild.","game.dialogs.npc_02.02":"Press SPACE to use your sword","game.dialogs.npc_02.03":"What is SPACE? I have no idea.","game.dialogs.npc_03.01":"Hello, welcome to our library","game.dialogs.npc_03.02":"We only have one book, which contains all of this city category publications.","game.dialogs.npc_03.03":"Go check it out!","game.dialogs.npc_04.01":"I like snails","game.dialogs.npc_05.01":"Incomplete sentences may cause some","game.dialogs.npc_06.01":"Red is greener than purple, for sure.","game.dialogs.npc_07.01":"Having a beard is the new not having a beard","game.dialogs.npc_08.01":"Sup","game.dialogs.npc_09.01":"\" - Cooper, what are you doing?\"\n\" - Docking.\"","game.dialogs.npc_10.01":"I should buy a boat","game.dialogs.npc_11.01":"Have you heard the me neither joke? Me neither.","game.dialogs.npc_12.01":"I clean toilet and rescue princesses, good life, yes?","game.dialogs.npc_13.01":"We want the airwaves back","game.dialogs.npc_14.01":"Save the cheerleader, save the world","game.dialogs.npc_15.01":"Hello, how are you?","game.dialogs.npc_15.02":"Ok bye!","game.dialogs.npc_16.01":"A kangaroo is really just a rabbit on steroids","game.dialogs.npc_17.01":"For the 216th time, he said he would quit drinking soda after this last Coke","game.dialogs.npc_18.01":"Nothing and everything is possimpible","game.dialogs.npc_19.01":"For a city called \"Events\", there isn't much going on...","game.dialogs.sign_01.01":"Congrats, you can read this!","game.dialogs.book_01.01":"Hey, thanks for trying out this very weird way to access my website","game.dialogs.book_01.02":"This project wouldn't be possible without the awesome open-source work of many people, like:","game.dialogs.book_01.03":"ArMM1998 - For the characters sprites and tilesets","game.dialogs.book_01.04":"PixElthen - For the slime sprites","game.dialogs.book_01.05":"pixelartm - For the pirate hat sprites","game.dialogs.book_01.06":"jkjkke - For the Game Over screen background","game.dialogs.book_01.07":"KnoblePersona - For the Main Menu screen background","game.dialogs.book_01.08":"Min - For the open book sprite","game.dialogs.book_01.09":"And of course, Richard Davey for making Phaser.io!","game.dialogs.home_page_city_sign":"City of Home Page","game.dialogs.coding_category_city_sign.01":"City of Coding Category","game.dialogs.coding_category_city_sign.02":"City of Coding Category","game.dialogs.events_category_city_sign":"City of Events Category","game.dialogs.funny_category_city_sign":"City of Funny Category","game.dialogs.gadgets_category_city_sign.01":"City of Gadgets Category","game.dialogs.gadgets_category_city_sign.02":"City of Gadgets Category","game.dialogs.games_category_city_sign":"City of Games Category","game.dialogs.general_category_city_sign":"City of General Category","game.dialogs.tips_category_city_sign":"City of Tips Category","game.dialogs.toys_category_city_sign":"City of Toys Category","game.dialogs.sword_item_description":"You can now attack, press SPACE to use your sword.","game.dialogs.push_item_description":"Now you can push some objects, press SPACE in front of a object to use push it.","zelda_timeline.title":"Zelda Timeline","zelda_timeline.timeline_split":"Timeline Split","zelda_timeline.timeline_unification":"Timeline Unification","zelda_timeline.icons_from":"The icons used on this page are from zeldauniverse.net and game-icons.net","zelda_timeline.creation":"Creation","zelda_timeline.creation_of_land_sky":"The Creation of the Land and Sky","zelda_timeline.goddess_hylia_and_sky_era":"Goddess Hylia and Sky Era","zelda_timeline.skyward_sword":"Skyward Sword","zelda_timeline.the_ancient_battle":"The Ancient Battle and the reincarnation of the Goddess Hylia","zelda_timeline.return_to_surface":"Return to the surface","zelda_timeline.era_of_chaos":"Era of Chaos","zelda_timeline.sacred_realm_sealed":"The Sacred Realm is Sealed","zelda_timeline.era_of_prosperity":"Era of Prosperity","zelda_timeline.establishment_of_hyrule":"The Hyrule Kingdom is established","zelda_timeline.force_era":"Force Era","zelda_timeline.the_minish_cap":"The Minish Cap","zelda_timeline.rise_of_evil_vaati":"The Rise of the Evil Vaati","zelda_timeline.four_swords":"Four Swords","zelda_timeline.resurrection_of_vaati":"The Resurrection of Vaati","zelda_timeline.era_of_the_hero_of_time":"Era of the Hero of Time","zelda_timeline.hyrulean_civil_war":"Hyrulean Civil War","zelda_timeline.ocarina_of_time":"Ocarina of Time","zelda_timeline.sacred_realm_becomes_dark_world":"The Sacred Realm Becomes the Dark World","zelda_timeline.ganondorf_becomes_ganon":"Ganondorf becomes Ganon","zelda_timeline.hero_is_defeated":"Hero is defeated","zelda_timeline.decline_of_last_hero":"The Decline of Hyrule and the Last Hero","zelda_timeline.the_imprisoning_war":"The Imprisoning War","zelda_timeline.era_of_dark_and_light":"Era of Light and Dark","zelda_timeline.a_link_to_the_past":"A Link to the Past","zelda_timeline.resurrection_of_ganon":"The Resurrection of Ganon","zelda_timeline.resurrection_of_ganon_is_prevented":"The Resurrection of Ganon is prevented","zelda_timeline.links_awakening":"Link's Awakening","zelda_timeline.oracle_of_ages_and_seasons":"Oracle of Ages and Oracle of Seasons","zelda_timeline.a_link_between_worlds":"A Link Between Worlds","zelda_timeline.tri_force_heroes":"Tri Force Heroes","zelda_timeline.the_gold_era":"The Gold Era","zelda_timeline.monarchs_of_hyrule_use_triforce":"The Monarchs of Hyrule Use the Triforce","zelda_timeline.era_of_decline":"The Era of Decline","zelda_timeline.tragedy_of_princess_zelda_1":"The Tragedy of Princess Zelda I","zelda_timeline.the_legend_of_zelda":"The Legend of Zelda","zelda_timeline.adventure_of_link":"Adventure of Link","zelda_timeline.hero_defeated":"Hero Defeated","zelda_timeline.child_era":"Child Era","zelda_timeline.adult_era":"Adult Era","zelda_timeline.sacred_realm_protected":"The Sacred Realm Remains Protected","zelda_timeline.twilight_realm_and_legacy_of_hero":"The Twilight Realm and the Legacy of the Hero","zelda_timeline.majoras_mask":"Majora's Mask","zelda_timeline.prince_of_thieves_is_executed":"The Demon Thief, Ganondorf, Is Executed","zelda_timeline.twilight_era":"The Twilight Era","zelda_timeline.twilight_princess":"Twilight Princess","zelda_timeline.shadow_invasion":"The Shadow Invasion","zelda_timeline.shadow_era":"The Shadow Era","zelda_timeline.four_swords_adventures":"Four Swords Adventures","zelda_timeline.reincarnation_of_ganondorf":"The Reincarnation of Ganondorf","zelda_timeline.ganondorf_is_sealed":"Ganondorf is sealed","zelda_timeline.hero_of_wind_and_new_world":"The Hero of Wind and a New World","zelda_timeline.era_without_a_hero":"The Era without a Hero","zelda_timeline.ganondorf_is_resurrected":"Ganondorf is Resurrected","zelda_timeline.hyrule_is_sealed_and_flooded":"Hyrule is sealed and then flooded","zelda_timeline.era_of_the_great_sea":"The Era of the Great Sea","zelda_timeline.the_wind_waker":"The Wind Waker","zelda_timeline.era_of_the_great_voyage":"The Era of the Great Voyage","zelda_timeline.phantom_hourglass":"Phantom Hourglass","zelda_timeline.era_of_hyrule_rebirth":"The Era of Hyrule's Rebirth","zelda_timeline.new_continent_discovered":"New Continent Discovered","zelda_timeline.new_hyrule_is_founded":"A New Hyrule Kingdom is founded","zelda_timeline.spirit_tracks":"Spirit Tracks","zelda_timeline.evil_king_malladus_is_resurrected":"The Evil King Malladus is Resurrected","zelda_timeline.age_of_calamity":"Age of Calamity","zelda_timeline.breath_of_the_wild":"Breath of the Wild","zelda_timeline.era_of_the_wilds":"Era of the Wilds","zelda_timeline.calamity_ganon_is_sealed":"Calamity Ganon is Sealed. Technology is banned, leading some Sheikah to form the Yiga Clan","zelda_timeline.divine_beasts_are_cleansed":"The Divine Beasts are cleansed and Calamity Ganon is Sealed","zelda_timeline.tears_of_the_kingdom":"Tears of the Kingdom","zelda_timeline.hyrule_kingdom_is_teared_apart":"Ganondorf is Resurrected (I think?)","blog_categories.games":"Games","blog_categories.general":"General","blog_categories.tips":"Tips","blog_categories.events":"Events","blog_categories.coding":"Coding","blog_categories.funny":"Funny","blog_categories.toys":"Toys","blog_categories.gadgets":"Gadgets","forty_two_page.title":"Forty Two","forty_two_page.description":"So long and thanks for all the fish!","projects_page.title":"Projects","projects_page.description":"Here is a list of some of my favorites personal projects.","projects_page.gatsbyMaterialUiBlogDescription":"A simple Gatsby Blog Starter with Material UI.","projects_page.contractBuilderDescription":"Contract Builder is a free open-source project that allows anyone to easily maintain and build any kind of contract (legal documents, lawsuit, rent, agreements, construction and so on) using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom contract, now she is able to do it in less than 5 minutes. Hooray!","projects_page.resumeBuilderDescription":"Resume Builder is a free open-source project that allows anyone to easily maintain and build any kind of resume using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom resumes.","projects_page.magentoChatbotDescription":"With this module you can fully integrate your Magento store with the most popular chat apps in the market. This means that by simply installing this module and a few clicks you can have a new way to show and sell your products to your clients. Very easy to use! Try now, it's FREE.","projects_page.jamStackSortenerDescription":"This is a basic URL shortener POC build with Gatsby.","projects_page.gotinhaDescription":"It was always my dream to make my own game, and after trying Unity a couple years ago, I decided to try it again with something I'm more familiar with: Javascript. As a frontend developer, Javascript is already the language that I write most of my code at work and also in my personal projects, and after a quick search I was able to find the amazing PhaserJS Framework for building 2D web games.","e3_2012_photos.title":"E3 2012","e3_2012_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for Nintendo Blast.","e3_2013_photos.title":"E3 2013","e3_2013_photos.description":"On June 2013 I attended E3 as a media press for a full coverage for Game Blast.","e3_2014_photos.title":"E3 2014","e3_2014_photos.description":"On June 2014 I attended E3 as a media press for a full coverage for Game Blast.","e3_2015_photos.title":"E3 2015","e3_2015_photos.description":"On June 2015 I attended E3 as a media press for a full coverage for Game Blast and Game Over TV.","e3_2017_photos.title":"E3 2017","e3_2017_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for PlayReplay and Game Over TV.","e3_2019_photos.title":"E3 2019","e3_2019_photos.description":"On June 2019 I attended E3 as a media press for a full coverage for PlayReplay.","gamescom_2019_photos.title":"Gamescom 2019","gamescom_2019_photos.description":"On August 2019 I attended Gamescom as a media press for a full coverage for PlayReplay.","san_francisco_2019_photos.title":"San Francisco 2019","san_francisco_2019_photos.description":"On September 2019 I've traveled to San Francisco for the Metallica S&M2 concert.","notfound.title":"404: Not found","notfound.header":"404 NOT FOUND","notfound.description":"Sorry, this page doesn't seem to exist. Perhaps the archives are incomplete?","seo_keywords.developer":"developer","seo_keywords.development":"development","seo_keywords.javascript":"javascript","seo_keywords.es6":"es6","seo_keywords.e3":"e3","seo_keywords.sgf":"sgf","seo_keywords.gamescom":"gamescom","seo_keywords.countdown":"countdown","seo_keywords.archive":"archive","seo_keywords.about_me":"about me","seo_keywords.personal_blog":"personal blog","seo_keywords.personal_projects":"personal projects","seo_keywords.travels":"travels","seo_keywords.tips":"tips","seo_keywords.lifehacks":"lifehacks","seo_keywords.reviews":"reviews","seo_keywords.games":"games","seo_keywords.timeline":"timeline","seo_keywords.photos":"photos","cookie_law.we_use_cookies":"We use cookies to ensure you get the best experience on our website. By using our website you agree to our ","cookie_law.title":"Cookie policy","cookie_law.what_are_cookies":"What are cookies?","cookie_law.what_are_cookies_text":"As is common practice with almost all professional websites this site uses cookies, which are tiny files that are downloaded to your computer, to improve your experience. This page describes what information they gather, how we use it and why we sometimes need to store these cookies. We will also share how you can prevent these cookies from being stored however this may downgrade or 'break' certain elements of the sites functionality. For more general information on cookies, please read ","cookie_law.what_are_cookies_more_info_url":"https://en.wikipedia.org/wiki/HTTP_cookie","cookie_law.how_we_use_cookies":"How we use cookies","cookie_law.how_we_use_cookies_text":"We use cookies for a variety of reasons detailed below. Unfortunately in most cases there are no industry standard options for disabling cookies without completely disabling the functionality and features they add to this site. It is recommended that you leave on all cookies if you are not sure whether you need them or not in case they are used to provide a service that you use.","cookie_law.disabling_cookies":"Disabling cookies","cookie_law.disabling_cookies_text":"You can prevent the setting of cookies by adjusting the settings on your browser (see your browser Help for how to do this). Be aware that disabling cookies will affect the functionality of this and many other websites that you visit. Disabling cookies will usually result in also disabling certain functionality and features of the this site. Therefore it is recommended that you do not disable cookies.","cookie_law.the_cookies_we_set":"The cookies we set","cookie_law.site_preferences_cookie":"Site preferences cookies","cookie_law.site_preferences_cookie_text":"In order to provide you with a great experience on this site we provide the functionality to set your preferences for how this site runs when you use it. In order to remember your preferences we need to set cookies so that this information can be called whenever you interact with a page is affected by your preferences.","cookie_law.third_party_cookies":"Third party cookies","cookie_law.third_party_cookies_text":"In some special cases we also use cookies provided by trusted third parties. The following section details which third party cookies you might encounter through this site.","cookie_law.third_party_cookies_item_1":"This site uses Google Analytics which is one of the most widespread and trusted analytics solution on the web for helping us to understand how you use the site and ways that we can improve your experience. These cookies may track things such as how long you spend on the site and the pages that you visit so we can continue to produce engaging content. For more information on Google Analytics cookies, see the official Google Analytics page.","cookie_law.third_party_cookies_item_2":"From time to time we test new features and make subtle changes to the way that the site is delivered. When we are still testing new features these cookies may be used to ensure that you receive a consistent experience whilst on the site whilst ensuring we understand which optimisations our users appreciate the most.","cookie_law.more_information":"More information","cookie_law.more_information_text":"Hopefully that has clarified things for you and as was previously mentioned if there is something that you aren't sure whether you need or not it's usually safer to leave cookies enabled in case it does interact with one of the features you use on our site. However if you are still looking for more information then you can contact us through our "},"routed":true,"originalPath":"/blog/coding/transforming-manga-pages-for-western-readers/","redirect":true,"redirectDefaultLanguageToRoot":false,"defaultLanguage":"en","fallbackLanguage":"","ignoredPaths":[]},"blogLocale":"en"}},
    "staticQueryHashes": ["1156153307","1355482417","1591365477","1628619374","2127381735","2288279559","26159077","3566410298","3649515864","3847325417","3982724423","928834867"]}