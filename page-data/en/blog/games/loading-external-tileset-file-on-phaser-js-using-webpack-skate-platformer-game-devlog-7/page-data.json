{
    "componentChunkName": "component---src-templates-blog-post-jsx",
    "path": "/en/blog/games/loading-external-tileset-file-on-phaser-js-using-webpack-skate-platformer-game-devlog-7/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://pablo.gg"}},"markdownRemark":{"id":"05140c80-d73a-5386-bd49-cea42414d3c7","excerpt":"Loading external tileset files Tiled is a powerful open source tool to build 2D maps supported by many different game engines, including Phaser JS, which is the…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQY0wHoARf+ADOI3DOI3DKH3CiC3CeB2yqC2TKH3ESHzFGHv3hyh3R2j12MwMDO3dnY3cDL3EOP3DCG3DSI3DSJ3DWK3QAyiN0xiN02it1spd5xruRlqeUrkuyBcH+4X0CSa2+YbWvPbEPhzcauz+lVouYyi+Ayh9wziN0thtwmgtwAOIjXNYfXQI3XvsvY7JiG2XZomFttsFdcrkdHpFlfo1NZoURInUROk1duklJoY3mwMIveM4TVWZrcnb7iAGuQpGuQpWmPpWOMppFWYJ03QLFCQrhIRK5MTqVVXZdhaJhQV6lLSrNFQ6o/Q4xrdmyTp2eNoouiq8XEvADEo2PDomPDomPGpGO/pWm/omWtk2aMd2qFb2leTGWHcmqcg2qOe22nj2i8oGW+o2XEo2PEo2O/oGK4nWEAn4k5o4o4nIo5ooo5oIs4o4w5bFZJPzlQQztOQTtPRD5ORT1NPTpOXVFJook5oYo5oIo5oYw5oIs6pIw5ACFKViFLViBLViFLVSFHVCBLUSFcRylUTilMUylRVCdRVChQVChRVCRNVCFKVSFMVSFHVSJJUiFIVCFKVgA8M0s9NEs9NEs9MUs/WVc1gVkigU8xgFk9W1g7MEs6M0w7Mkw7Mkw8M0s9NEs9MktCUVQ7f1w+YVU+M0tQItiEJydQCgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Super Ollie vs Pebble Corp.\"\n        title=\"Super Ollie vs Pebble Corp.\"\n        src=\"/static/e75f123fcd3c27b5e43b60fe5c9b9a09/42a19/super-ollie-vs-pebble-corp-tittle-screen.png\"\n        srcset=\"/static/e75f123fcd3c27b5e43b60fe5c9b9a09/e3135/super-ollie-vs-pebble-corp-tittle-screen.png 256w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/06341/super-ollie-vs-pebble-corp-tittle-screen.png 512w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/42a19/super-ollie-vs-pebble-corp-tittle-screen.png 1024w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/e2f49/super-ollie-vs-pebble-corp-tittle-screen.png 1366w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Super Ollie vs Pebble Corp.</figcaption>\n  </figure></p>\n<p>In today's Game Devlog I will show you how to load external tilesets into Phaser JS, but first let's take this out of the way: Forget about \"Skate Platformer\", our game is going to be called <span\n          \n          class='highlighted-text'\n        >Super Ollie vs Pebble Corp</span>. We didn't really plan in naming the game now, but the idea simply popped into our heads and we think the name is perfect. Let me ask you this, what's the skater's worst enemy? Unarguably those small pebbles, right? What if in the future there's an evil company that wants to prohibit skateboarding everywhere, what would that company be called? Pebble Corp of course. Now with that out of the way, let's keep going with the post.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/a4oeHCm_Tig?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<h2 id=\"loading-external-tileset-files\" style=\"position:relative;\"><a href=\"#loading-external-tileset-files\" aria-label=\"loading external tileset files permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Loading external tileset files</h2>\n<p><a href=\"https://www.mapeditor.org/\" target=\"_blank\" rel=\"noreferrer\">Tiled</a> is a powerful <a href=\"https://github.com/bjorn/tiled\" target=\"_blank\" rel=\"noreferrer\">open source</a> tool to build 2D maps supported by <a href=\"https://discourse.mapeditor.org/t/which-game-engine-s-are-you-using-with-tiled/757/8\" target=\"_blank\" rel=\"noreferrer\">many different game engines</a>, including Phaser JS, which is the framework I’m using for <a href=\"/en/blog/tags/super-ollie-vs-pebble-corp\">this game</a>.</p>\n<p>There is one small problem, when loading Tiled maps on Phaser JS, the tileset needs to be embedded into the map, otherwise Phaser JS can’t load it. This is quite frustrating because whenever you make changes to your tileset, you will have to go to all your map files and re-embed the tileset, this can be very time-consuming if you have multiple maps and tilesets.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 518px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACV0lEQVQoz3XRy1LTUBgH8Ox9CDc+gT6AOo6Wneg449ChilZALr2ALRSQS9PQc07SJg0pEQqdkgOlleKQQG6YtqFNW+oiFRe8j1NW4uhv5vt2/5nvQmCMFUWWZdmyLMM0DU3XdePcsgzDMHRdPTszTUNVNcuy6jdqtZpt247jmKZJbOd2kiRcXFhhWEYQhASXTiOQZRlxUxS3tnlBzO3s8jy/J0mlUunw8LBYLH49OjpVFFVVCSG5NjjgffbkxcCAJzwbvf/Wu7C8NDUxuRQJJj9H1hdnUGIVIRqCWyiKSqVSxBcazHmHJsfCXp/fM/bhzt17nvHRBw+fvvYO5Tf59aVPDLmAEE336xYIIZETC8vv38Wia2yS+TgfGfGN+AMB//hEKBzOCxkGMggk0b/0w3t5PDw8PujxHucPspkM4rM0l43GSAhRAsANkU0C8N+whA98I1Oh4DyJUiwDDRA4oabJNy+5lYgQC+apEMfSN1P/DQBA7ONiKrErcVyZIemZ6bNZT4MabkK/nIqmqVW4GJsbCwEqyTDMnwsjhDiO64fng+z6WjqT5Z8/eux7NVQCscrqqA4CACFIM3OTsxSZgPDWvePxeC6XIyqVb7tbhdzOsWnVEKAFNlMpSvuF/MFeHmOp/9lyCWMs3cAYFwoFjHG5XFYUhahWq67r9Ez1Z02/apx3tRNbOW12Oo7TdlpO02m1Wu1Op9Ptdi/7+r3nutfX167rEhe2XbWb7Q3+RxZeinSDjrdK5brj2PV648I2rMap9t3QtWbTabf6rn5d9Xo9TVNlWf4Nd4mgdymyqM4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Embed Tileset\"\n        title=\"Embedding a tileset on Tiled\"\n        src=\"/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png\"\n        srcset=\"/static/51df513f0b0acbe195eb3327398273b4/e3135/tiled-embed-tileset.png 256w,\n/static/51df513f0b0acbe195eb3327398273b4/06341/tiled-embed-tileset.png 512w,\n/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png 518w\"\n        sizes=\"(max-width: 518px) 100vw, 518px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Embedding a tileset on Tiled</figcaption>\n  </figure></p>\n<p>To solve this problem I decided to come up with a solution to automatically embed tilemaps using Webpack, to do that I compared the JSON file from the same map before and after embedding a tileset, and it looked like this:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQoz22Ra2/aMBSG82s6RmP7GCexHUxz5VIQaimJk8CHdtIu0qYmDqH8/olLt3bdo1fWsXQeHR/ZSqe3k9k8mczCJI3H0ygdJ+NplEzGs0WYpDdxosJIBaEKo+GfBGGQxMu7O4tSCkAJACFATsX5yhyXBxGPY8QdL4hEENEhB987RvlYqWgxtxh1nIGDbNR/D0a2lz7w1S+2eAq0SfJnf/Vd3H/j91/F+ifPTFDUluRKyRvKgDJy/QZCMJ9qv9gJ3YbVId4e1GbnF53QndA7kbcyN5bnCs8VNkJHo/9evi2lNnz9HFb7ZPsitRF5c4oRuZF5Y9m2zRxGARC2L0H2RZ5vZG5EVkvdjspOFa3U7dl8lRGmjMOAYcAYCAKCAa4RBuaI5aPMG5HVPDdDvUs3h1HZSv12MjDipuCOwHXAcQlzQAwx48wP/YcfIqtFduke6U4Vu9PjX2Vn4DLGjuv2+6el++eaAIjl03nyuZvnJir3qmj/ygwYALU/AHTwjyyP8ktQGJnXF/nq01Wv1/v8ARthd/HIs8Zb115mvMzwzKiiG1Z7WXb89FuW53n8f/i+H62+xFUTl/XxrJpkY6KqiTdtsm2jyiwed78BOSS64qW11kUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Embedded vs non-embedded\"\n        title=\"Embedded vs non-embedded\"\n        src=\"/static/fce7ff4d25c0afd53f6c31a041518dd8/42a19/embedded-vs-non-embedded.png\"\n        srcset=\"/static/fce7ff4d25c0afd53f6c31a041518dd8/e3135/embedded-vs-non-embedded.png 256w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/06341/embedded-vs-non-embedded.png 512w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/42a19/embedded-vs-non-embedded.png 1024w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/b38ab/embedded-vs-non-embedded.png 1168w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Embedded vs non-embedded</figcaption>\n  </figure></p>\n<p>As you can see, instead of having the property <code class=\"language-text\">source</code> to an external file, like <code class=\"language-text\">\"source\": \"../tilesets/test_tileset.json\"</code>, it contains the whole content of that file plus a <code class=\"language-text\">firstgid</code> attribute, so all we need to do is loop through all Tiled maps, read the <code class=\"language-text\">tilesets</code> property, load each individual tileset file and put each of it’s content in a array replacement for the <code class=\"language-text\">tilesets</code> property.</p>\n<p>This is how I did it:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> CopyWebpackPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">promises</span><span class=\"token operator\">:</span> fs <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> stageFiles <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// get only the JSON files</span>\r\n<span class=\"token keyword\">const</span> stageJsons <span class=\"token operator\">=</span> stageFiles\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> copyWebpackPluginPatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\nstageJsons<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    copyWebpackPluginPatterns<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">to</span><span class=\"token operator\">:</span> <span class=\"token string\">'../assets/stages'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token function-variable function\">transform</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fileBuffer<span class=\"token punctuation\">,</span> elPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> manifestString <span class=\"token operator\">=</span> fileBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> stageData <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>manifestString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> newTilesets <span class=\"token operator\">=</span> stageData<span class=\"token punctuation\">.</span>tilesets<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tileset</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// firstgid is an important id reference for Tiled</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> firstgid <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> tileset<span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tileset<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token comment\">// if there's no source, it means the Tileset</span>\r\n                    <span class=\"token comment\">// is already embedded</span>\r\n                    <span class=\"token keyword\">return</span> tileset<span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token comment\">// on my setup, stages are in root/stages/</span>\r\n                <span class=\"token comment\">// and the tilesets are in root/tilesets/</span>\r\n                <span class=\"token comment\">// so we need to remove \"../tilesets/\" from the path</span>\r\n                <span class=\"token comment\">// and load it based on the root dir of the tilesets</span>\r\n                <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> tileset<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../tilesets/'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token comment\">// eslint-disable-next-line import/no-dynamic-require</span>\r\n                <span class=\"token keyword\">const</span> tilesetData <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tilesetData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not find file'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">return</span> tileset<span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token operator\">...</span>tilesetData<span class=\"token punctuation\">,</span>\r\n                    firstgid<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            stageData<span class=\"token punctuation\">.</span>tilesets <span class=\"token operator\">=</span> newTilesets<span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">return</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>stageData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">CopyWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">patterns</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n                <span class=\"token operator\">...</span>copyWebpackPluginPatterns<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>As you can see we need the <code class=\"language-text\">copy-webpack-plugin</code> plugin to make it work, by copying all maps from the <code class=\"language-text\">assets/stages</code> directory into the <code class=\"language-text\">dist/assets/stages</code> directory, and while copying it, we set a <code class=\"language-text\">transform</code> function that will load the individual external tilesets and embed them into the Tiled maps. Add this code to your Webpack config file if you want to achieve the same result.</p>\n<h2 id=\"creating-the-title-screen\" style=\"position:relative;\"><a href=\"#creating-the-title-screen\" aria-label=\"creating the title screen permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating the title screen</h2>\n<p>This was actually quite easy and straightforward, specially because it’s pretty much the same code from previous Game Devlog.</p>\n<p>First I load the map in the <code class=\"language-text\">create</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'title_screen'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> tileset <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'title_screen'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'city_tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> background <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'background'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> ground <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ground'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> foreground <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foreground'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token punctuation\">[</span>background<span class=\"token punctuation\">,</span> ground<span class=\"token punctuation\">,</span> foreground<span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dynamicLayer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>\r\n            height <span class=\"token operator\">-</span> background<span class=\"token punctuation\">.</span>height\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// set this property to make the the layers move in different speeds</span>\r\n        dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setScrollFactor</span><span class=\"token punctuation\">(</span>dynamicLayer<span class=\"token punctuation\">.</span>parallaxSpeedX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// we're going to use that in the update function</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now all I did was move the camera till position <code class=\"language-text\">y = 640</code>, and from there reset the position back to <code class=\"language-text\">y = 0</code>, and the loop continues.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">===</span> <span class=\"token number\">640</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>scrollX <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter<span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s all for today, I hope you liked it, if you do please leave it a comment and consider subscribing to my YouTube channel.</p>","fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTAtMDhUMDA6MDA6MDAuMDAwWg==","slug":"/2020/2020-08-10-loading-external-tileset-file-on-phaser-js-using-webpack-skate-platformer-game-devlog-7.en/","path":"/blog/games/loading-external-tileset-file-on-phaser-js-using-webpack-skate-platformer-game-devlog-7/","locale":"en"},"readingTime":{"minutes":3.905},"frontmatter":{"path":"loading-external-tileset-file-on-phaser-js-using-webpack-skate-platformer-game-devlog-7","allowComments":true,"title":"Loading external tileset file on Phaser JS using Webpack - Skate Platformer Game Devlog #07","date":"2020-10-08T00:00:00.000Z","categories":["games"],"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled"],"hideExcerpt":false,"subtitle":""}},"categoryImage":{"childImageSharp":{"original":{"width":1920,"height":1080,"src":"/static/categories_games-45dce0594b4828053338793f21283cda.jpg"}}}},"pageContext":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTAtMDhUMDA6MDA6MDAuMDAwWg==","relatedPosts":[{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDktMDlUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-09-09-creating-a-mobile-build-of-my-phaser-js-game-game-devlog-23.en/","path":"/blog/games/creating-a-mobile-build-of-my-phaser-js-game-game-devlog-23/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","mobile","android","mobile build"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-09-09T00:00:00.000Z","id":null,"path":"creating-a-mobile-build-of-my-phaser-js-game-game-devlog-23","show":true,"title":"Creating a mobile build of my Phaser JS game - Game Devlog #23","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDgtMjhUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-08-28-creating-moving-platforms-for-my-phaser-js-game-game-devlog-22.en/","path":"/blog/games/creating-moving-platforms-for-my-phaser-js-game-game-devlog-22/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","moving platforms","platforms"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-08-28T00:00:00.000Z","id":null,"path":"creating-moving-platforms-for-my-phaser-js-game-game-devlog-22","show":true,"title":"Creating moving platforms for my Phaser JS game - Game Devlog #22","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDctMDZUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-07-06-hiding-parts-of-the-map-on-phaser-js-game-devlog-21.en/","path":"/blog/games/hiding-parts-of-the-map-on-phaser-js-game-devlog-21/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","metroidvania"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-07-06T00:00:00.000Z","id":null,"path":"hiding-parts-of-the-map-on-phaser-js-game-devlog-21","show":true,"title":"Hiding parts of the map on Phaser JS - Game Devlog #21","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMjhUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-06-28-creating-falling-spikes-with-phaser-js-game-devlog-20.en/","path":"/blog/games/creating-falling-spikes-with-phaser-js-game-devlog-20/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-06-28T00:00:00.000Z","id":null,"path":"creating-falling-spikes-with-phaser-js-game-devlog-20","show":true,"title":"Creating falling spikes with Phaser JS - Game Devlog #20","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMTlUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-06-19-hanging-on-a-monkey-bar-on-phaser-js-game-devlog-19.en/","path":"/blog/games/hanging-on-a-monkey-bar-on-phaser-js-game-devlog-19/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","monkey bar"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-06-19T00:00:00.000Z","id":null,"path":"hanging-on-a-monkey-bar-on-phaser-js-game-devlog-19","show":true,"title":"Hanging on a monkey bar Phaser JS - Game Devlog #19","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDQtMjRUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-04-24-creating-a-pogo-attack-with-phaser-js-game-devlog-17.en/","path":"/blog/games/creating-a-pogo-attack-with-phaser-js-game-devlog-17/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-04-24T00:00:00.000Z","id":null,"path":"creating-a-pogo-attack-with-phaser-js-game-devlog-17","show":true,"title":"Creating a pogo-attack with Phaser JS - Game Devlog #17","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTItMjlUMDA6MDA6MDAuMDAwWg==","slug":"/2020/2020-29-12-adding-transition-when-entering-a-stage-on-phaser-js-skate-platformer-game-devlog-16.en/","path":"/blog/games/adding-transition-when-entering-a-stage-on-phaser-js-skate-platformer-game-devlog-16/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2020-12-29T00:00:00.000Z","id":null,"path":"adding-transition-when-entering-a-stage-on-phaser-js-skate-platformer-game-devlog-16","show":true,"title":"Adding transition when entering a stage on Phaser JS - Game Devlog #16","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTItMTVUMDA6MDA6MDAuMDAwWg==","slug":"/2020/2020-15-12-creating-a-smarter-and-more-performing-ai-on-phaser-js-skate-platformer-game-devlog-15.en/","path":"/blog/games/creating-a-smarter-and-more-performing-ai-on-phaser-js-skate-platformer-game-devlog-15/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","cyberpunk 2077","stadia","ai"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2020-12-15T00:00:00.000Z","id":null,"path":"creating-a-smarter-and-more-performing-ai-on-phaser-js-skate-platformer-game-devlog-15","show":true,"title":"Creating a smarter and more performing AI on Phaser JS - Game Devlog #15","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTItMDlUMDA6MDA6MDAuMDAwWg==","slug":"/2020/2020-09-12-creating-custom-weather-on-phaser-js-skate-platformer-game-devlog-14.en/","path":"/blog/games/creating-custom-weather-on-phaser-js-skate-platformer-game-devlog-14/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","hyrule warriors","weather","rain"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2020-12-09T00:00:00.000Z","id":null,"path":"creating-custom-weather-on-phaser-js-skate-platformer-game-devlog-14","show":true,"title":"Creating custom weather on Phaser JS - Skate Platformer Game Devlog #14","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTEtMjlUMDA6MDA6MDAuMDAwWg==","slug":"/2020/2020-29-11-creating-a-loading-screen-and-adding-translation-on-phaser-js-skate-platformer-game-devlog-13.en/","path":"/blog/games/creating-a-loading-screen-and-adding-translation-on-phaser-js-skate-platformer-game-devlog-13/","locale":"en"},"frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","i18next","translation","hyrule warriors"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2020-11-29T00:00:00.000Z","id":null,"path":"creating-a-loading-screen-and-adding-translation-on-phaser-js-skate-platformer-game-devlog-13","show":true,"title":"Creating a loading screen and adding translation on Phaser JS - Skate Platformer Game Devlog #13","hideExcerpt":false,"subtitle":""}}],"alternativeHtml":"<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQY0wHoARf+ADOI3DOI3DKH3CiC3CeB2yqC2TKH3ESHzFGHv3hyh3R2j12MwMDO3dnY3cDL3EOP3DCG3DSI3DSJ3DWK3QAyiN0xiN02it1spd5xruRlqeUrkuyBcH+4X0CSa2+YbWvPbEPhzcauz+lVouYyi+Ayh9wziN0thtwmgtwAOIjXNYfXQI3XvsvY7JiG2XZomFttsFdcrkdHpFlfo1NZoURInUROk1duklJoY3mwMIveM4TVWZrcnb7iAGuQpGuQpWmPpWOMppFWYJ03QLFCQrhIRK5MTqVVXZdhaJhQV6lLSrNFQ6o/Q4xrdmyTp2eNoouiq8XEvADEo2PDomPDomPGpGO/pWm/omWtk2aMd2qFb2leTGWHcmqcg2qOe22nj2i8oGW+o2XEo2PEo2O/oGK4nWEAn4k5o4o4nIo5ooo5oIs4o4w5bFZJPzlQQztOQTtPRD5ORT1NPTpOXVFJook5oYo5oIo5oYw5oIs6pIw5ACFKViFLViBLViFLVSFHVCBLUSFcRylUTilMUylRVCdRVChQVChRVCRNVCFKVSFMVSFHVSJJUiFIVCFKVgA8M0s9NEs9NEs9MUs/WVc1gVkigU8xgFk9W1g7MEs6M0w7Mkw7Mkw8M0s9NEs9MktCUVQ7f1w+YVU+M0tQItiEJydQCgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Super Ollie vs Pebble Corp.\" title=\"Super Ollie vs Pebble Corp.\" src=\"/static/e75f123fcd3c27b5e43b60fe5c9b9a09/42a19/super-ollie-vs-pebble-corp-tittle-screen.png\" srcset=\"/static/e75f123fcd3c27b5e43b60fe5c9b9a09/e3135/super-ollie-vs-pebble-corp-tittle-screen.png 256w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/06341/super-ollie-vs-pebble-corp-tittle-screen.png 512w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/42a19/super-ollie-vs-pebble-corp-tittle-screen.png 1024w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/e2f49/super-ollie-vs-pebble-corp-tittle-screen.png 1366w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Super Ollie vs Pebble Corp.</figcaption>\n  </figure><p></p>\n<p>In today's Game Devlog I will show you how to load external tilesets into Phaser JS, but first let's take this out of the way: Forget about \"Skate Platformer\", our game is going to be called <span class=\"highlighted-text\">Super Ollie vs Pebble Corp</span>. We didn't really plan in naming the game now, but the idea simply popped into our heads and we think the name is perfect. Let me ask you this, what's the skater's worst enemy? Unarguably those small pebbles, right? What if in the future there's an evil company that wants to prohibit skateboarding everywhere, what would that company be called? Pebble Corp of course. Now with that out of the way, let's keep going with the post.</p>\n<p></p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\"> <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/a4oeHCm_Tig?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div><p></p>\n<h2 id=\"loading-external-tileset-files\" style=\"position:relative;\"><a href=\"#loading-external-tileset-files\" aria-label=\"loading external tileset files permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Loading external tileset files</h2>\n<p><a href=\"https://www.mapeditor.org/\" target=\"_blank\" rel=\"noreferrer\">Tiled</a> is a powerful <a href=\"https://github.com/bjorn/tiled\" target=\"_blank\" rel=\"noreferrer\">open source</a> tool to build 2D maps supported by <a href=\"https://discourse.mapeditor.org/t/which-game-engine-s-are-you-using-with-tiled/757/8\" target=\"_blank\" rel=\"noreferrer\">many different game engines</a>, including Phaser JS, which is the framework I’m using for <a href=\"/en/blog/tags/super-ollie-vs-pebble-corp\">this game</a>.</p>\n<p>There is one small problem, when loading Tiled maps on Phaser JS, the tileset needs to be embedded into the map, otherwise Phaser JS can’t load it. This is quite frustrating because whenever you make changes to your tileset, you will have to go to all your map files and re-embed the tileset, this can be very time-consuming if you have multiple maps and tilesets.</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 518px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACV0lEQVQoz3XRy1LTUBgH8Ox9CDc+gT6AOo6Wneg449ChilZALr2ALRSQS9PQc07SJg0pEQqdkgOlleKQQG6YtqFNW+oiFRe8j1NW4uhv5vt2/5nvQmCMFUWWZdmyLMM0DU3XdePcsgzDMHRdPTszTUNVNcuy6jdqtZpt247jmKZJbOd2kiRcXFhhWEYQhASXTiOQZRlxUxS3tnlBzO3s8jy/J0mlUunw8LBYLH49OjpVFFVVCSG5NjjgffbkxcCAJzwbvf/Wu7C8NDUxuRQJJj9H1hdnUGIVIRqCWyiKSqVSxBcazHmHJsfCXp/fM/bhzt17nvHRBw+fvvYO5Tf59aVPDLmAEE336xYIIZETC8vv38Wia2yS+TgfGfGN+AMB//hEKBzOCxkGMggk0b/0w3t5PDw8PujxHucPspkM4rM0l43GSAhRAsANkU0C8N+whA98I1Oh4DyJUiwDDRA4oabJNy+5lYgQC+apEMfSN1P/DQBA7ONiKrErcVyZIemZ6bNZT4MabkK/nIqmqVW4GJsbCwEqyTDMnwsjhDiO64fng+z6WjqT5Z8/eux7NVQCscrqqA4CACFIM3OTsxSZgPDWvePxeC6XIyqVb7tbhdzOsWnVEKAFNlMpSvuF/MFeHmOp/9lyCWMs3cAYFwoFjHG5XFYUhahWq67r9Ez1Z02/apx3tRNbOW12Oo7TdlpO02m1Wu1Op9Ptdi/7+r3nutfX167rEhe2XbWb7Q3+RxZeinSDjrdK5brj2PV648I2rMap9t3QtWbTabf6rn5d9Xo9TVNlWf4Nd4mgdymyqM4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Embed Tileset\" title=\"Embedding a tileset on Tiled\" src=\"/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png\" srcset=\"/static/51df513f0b0acbe195eb3327398273b4/e3135/tiled-embed-tileset.png 256w,\n/static/51df513f0b0acbe195eb3327398273b4/06341/tiled-embed-tileset.png 512w,\n/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png 518w\" sizes=\"(max-width: 518px) 100vw, 518px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Embedding a tileset on Tiled</figcaption>\n  </figure><p></p>\n<p>To solve this problem I decided to come up with a solution to automatically embed tilemaps using Webpack, to do that I compared the JSON file from the same map before and after embedding a tileset, and it looked like this:</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQoz22Ra2/aMBSG82s6RmP7GCexHUxz5VIQaimJk8CHdtIu0qYmDqH8/olLt3bdo1fWsXQeHR/ZSqe3k9k8mczCJI3H0ygdJ+NplEzGs0WYpDdxosJIBaEKo+GfBGGQxMu7O4tSCkAJACFATsX5yhyXBxGPY8QdL4hEENEhB987RvlYqWgxtxh1nIGDbNR/D0a2lz7w1S+2eAq0SfJnf/Vd3H/j91/F+ifPTFDUluRKyRvKgDJy/QZCMJ9qv9gJ3YbVId4e1GbnF53QndA7kbcyN5bnCs8VNkJHo/9evi2lNnz9HFb7ZPsitRF5c4oRuZF5Y9m2zRxGARC2L0H2RZ5vZG5EVkvdjspOFa3U7dl8lRGmjMOAYcAYCAKCAa4RBuaI5aPMG5HVPDdDvUs3h1HZSv12MjDipuCOwHXAcQlzQAwx48wP/YcfIqtFduke6U4Vu9PjX2Vn4DLGjuv2+6el++eaAIjl03nyuZvnJir3qmj/ygwYALU/AHTwjyyP8ktQGJnXF/nq01Wv1/v8ARthd/HIs8Zb115mvMzwzKiiG1Z7WXb89FuW53n8f/i+H62+xFUTl/XxrJpkY6KqiTdtsm2jyiwed78BOSS64qW11kUAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Embedded vs non-embedded\" title=\"Embedded vs non-embedded\" src=\"/static/fce7ff4d25c0afd53f6c31a041518dd8/42a19/embedded-vs-non-embedded.png\" srcset=\"/static/fce7ff4d25c0afd53f6c31a041518dd8/e3135/embedded-vs-non-embedded.png 256w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/06341/embedded-vs-non-embedded.png 512w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/42a19/embedded-vs-non-embedded.png 1024w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/b38ab/embedded-vs-non-embedded.png 1168w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Embedded vs non-embedded</figcaption>\n  </figure><p></p>\n<p>As you can see, instead of having the property <code class=\"language-text\">source</code> to an external file, like <code class=\"language-text\">\"source\": \"../tilesets/test_tileset.json\"</code>, it contains the whole content of that file plus a <code class=\"language-text\">firstgid</code> attribute, so all we need to do is loop through all Tiled maps, read the <code class=\"language-text\">tilesets</code> property, load each individual tileset file and put each of it’s content in a array replacement for the <code class=\"language-text\">tilesets</code> property.</p>\n<p>This is how I did it:</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> CopyWebpackPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">promises</span><span class=\"token operator\">:</span> fs <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> stageFiles <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// get only the JSON files</span>\n<span class=\"token keyword\">const</span> stageJsons <span class=\"token operator\">=</span> stageFiles\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyWebpackPluginPatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nstageJsons<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    copyWebpackPluginPatterns<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">to</span><span class=\"token operator\">:</span> <span class=\"token string\">'../assets/stages'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">transform</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fileBuffer<span class=\"token punctuation\">,</span> elPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> manifestString <span class=\"token operator\">=</span> fileBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> stageData <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>manifestString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> newTilesets <span class=\"token operator\">=</span> stageData<span class=\"token punctuation\">.</span>tilesets<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tileset</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// firstgid is an important id reference for Tiled</span>\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> firstgid <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> tileset<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tileset<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token comment\">// if there's no source, it means the Tileset</span>\n                    <span class=\"token comment\">// is already embedded</span>\n                    <span class=\"token keyword\">return</span> tileset<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n\n                <span class=\"token comment\">// on my setup, stages are in root/stages/</span>\n                <span class=\"token comment\">// and the tilesets are in root/tilesets/</span>\n                <span class=\"token comment\">// so we need to remove \"../tilesets/\" from the path</span>\n                <span class=\"token comment\">// and load it based on the root dir of the tilesets</span>\n                <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> tileset<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../tilesets/'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">// eslint-disable-next-line import/no-dynamic-require</span>\n                <span class=\"token keyword\">const</span> tilesetData <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tilesetData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not find file'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">return</span> tileset<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token operator\">...</span>tilesetData<span class=\"token punctuation\">,</span>\n                    firstgid<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            stageData<span class=\"token punctuation\">.</span>tilesets <span class=\"token operator\">=</span> newTilesets<span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">return</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>stageData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">CopyWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">patterns</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token operator\">...</span>copyWebpackPluginPatterns<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>As you can see we need the <code class=\"language-text\">copy-webpack-plugin</code> plugin to make it work, by copying all maps from the <code class=\"language-text\">assets/stages</code> directory into the <code class=\"language-text\">dist/assets/stages</code> directory, and while copying it, we set a <code class=\"language-text\">transform</code> function that will load the individual external tilesets and embed them into the Tiled maps. Add this code to your Webpack config file if you want to achieve the same result.</p>\n<h2 id=\"creating-the-title-screen\" style=\"position:relative;\"><a href=\"#creating-the-title-screen\" aria-label=\"creating the title screen permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating the title screen</h2>\n<p>This was actually quite easy and straightforward, specially because it’s pretty much the same code from previous Game Devlog.</p>\n<p>First I load the map in the <code class=\"language-text\">create</code> function:</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'title_screen'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> tileset <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'title_screen'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'city_tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> background <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'background'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ground <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ground'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> foreground <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foreground'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">[</span>background<span class=\"token punctuation\">,</span> ground<span class=\"token punctuation\">,</span> foreground<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dynamicLayer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>\n            height <span class=\"token operator\">-</span> background<span class=\"token punctuation\">.</span>height\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// set this property to make the the layers move in different speeds</span>\n        dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setScrollFactor</span><span class=\"token punctuation\">(</span>dynamicLayer<span class=\"token punctuation\">.</span>parallaxSpeedX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// we're going to use that in the update function</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Now all I did was move the camera till position <code class=\"language-text\">y = 640</code>, and from there reset the position back to <code class=\"language-text\">y = 0</code>, and the loop continues.</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copy</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">===</span> <span class=\"token number\">640</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>scrollX <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter<span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>That’s all for today, I hope you liked it, if you do please leave it a comment and consider subscribing to my YouTube channel.</p>","otherLanguagesUrl":["/pt-br/blog/games/importando-arquivo-de-tileset-externo-no-phaser-js-com-webpack-skate-platformer-game-devlog-7/"],"rss":{"title":"Loading external tileset file on Phaser JS using Webpack - Skate Platformer Game Devlog #07","description":"Loading external tileset file on Phaser JS using Webpack - Skate Platformer Game Devlog #07","date":"2020-10-08T00:00:00.000Z"},"images":["/static/e75f123fcd3c27b5e43b60fe5c9b9a09/42a19/super-ollie-vs-pebble-corp-tittle-screen.png","/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png","/static/fce7ff4d25c0afd53f6c31a041518dd8/42a19/embedded-vs-non-embedded.png"],"videos":["https://www.youtube.com/embed/a4oeHCm_Tig?rel=0"],"comments":[],"googleFormData":{"fvv":1,"pageHistory":0,"fbzx":"5566947645549549202","action":"e/1FAIpQLSeST_0jBnLKkEkXGpyx9LWrvV2a1-1F5dr-AcA4wn0BSRyPCw","title":"blog_comment","description":null,"fields":[{"label":"name","description":null,"type":"SHORT_ANSWER","id":"1953327618","required":true},{"label":"email","description":null,"type":"SHORT_ANSWER","id":"1309141965","required":false},{"label":"twitter","description":null,"type":"SHORT_ANSWER","id":"740186305","required":false},{"label":"comment","description":null,"type":"LONG_ANSWER","id":"1663940054","required":true},{"label":"post_path","description":null,"type":"SHORT_ANSWER","id":"1852628638","required":true}],"fieldsOrder":{"740186305":2,"1309141965":1,"1663940054":3,"1852628638":4,"1953327618":0}},"pageType":"blogPost","categoryImage":"/categories_games.jpg/","slug":"/2020/2020-08-10-loading-external-tileset-file-on-phaser-js-using-webpack-skate-platformer-game-devlog-7.en/","locale":"en","title":"Loading external tileset file on Phaser JS using Webpack - Skate Platformer Game Devlog #07","previous":{"excerpt":"Fala pessoal! O Game Devlog dessa semana é um pouco longo…","html":"<p>Fala pessoal! O Game Devlog dessa semana é um pouco longo, 15 minutos, mas vale a pena assistir, pois, tem muitas coisas interessantes sobre o jogo.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/dUNkwPYmzb4?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<h2 id=\"selecao-de-fases\" style=\"position:relative;\"><a href=\"#selecao-de-fases\" aria-label=\"selecao de fases permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Seleção de Fases</h2>\n<p>Para facilitar o teste de novas fases, eu decidi adicionar uma tela de seleção de estágio básica, para que eu pudesse testar várias fases no mesmo build ao invés de ficar alterando o mesmo arquivo de fase toda a hora. Agora, sempre que adiciono um novo arquivo de estágio à pasta de fases, essa fase será automaticamente incluída no bundle do jogo, graças a algumas configurações personalizadas no Webpack.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> CopyWebpackPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">promises</span><span class=\"token operator\">:</span> fs <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> stageFiles <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// get only the JSON files</span>\r\n<span class=\"token keyword\">const</span> stageJsons <span class=\"token operator\">=</span> stageFiles\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">GAME_STAGES</span> <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>\r\n    stageJsons<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// eslint-disable-next-line import/no-dynamic-require</span>\r\n        <span class=\"token keyword\">const</span> stageData <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> stageName <span class=\"token operator\">=</span> <span class=\"token function\">getStageNameFromMap</span><span class=\"token punctuation\">(</span>stageData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n            stageName<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">stageKey</span><span class=\"token operator\">:</span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>DefinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token constant\">GAME_STAGES</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Na scene de seleção de fases, você pode acessar os dados de fases na variável <code class=\"language-text\">GAME_STAGES</code>, então eu faço um loop por esses dados das fases e crio um seletor de fases.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> posX <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">let</span> posY <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token constant\">GAME_STAGES</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stageData<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> stageKey<span class=\"token punctuation\">,</span> stageName <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> stageData<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> stageSelector <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StageSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> posX<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> posY<span class=\"token punctuation\">,</span>\r\n        stageKey<span class=\"token punctuation\">,</span>\r\n        stageName<span class=\"token punctuation\">,</span>\r\n        <span class=\"token function-variable function\">onClickCallback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>\r\n        posX <span class=\"token operator\">+</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\r\n        posY <span class=\"token operator\">+</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">padStart</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span>stageSelector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    stageSelectors<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>stageSelector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    posX <span class=\"token operator\">+=</span> <span class=\"token number\">52</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token number\">7</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        posY <span class=\"token operator\">+=</span> <span class=\"token number\">52</span><span class=\"token punctuation\">;</span>\r\n        posX <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"parallax-effect\" style=\"position:relative;\"><a href=\"#parallax-effect\" aria-label=\"parallax effect permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Parallax Effect</h2>\n<p>O jogo não estaria completo sem um bom parallax effect, e para conseguir isso eu decidi adicionar algumas propriedades personalizadas às layers do Tiled e acesso elas na função update da game scene.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">time<span class=\"token punctuation\">,</span> delta</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> dynamicLayers <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">;</span>\r\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>dynamicLayers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dynamicLayer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        dynamicLayer<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> property<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">!==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'parallaxSpeedX'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>scrollX <span class=\"token operator\">*</span> value\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'parallaxSpeedY'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">*</span> value\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Obs: Depois de escrever esse post, eu descobri a função <a href=\"https://photonstorm.github.io/phaser3-docs/Phaser.GameObjects.Components.ScrollFactor.html#setScrollFactor\" target=\"_blank\" rel=\"noreferrer\">setScrollFactor</a> e com ela é possível definir um atributo direto na layer ao invés de fazer um loop na função update.</p>\n<h2 id=\"descendo-de-plataformas\" style=\"position:relative;\"><a href=\"#descendo-de-plataformas\" aria-label=\"descendo de plataformas permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Descendo de Plataformas</h2>\n<p>Para fazer isso eu pesquisei um pouco, e acabei fazendo de um jeito que é meio que uma gambiarra, mas funciona por enquanto, então decidi seguir em frente.</p>\n<p>Primeiro eu verifico se o hero está no chão, se há um elemento encostando no hero por baixo e se o botão para baixo está sendo pressionado. Caso positivo, desabilitamos a colisão do baixo do hero por 150 milissegundos.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Handle hero going down through element</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroOnGround</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isDownJustDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchingDownObject\r\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>checkCollision<span class=\"token punctuation\">.</span>down <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token number\">150</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>checkCollision<span class=\"token punctuation\">.</span>down <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Isso é bastante simples, mas como podemos acessar o atributo <code class=\"language-text\">this.touchingDownObject</code>? Bom, essa é a maior parte da gambiarra dessa solução. Primeiro, precisamos adicionar um collider entre o hero e a layer do mapa com uma função de callback que irá verificar algumas coisas e definir o atributo <code class=\"language-text\">this.touchingDownObject</code> para o hero.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>\r\n    dynamicLayers<span class=\"token punctuation\">.</span>ground<span class=\"token punctuation\">,</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hero<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">objectA<span class=\"token punctuation\">,</span> objectB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>hero<span class=\"token punctuation\">,</span> element<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getHeroAndObject</span><span class=\"token punctuation\">(</span>objectA<span class=\"token punctuation\">,</span> objectB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n            hero<span class=\"token punctuation\">.</span><span class=\"token function\">isHeroOnGround</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token operator\">&amp;&amp;</span> element<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>collidesUp\r\n            <span class=\"token operator\">&amp;&amp;</span> element<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>canFallThrough\r\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            hero<span class=\"token punctuation\">.</span>touchingDownObject <span class=\"token operator\">=</span> element<span class=\"token punctuation\">;</span> <span class=\"token comment\">// TODO?</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            hero<span class=\"token punctuation\">.</span>touchingDownObject <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>E é isso aí! Espero que tenham gostado e não esqueçam de deixar um comentário se acharam post útil.</p>","fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTAtMDFUMDA6MDA6MDAuMDAwWg==","slug":"/2020/2020-01-10-descendo-de-plataformas-com-arcade-physics-do-phaser-js-skate-platformer-game-devlog-6.pt-br/","path":"/blog/games/descendo-de-plataformas-com-arcade-physics-do-phaser-js-skate-platformer-game-devlog-6/","locale":"pt-br"},"rawMarkdownBody":"Fala pessoal! O Game Devlog dessa semana é um pouco longo, 15 minutos, mas vale a pena assistir, pois, tem muitas coisas interessantes sobre o jogo.\r\n\r\n`youtube: https://www.youtube.com/watch?v=dUNkwPYmzb4`\r\n\r\n## Seleção de Fases\r\n\r\nPara facilitar o teste de novas fases, eu decidi adicionar uma tela de seleção de estágio básica, para que eu pudesse testar várias fases no mesmo build ao invés de ficar alterando o mesmo arquivo de fase toda a hora. Agora, sempre que adiciono um novo arquivo de estágio à pasta de fases, essa fase será automaticamente incluída no bundle do jogo, graças a algumas configurações personalizadas no Webpack.\r\n\r\n```javascript\r\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\r\nconst { promises: fs } = require('fs');\r\nconst stageFiles = await fs.readdir(STAGES_PATH);\r\n// get only the JSON files\r\nconst stageJsons = stageFiles\r\n    .filter((stage) => stage.split('.')[1] === 'json');\r\nconst GAME_STAGES = JSON.stringify(\r\n    stageJsons.map((stage) => {\r\n        // eslint-disable-next-line import/no-dynamic-require\r\n        const stageData = require(`${STAGES_PATH}/${stage}`);\r\n        const stageName = getStageNameFromMap(stageData);\r\n\r\n        return {\r\n            stageName,\r\n            stageKey: stage.split('.')[0],\r\n        };\r\n    })\r\n);\r\n\r\nmodule.exports = {\r\n    plugins: [\r\n        new webpack.DefinePlugin({\r\n            GAME_STAGES,\r\n        }),\r\n    ],\r\n};\r\n```\r\n\r\nNa scene de seleção de fases, você pode acessar os dados de fases na variável `GAME_STAGES`, então eu faço um loop por esses dados das fases e crio um seletor de fases.\r\n\r\n```javascript\r\nlet posX = 20;\r\nlet posY = 50;\r\nGAME_STAGES.forEach((stageData, index) => {\r\n    const { stageKey, stageName } = stageData;\r\n    const stageSelector = new StageSelector({\r\n        scene: this,\r\n        x: posX,\r\n        y: posY,\r\n        stageKey,\r\n        stageName,\r\n        onClickCallback: (data) => {\r\n            this.scene.start('GameScene', data);\r\n        },\r\n    });\r\n\r\n    this.add.text(\r\n        posX + 8,\r\n        posY + 8,\r\n        `${index + 1}`.padStart(2, '0')\r\n    ).setDepth(50);\r\n\r\n    this.add.existing(stageSelector);\r\n    stageSelectors.add(stageSelector);\r\n\r\n    posX += 52;\r\n    if ((index + 1) % 7 === 0) {\r\n        posY += 52;\r\n        posX = 20;\r\n    }\r\n});\r\n```\r\n\r\n## Parallax Effect\r\n\r\nO jogo não estaria completo sem um bom parallax effect, e para conseguir isso eu decidi adicionar algumas propriedades personalizadas às layers do Tiled e acesso elas na função update da game scene.\r\n\r\n```javascript\r\nupdate(time, delta) {\r\n    const { dynamicLayers } = this.mapData;\r\n    Object.values(dynamicLayers).forEach((dynamicLayer) => {\r\n        dynamicLayer.layer.properties.forEach((property) => {\r\n            const { name, value } = property;\r\n            if (value !== 1) {\r\n                if (name === 'parallaxSpeedX') {\r\n                    dynamicLayer.setX(\r\n                        this.cameras.main.scrollX * value\r\n                    );\r\n                } else if (name === 'parallaxSpeedY') {\r\n                    dynamicLayer.setY(\r\n                        this.cameras.main.scrollY * value\r\n                    );\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n```\r\n\r\nObs: Depois de escrever esse post, eu descobri a função [setScrollFactor](https://photonstorm.github.io/phaser3-docs/Phaser.GameObjects.Components.ScrollFactor.html#setScrollFactor) e com ela é possível definir um atributo direto na layer ao invés de fazer um loop na função update.\r\n\r\n## Descendo de Plataformas\r\n\r\nPara fazer isso eu pesquisei um pouco, e acabei fazendo de um jeito que é meio que uma gambiarra, mas funciona por enquanto, então decidi seguir em frente.\r\n\r\nPrimeiro eu verifico se o hero está no chão, se há um elemento encostando no hero por baixo e se o botão para baixo está sendo pressionado. Caso positivo, desabilitamos a colisão do baixo do hero por 150 milissegundos.\r\n\r\n```javascript\r\n// Handle hero going down through element\r\nif (\r\n    this.isHeroOnGround()\r\n    && this.isDownJustDown()\r\n    && this.touchingDownObject\r\n) {\r\n    this.body.checkCollision.down = false;\r\n    this.scene.time.delayedCall(\r\n        150,\r\n        () => {\r\n            this.body.checkCollision.down = true;\r\n        }\r\n    );\r\n}\r\n```\r\n\r\nIsso é bastante simples, mas como podemos acessar o atributo `this.touchingDownObject`? Bom, essa é a maior parte da gambiarra dessa solução. Primeiro, precisamos adicionar um collider entre o hero e a layer do mapa com uma função de callback que irá verificar algumas coisas e definir o atributo `this.touchingDownObject` para o hero.\r\n\r\n```javascript\r\nthis.physics.add.collider(\r\n    dynamicLayers.ground,\r\n    this.hero,\r\n    (objectA, objectB) => {\r\n        const [hero, element] = this.getHeroAndObject(objectA, objectB);\r\n\r\n        if (\r\n            hero.isHeroOnGround()\r\n            && element.properties.collidesUp\r\n            && element.properties.canFallThrough\r\n        ) {\r\n            hero.touchingDownObject = element; // TODO?\r\n        } else {\r\n            hero.touchingDownObject = null;\r\n        }\r\n    }\r\n);\r\n```\r\n\r\nE é isso aí! Espero que tenham gostado e não esqueçam de deixar um comentário se acharam post útil.\r\n","frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2020-10-01T00:00:00.000Z","id":null,"path":"descendo-de-plataformas-com-arcade-physics-do-phaser-js-skate-platformer-game-devlog-6","show":true,"title":"Descendo de plataformas com Arcade Physics do Phaser JS - Skate Platformer Game Devlog #06","hideExcerpt":false,"subtitle":""}},"next":{"excerpt":"Importando tilesets externos Tiled é uma ferramenta open…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQY0wHoARf+ADOI3DOI3DKH3CiC3CeB2yqC2TKH3ESHzFGHv3hyh3R2j12MwMDO3dnY3cDL3EOP3DCG3DSI3DSJ3DWK3QAyiN0xiN02it1spd5xruRlqeUrkuyBcH+4X0CSa2+YbWvPbEPhzcauz+lVouYyi+Ayh9wziN0thtwmgtwAOIjXNYfXQI3XvsvY7JiG2XZomFttsFdcrkdHpFlfo1NZoURInUROk1duklJoY3mwMIveM4TVWZrcnb7iAGuQpGuQpWmPpWOMppFWYJ03QLFCQrhIRK5MTqVVXZdhaJhQV6lLSrNFQ6o/Q4xrdmyTp2eNoouiq8XEvADEo2PDomPDomPGpGO/pWm/omWtk2aMd2qFb2leTGWHcmqcg2qOe22nj2i8oGW+o2XEo2PEo2O/oGK4nWEAn4k5o4o4nIo5ooo5oIs4o4w5bFZJPzlQQztOQTtPRD5ORT1NPTpOXVFJook5oYo5oIo5oYw5oIs6pIw5ACFKViFLViBLViFLVSFHVCBLUSFcRylUTilMUylRVCdRVChQVChRVCRNVCFKVSFMVSFHVSJJUiFIVCFKVgA8M0s9NEs9NEs9MUs/WVc1gVkigU8xgFk9W1g7MEs6M0w7Mkw7Mkw8M0s9NEs9MktCUVQ7f1w+YVU+M0tQItiEJydQCgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Super Ollie vs Pebble Corp.\"\n        title=\"Super Ollie vs Pebble Corp.\"\n        src=\"/static/e75f123fcd3c27b5e43b60fe5c9b9a09/42a19/super-ollie-vs-pebble-corp-tittle-screen.png\"\n        srcset=\"/static/e75f123fcd3c27b5e43b60fe5c9b9a09/e3135/super-ollie-vs-pebble-corp-tittle-screen.png 256w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/06341/super-ollie-vs-pebble-corp-tittle-screen.png 512w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/42a19/super-ollie-vs-pebble-corp-tittle-screen.png 1024w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/e2f49/super-ollie-vs-pebble-corp-tittle-screen.png 1366w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Super Ollie vs Pebble Corp.</figcaption>\n  </figure></p>\n<p>No Game Devlog de hoje, vou mostrar como importar tilesets externos no Phaser JS, mas primeiro vamos tirar isso do caminho: Esqueça o nome \"Skate Platformer\", o nome do nosso jogo vai ser <span\n          \n          class='highlighted-text'\n        >Super Ollie vs Pebble Corp</span>. A gente não planejava dar um nome ao jogo agora, mas a ideia simplesmente veio nas nossas cabeças e achamos que o nome é perfeito. Deixa eu te perguntar uma coisa, qual é o pior inimigo do skatista? Indiscutivelmente essas pequenas pedrinhas, certo? E se no futuro houver uma empresa do mal que quer proibir o skate em todos os lugares, como essa empresa se chamaria? Pebble Corp, é claro. Pebble é o nome em inglês daquelas pedrinhas que geralmente você encontra em praias e tal. Agora com isso fora do caminho, vamos continuar com o post.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/a4oeHCm_Tig?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<h2 id=\"importando-tilesets-externos\" style=\"position:relative;\"><a href=\"#importando-tilesets-externos\" aria-label=\"importando tilesets externos permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Importando tilesets externos</h2>\n<p><a href=\"https://www.mapeditor.org/\" target=\"_blank\" rel=\"noreferrer\">Tiled</a> é uma ferramenta <a href=\"https://github.com/bjorn/tiled\" target=\"_blank\" rel=\"noreferrer\">open source</a> poderosa para construir mapas 2D suportados por <a href=\"https://discourse.mapeditor.org/t/which-game-engine-s-are-you-using-with-tiled/757/8\" target=\"_blank\" rel=\"noreferrer\">muitas engines de jogos diferentes</a>, incluindo Phaser JS, que é o framework que eu estou usando para <a href=\"/en/blog/tags/super-ollie-vs-pebble-corp\">esse jogo</a>.</p>\n<p>Há um pequeno problema, ao carregar mapas do Tiled no Phaser JS, o tileset precisa estar “embutido” no mapa, caso contrário, o Phaser JS não consegue carregá-lo. Isso é muito frustrante porque sempre que eu faço alterações em um tileset, eu tenho que ir em todos os meus arquivos de mapa e “reembutir” o tileset, isso acaba demorando muito se o projeto tiver muitos mapas e tilesets diferentes.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 518px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACV0lEQVQoz3XRy1LTUBgH8Ox9CDc+gT6AOo6Wneg449ChilZALr2ALRSQS9PQc07SJg0pEQqdkgOlleKQQG6YtqFNW+oiFRe8j1NW4uhv5vt2/5nvQmCMFUWWZdmyLMM0DU3XdePcsgzDMHRdPTszTUNVNcuy6jdqtZpt247jmKZJbOd2kiRcXFhhWEYQhASXTiOQZRlxUxS3tnlBzO3s8jy/J0mlUunw8LBYLH49OjpVFFVVCSG5NjjgffbkxcCAJzwbvf/Wu7C8NDUxuRQJJj9H1hdnUGIVIRqCWyiKSqVSxBcazHmHJsfCXp/fM/bhzt17nvHRBw+fvvYO5Tf59aVPDLmAEE336xYIIZETC8vv38Wia2yS+TgfGfGN+AMB//hEKBzOCxkGMggk0b/0w3t5PDw8PujxHucPspkM4rM0l43GSAhRAsANkU0C8N+whA98I1Oh4DyJUiwDDRA4oabJNy+5lYgQC+apEMfSN1P/DQBA7ONiKrErcVyZIemZ6bNZT4MabkK/nIqmqVW4GJsbCwEqyTDMnwsjhDiO64fng+z6WjqT5Z8/eux7NVQCscrqqA4CACFIM3OTsxSZgPDWvePxeC6XIyqVb7tbhdzOsWnVEKAFNlMpSvuF/MFeHmOp/9lyCWMs3cAYFwoFjHG5XFYUhahWq67r9Ez1Z02/apx3tRNbOW12Oo7TdlpO02m1Wu1Op9Ptdi/7+r3nutfX167rEhe2XbWb7Q3+RxZeinSDjrdK5brj2PV648I2rMap9t3QtWbTabf6rn5d9Xo9TVNlWf4Nd4mgdymyqM4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Embutir Tileset\"\n        title=\"Embutindo um tileset no Tiled\"\n        src=\"/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png\"\n        srcset=\"/static/51df513f0b0acbe195eb3327398273b4/e3135/tiled-embed-tileset.png 256w,\n/static/51df513f0b0acbe195eb3327398273b4/06341/tiled-embed-tileset.png 512w,\n/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png 518w\"\n        sizes=\"(max-width: 518px) 100vw, 518px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Embutindo um tileset no Tiled</figcaption>\n  </figure></p>\n<p>Para resolver este problema, decidi encontrar uma solução para embutir automaticamente os tilesets com o Webpack. Para fazer isso, comparei o arquivo JSON do mesmo mapa antes e depois de embutir um tileset, e ficou assim:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQoz22Ra2/aMBSG82s6RmP7GCexHUxz5VIQaimJk8CHdtIu0qYmDqH8/olLt3bdo1fWsXQeHR/ZSqe3k9k8mczCJI3H0ygdJ+NplEzGs0WYpDdxosJIBaEKo+GfBGGQxMu7O4tSCkAJACFATsX5yhyXBxGPY8QdL4hEENEhB987RvlYqWgxtxh1nIGDbNR/D0a2lz7w1S+2eAq0SfJnf/Vd3H/j91/F+ifPTFDUluRKyRvKgDJy/QZCMJ9qv9gJ3YbVId4e1GbnF53QndA7kbcyN5bnCs8VNkJHo/9evi2lNnz9HFb7ZPsitRF5c4oRuZF5Y9m2zRxGARC2L0H2RZ5vZG5EVkvdjspOFa3U7dl8lRGmjMOAYcAYCAKCAa4RBuaI5aPMG5HVPDdDvUs3h1HZSv12MjDipuCOwHXAcQlzQAwx48wP/YcfIqtFduke6U4Vu9PjX2Vn4DLGjuv2+6el++eaAIjl03nyuZvnJir3qmj/ygwYALU/AHTwjyyP8ktQGJnXF/nq01Wv1/v8ARthd/HIs8Zb115mvMzwzKiiG1Z7WXb89FuW53n8f/i+H62+xFUTl/XxrJpkY6KqiTdtsm2jyiwed78BOSS64qW11kUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Tileset embutido vs não embutido\"\n        title=\"Tileset embutido vs não embutido\"\n        src=\"/static/fce7ff4d25c0afd53f6c31a041518dd8/42a19/embedded-vs-non-embedded.png\"\n        srcset=\"/static/fce7ff4d25c0afd53f6c31a041518dd8/e3135/embedded-vs-non-embedded.png 256w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/06341/embedded-vs-non-embedded.png 512w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/42a19/embedded-vs-non-embedded.png 1024w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/b38ab/embedded-vs-non-embedded.png 1168w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Tileset embutido vs não embutido</figcaption>\n  </figure></p>\n<p>Como você pode ver, em vez de ter a propriedade <code class=\"language-text\">source</code> apontando para um arquivo externo, tipo <code class=\"language-text\">\"source\": \"../tilesets/test_tileset.json\"</code>, ele contém todo o conteúdo desse arquivo mais um atributo <code class=\"language-text\">firstgid</code>, então tudo o que eu preciso fazer é percorrer todos os mapas do Tiled, ler a propriedade <code class=\"language-text\">tilesets</code>, carregar cada arquivo tileset e colocar o seu conteúdo em uma nova array na propriedade <code class=\"language-text\">tilesets</code>.</p>\n<p>Foi assim que eu fiz:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> CopyWebpackPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">promises</span><span class=\"token operator\">:</span> fs <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> stageFiles <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// get only the JSON files</span>\r\n<span class=\"token keyword\">const</span> stageJsons <span class=\"token operator\">=</span> stageFiles\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> copyWebpackPluginPatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\nstageJsons<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    copyWebpackPluginPatterns<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">to</span><span class=\"token operator\">:</span> <span class=\"token string\">'../assets/stages'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token function-variable function\">transform</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fileBuffer<span class=\"token punctuation\">,</span> elPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> manifestString <span class=\"token operator\">=</span> fileBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> stageData <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>manifestString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> newTilesets <span class=\"token operator\">=</span> stageData<span class=\"token punctuation\">.</span>tilesets<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tileset</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// firstgid is an important id reference for Tiled</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> firstgid <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> tileset<span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tileset<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token comment\">// if there's no source, it means the Tileset</span>\r\n                    <span class=\"token comment\">// is already embedded</span>\r\n                    <span class=\"token keyword\">return</span> tileset<span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token comment\">// on my setup, stages are in root/stages/</span>\r\n                <span class=\"token comment\">// and the tilesets are in root/tilesets/</span>\r\n                <span class=\"token comment\">// so we need to remove \"../tilesets/\" from the path</span>\r\n                <span class=\"token comment\">// and load it based on the root dir of the tilesets</span>\r\n                <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> tileset<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../tilesets/'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token comment\">// eslint-disable-next-line import/no-dynamic-require</span>\r\n                <span class=\"token keyword\">const</span> tilesetData <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tilesetData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not find file'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">return</span> tileset<span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token operator\">...</span>tilesetData<span class=\"token punctuation\">,</span>\r\n                    firstgid<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            stageData<span class=\"token punctuation\">.</span>tilesets <span class=\"token operator\">=</span> newTilesets<span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">return</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>stageData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">CopyWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">patterns</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n                <span class=\"token operator\">...</span>copyWebpackPluginPatterns<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Como você pode ver, precisamos do plugin <code class=\"language-text\">copy-webpack-plugin</code> para fazê-lo funcionar, copiando todos os mapas do diretório <code class=\"language-text\">assets/stages</code> para o diretório <code class=\"language-text\">dist/assets/stages</code>, e ao copiá-lo, definimos uma função <code class=\"language-text\">transform</code> que carregará os tilesets externos e os embutirá nos mapas Tiled. Adicione este código ao seu arquivo de configuração do Webpack se quiser obter o mesmo resultado.</p>\n<h2 id=\"criando-a-tela-inicial\" style=\"position:relative;\"><a href=\"#criando-a-tela-inicial\" aria-label=\"criando a tela inicial permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Criando a tela inicial</h2>\n<p>Isso foi realmente muito fácil e direto, especialmente porque é praticamente o mesmo código do Game Devlog anterior.</p>\n<p>Primeiro eu carrego o mapa na função <code class=\"language-text\">create</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'title_screen'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> tileset <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'title_screen'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'city_tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> background <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'background'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> ground <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ground'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> foreground <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foreground'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token punctuation\">[</span>background<span class=\"token punctuation\">,</span> ground<span class=\"token punctuation\">,</span> foreground<span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dynamicLayer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>\r\n            height <span class=\"token operator\">-</span> background<span class=\"token punctuation\">.</span>height\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// set this property to make the the layers move in different speeds</span>\r\n        dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setScrollFactor</span><span class=\"token punctuation\">(</span>dynamicLayer<span class=\"token punctuation\">.</span>parallaxSpeedX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// we're going to use that in the update function</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Agora tudo o que fiz foi mover a câmera até a posição <code class=\"language-text\">y = 640</code> e, quando ela chegar lá, mudar a posição de volta para<code class=\"language-text\">y = 0</code>, e repetir isso indefinidamente.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">===</span> <span class=\"token number\">640</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>scrollX <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter<span class=\"token punctuation\">;</span></code></pre></div>\n<p>E por hoje é isso! Espero que tenha gostado, se quiser, deixe um comentário e considere se inscrever no meu canal no YouTube.</p>","fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjAtMTAtMDhUMDA6MDA6MDAuMDAwWg==","slug":"/2020/2020-08-10-importando-arquivo-de-tileset-externo-no-phaser-js-com-webpack-skate-platformer-game-devlog-7.pt-br/","path":"/blog/games/importando-arquivo-de-tileset-externo-no-phaser-js-com-webpack-skate-platformer-game-devlog-7/","locale":"pt-br"},"rawMarkdownBody":"![Super Ollie vs Pebble Corp.](../../uploads/blog/2020/10/super-ollie-vs-pebble-corp-tittle-screen.png)\r\n\r\nNo Game Devlog de hoje, vou mostrar como importar tilesets externos no Phaser JS, mas primeiro vamos tirar isso do caminho: Esqueça o nome \"Skate Platformer\", o nome do nosso jogo vai ser -#Super Ollie vs Pebble Corp#-. A gente não planejava dar um nome ao jogo agora, mas a ideia simplesmente veio nas nossas cabeças e achamos que o nome é perfeito. Deixa eu te perguntar uma coisa, qual é o pior inimigo do skatista? Indiscutivelmente essas pequenas pedrinhas, certo? E se no futuro houver uma empresa do mal que quer proibir o skate em todos os lugares, como essa empresa se chamaria? Pebble Corp, é claro. Pebble é o nome em inglês daquelas pedrinhas que geralmente você encontra em praias e tal. Agora com isso fora do caminho, vamos continuar com o post.\r\n\r\n`youtube: https://www.youtube.com/watch?v=a4oeHCm_Tig`\r\n\r\n## Importando tilesets externos\r\n\r\n[Tiled](https://www.mapeditor.org/) é uma ferramenta [open source](https://github.com/bjorn/tiled) poderosa para construir mapas 2D suportados por [muitas engines de jogos diferentes](https://discourse.mapeditor.org/t/which-game-engine-s-are-you-using-with-tiled/757/8), incluindo Phaser JS, que é o framework que eu estou usando para [esse jogo](/en/blog/tags/super-ollie-vs-pebble-corp).\r\n\r\nHá um pequeno problema, ao carregar mapas do Tiled no Phaser JS, o tileset precisa estar \"embutido\" no mapa, caso contrário, o Phaser JS não consegue carregá-lo. Isso é muito frustrante porque sempre que eu faço alterações em um tileset, eu tenho que ir em todos os meus arquivos de mapa e \"reembutir\" o tileset, isso acaba demorando muito se o projeto tiver muitos mapas e tilesets diferentes.\r\n\r\n![Embutir Tileset](../../uploads/blog/2020/10/tiled-embed-tileset.png \"Embutindo um tileset no Tiled\")\r\n\r\nPara resolver este problema, decidi encontrar uma solução para embutir automaticamente os tilesets com o Webpack. Para fazer isso, comparei o arquivo JSON do mesmo mapa antes e depois de embutir um tileset, e ficou assim:\r\n\r\n![Tileset embutido vs não embutido](../../uploads/blog/2020/10/embedded-vs-non-embedded.png \"Tileset embutido vs não embutido\")\r\n\r\nComo você pode ver, em vez de ter a propriedade `source` apontando para um arquivo externo, tipo `\"source\": \"../tilesets/test_tileset.json\"`, ele contém todo o conteúdo desse arquivo mais um atributo `firstgid`, então tudo o que eu preciso fazer é percorrer todos os mapas do Tiled, ler a propriedade `tilesets`, carregar cada arquivo tileset e colocar o seu conteúdo em uma nova array na propriedade `tilesets`.\r\n\r\nFoi assim que eu fiz:\r\n\r\n```javascript\r\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\r\nconst { promises: fs } = require('fs');\r\nconst stageFiles = await fs.readdir(STAGES_PATH);\r\n// get only the JSON files\r\nconst stageJsons = stageFiles\r\n    .filter((stage) => stage.split('.')[1] === 'json');\r\n\r\nconst copyWebpackPluginPatterns = [];\r\nstageJsons.forEach((stage) => {\r\n    copyWebpackPluginPatterns.push({\r\n        from: `${STAGES_PATH}/${stage}`,\r\n        to: '../assets/stages',\r\n        transform: (fileBuffer, elPath) => {\r\n            const manifestString = fileBuffer.toString();\r\n            const stageData = JSON.parse(manifestString);\r\n            const newTilesets = stageData.tilesets.map((tileset) => {\r\n                // firstgid is an important id reference for Tiled\r\n                const { firstgid } = tileset;\r\n                if (!tileset.source) {\r\n                    // if there's no source, it means the Tileset\r\n                    // is already embedded\r\n                    return tileset;\r\n                }\r\n\r\n                // on my setup, stages are in root/stages/\r\n                // and the tilesets are in root/tilesets/\r\n                // so we need to remove \"../tilesets/\" from the path\r\n                // and load it based on the root dir of the tilesets\r\n                const filePath = tileset.source.replace('../tilesets/', '');\r\n                // eslint-disable-next-line import/no-dynamic-require\r\n                const tilesetData = require(`${TILESETS_PATH}/${filePath}`);\r\n                if (!tilesetData) {\r\n                    console.error('Could not find file', `${TILESETS_PATH}/${filePath}`);\r\n                    return tileset;\r\n                }\r\n\r\n                return {\r\n                    ...tilesetData,\r\n                    firstgid,\r\n                };\r\n            });\r\n            stageData.tilesets = newTilesets;\r\n\r\n            return Buffer.from(JSON.stringify(stageData));\r\n        },\r\n    });\r\n});\r\n\r\nmodule.exports = {\r\n    plugins: [\r\n        new CopyWebpackPlugin({\r\n            patterns: [\r\n                ...copyWebpackPluginPatterns,\r\n            ],\r\n        }),\r\n    ],\r\n};\r\n```\r\n\r\nComo você pode ver, precisamos do plugin `copy-webpack-plugin` para fazê-lo funcionar, copiando todos os mapas do diretório `assets/stages` para o diretório `dist/assets/stages`, e ao copiá-lo, definimos uma função `transform` que carregará os tilesets externos e os embutirá nos mapas Tiled. Adicione este código ao seu arquivo de configuração do Webpack se quiser obter o mesmo resultado.\r\n\r\n## Criando a tela inicial\r\nIsso foi realmente muito fácil e direto, especialmente porque é praticamente o mesmo código do Game Devlog anterior.\r\n\r\nPrimeiro eu carrego o mapa na função `create`:\r\n\r\n```javascript\r\nconst map = scene.make.tilemap({ key: 'title_screen' });\r\nconst tileset = map.addTilesetImage('title_screen', 'city_tileset');\r\nconst { width, height } = this.cameras.main;\r\n\r\nconst background = map.createDynamicLayer('background', tileset, 0, 0);\r\nconst ground = map.createDynamicLayer('ground', tileset, 0, 0);\r\nconst foreground = map.createDynamicLayer('foreground', tileset, 0, 0);\r\n\r\n[background, ground, foreground]\r\n    .forEach((dynamicLayer) => {\r\n        dynamicLayer.setY(\r\n            height - background.height\r\n        );\r\n\r\n        // set this property to make the the layers move in different speeds\r\n        dynamicLayer.setScrollFactor(dynamicLayer.parallaxSpeedX);\r\n    });\r\n\r\n// we're going to use that in the update function\r\nthis.parallaxCounter = 0;\r\n```\r\n\r\nAgora tudo o que fiz foi mover a câmera até a posição `y = 640` e, quando ela chegar lá, mudar a posição de volta para`y = 0`, e repetir isso indefinidamente.\r\n\r\n```javascript\r\nthis.parallaxCounter += 1;\r\nif (this.parallaxCounter === 640) {\r\n    this.parallaxCounter = 0;\r\n}\r\n\r\nthis.cameras.main.scrollX = this.parallaxCounter;\r\n```\r\n\r\nE por hoje é isso! Espero que tenha gostado, se quiser, deixe um comentário e considere se inscrever no meu canal no YouTube.\r\n","frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2020-10-08T00:00:00.000Z","id":null,"path":"carregando-arquivo-de-tileset-externo-no-phaser-js-com-webpack-skate-platformer-game-devlog-7","show":true,"title":"Importando arquivo de tileset externo no Phaser JS com Webpack - Skate Platformer Game Devlog #07","hideExcerpt":false,"subtitle":""}},"language":"en","intl":{"language":"en","languages":["en","pt-br"],"messages":{"site_title":"pablo.gg","title":"Title","author":"@thepiratepablo","search_placeholder":"Search...","about":"About","photos":"Photos","archive":"Archive","contact":"Contact","close":"Close","contact_page":"Contact page","see_more":"See more posts","built_with":"Built with ","buy_me_a_soda":"Buy me a soda","blog":"Blog","blog_posts":"Blog posts","go_to_post":"Go to post","search":"Search","loading":"Loading...","search_results":"Search results","search_results_for":"{quantity} search results for: \"{query}\"","search_for_query":"Search for \"{query}\"","no_results":"No results","home":"Home","description":"Yet another developer personal blog","go_back":"Go back to the homepage","thats_me":"That's me!","got_it":"Got it!","check_it_out":"Check it out!","we_are":"We are","e3":"E3","away_from_next_sgf":"away from Summer Game Fest 2025","away_from_next_gamescom":"away from Gamescom 2024","sgf_countdown":"Summer Game Fest Countdown","gamescom_countdown":"Gamescom Countdown","e3_paragraph_1":"This page once featured a countdown to the next E3 event, a moment that countless gamers and industry professionals looked forward to each year. E3 was not just an event; it was a celebration of our shared passion for video games, a place where dreams were realized, and memories were made.","e3_paragraph_2":"From the electrifying announcements to the hands-on demos, E3 was the heartbeat of the gaming world. It brought together people from all corners of the globe, united by their love for games. For many, it was a chance to meet their heroes, discover new titles, and experience the thrill of the latest innovations in gaming technology.","e3_paragraph_3":"However, as the gaming landscape has evolved, so too has the way we connect and celebrate our passion. While E3 has come to an end, the spirit of excitement and community it fostered lives on. We now look forward to new ways of coming together, sharing our love for games, and creating new memories.","e3_paragraph_4":"Though the countdown is gone, the legacy of E3 will forever remain in our hearts, reminding us of the incredible journeys we've taken and the bonds we've formed along the way.","sec":"Sec","secs":"Secs","min":"Min","mins":"Mins","hour":"Hour","hours":"Hours","day":"Day","days":"Days","month":"Month","months":"Months","year":"Year","years":"Years","recent_posts":"Recent posts","email":"Email","twitter":"Twitter","name":"Name","page":"Page","fill_this_want_reply":"Fill this in if you want me to contact you back","sorry_this_post_unavailable_language":"Sorry, this post is not available in the language you picked","language":"Language","comment":"Comment","comments":"Comments","no_comments":"No comments yet.","post_comment":"Post comment","send_message":"Send message","message":"Message","post_a_comment":"Post a comment","your_comment_submitted":"Your comment has been successfully submitted.","your_message_submitted":"Your message has been successfully submitted.","on":"on","ok":"Ok","copy":"Copy","copied":"Copied","photo_num":"Photo {num}","the_matrix_has_you":"The Matrix has you...","about_paragraph_1":"A technology enthusiast from an early age, I have always been interested in computers and video games.","about_paragraph_2":"I graduated in Information Technology at Estácio de Sá University and always try to find out about new technologies and get involved in new development projects, some of which the code can be found on GitHub.","cookie_banner_consent":"By using this website you agree to our use of cookies to deliver a better experience.","written_in":"Written in ","no_post_this_tag":"No post in English include this tag.","tags":"Tags","tag_colon":"Tag: ","tags_colon":"Tags: ","posts_tagged":"Posts tagged with ","categories":"Categories","category":"Category","category_colon":"Category: ","posts_on_category":"Posts on category ","related_posts":"Related posts","read_time":"🕒 {time} min. read","create_post":"Create Post","show":"Show","date":"Date","download":"Download","add_tag":"Add Tag","hide_excerpt":"Hide Excerpt","publish_on_medium":"Publish on Medium","allow_comments":"Allow Comments","subtitle":"Subtitle","you_must_be_truly_desperate":"You must be truly desperate to come to me for help","game.game_title":"pablo.gg - The Game","game.next":"Next","game.ok":"Ok","game.loading_asset_colon":"Loading asset:","game.loading":"Loading...","game.characters.npc_01":"Frost","game.characters.npc_02":"Gavin","game.characters.npc_03":"Giles","game.characters.npc_04":"Godfrey","game.characters.npc_05":"Hugh","game.characters.npc_06":"Ivar","game.characters.npc_07":"Leopold","game.characters.npc_08":"Lucian","game.characters.npc_09":"Gumercindo","game.characters.npc_10":"Mr. Flower","game.characters.npc_11":"Maxim","game.characters.npc_12":"Milo","game.characters.npc_13":"Otto","game.characters.npc_14":"Palmer","game.characters.npc_15":"Quentin","game.characters.npc_16":"Sebastian","game.characters.npc_17":"Neville","game.characters.npc_18":"Cassian","game.characters.npc_19":"Balthasar","game.characters.sign_01":"Sign","game.characters.book_01":"Book","game.characters.home_page_city_sign":"Sign","game.characters.coding_category_city_sign_01":"Sign","game.characters.coding_category_city_sign_02":"Sign","game.characters.events_category_city_sign":"Sign","game.characters.funny_category_city_sign":"Sign","game.characters.gadgets_category_city_sign_01":"Sign","game.characters.gadgets_category_city_sign_02":"Sign","game.characters.games_category_city_sign":"Sign","game.characters.general_category_city_sign":"Sign","game.characters.tips_category_city_sign":"Sign","game.characters.toys_category_city_sign":"Sign","game.characters.sword":"Info","game.characters.push":"Info","game.gamepad.a_button":"A Button","game.gamepad.b_button":"B Button","game.gamepad.d_pad_left":"D-Pad Left","game.gamepad.d_pad_up":"D-Pad Up","game.gamepad.d_pad_right":"D-Pad Right","game.gamepad.d_pad_down":"D-Pad Down","game.gamepad.start_button":"Start Button","game.menu.start":"Start","game.menu.exit":"Exit","game.menu.settings":"Settings","game.game_over.game_over":"Game Over","game.game_over.retry":"Retry","game.game_over.exit":"Exit","game.start_menu.save_game":"Save Game","game.start_menu.exit":"Exit","game.browse_posts.choose_a_post":"Choose a Post to read","game.dialogs.npc_01.01":"Hey, you're finally awake!","game.dialogs.npc_01.02":"What, you don't know where you are?","game.dialogs.npc_01.03":"Don't be silly, you're at the Home Page City, remember?","game.dialogs.npc_01.04":"This city was founded by Pablo Montenegro to be the start of your journey","game.dialogs.npc_01.05":"Go explore the world and find other cities where you can read the accumulated knowledge of our civilization...","game.dialogs.npc_01.06":"... some people call it \"Blog Posts\", I don't know why...","game.dialogs.npc_02.01":"Be careful with the Slimes that live in the wild.","game.dialogs.npc_02.02":"Press SPACE to use your sword","game.dialogs.npc_02.03":"What is SPACE? I have no idea.","game.dialogs.npc_03.01":"Hello, welcome to our library","game.dialogs.npc_03.02":"We only have one book, which contains all of this city category publications.","game.dialogs.npc_03.03":"Go check it out!","game.dialogs.npc_04.01":"I like snails","game.dialogs.npc_05.01":"Incomplete sentences may cause some","game.dialogs.npc_06.01":"Red is greener than purple, for sure.","game.dialogs.npc_07.01":"Having a beard is the new not having a beard","game.dialogs.npc_08.01":"Sup","game.dialogs.npc_09.01":"\" - Cooper, what are you doing?\"\n\" - Docking.\"","game.dialogs.npc_10.01":"I should buy a boat","game.dialogs.npc_11.01":"Have you heard the me neither joke? Me neither.","game.dialogs.npc_12.01":"I clean toilet and rescue princesses, good life, yes?","game.dialogs.npc_13.01":"We want the airwaves back","game.dialogs.npc_14.01":"Save the cheerleader, save the world","game.dialogs.npc_15.01":"Hello, how are you?","game.dialogs.npc_15.02":"Ok bye!","game.dialogs.npc_16.01":"A kangaroo is really just a rabbit on steroids","game.dialogs.npc_17.01":"For the 216th time, he said he would quit drinking soda after this last Coke","game.dialogs.npc_18.01":"Nothing and everything is possimpible","game.dialogs.npc_19.01":"For a city called \"Events\", there isn't much going on...","game.dialogs.sign_01.01":"Congrats, you can read this!","game.dialogs.book_01.01":"Hey, thanks for trying out this very weird way to access my website","game.dialogs.book_01.02":"This project wouldn't be possible without the awesome open-source work of many people, like:","game.dialogs.book_01.03":"ArMM1998 - For the characters sprites and tilesets","game.dialogs.book_01.04":"PixElthen - For the slime sprites","game.dialogs.book_01.05":"pixelartm - For the pirate hat sprites","game.dialogs.book_01.06":"jkjkke - For the Game Over screen background","game.dialogs.book_01.07":"KnoblePersona - For the Main Menu screen background","game.dialogs.book_01.08":"Min - For the open book sprite","game.dialogs.book_01.09":"And of course, Richard Davey for making Phaser.io!","game.dialogs.home_page_city_sign":"City of Home Page","game.dialogs.coding_category_city_sign.01":"City of Coding Category","game.dialogs.coding_category_city_sign.02":"City of Coding Category","game.dialogs.events_category_city_sign":"City of Events Category","game.dialogs.funny_category_city_sign":"City of Funny Category","game.dialogs.gadgets_category_city_sign.01":"City of Gadgets Category","game.dialogs.gadgets_category_city_sign.02":"City of Gadgets Category","game.dialogs.games_category_city_sign":"City of Games Category","game.dialogs.general_category_city_sign":"City of General Category","game.dialogs.tips_category_city_sign":"City of Tips Category","game.dialogs.toys_category_city_sign":"City of Toys Category","game.dialogs.sword_item_description":"You can now attack, press SPACE to use your sword.","game.dialogs.push_item_description":"Now you can push some objects, press SPACE in front of a object to use push it.","zelda_timeline.title":"Zelda Timeline","zelda_timeline.timeline_split":"Timeline Split","zelda_timeline.timeline_unification":"Timeline Unification","zelda_timeline.icons_from":"The icons used on this page are from zeldauniverse.net and game-icons.net","zelda_timeline.creation":"Creation","zelda_timeline.creation_of_land_sky":"The Creation of the Land and Sky","zelda_timeline.goddess_hylia_and_sky_era":"Goddess Hylia and Sky Era","zelda_timeline.skyward_sword":"Skyward Sword","zelda_timeline.the_ancient_battle":"The Ancient Battle and the reincarnation of the Goddess Hylia","zelda_timeline.return_to_surface":"Return to the surface","zelda_timeline.era_of_chaos":"Era of Chaos","zelda_timeline.sacred_realm_sealed":"The Sacred Realm is Sealed","zelda_timeline.era_of_prosperity":"Era of Prosperity","zelda_timeline.establishment_of_hyrule":"The Hyrule Kingdom is established","zelda_timeline.force_era":"Force Era","zelda_timeline.the_minish_cap":"The Minish Cap","zelda_timeline.rise_of_evil_vaati":"The Rise of the Evil Vaati","zelda_timeline.four_swords":"Four Swords","zelda_timeline.resurrection_of_vaati":"The Resurrection of Vaati","zelda_timeline.era_of_the_hero_of_time":"Era of the Hero of Time","zelda_timeline.hyrulean_civil_war":"Hyrulean Civil War","zelda_timeline.ocarina_of_time":"Ocarina of Time","zelda_timeline.sacred_realm_becomes_dark_world":"The Sacred Realm Becomes the Dark World","zelda_timeline.ganondorf_becomes_ganon":"Ganondorf becomes Ganon","zelda_timeline.hero_is_defeated":"Hero is defeated","zelda_timeline.decline_of_last_hero":"The Decline of Hyrule and the Last Hero","zelda_timeline.the_imprisoning_war":"The Imprisoning War","zelda_timeline.era_of_dark_and_light":"Era of Light and Dark","zelda_timeline.a_link_to_the_past":"A Link to the Past","zelda_timeline.resurrection_of_ganon":"The Resurrection of Ganon","zelda_timeline.resurrection_of_ganon_is_prevented":"The Resurrection of Ganon is prevented","zelda_timeline.links_awakening":"Link's Awakening","zelda_timeline.oracle_of_ages_and_seasons":"Oracle of Ages and Oracle of Seasons","zelda_timeline.a_link_between_worlds":"A Link Between Worlds","zelda_timeline.tri_force_heroes":"Tri Force Heroes","zelda_timeline.the_gold_era":"The Gold Era","zelda_timeline.monarchs_of_hyrule_use_triforce":"The Monarchs of Hyrule Use the Triforce","zelda_timeline.era_of_decline":"The Era of Decline","zelda_timeline.tragedy_of_princess_zelda_1":"The Tragedy of Princess Zelda I","zelda_timeline.the_legend_of_zelda":"The Legend of Zelda","zelda_timeline.adventure_of_link":"Adventure of Link","zelda_timeline.hero_defeated":"Hero Defeated","zelda_timeline.child_era":"Child Era","zelda_timeline.adult_era":"Adult Era","zelda_timeline.sacred_realm_protected":"The Sacred Realm Remains Protected","zelda_timeline.twilight_realm_and_legacy_of_hero":"The Twilight Realm and the Legacy of the Hero","zelda_timeline.majoras_mask":"Majora's Mask","zelda_timeline.prince_of_thieves_is_executed":"The Demon Thief, Ganondorf, Is Executed","zelda_timeline.twilight_era":"The Twilight Era","zelda_timeline.twilight_princess":"Twilight Princess","zelda_timeline.shadow_invasion":"The Shadow Invasion","zelda_timeline.shadow_era":"The Shadow Era","zelda_timeline.four_swords_adventures":"Four Swords Adventures","zelda_timeline.reincarnation_of_ganondorf":"The Reincarnation of Ganondorf","zelda_timeline.ganondorf_is_sealed":"Ganondorf is sealed","zelda_timeline.hero_of_wind_and_new_world":"The Hero of Wind and a New World","zelda_timeline.era_without_a_hero":"The Era without a Hero","zelda_timeline.ganondorf_is_resurrected":"Ganondorf is Resurrected","zelda_timeline.hyrule_is_sealed_and_flooded":"Hyrule is sealed and then flooded","zelda_timeline.era_of_the_great_sea":"The Era of the Great Sea","zelda_timeline.the_wind_waker":"The Wind Waker","zelda_timeline.era_of_the_great_voyage":"The Era of the Great Voyage","zelda_timeline.phantom_hourglass":"Phantom Hourglass","zelda_timeline.era_of_hyrule_rebirth":"The Era of Hyrule's Rebirth","zelda_timeline.new_continent_discovered":"New Continent Discovered","zelda_timeline.new_hyrule_is_founded":"A New Hyrule Kingdom is founded","zelda_timeline.spirit_tracks":"Spirit Tracks","zelda_timeline.evil_king_malladus_is_resurrected":"The Evil King Malladus is Resurrected","zelda_timeline.age_of_calamity":"Age of Calamity","zelda_timeline.breath_of_the_wild":"Breath of the Wild","zelda_timeline.era_of_the_wilds":"Era of the Wilds","zelda_timeline.calamity_ganon_is_sealed":"Calamity Ganon is Sealed. Technology is banned, leading some Sheikah to form the Yiga Clan","zelda_timeline.divine_beasts_are_cleansed":"The Divine Beasts are cleansed and Calamity Ganon is Sealed","zelda_timeline.tears_of_the_kingdom":"Tears of the Kingdom","zelda_timeline.hyrule_kingdom_is_teared_apart":"Ganondorf is Resurrected (I think?)","blog_categories.games":"Games","blog_categories.general":"General","blog_categories.tips":"Tips","blog_categories.events":"Events","blog_categories.coding":"Coding","blog_categories.funny":"Funny","blog_categories.toys":"Toys","blog_categories.gadgets":"Gadgets","forty_two_page.title":"Forty Two","forty_two_page.description":"So long and thanks for all the fish!","projects_page.title":"Projects","projects_page.description":"Here is a list of some of my favorites personal projects.","projects_page.gatsbyMaterialUiBlogDescription":"A simple Gatsby Blog Starter with Material UI.","projects_page.contractBuilderDescription":"Contract Builder is a free open-source project that allows anyone to easily maintain and build any kind of contract (legal documents, lawsuit, rent, agreements, construction and so on) using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom contract, now she is able to do it in less than 5 minutes. Hooray!","projects_page.resumeBuilderDescription":"Resume Builder is a free open-source project that allows anyone to easily maintain and build any kind of resume using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom resumes.","projects_page.magentoChatbotDescription":"With this module you can fully integrate your Magento store with the most popular chat apps in the market. This means that by simply installing this module and a few clicks you can have a new way to show and sell your products to your clients. Very easy to use! Try now, it's FREE.","projects_page.jamStackSortenerDescription":"This is a basic URL shortener POC build with Gatsby.","projects_page.gotinhaDescription":"It was always my dream to make my own game, and after trying Unity a couple years ago, I decided to try it again with something I'm more familiar with: Javascript. As a frontend developer, Javascript is already the language that I write most of my code at work and also in my personal projects, and after a quick search I was able to find the amazing PhaserJS Framework for building 2D web games.","e3_2012_photos.title":"E3 2012","e3_2012_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for Nintendo Blast.","e3_2013_photos.title":"E3 2013","e3_2013_photos.description":"On June 2013 I attended E3 as a media press for a full coverage for Game Blast.","e3_2014_photos.title":"E3 2014","e3_2014_photos.description":"On June 2014 I attended E3 as a media press for a full coverage for Game Blast.","e3_2015_photos.title":"E3 2015","e3_2015_photos.description":"On June 2015 I attended E3 as a media press for a full coverage for Game Blast and Game Over TV.","e3_2017_photos.title":"E3 2017","e3_2017_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for PlayReplay and Game Over TV.","e3_2019_photos.title":"E3 2019","e3_2019_photos.description":"On June 2019 I attended E3 as a media press for a full coverage for PlayReplay.","gamescom_2019_photos.title":"Gamescom 2019","gamescom_2019_photos.description":"On August 2019 I attended Gamescom as a media press for a full coverage for PlayReplay.","san_francisco_2019_photos.title":"San Francisco 2019","san_francisco_2019_photos.description":"On September 2019 I've traveled to San Francisco for the Metallica S&M2 concert.","notfound.title":"404: Not found","notfound.header":"404 NOT FOUND","notfound.description":"Sorry, this page doesn't seem to exist. Perhaps the archives are incomplete?","seo_keywords.developer":"developer","seo_keywords.development":"development","seo_keywords.javascript":"javascript","seo_keywords.es6":"es6","seo_keywords.e3":"e3","seo_keywords.sgf":"sgf","seo_keywords.gamescom":"gamescom","seo_keywords.countdown":"countdown","seo_keywords.archive":"archive","seo_keywords.about_me":"about me","seo_keywords.personal_blog":"personal blog","seo_keywords.personal_projects":"personal projects","seo_keywords.travels":"travels","seo_keywords.tips":"tips","seo_keywords.lifehacks":"lifehacks","seo_keywords.reviews":"reviews","seo_keywords.games":"games","seo_keywords.timeline":"timeline","seo_keywords.photos":"photos","cookie_law.we_use_cookies":"We use cookies to ensure you get the best experience on our website. By using our website you agree to our ","cookie_law.title":"Cookie policy","cookie_law.what_are_cookies":"What are cookies?","cookie_law.what_are_cookies_text":"As is common practice with almost all professional websites this site uses cookies, which are tiny files that are downloaded to your computer, to improve your experience. This page describes what information they gather, how we use it and why we sometimes need to store these cookies. We will also share how you can prevent these cookies from being stored however this may downgrade or 'break' certain elements of the sites functionality. For more general information on cookies, please read ","cookie_law.what_are_cookies_more_info_url":"https://en.wikipedia.org/wiki/HTTP_cookie","cookie_law.how_we_use_cookies":"How we use cookies","cookie_law.how_we_use_cookies_text":"We use cookies for a variety of reasons detailed below. Unfortunately in most cases there are no industry standard options for disabling cookies without completely disabling the functionality and features they add to this site. It is recommended that you leave on all cookies if you are not sure whether you need them or not in case they are used to provide a service that you use.","cookie_law.disabling_cookies":"Disabling cookies","cookie_law.disabling_cookies_text":"You can prevent the setting of cookies by adjusting the settings on your browser (see your browser Help for how to do this). Be aware that disabling cookies will affect the functionality of this and many other websites that you visit. Disabling cookies will usually result in also disabling certain functionality and features of the this site. Therefore it is recommended that you do not disable cookies.","cookie_law.the_cookies_we_set":"The cookies we set","cookie_law.site_preferences_cookie":"Site preferences cookies","cookie_law.site_preferences_cookie_text":"In order to provide you with a great experience on this site we provide the functionality to set your preferences for how this site runs when you use it. In order to remember your preferences we need to set cookies so that this information can be called whenever you interact with a page is affected by your preferences.","cookie_law.third_party_cookies":"Third party cookies","cookie_law.third_party_cookies_text":"In some special cases we also use cookies provided by trusted third parties. The following section details which third party cookies you might encounter through this site.","cookie_law.third_party_cookies_item_1":"This site uses Google Analytics which is one of the most widespread and trusted analytics solution on the web for helping us to understand how you use the site and ways that we can improve your experience. These cookies may track things such as how long you spend on the site and the pages that you visit so we can continue to produce engaging content. For more information on Google Analytics cookies, see the official Google Analytics page.","cookie_law.third_party_cookies_item_2":"From time to time we test new features and make subtle changes to the way that the site is delivered. When we are still testing new features these cookies may be used to ensure that you receive a consistent experience whilst on the site whilst ensuring we understand which optimisations our users appreciate the most.","cookie_law.more_information":"More information","cookie_law.more_information_text":"Hopefully that has clarified things for you and as was previously mentioned if there is something that you aren't sure whether you need or not it's usually safer to leave cookies enabled in case it does interact with one of the features you use on our site. However if you are still looking for more information then you can contact us through our "},"routed":true,"originalPath":"/blog/games/loading-external-tileset-file-on-phaser-js-using-webpack-skate-platformer-game-devlog-7/","redirect":true,"redirectDefaultLanguageToRoot":false,"defaultLanguage":"en","fallbackLanguage":"","ignoredPaths":[]},"blogLocale":"en"}},
    "staticQueryHashes": ["1156153307","1355482417","1591365477","1628619374","2127381735","2288279559","26159077","3566410298","3649515864","3847325417","3982724423","928834867"]}