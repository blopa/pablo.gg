{
    "componentChunkName": "component---src-templates-blog-post-jsx",
    "path": "/pt-br/blog/coding/eu-criei-um-jogo-para-acessar-o-conteudo-do-meu-blog-com-phaser-e-react/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://pablo.gg"}},"markdownRemark":{"id":"8c06d1dd-3cdf-5803-8c82-7393b82d2a47","excerpt":"Sim, isso mesmo, agora existe uma versão em jogo deste blog. Cansado de clicar em páginas chatas e ler coisas? Que tal mergulhar em uma jornada semelhante a um…","html":"<p>Sim, isso mesmo, agora existe uma versão em jogo deste blog. Cansado de clicar em páginas chatas e ler coisas? Que tal mergulhar em uma jornada semelhante a um RPG top-down, encontrar os posts desse blog e lê-los dentro jogo?</p>\n<p><img src=\"/d50653e4a6a6053367c816a50f543af8/pablo-gg-the-game.gif\" alt=\"pablo.gg - O jogo\"></p>\n<h4 id=\"jogue-aqui\" style=\"position:relative;\"><a href=\"#jogue-aqui\" aria-label=\"jogue aqui permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"/pt-br/game\">Jogue aqui!</a></h4>\n<p>Você também pode acessar o código-fonte no <a href=\"https://github.com/blopa/top-down-react-phaser-game\" target=\"_blank\" rel=\"noreferrer\">meu repositório do GitHub para este projeto</a>.</p>\n<h2 id=\"ok-mas-porque\" style=\"position:relative;\"><a href=\"#ok-mas-porque\" aria-label=\"ok mas porque permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ok, mas porquê?</h2>\n<p><img src=\"/f1547924a1c5e48fc3d7132349267d59/but-why.gif\" alt=\"Mas porquê?\"></p>\n<p>A idéia nasceu quando eu adicionei o Konami Code no site, que faz aparecer o código-fonte da Matrix, que apesar de ser maneirinho, eu fiquei pensando que seria mais legal fazer o Konami Code abrir um jogo ou algo do tipo, e como eu já estou com 2 anos de experiência em Phaser, resolvi fazer um jogo bobo só como um MVP.</p>\n<p>Na mesma época, descobri sobre o <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">plugin grid-engine para o Phaser</a> que torna muito mais fácil criar um jogo estilo top-down, e por causa disso eu decidi fazer um jogo com ele, e também porque a minha primeira experiência com “programação” foi em 2002, quando eu estava fazendo jogos com o RPG Maker.</p>\n<p>Daí em diante o projeto começou a ficar um pouco mais ambicioso e eu pensei “e se eu mostrasse os posts do blog dentro do jogo?”, todos os dados do blog já estão disponíveis no React via <code class=\"language-text\">GraphQL</code>, então não deve ser tão difícil.</p>\n<h2 id=\"usando-react-como-ui-para-o-phaser\" style=\"position:relative;\"><a href=\"#usando-react-como-ui-para-o-phaser\" aria-label=\"usando react como ui para o phaser permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usando React como UI para o Phaser</h2>\n<p>O Phaser funciona renderizando píxeis dentro de um elemento <code class=\"language-text\">canvas</code> no DOM, e isso é ótimo, mas um dos grandes recursos do desenvolvimento da web é o poder do DOM e CSS para criar excelentes elementos de UI, e você não pode fazer isso com Phaser sozinho.</p>\n<p>A maneira mais simples de usar o Phaser com React é com um componente funcional como o mostrado abaixo.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> Phaser <span class=\"token keyword\">from</span> <span class=\"token string\">'phaser'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GameComponent<span class=\"token punctuation\">;</span></code></pre></div>\n<p>E isso geralmente funciona bem, mas para fazer o Phaser ser capaz de se comunicar com o React, por exemplo, para mostrar um item de menu ou uma caixa de diálogo, vou despachar eventos do JavaScript entre o Phaser e o React usando o <code class=\"language-text\">new CustomEvent('event-name')</code>.</p>\n<p>A melhor maneira de fazer isso seria com algum tipo de ferramenta de gerenciamento de estado, como o <a href=\"https://facebook.github.io/flux/\" target=\"_blank\" rel=\"noreferrer\">Flux</a>, mas como este é apenas um projeto muito pequeno, despachar eventos do JavaScript funcionará por agora. Veja no exemplo abaixo como fazer isso.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// React component</span>\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>DialogBox\r\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\r\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Phaser scene</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxFinishedEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token comment\">// Do whatever is needed when the dialog is over</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"/18452438d2251249518c712d8873e89a/react-dialog-box.gif\" alt=\"Caixa de dialogo\"></p>\n<p>Se você quiser mais detalhes sobre como criar uma caixa de diálogo React para o seu jogo em Phaser, <a href=\"/pt-br/blog/coding/criando-uma-caixa-de-dialogo-com-react-para-o-meu-jogo-em-phaser\">leia o meu post sobre o assunto</a>.</p>\n<h2 id=\"integrando-phaser-com-gatsby\" style=\"position:relative;\"><a href=\"#integrando-phaser-com-gatsby\" aria-label=\"integrando phaser com gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integrando Phaser com Gatsby</h2>\n<p>Gatsby é um gerador de sites estáticos que usa React para pré-renderizar o HTML via node, mas o Phaser é um pacote apenas para cliente, e faz sentido, afinal por que você precisaria do Phaser no backend? Então, sempre que Gatsby estava pré-renderizando a minha página do jogo eu recebia erros de SSR porque Phaser estava tentando acessar algumas APIs de JavaScript que só funcionam no client-side.</p>\n<p>Para resolver isso, eu usei o React hook <code class=\"language-text\">useEffect</code> para importar dinamicamente todos os meus módulos relacionados ao Phaser, já que o <code class=\"language-text\">useEffect</code> só é executado no client-side.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// to use async/await inside a useEffect we need to create an async function and call it</span>\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// Need to initialize Phaser here otherwise Gatsby will try to SSR it</span>\r\n            <span class=\"token keyword\">const</span> Phaser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phaser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GameScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../game/scenes/GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GridEngine <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'grid-engine'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>GameScene<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"criando-o-mapa\" style=\"position:relative;\"><a href=\"#criando-o-mapa\" aria-label=\"criando o mapa permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Criando o mapa</h2>\n<p>Para criar o mapa eu vou novamente usar o Tiled, um FOSS onde você pode criar mapas e usá-los em praticamente qualquer game engine.</p>\n<p>O <code class=\"language-text\">tileset</code> que estou usando para o meu mapa é o <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">Zelda-like tileset</a> criado por <a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, que inclui tilesets para interiores, tipo casas, e exteriores, tipo cidades.</p>\n<p>Primeiro vou criar o <code class=\"language-text\">tileset</code> no Tiled e definir uma propriedade chamada <code class=\"language-text\">ge_collide</code> com o valor <code class=\"language-text\">true</code> em todos os tiles que eu quero que tenha uma colisão com o herói.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.234375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADCklEQVQoz1XQ7U8SAQDH8ftHetHWqq21arW2SmsrKzezLCxrWhoCqSkgGA9nkgy544DjZIrDEgh5LAS8B0Hz6ugQtOfZs5sZhT0YMsAebLW2pr3q8+L77vfmB7AsS9O3o9HR6KpYLJZMJlmWTSRXTE5OMgxD0/Td/yUSibFbt4B0On3nDu33uwhyCB8OkSQZjYyG8NCA83o31jPocN7w38RxPBwOD/0TDA4FAm6n0+t2A4VCYZymQ6EwQRCRSISiRqhINOjznDpYunHttvVrNh85XMbj1jQKuCiKIgiCoigMSjav3VJ7uhbIZDJzb2ZTc7Ppd6lP8+mP8+8zXz6/fPKAf6ysZEdRyZ6DVZxT56urhMJmE2ZCUeNKOy9WFO0R8XhANrvI3ntM0PFRdmos8Whs4iE9NR2K0OKz1aLyQ9JWWbNYCfLq5Hwul1NZfqDscHFp2zmOsfkkpmoFsouZ2OPXI/dfUVPPhyaeBuPTweSLwHhCq2xrqqsXX2oX8Jvqq2sbKjkVe0v2bS8u2rpbeqG+S9YCd6qAhYWFXHZx+fu3H9++/lztn9+/5mZmirmq/YIrO/jaDefhdTyD4IJQ23EZ0em61BqDVdNulMpErSvjTCaztPQ1XyjkC4VcPv99eXnm5bPTAhGnAaxo1bVp0CaFVgaqIR2CIIgeQQxXO9Wo+IpcvnrYXOrt29S7ValUav7Dp+mHk/2SExaFABI29Cn4Rkio1nbo1aBcIoVhpMvSqdW3X+vrAbLZbDw+QRAUwzCxWIxhmLvxOBkM6OoqhEdLa45WmhtPmNqqUcwIq5SQCoRUyl6LxYBiFksfkMvlSIKwWq02u91ms9kGBuwOh72/v5FzfNemnQqxVAcqISVo1ENKSUOHvAWUCCxmoxk19Pf1APl83uVyqdVqGIahf7QQ1otJFKKWs2c6ulQ6DIW1Gr1eY+4xdWNwby+iMZtk+m6TdQAgSYqiqOHhYZ/P5/F4/H4/gRP4CO4Le71er93ndnk9gw6Hx+0hcCIUCERHIuQ467xBDt4M/wXnMNqSjYFawgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Propriedade de colisão no Tiled\"\n        title=\"Propriedade de colisão no Tiled\"\n        src=\"/static/efa06188b879de0f05ddbcaf752eebf0/42a19/collision-property-on-tiled.png\"\n        srcset=\"/static/efa06188b879de0f05ddbcaf752eebf0/e3135/collision-property-on-tiled.png 256w,\n/static/efa06188b879de0f05ddbcaf752eebf0/06341/collision-property-on-tiled.png 512w,\n/static/efa06188b879de0f05ddbcaf752eebf0/42a19/collision-property-on-tiled.png 1024w,\n/static/efa06188b879de0f05ddbcaf752eebf0/f7f62/collision-property-on-tiled.png 1096w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Propriedade de colisão no Tiled</figcaption>\n  </figure></p>\n<p>É importante criar seu mapa com várias layers, para que algumas partes possam estar abaixo e algumas partes acima do herói.</p>\n<p><img src=\"/641730c3226f9772bd3bf993dad3d5a2/tiled-map-with-layers.gif\" alt=\"Mapa com layers\"></p>\n<p>Depois que o mapa estiver pronto, <a href=\"/pt-br/blog/games/atualize-automaticamente-o-tileset-embutido-do-seu-mapa-no-tiled-com-um-script-nodejs/\">vou embutir o tileset ao mapa</a>, e então posso simplesmente importar o mapa e o arquivo do <code class=\"language-text\">tileset</code> no meu jogo e carregá-los no Phaser com <code class=\"language-text\">this.load.tilemapTiledJSON()</code> e <code class=\"language-text\">this.load.image()</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> mainMapaJson <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/main-map.json'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> tilesetImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/tileset.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">tilemapTiledJSON</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main-map'</span><span class=\"token punctuation\">,</span> mainMapaJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> tilesetImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"usando-o-plugin-grid-engine-para-o-phaser\" style=\"position:relative;\"><a href=\"#usando-o-plugin-grid-engine-para-o-phaser\" aria-label=\"usando o plugin grid engine para o phaser permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usando o plugin grid-engine para o Phaser</h2>\n<p>Como eu mencionei no começo do post, criar um jogo top-down estilo RPG Maker usando o plugin grid-engine é mole, basta configurar o seu jogo para usar o arcade physics e adicionar o grid-engine como plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">physics</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'arcade'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">plugin</span><span class=\"token operator\">:</span> GridEngine<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">mapping</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Agora eu posso acessar o plugin através da propriedade <code class=\"language-text\">this.gridEngine</code> dentro de qualquer game scene do jogo. O próximo passo é criar um sprite e movê-lo com o plugin grid-engine.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'main-map'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> gridEngineConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">characters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> heroSprite<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> cursors <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">createCursorKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>up<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>down<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Este código foi praticamente copiado e colado da <a href=\"https://annoraaq.github.io/grid-engine/examples/basic-movement.html\" target=\"_blank\" rel=\"noreferrer\">documentação oficial do plugin</a>.</p>\n<p>Como mencionei antes, para fazer as colisões funcionarem automaticamente com o plugin grid-engine e um mapa criado no Tiled, basta adicionar a propriedade <code class=\"language-text\">ge_collide</code> com o valor <code class=\"language-text\">true</code> nos tiles com os quais o herói deve colidir.</p>\n<p>Observe que isso fará com que o herói se mova e colida com objetos, mas não há nenhuma animação no sprite. Para criar animações para o sprite, usarei a função <code class=\"language-text\">this.anims.create()</code> e farei as animações rodarem toda vez que o grid-engine me informar que o herói se moveu, com os eventos <code class=\"language-text\">movementStarted</code>, <code class=\"language-text\">movementStopped</code> e <code class=\"language-text\">directionChanged</code> despachados pelo plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStarted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span>direction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStopped</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">directionChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">direction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> direction<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frames</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_01</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_02</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frameRate</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">repeat</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">yoyo</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Eu entro em mais detalhes de como as mecânicas do jogo foram feitas <a href=\"/pt-br/blog/games/como-criar-um-jogo-estilo-rpg-maker-com-phaser-e-react/\">nesse post</a>.</p>\n<h2 id=\"pegando-os-dados-dos-posts-com-gatsby\" style=\"position:relative;\"><a href=\"#pegando-os-dados-dos-posts-com-gatsby\" aria-label=\"pegando os dados dos posts com gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pegando os dados dos posts com Gatsby</h2>\n<p>O Gatsby disponibiliza todos os seus dados estáticos através do <code class=\"language-text\">GraphQL</code>, no meu blog eu uso o <a href=\"https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/\" target=\"_blank\" rel=\"noreferrer\">plugin de markdown</a> para os meus posts, então eu acesso meus dados da seguinte forma:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GamePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> allPosts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>allPosts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n                    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n                        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n                        <span class=\"token operator\">&lt;</span>section\r\n                            key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span>\r\n                            dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GamePage<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query GamePage() {\r\n        allMarkdownRemark(\r\n            sort: { fields: [frontmatter___date], order: DESC }\r\n        ) {\r\n            edges {\r\n                node {\r\n                    html\r\n                    frontmatter {\r\n                        date\r\n                        title\r\n                        category\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Após adicionar a query do <code class=\"language-text\">GraphQL</code>, todos os dados dos meus posts estão disponíveis por meio do props <code class=\"language-text\">data.allMarkdownRemark.edges</code>.</p>\n<p>Agora, no jogo, posso enviar um evento JavaScript pedindo ao React para mostrar todos os meus posts em uma lista ou algo assim, e dai quando um post for escolhido, mostrá-lo em um modal do Material UI.</p>\n<h2 id=\"colocando-tudo-junto\" style=\"position:relative;\"><a href=\"#colocando-tudo-junto\" aria-label=\"colocando tudo junto permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Colocando tudo junto</h2>\n<p>Abaixo é como a versão final do meu component <code class=\"language-text\">GamePage</code> ficou:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GamePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> allPosts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showBlogPost<span class=\"token punctuation\">,</span> setShowBlogPost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showBlogPostList<span class=\"token punctuation\">,</span> setShowBlogPostList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>post<span class=\"token punctuation\">,</span> setPost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showPostListEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setShowBlogPostList</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> showPostListEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showPostEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setPost</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowBlogPost</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> showPostEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show-post-list'</span><span class=\"token punctuation\">,</span> showPostListEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show-post'</span><span class=\"token punctuation\">,</span> showPostEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> Phaser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phaser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GameScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../game/scenes/GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GridEngine <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'grid-engine'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>GameScene<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>DialogBox\r\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\r\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">{</span>showBlogPost <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>BlogPost\r\n                    post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">{</span>showBlogPostList <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>BlogPostList\r\n                    posts<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>allPosts<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GamePage<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query GamePage() {\r\n        allMarkdownRemark(\r\n            sort: { fields: [frontmatter___date], order: DESC }\r\n        ) {\r\n            edges {\r\n                node {\r\n                    html\r\n                    frontmatter {\r\n                        date\r\n                        title\r\n                        category\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Se você quiser saber mais detalhes sobre o que acontece dentro da <code class=\"language-text\">GameScene</code>, leia <a href=\"/pt-br/blog/games/como-criar-um-jogo-estilo-rpg-maker-com-phaser-e-react/\">esse post sobre o assunto</a>.</p>\n<h2 id=\"conclusao\" style=\"position:relative;\"><a href=\"#conclusao\" aria-label=\"conclusao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusão</h2>\n<p>Eu me diverti muito criando esse jogo para o meu blog, e, além disso, aprendi muitas coisas novas no Phaser e React. Quem sabe eu não uso parte desse código para fazer um jogo de verdade 👀.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACG0lEQVQoz0WQW08TQRhA+2NEFEQq3Z2Z7sw3t6WivhAeDMZnWkNISUx80aihpZUSb4HQYCQGYVsaelmkpeW23d1S5AH/lAESTc7ryUlOZDRzPP66Qt67tzIX+NuaDGzLl6yj+bEmJ5wccrIvcV1YVYkbitQFbgFuctNltCsjqtCeW6lNrwZDS/3RpV6imaS/Oa/qqZe21RZj+zRR0vauNnowUeeoRdAhw01ADUZ9GVG1t8bX7tBSf3DRv7voJ/bmIRCT72z1XWGfm3sMahIcaZSotQHmJjUchlxA7rUszhHZWh7OXo4U/Hv5vigXIABdkKqh1b4kx9x0waxwVOJmmSOHxw/E/zI7i7PKwlD2YjDnDWR60eWO7EyTP1ScjifW5QOXobIwtiC2DWaJx3cFdjmqA2rAlUxDKbqP8Zo7nDsfKfj3c5d8e1n7ip/op5uP7BLYO1zv8IcVIas87km0A8QVqHU9LP7LhjMQtTe3F88HcuFALryT7459aajW84mqbZWE5YDlAHM4ccC46oPpgLHJqKcitKnpGdiHk/RjOZY5imUPYtl2bOEUPv2cKKdoW8c76garo+g/jhTzVYQFivT1k7JKp58lU+lkajb5Ym4mNZucmZ99NSU9Dj0BoeChgFDSUNNQsVDRUNFARainwRf2wRT5XInmg2j+NJr3onnvwYcTa2UDF4u4uI6La3j1B6+meUCpp1lX3fAXiHP5L0RVS7QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pablo gg the game 1\"\n        title=\"pablo gg the game 1\"\n        src=\"/static/6921c5602e9e2c1171362b406e2c817c/42a19/pablo-gg-the-game-1.png\"\n        srcset=\"/static/6921c5602e9e2c1171362b406e2c817c/e3135/pablo-gg-the-game-1.png 256w,\n/static/6921c5602e9e2c1171362b406e2c817c/06341/pablo-gg-the-game-1.png 512w,\n/static/6921c5602e9e2c1171362b406e2c817c/42a19/pablo-gg-the-game-1.png 1024w,\n/static/6921c5602e9e2c1171362b406e2c817c/e8464/pablo-gg-the-game-1.png 1536w,\n/static/6921c5602e9e2c1171362b406e2c817c/ac7a9/pablo-gg-the-game-1.png 1920w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"agradecimentos\" style=\"position:relative;\"><a href=\"#agradecimentos\" aria-label=\"agradecimentos permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Agradecimentos</h2>\n<p>Este jogo não seria possível sem a ajuda de algumas pessoas incríveis e os seus trabalhos, então aqui está a minha lista de agradecimentos.</p>\n<ul>\n<li><a href=\"https://github.com/photonstorm\" target=\"_blank\" rel=\"noreferrer\">photonstorm</a>, por ter criado o <a href=\"https://github.com/photonstorm/phaser\" target=\"_blank\" rel=\"noreferrer\">Phaser.io</a>.</li>\n<li><a href=\"https://github.com/Annoraaq\" target=\"_blank\" rel=\"noreferrer\">Annoraaq</a>, por ter criado o plugin <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">grid-engine</a>.</li>\n<li><a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, por ter criado os <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">sprites dos personagens e os tilesets</a>.</li>\n<li><a href=\"https://elthen.itch.io/\" target=\"_blank\" rel=\"noreferrer\">PixElthen</a>, por ter criado os <a href=\"https://elthen.itch.io/2d-pixel-art-small-slime-sprites\" target=\"_blank\" rel=\"noreferrer\">sprites do slime</a>.</li>\n<li><a href=\"https://itch.io/profile/pixelartm\" target=\"_blank\" rel=\"noreferrer\">pixelartm</a>, por ter criado o <a href=\"https://opengameart.org/content/pirate-1\" target=\"_blank\" rel=\"noreferrer\">sprite do chapéu do pirata</a>.</li>\n<li><a href=\"https://opengameart.org/users/jkjkke\" target=\"_blank\" rel=\"noreferrer\">jkjkke</a>, por ter criado <a href=\"https://opengameart.org/content/background-6\" target=\"_blank\" rel=\"noreferrer\">a imagem de background da tela de Game Over</a>.</li>\n<li><a href=\"https://opengameart.org/users/knoblepersona\" target=\"_blank\" rel=\"noreferrer\">KnoblePersona</a>, por ter criado <a href=\"https://opengameart.org/content/ocean-background\" target=\"_blank\" rel=\"noreferrer\">a imagem de background do menu inicial</a>.</li>\n<li><a href=\"https://opengameart.org/users/min\" target=\"_blank\" rel=\"noreferrer\">Min</a>, por ter criado <a href=\"https://opengameart.org/content/open-book-0\" target=\"_blank\" rel=\"noreferrer\">o sprite do livro aberto</a>.</li>\n</ul>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTEyVDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-12-eu-criei-um-jogo-para-acessar-o-conteudo-do-meu-blog-com-phaser-e-react.pt-br/","path":"/blog/coding/eu-criei-um-jogo-para-acessar-o-conteudo-do-meu-blog-com-phaser-e-react/","locale":"pt-br"},"readingTime":{"minutes":9.405},"frontmatter":{"path":"eu-criei-um-jogo-para-acessar-o-conteudo-do-meu-blog-com-phaser-e-react","allowComments":true,"title":"Eu criei um jogo para o acessar o conteúdo do meu blog com Phaser e React","date":"2021-10-12T00:00:00.000Z","categories":["coding"],"tags":["programação","jogos","javascript","phaser","phaser 3","react","blog","rpg","rpg maker","top-down"],"hideExcerpt":null,"subtitle":"Aprenda a criar um jogo de RPG de cima para baixo usando Phaser e React, incluindo integração com Gatsby e criação do mapa do jogo com Tiled"}},"categoryImage":{"childImageSharp":{"original":{"width":1920,"height":1080,"src":"/static/categories_coding-aa17d098a6a0d8e0a764a345865f5ffb.jpg"}}}},"pageContext":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTEyVDAwOjAwOjAwLjAwMFo=","relatedPosts":[{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTA4VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-08-como-criar-um-jogo-estilo-rpg-maker-com-phaser-e-react.pt-br/","path":"/blog/coding/como-criar-um-jogo-estilo-rpg-maker-com-phaser-e-react/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","react","dialog box","rpg","rpg maker"],"categories":["coding"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-10-08T00:00:00.000Z","id":null,"path":"como-criar-um-jogo-estilo-rpg-maker-com-phaser-e-react","show":true,"title":"Como criar um jogo estilo RPG Maker com Phaser e React","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTA2VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-06-criando-uma-caixa-de-dialogo-com-react-para-o-meu-jogo-em-phaser.pt-br/","path":"/blog/coding/criando-uma-caixa-de-dialogo-com-react-para-o-meu-jogo-em-phaser/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","react","dialog box","rpg","rpg maker","material ui"],"categories":["coding"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-10-06T00:00:00.000Z","id":null,"path":"criando-uma-caixa-de-dialogo-com-react-para-o-meu-jogo-em-phaser","show":true,"title":"Criando uma caixa de diálogo com React para o meu jogo em Phaser","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMTEtMThUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-11-18-como-carregar-arquivos-de-forma-assincrona-com-o-phaser-3.pt-br/","path":"/blog/games/como-carregar-arquivos-de-forma-assincrona-com-o-phaser-3/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","assincrono","rexrainbow","phaser loader"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-11-18T00:00:00.000Z","id":null,"path":"como-carregar-arquivos-de-forma-assincrona-com-o-phaser-3","show":true,"title":"Como carregar arquivos de forma assíncrona com o Phaser 3","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMTAtMDJUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-10-02-atualize-automaticamente-o-tileset-embutido-do-seu-mapa-no-tiled-com-um-script-nodejs.pt-br/","path":"/blog/games/atualize-automaticamente-o-tileset-embutido-do-seu-mapa-no-tiled-com-um-script-nodejs/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","nodejs","node","tiled","mapa","tilemap","tileset"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-10-02T00:00:00.000Z","id":null,"path":"atualize-automaticamente-o-tileset-embutido-do-seu-mapa-no-tiled-com-um-script-nodejs","show":true,"title":"Atualize automaticamente o Tileset embutido do seu mapa no Tiled com um script Node.js.","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDktMDlUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-09-09-criando-um-build-para-celular-para-o-meu-jogo-com-o-phaser-js-game-devlog-23.pt-br/","path":"/blog/games/criando-um-build-para-celular-para-o-meu-jogo-com-o-phaser-js-game-devlog-23/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","celular","android","build para celular"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-09-09T00:00:00.000Z","id":null,"path":"criando-um-build-para-celular-para-o-meu-jogo-com-o-phaser-js-game-devlog-23","show":true,"title":"Criando um build para celular para o meu jogo com o Phaser JS - Game Devlog #23","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDgtMjhUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-08-28-criando-plataformas-para-o-meu-jogo-em-phaser-js-game-devlog-22.pt-br/","path":"/blog/games/criando-plataformas-para-o-meu-jogo-em-phaser-js-game-devlog-22/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","plataformas"],"categories":["games"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-08-28T00:00:00.000Z","id":null,"path":"criando-plataformas-para-o-meu-jogo-em-phaser-js-game-devlog-22","show":true,"title":"Criando plataformas para o meu jogo em Phaser JS - Game Devlog #22","hideExcerpt":false,"subtitle":""}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDctMDZUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-07-06-escondendo-partes-do-mapa-com-o-phaser-js-game-devlog-21.pt-br/","path":"/blog/games/escondendo-partes-do-mapa-com-o-phaser-js-game-devlog-21/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","metroidvania"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-07-06T00:00:00.000Z","id":null,"path":"escondendo-partes-do-mapa-com-o-phaser-js-game-devlog-21","show":true,"title":"Escondendo partes do mapa com o Phaser JS - Game Devlog #21","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMjhUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-06-28-criando-estalactites-que-caem-com-phaser-js-game-devlog-20.pt-br/","path":"/blog/games/criando-estalactites-que-caem-com-phaser-js-game-devlog-20/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-06-28T00:00:00.000Z","id":null,"path":"criando-estalactites-que-caem-com-phaser-js-game-devlog-20","show":true,"title":"Criando estalactites que caem com Phaser JS - Game Devlog #20","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMjJUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-06-22-como-gerar-sprite-sheets-automaticamente-para-o-seu-jogo-feito-com-phaser-js.pt-br/","path":"/blog/games/como-gerar-sprite-sheets-automaticamente-para-o-seu-jogo-feito-com-phaser-js/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","nodejs","node","atlas","sprite sheet"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-06-22T00:00:00.000Z","id":null,"path":"como-gerar-sprite-sheets-automaticamente-para-o-seu-jogo-feito-com-phaser-js","show":true,"title":"Como gerar sprite sheets automaticamente para o seu jogo feito com Phaser JS","hideExcerpt":null,"subtitle":null}},{"fields":{"postHashId":"Z2FtZXN0cnVlbnVsbDIwMjEtMDYtMTlUMDA6MDA6MDAuMDAwWg==","slug":"/2021/2021-06-19-criando-uma-monkey-bar-para-se-pendurar-com-o-phaser-js-game-devlog-19.pt-br/","path":"/blog/games/criando-uma-monkey-bar-para-se-pendurar-com-o-phaser-js-game-devlog-19/","locale":"pt-br"},"frontmatter":{"tags":["programação","jogos","javascript","phaser","phaser 3","game devlog","gamedev","skate platformer","super ollie vs pebble corp","webpack","tiled","monkey bar"],"categories":["games"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-06-19T00:00:00.000Z","id":null,"path":"criando-uma-monkey-bar-para-se-pendurar-com-o-phaser-js-game-devlog-19","show":true,"title":"Criando uma \"Monkey Bar\" para se pendurar com o Phaser JS - Game Devlog #19","hideExcerpt":null,"subtitle":null}}],"alternativeHtml":"<p>Sim, isso mesmo, agora existe uma versão em jogo deste blog. Cansado de clicar em páginas chatas e ler coisas? Que tal mergulhar em uma jornada semelhante a um RPG top-down, encontrar os posts desse blog e lê-los dentro jogo?</p>\n<p><img src=\"/d50653e4a6a6053367c816a50f543af8/pablo-gg-the-game.gif\" alt=\"pablo.gg - O jogo\"></p>\n<h4 id=\"jogue-aqui\" style=\"position:relative;\"><a href=\"#jogue-aqui\" aria-label=\"jogue aqui permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"/pt-br/game\">Jogue aqui!</a></h4>\n<p>Você também pode acessar o código-fonte no <a href=\"https://github.com/blopa/top-down-react-phaser-game\" target=\"_blank\" rel=\"noreferrer\">meu repositório do GitHub para este projeto</a>.</p>\n<h2 id=\"ok-mas-porque\" style=\"position:relative;\"><a href=\"#ok-mas-porque\" aria-label=\"ok mas porque permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ok, mas porquê?</h2>\n<p><img src=\"/f1547924a1c5e48fc3d7132349267d59/but-why.gif\" alt=\"Mas porquê?\"></p>\n<p>A idéia nasceu quando eu adicionei o Konami Code no site, que faz aparecer o código-fonte da Matrix, que apesar de ser maneirinho, eu fiquei pensando que seria mais legal fazer o Konami Code abrir um jogo ou algo do tipo, e como eu já estou com 2 anos de experiência em Phaser, resolvi fazer um jogo bobo só como um MVP.</p>\n<p>Na mesma época, descobri sobre o <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">plugin grid-engine para o Phaser</a> que torna muito mais fácil criar um jogo estilo top-down, e por causa disso eu decidi fazer um jogo com ele, e também porque a minha primeira experiência com “programação” foi em 2002, quando eu estava fazendo jogos com o RPG Maker.</p>\n<p>Daí em diante o projeto começou a ficar um pouco mais ambicioso e eu pensei “e se eu mostrasse os posts do blog dentro do jogo?”, todos os dados do blog já estão disponíveis no React via <code class=\"language-text\">GraphQL</code>, então não deve ser tão difícil.</p>\n<h2 id=\"usando-react-como-ui-para-o-phaser\" style=\"position:relative;\"><a href=\"#usando-react-como-ui-para-o-phaser\" aria-label=\"usando react como ui para o phaser permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usando React como UI para o Phaser</h2>\n<p>O Phaser funciona renderizando píxeis dentro de um elemento <code class=\"language-text\">canvas</code> no DOM, e isso é ótimo, mas um dos grandes recursos do desenvolvimento da web é o poder do DOM e CSS para criar excelentes elementos de UI, e você não pode fazer isso com Phaser sozinho.</p>\n<p>A maneira mais simples de usar o Phaser com React é com um componente funcional como o mostrado abaixo.</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Phaser <span class=\"token keyword\">from</span> <span class=\"token string\">'phaser'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GameComponent<span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>E isso geralmente funciona bem, mas para fazer o Phaser ser capaz de se comunicar com o React, por exemplo, para mostrar um item de menu ou uma caixa de diálogo, vou despachar eventos do JavaScript entre o Phaser e o React usando o <code class=\"language-text\">new CustomEvent('event-name')</code>.</p>\n<p>A melhor maneira de fazer isso seria com algum tipo de ferramenta de gerenciamento de estado, como o <a href=\"https://facebook.github.io/flux/\" target=\"_blank\" rel=\"noreferrer\">Flux</a>, mas como este é apenas um projeto muito pequeno, despachar eventos do JavaScript funcionará por agora. Veja no exemplo abaixo como fazer isso.</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// React component</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>DialogBox\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Phaser scene</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxFinishedEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// Do whatever is needed when the dialog is over</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<p><img src=\"/18452438d2251249518c712d8873e89a/react-dialog-box.gif\" alt=\"Caixa de dialogo\"></p>\n<p>Se você quiser mais detalhes sobre como criar uma caixa de diálogo React para o seu jogo em Phaser, <a href=\"/pt-br/blog/coding/criando-uma-caixa-de-dialogo-com-react-para-o-meu-jogo-em-phaser\">leia o meu post sobre o assunto</a>.</p>\n<h2 id=\"integrando-phaser-com-gatsby\" style=\"position:relative;\"><a href=\"#integrando-phaser-com-gatsby\" aria-label=\"integrando phaser com gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integrando Phaser com Gatsby</h2>\n<p>Gatsby é um gerador de sites estáticos que usa React para pré-renderizar o HTML via node, mas o Phaser é um pacote apenas para cliente, e faz sentido, afinal por que você precisaria do Phaser no backend? Então, sempre que Gatsby estava pré-renderizando a minha página do jogo eu recebia erros de SSR porque Phaser estava tentando acessar algumas APIs de JavaScript que só funcionam no client-side.</p>\n<p>Para resolver isso, eu usei o React hook <code class=\"language-text\">useEffect</code> para importar dinamicamente todos os meus módulos relacionados ao Phaser, já que o <code class=\"language-text\">useEffect</code> só é executado no client-side.</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// to use async/await inside a useEffect we need to create an async function and call it</span>\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Need to initialize Phaser here otherwise Gatsby will try to SSR it</span>\n            <span class=\"token keyword\">const</span> Phaser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phaser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GameScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../game/scenes/GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GridEngine <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'grid-engine'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>GameScene<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<h2 id=\"criando-o-mapa\" style=\"position:relative;\"><a href=\"#criando-o-mapa\" aria-label=\"criando o mapa permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Criando o mapa</h2>\n<p>Para criar o mapa eu vou novamente usar o Tiled, um FOSS onde você pode criar mapas e usá-los em praticamente qualquer game engine.</p>\n<p>O <code class=\"language-text\">tileset</code> que estou usando para o meu mapa é o <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">Zelda-like tileset</a> criado por <a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, que inclui tilesets para interiores, tipo casas, e exteriores, tipo cidades.</p>\n<p>Primeiro vou criar o <code class=\"language-text\">tileset</code> no Tiled e definir uma propriedade chamada <code class=\"language-text\">ge_collide</code> com o valor <code class=\"language-text\">true</code> em todos os tiles que eu quero que tenha uma colisão com o herói.</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.234375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADCklEQVQoz1XQ7U8SAQDH8ftHetHWqq21arW2SmsrKzezLCxrWhoCqSkgGA9nkgy544DjZIrDEgh5LAS8B0Hz6ugQtOfZs5sZhT0YMsAebLW2pr3q8+L77vfmB7AsS9O3o9HR6KpYLJZMJlmWTSRXTE5OMgxD0/Td/yUSibFbt4B0On3nDu33uwhyCB8OkSQZjYyG8NCA83o31jPocN7w38RxPBwOD/0TDA4FAm6n0+t2A4VCYZymQ6EwQRCRSISiRqhINOjznDpYunHttvVrNh85XMbj1jQKuCiKIgiCoigMSjav3VJ7uhbIZDJzb2ZTc7Ppd6lP8+mP8+8zXz6/fPKAf6ysZEdRyZ6DVZxT56urhMJmE2ZCUeNKOy9WFO0R8XhANrvI3ntM0PFRdmos8Whs4iE9NR2K0OKz1aLyQ9JWWbNYCfLq5Hwul1NZfqDscHFp2zmOsfkkpmoFsouZ2OPXI/dfUVPPhyaeBuPTweSLwHhCq2xrqqsXX2oX8Jvqq2sbKjkVe0v2bS8u2rpbeqG+S9YCd6qAhYWFXHZx+fu3H9++/lztn9+/5mZmirmq/YIrO/jaDefhdTyD4IJQ23EZ0em61BqDVdNulMpErSvjTCaztPQ1XyjkC4VcPv99eXnm5bPTAhGnAaxo1bVp0CaFVgaqIR2CIIgeQQxXO9Wo+IpcvnrYXOrt29S7ValUav7Dp+mHk/2SExaFABI29Cn4Rkio1nbo1aBcIoVhpMvSqdW3X+vrAbLZbDw+QRAUwzCxWIxhmLvxOBkM6OoqhEdLa45WmhtPmNqqUcwIq5SQCoRUyl6LxYBiFksfkMvlSIKwWq02u91ms9kGBuwOh72/v5FzfNemnQqxVAcqISVo1ENKSUOHvAWUCCxmoxk19Pf1APl83uVyqdVqGIahf7QQ1otJFKKWs2c6ulQ6DIW1Gr1eY+4xdWNwby+iMZtk+m6TdQAgSYqiqOHhYZ/P5/F4/H4/gRP4CO4Le71er93ndnk9gw6Hx+0hcCIUCERHIuQ467xBDt4M/wXnMNqSjYFawgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Propriedade de colisão no Tiled\" title=\"Propriedade de colisão no Tiled\" src=\"/static/efa06188b879de0f05ddbcaf752eebf0/42a19/collision-property-on-tiled.png\" srcset=\"/static/efa06188b879de0f05ddbcaf752eebf0/e3135/collision-property-on-tiled.png 256w,\n/static/efa06188b879de0f05ddbcaf752eebf0/06341/collision-property-on-tiled.png 512w,\n/static/efa06188b879de0f05ddbcaf752eebf0/42a19/collision-property-on-tiled.png 1024w,\n/static/efa06188b879de0f05ddbcaf752eebf0/f7f62/collision-property-on-tiled.png 1096w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Propriedade de colisão no Tiled</figcaption>\n  </figure><p></p>\n<p>É importante criar seu mapa com várias layers, para que algumas partes possam estar abaixo e algumas partes acima do herói.</p>\n<p><img src=\"/641730c3226f9772bd3bf993dad3d5a2/tiled-map-with-layers.gif\" alt=\"Mapa com layers\"></p>\n<p>Depois que o mapa estiver pronto, <a href=\"/pt-br/blog/games/atualize-automaticamente-o-tileset-embutido-do-seu-mapa-no-tiled-com-um-script-nodejs/\">vou embutir o tileset ao mapa</a>, e então posso simplesmente importar o mapa e o arquivo do <code class=\"language-text\">tileset</code> no meu jogo e carregá-los no Phaser com <code class=\"language-text\">this.load.tilemapTiledJSON()</code> e <code class=\"language-text\">this.load.image()</code>.</p>\n<div class=\"copy-code-block\"><button tabindex=\"3\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> mainMapaJson <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/main-map.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> tilesetImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/tileset.png'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">tilemapTiledJSON</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main-map'</span><span class=\"token punctuation\">,</span> mainMapaJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> tilesetImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<h2 id=\"usando-o-plugin-grid-engine-para-o-phaser\" style=\"position:relative;\"><a href=\"#usando-o-plugin-grid-engine-para-o-phaser\" aria-label=\"usando o plugin grid engine para o phaser permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usando o plugin grid-engine para o Phaser</h2>\n<p>Como eu mencionei no começo do post, criar um jogo top-down estilo RPG Maker usando o plugin grid-engine é mole, basta configurar o seu jogo para usar o arcade physics e adicionar o grid-engine como plugin.</p>\n<div class=\"copy-code-block\"><button tabindex=\"4\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">physics</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'arcade'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n                <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">plugin</span><span class=\"token operator\">:</span> GridEngine<span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">mapping</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Agora eu posso acessar o plugin através da propriedade <code class=\"language-text\">this.gridEngine</code> dentro de qualquer game scene do jogo. O próximo passo é criar um sprite e movê-lo com o plugin grid-engine.</p>\n<div class=\"copy-code-block\"><button tabindex=\"5\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'main-map'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> gridEngineConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">characters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> heroSprite<span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> cursors <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">createCursorKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>up<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>down<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<p>Este código foi praticamente copiado e colado da <a href=\"https://annoraaq.github.io/grid-engine/examples/basic-movement.html\" target=\"_blank\" rel=\"noreferrer\">documentação oficial do plugin</a>.</p>\n<p>Como mencionei antes, para fazer as colisões funcionarem automaticamente com o plugin grid-engine e um mapa criado no Tiled, basta adicionar a propriedade <code class=\"language-text\">ge_collide</code> com o valor <code class=\"language-text\">true</code> nos tiles com os quais o herói deve colidir.</p>\n<p>Observe que isso fará com que o herói se mova e colida com objetos, mas não há nenhuma animação no sprite. Para criar animações para o sprite, usarei a função <code class=\"language-text\">this.anims.create()</code> e farei as animações rodarem toda vez que o grid-engine me informar que o herói se moveu, com os eventos <code class=\"language-text\">movementStarted</code>, <code class=\"language-text\">movementStopped</code> e <code class=\"language-text\">directionChanged</code> despachados pelo plugin.</p>\n<div class=\"copy-code-block\"><button tabindex=\"6\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStarted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span>direction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStopped</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">directionChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">direction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> direction<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">frames</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_01</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_02</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">frameRate</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">repeat</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">yoyo</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<p>Eu entro em mais detalhes de como as mecânicas do jogo foram feitas <a href=\"/pt-br/blog/games/como-criar-um-jogo-estilo-rpg-maker-com-phaser-e-react/\">nesse post</a>.</p>\n<h2 id=\"pegando-os-dados-dos-posts-com-gatsby\" style=\"position:relative;\"><a href=\"#pegando-os-dados-dos-posts-com-gatsby\" aria-label=\"pegando os dados dos posts com gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pegando os dados dos posts com Gatsby</h2>\n<p>O Gatsby disponibiliza todos os seus dados estáticos através do <code class=\"language-text\">GraphQL</code>, no meu blog eu uso o <a href=\"https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/\" target=\"_blank\" rel=\"noreferrer\">plugin de markdown</a> para os meus posts, então eu acesso meus dados da seguinte forma:</p>\n<div class=\"copy-code-block\"><button tabindex=\"7\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">GamePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> allPosts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span>allPosts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n                        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">&gt;</span>\n                        <span class=\"token operator\">&lt;</span>section\n                            key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span>\n                            dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                        <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GamePage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    query GamePage() {\n        allMarkdownRemark(\n            sort: { fields: [frontmatter___date], order: DESC }\n        ) {\n            edges {\n                node {\n                    html\n                    frontmatter {\n                        date\n                        title\n                        category\n                    }\n                }\n            }\n        }\n    }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Após adicionar a query do <code class=\"language-text\">GraphQL</code>, todos os dados dos meus posts estão disponíveis por meio do props <code class=\"language-text\">data.allMarkdownRemark.edges</code>.</p>\n<p>Agora, no jogo, posso enviar um evento JavaScript pedindo ao React para mostrar todos os meus posts em uma lista ou algo assim, e dai quando um post for escolhido, mostrá-lo em um modal do Material UI.</p>\n<h2 id=\"colocando-tudo-junto\" style=\"position:relative;\"><a href=\"#colocando-tudo-junto\" aria-label=\"colocando tudo junto permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Colocando tudo junto</h2>\n<p>Abaixo é como a versão final do meu component <code class=\"language-text\">GamePage</code> ficou:</p>\n<div class=\"copy-code-block\"><button tabindex=\"8\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">GamePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> allPosts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showBlogPost<span class=\"token punctuation\">,</span> setShowBlogPost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showBlogPostList<span class=\"token punctuation\">,</span> setShowBlogPostList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>post<span class=\"token punctuation\">,</span> setPost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showPostListEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setShowBlogPostList</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> showPostListEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showPostEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setPost</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setShowBlogPost</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> showPostEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show-post-list'</span><span class=\"token punctuation\">,</span> showPostListEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show-post'</span><span class=\"token punctuation\">,</span> showPostEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> Phaser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phaser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GameScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../game/scenes/GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GridEngine <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'grid-engine'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>GameScene<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>DialogBox\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">{</span>showBlogPost <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>BlogPost\n                    post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">{</span>showBlogPostList <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>BlogPostList\n                    posts<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>allPosts<span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GamePage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    query GamePage() {\n        allMarkdownRemark(\n            sort: { fields: [frontmatter___date], order: DESC }\n        ) {\n            edges {\n                node {\n                    html\n                    frontmatter {\n                        date\n                        title\n                        category\n                    }\n                }\n            }\n        }\n    }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Se você quiser saber mais detalhes sobre o que acontece dentro da <code class=\"language-text\">GameScene</code>, leia <a href=\"/pt-br/blog/games/como-criar-um-jogo-estilo-rpg-maker-com-phaser-e-react/\">esse post sobre o assunto</a>.</p>\n<h2 id=\"conclusao\" style=\"position:relative;\"><a href=\"#conclusao\" aria-label=\"conclusao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusão</h2>\n<p>Eu me diverti muito criando esse jogo para o meu blog, e, além disso, aprendi muitas coisas novas no Phaser e React. Quem sabe eu não uso parte desse código para fazer um jogo de verdade 👀.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACG0lEQVQoz0WQW08TQRhA+2NEFEQq3Z2Z7sw3t6WivhAeDMZnWkNISUx80aihpZUSb4HQYCQGYVsaelmkpeW23d1S5AH/lAESTc7ryUlOZDRzPP66Qt67tzIX+NuaDGzLl6yj+bEmJ5wccrIvcV1YVYkbitQFbgFuctNltCsjqtCeW6lNrwZDS/3RpV6imaS/Oa/qqZe21RZj+zRR0vauNnowUeeoRdAhw01ADUZ9GVG1t8bX7tBSf3DRv7voJ/bmIRCT72z1XWGfm3sMahIcaZSotQHmJjUchlxA7rUszhHZWh7OXo4U/Hv5vigXIABdkKqh1b4kx9x0waxwVOJmmSOHxw/E/zI7i7PKwlD2YjDnDWR60eWO7EyTP1ScjifW5QOXobIwtiC2DWaJx3cFdjmqA2rAlUxDKbqP8Zo7nDsfKfj3c5d8e1n7ip/op5uP7BLYO1zv8IcVIas87km0A8QVqHU9LP7LhjMQtTe3F88HcuFALryT7459aajW84mqbZWE5YDlAHM4ccC46oPpgLHJqKcitKnpGdiHk/RjOZY5imUPYtl2bOEUPv2cKKdoW8c76garo+g/jhTzVYQFivT1k7JKp58lU+lkajb5Ym4mNZucmZ99NSU9Dj0BoeChgFDSUNNQsVDRUNFARainwRf2wRT5XInmg2j+NJr3onnvwYcTa2UDF4u4uI6La3j1B6+meUCpp1lX3fAXiHP5L0RVS7QAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"pablo gg the game 1\" title=\"pablo gg the game 1\" src=\"/static/6921c5602e9e2c1171362b406e2c817c/42a19/pablo-gg-the-game-1.png\" srcset=\"/static/6921c5602e9e2c1171362b406e2c817c/e3135/pablo-gg-the-game-1.png 256w,\n/static/6921c5602e9e2c1171362b406e2c817c/06341/pablo-gg-the-game-1.png 512w,\n/static/6921c5602e9e2c1171362b406e2c817c/42a19/pablo-gg-the-game-1.png 1024w,\n/static/6921c5602e9e2c1171362b406e2c817c/e8464/pablo-gg-the-game-1.png 1536w,\n/static/6921c5602e9e2c1171362b406e2c817c/ac7a9/pablo-gg-the-game-1.png 1920w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span></p>\n<h2 id=\"agradecimentos\" style=\"position:relative;\"><a href=\"#agradecimentos\" aria-label=\"agradecimentos permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Agradecimentos</h2>\n<p>Este jogo não seria possível sem a ajuda de algumas pessoas incríveis e os seus trabalhos, então aqui está a minha lista de agradecimentos.</p>\n<ul>\n<li><a href=\"https://github.com/photonstorm\" target=\"_blank\" rel=\"noreferrer\">photonstorm</a>, por ter criado o <a href=\"https://github.com/photonstorm/phaser\" target=\"_blank\" rel=\"noreferrer\">Phaser.io</a>.</li>\n<li><a href=\"https://github.com/Annoraaq\" target=\"_blank\" rel=\"noreferrer\">Annoraaq</a>, por ter criado o plugin <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">grid-engine</a>.</li>\n<li><a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, por ter criado os <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">sprites dos personagens e os tilesets</a>.</li>\n<li><a href=\"https://elthen.itch.io/\" target=\"_blank\" rel=\"noreferrer\">PixElthen</a>, por ter criado os <a href=\"https://elthen.itch.io/2d-pixel-art-small-slime-sprites\" target=\"_blank\" rel=\"noreferrer\">sprites do slime</a>.</li>\n<li><a href=\"https://itch.io/profile/pixelartm\" target=\"_blank\" rel=\"noreferrer\">pixelartm</a>, por ter criado o <a href=\"https://opengameart.org/content/pirate-1\" target=\"_blank\" rel=\"noreferrer\">sprite do chapéu do pirata</a>.</li>\n<li><a href=\"https://opengameart.org/users/jkjkke\" target=\"_blank\" rel=\"noreferrer\">jkjkke</a>, por ter criado <a href=\"https://opengameart.org/content/background-6\" target=\"_blank\" rel=\"noreferrer\">a imagem de background da tela de Game Over</a>.</li>\n<li><a href=\"https://opengameart.org/users/knoblepersona\" target=\"_blank\" rel=\"noreferrer\">KnoblePersona</a>, por ter criado <a href=\"https://opengameart.org/content/ocean-background\" target=\"_blank\" rel=\"noreferrer\">a imagem de background do menu inicial</a>.</li>\n<li><a href=\"https://opengameart.org/users/min\" target=\"_blank\" rel=\"noreferrer\">Min</a>, por ter criado <a href=\"https://opengameart.org/content/open-book-0\" target=\"_blank\" rel=\"noreferrer\">o sprite do livro aberto</a>.</li>\n</ul>","otherLanguagesUrl":["/en/blog/coding/i-made-a-top-down-game-version-of-my-blog-with-phaser-and-react/"],"rss":{"title":"Eu criei um jogo para o acessar o conteúdo do meu blog com Phaser e React","description":"Eu criei um jogo para o acessar o conteúdo do meu blog com Phaser e React","date":"2021-10-12T00:00:00.000Z"},"images":["/d50653e4a6a6053367c816a50f543af8/pablo-gg-the-game.gif","/f1547924a1c5e48fc3d7132349267d59/but-why.gif","/18452438d2251249518c712d8873e89a/react-dialog-box.gif","/static/efa06188b879de0f05ddbcaf752eebf0/42a19/collision-property-on-tiled.png","/641730c3226f9772bd3bf993dad3d5a2/tiled-map-with-layers.gif","/static/6921c5602e9e2c1171362b406e2c817c/42a19/pablo-gg-the-game-1.png"],"videos":[],"comments":[],"googleFormData":{"fvv":1,"pageHistory":0,"fbzx":"5566947645549549202","action":"e/1FAIpQLSeST_0jBnLKkEkXGpyx9LWrvV2a1-1F5dr-AcA4wn0BSRyPCw","title":"blog_comment","description":null,"fields":[{"label":"name","description":null,"type":"SHORT_ANSWER","id":"1953327618","required":true},{"label":"email","description":null,"type":"SHORT_ANSWER","id":"1309141965","required":false},{"label":"twitter","description":null,"type":"SHORT_ANSWER","id":"740186305","required":false},{"label":"comment","description":null,"type":"LONG_ANSWER","id":"1663940054","required":true},{"label":"post_path","description":null,"type":"SHORT_ANSWER","id":"1852628638","required":true}],"fieldsOrder":{"740186305":2,"1309141965":1,"1663940054":3,"1852628638":4,"1953327618":0}},"pageType":"blogPost","categoryImage":"/categories_coding.jpg/","slug":"/2021/2021-10-12-eu-criei-um-jogo-para-acessar-o-conteudo-do-meu-blog-com-phaser-e-react.pt-br/","locale":"pt-br","title":"Eu criei um jogo para o acessar o conteúdo do meu blog com Phaser e React","previous":{"excerpt":"Yes, that’s right, there is now a game version of this…","html":"<p>Yes, that’s right, there is now a game version of this website. Tired of clicking around boring pages and reading stuff? What about dive into a journey of a top-down RPG-like game and find the blog posts and read them in-game?</p>\n<p><img src=\"/d50653e4a6a6053367c816a50f543af8/pablo-gg-the-game.gif\" alt=\"pablo.gg - The Game\"></p>\n<h4 id=\"play-it-here\" style=\"position:relative;\"><a href=\"#play-it-here\" aria-label=\"play it here permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"/en/game\">Play it here!</a></h4>\n<p>You can also check the source-code for on my <a href=\"https://github.com/blopa/top-down-react-phaser-game\" target=\"_blank\" rel=\"noreferrer\">GitHub repository for this project</a>.</p>\n<h2 id=\"ok-but-why\" style=\"position:relative;\"><a href=\"#ok-but-why\" aria-label=\"ok but why permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ok, but why?</h2>\n<p><img src=\"/f1547924a1c5e48fc3d7132349267d59/but-why.gif\" alt=\"But why tho?\"></p>\n<p>The idea was born when I added Konami Code to my website, which makes the Matrix source-code show up in the background of the website (try it now), which although is super cool, I was thinking it would be even cooler to make the Konami Code open a game or something, and since I already have 2 years of experience in Phaser, I decided to make a silly game just as an MVP.</p>\n<p>Around the same days, I found out about the <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">grid-engine Phaser plugin</a> that makes it SO much easier to create a top-down RPG-like game, that I decided to make a game with it, and also because my first “programming” experience date backs to 2002 when I was creating games exactly like this with RPG Maker.</p>\n<p>From then on the project started to get a little more ambitious, and I thought “what if I show the blog posts in-game?”, all the blog data is available in React via <code class=\"language-text\">GraphQL</code> anyway, so it shouldn’t be too difficult.</p>\n<h2 id=\"using-react-as-ui-for-phaser\" style=\"position:relative;\"><a href=\"#using-react-as-ui-for-phaser\" aria-label=\"using react as ui for phaser permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using React as UI for Phaser</h2>\n<p>Phaser works by rendering pixels inside a <code class=\"language-text\">canvas</code> element in the DOM, and it’s great, but one of the great features of web development is the power of the DOM and CSS to create great UI elements, and you can’t do that with Phaser alone.</p>\n<p>The simplest way to use Phaser with React is with a functional component like the one below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> Phaser <span class=\"token keyword\">from</span> <span class=\"token string\">'phaser'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GameComponent<span class=\"token punctuation\">;</span></code></pre></div>\n<p>And that works fine for most cases, but to make Phaser be able to communicate back and forth with React, like to show a menu item or a dialog box, I will dispatch JavaScript events between Phaser and React.</p>\n<p>The best way to do it would be with some sort of state management tool like <a href=\"https://facebook.github.io/flux/\" target=\"_blank\" rel=\"noreferrer\">Flux</a>, but since this is just a very small project, dispatching JavaScript events will work for now. Check the example below how to do it:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// React component</span>\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>DialogBox\r\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\r\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Phaser scene</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxFinishedEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token comment\">// Do whatever is needed when the dialog is over</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"/18452438d2251249518c712d8873e89a/react-dialog-box.gif\" alt=\"Dialog box\"></p>\n<p>If you want more details on how to create a React dialog box for your Phaser game, <a href=\"/en/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/\">check my blog post on it</a>.</p>\n<h2 id=\"integrating-phaser-with-gatsby\" style=\"position:relative;\"><a href=\"#integrating-phaser-with-gatsby\" aria-label=\"integrating phaser with gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integrating Phaser with Gatsby</h2>\n<p>Gatsby is a static site generator powered by React, but Phaser is a client only package (I mean of course, why would you need Phaser in the backend?), so whenever Gatsby was building my game page I’d get SSR errors because Phaser was trying to access client-side only APIs.</p>\n<p>To solve this, I used the React hook <code class=\"language-text\">useEffect</code> to dynamically import all my Phaser-related modules, as <code class=\"language-text\">useEffect</code> is only executed on the client-side.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// to use async/await inside a useEffect we need to create an async function and call it</span>\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// Need to initialize Phaser here otherwise Gatsby will try to SSR it</span>\r\n            <span class=\"token keyword\">const</span> Phaser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phaser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GameScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../game/scenes/GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GridEngine <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'grid-engine'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>GameScene<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"creating-the-map\" style=\"position:relative;\"><a href=\"#creating-the-map\" aria-label=\"creating the map permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating the map</h2>\n<p>To create the map I will again use Tiled, which is a FOSS in which you can create maps and use them in almost any game engine.</p>\n<p>The <code class=\"language-text\">tileset</code> I’m using for my map is the <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">Zelda-like tileset</a> created by <a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, which includes indoor and outdoor tilesets.</p>\n<p>First I will create the <code class=\"language-text\">tileset</code> on Tiled and set a property called <code class=\"language-text\">ge_collide</code> to <code class=\"language-text\">true</code> on all tiles I want to have a collision with the hero</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.234375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADCklEQVQoz1XQ7U8SAQDH8ftHetHWqq21arW2SmsrKzezLCxrWhoCqSkgGA9nkgy544DjZIrDEgh5LAS8B0Hz6ugQtOfZs5sZhT0YMsAebLW2pr3q8+L77vfmB7AsS9O3o9HR6KpYLJZMJlmWTSRXTE5OMgxD0/Td/yUSibFbt4B0On3nDu33uwhyCB8OkSQZjYyG8NCA83o31jPocN7w38RxPBwOD/0TDA4FAm6n0+t2A4VCYZymQ6EwQRCRSISiRqhINOjznDpYunHttvVrNh85XMbj1jQKuCiKIgiCoigMSjav3VJ7uhbIZDJzb2ZTc7Ppd6lP8+mP8+8zXz6/fPKAf6ysZEdRyZ6DVZxT56urhMJmE2ZCUeNKOy9WFO0R8XhANrvI3ntM0PFRdmos8Whs4iE9NR2K0OKz1aLyQ9JWWbNYCfLq5Hwul1NZfqDscHFp2zmOsfkkpmoFsouZ2OPXI/dfUVPPhyaeBuPTweSLwHhCq2xrqqsXX2oX8Jvqq2sbKjkVe0v2bS8u2rpbeqG+S9YCd6qAhYWFXHZx+fu3H9++/lztn9+/5mZmirmq/YIrO/jaDefhdTyD4IJQ23EZ0em61BqDVdNulMpErSvjTCaztPQ1XyjkC4VcPv99eXnm5bPTAhGnAaxo1bVp0CaFVgaqIR2CIIgeQQxXO9Wo+IpcvnrYXOrt29S7ValUav7Dp+mHk/2SExaFABI29Cn4Rkio1nbo1aBcIoVhpMvSqdW3X+vrAbLZbDw+QRAUwzCxWIxhmLvxOBkM6OoqhEdLa45WmhtPmNqqUcwIq5SQCoRUyl6LxYBiFksfkMvlSIKwWq02u91ms9kGBuwOh72/v5FzfNemnQqxVAcqISVo1ENKSUOHvAWUCCxmoxk19Pf1APl83uVyqdVqGIahf7QQ1otJFKKWs2c6ulQ6DIW1Gr1eY+4xdWNwby+iMZtk+m6TdQAgSYqiqOHhYZ/P5/F4/H4/gRP4CO4Le71er93ndnk9gw6Hx+0hcCIUCERHIuQ467xBDt4M/wXnMNqSjYFawgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Collision property on Tiled\"\n        title=\"Collision property on Tiled\"\n        src=\"/static/efa06188b879de0f05ddbcaf752eebf0/42a19/collision-property-on-tiled.png\"\n        srcset=\"/static/efa06188b879de0f05ddbcaf752eebf0/e3135/collision-property-on-tiled.png 256w,\n/static/efa06188b879de0f05ddbcaf752eebf0/06341/collision-property-on-tiled.png 512w,\n/static/efa06188b879de0f05ddbcaf752eebf0/42a19/collision-property-on-tiled.png 1024w,\n/static/efa06188b879de0f05ddbcaf752eebf0/f7f62/collision-property-on-tiled.png 1096w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Collision property on Tiled</figcaption>\n  </figure></p>\n<p>It’s important to create your map with multiple layers, so some parts can be below and some parts above the hero.</p>\n<p><img src=\"/641730c3226f9772bd3bf993dad3d5a2/tiled-map-with-layers.gif\" alt=\"Map with layers\"></p>\n<p>After the map is done, <a href=\"/en/blog/games/automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script/\">I will embed the tileset into the map</a>, and then I can simply import the map and <code class=\"language-text\">tileset</code> file into my game and load them in Phaser.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> mainMapaJson <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/main-map.json'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> tilesetImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/tileset.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">tilemapTiledJSON</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main-map'</span><span class=\"token punctuation\">,</span> mainMapaJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> tilesetImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"using-the-grid-engine-phaser-plugin\" style=\"position:relative;\"><a href=\"#using-the-grid-engine-phaser-plugin\" aria-label=\"using the grid engine phaser plugin permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the grid-engine Phaser plugin</h2>\n<p>As I mentioned at the beginning of the post, creating a top-down RPG Maker style game using the grid-engine plugin is easy-peasy, just configure your game to use arcade physics and add grid-engine as a plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">physics</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'arcade'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">plugin</span><span class=\"token operator\">:</span> GridEngine<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">mapping</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I can access the plugin via <code class=\"language-text\">this.gridEngine</code> inside any Phaser game scene. The next step is to create a sprite and move it with the grid-engine plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'main-map'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> gridEngineConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">characters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> heroSprite<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> cursors <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">createCursorKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>up<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>down<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This code was pretty much copied and pasted from <a href=\"https://annoraaq.github.io/grid-engine/examples/basic-movement.html\" target=\"_blank\" rel=\"noreferrer\">their official documentation page</a>.</p>\n<p>As I mentioned before, to make collisions work automatically with a map created on Tiled, just add the property <code class=\"language-text\">ge_collide</code> set to <code class=\"language-text\">true</code> for the tiles the hero is supposed to collide with.</p>\n<p>Notice that this will make the hero move and collide with objects, but there is no walking animation. To create new sprite animations I will use the <code class=\"language-text\">this.anims.create()</code> function, and then play that animation every time the grid-engine tells me that the player moved, with the <code class=\"language-text\">movementStarted</code>, <code class=\"language-text\">movementStopped</code> and <code class=\"language-text\">directionChanged</code> events dispatched by the grid-engine.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStarted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span>direction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStopped</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">directionChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">direction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> direction<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frames</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_01</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_02</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frameRate</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">repeat</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">yoyo</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>I go into more detail on how the game mechanics were made <a href=\"/en/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/\">in this post</a>.</p>\n<h2 id=\"getting-posts-data-from-gatsby\" style=\"position:relative;\"><a href=\"#getting-posts-data-from-gatsby\" aria-label=\"getting posts data from gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting posts data from Gatsby</h2>\n<p>Gatsby makes all your static data available via <code class=\"language-text\">GraphQL</code>, on my blog I use <a href=\"https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/\" target=\"_blank\" rel=\"noreferrer\">the markdown plugin</a> for my posts, so I access my data as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GamePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> allPosts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>allPosts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n                    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n                        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n                        <span class=\"token operator\">&lt;</span>section\r\n                            key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span>\r\n                            dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GamePage<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query GamePage() {\r\n        allMarkdownRemark(\r\n            sort: { fields: [frontmatter___date], order: DESC }\r\n        ) {\r\n            edges {\r\n                node {\r\n                    html\r\n                    frontmatter {\r\n                        date\r\n                        title\r\n                        category\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After adding the <code class=\"language-text\">GraphQL</code> query, all my posts data are available via the <code class=\"language-text\">data.allMarkdownRemark.edges</code> props.</p>\n<p>Now in the game, I can dispatch a JavaScript event asking React to show all my blog posts in a list or something, and then when a blog post is chosen, show it in a Material UI Modal.</p>\n<h2 id=\"adding-it-all-together\" style=\"position:relative;\"><a href=\"#adding-it-all-together\" aria-label=\"adding it all together permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding it all together</h2>\n<p>This is what my <code class=\"language-text\">GamePage</code> final code looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GamePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> allPosts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showBlogPost<span class=\"token punctuation\">,</span> setShowBlogPost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showBlogPostList<span class=\"token punctuation\">,</span> setShowBlogPostList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>post<span class=\"token punctuation\">,</span> setPost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showPostListEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setShowBlogPostList</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> showPostListEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showPostEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setPost</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowBlogPost</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> showPostEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show-post-list'</span><span class=\"token punctuation\">,</span> showPostListEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show-post'</span><span class=\"token punctuation\">,</span> showPostEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> Phaser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phaser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GameScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../game/scenes/GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GridEngine <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'grid-engine'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>GameScene<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>DialogBox\r\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\r\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">{</span>showBlogPost <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>BlogPost\r\n                    post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">{</span>showBlogPostList <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>BlogPostList\r\n                    posts<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>allPosts<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GamePage<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query GamePage() {\r\n        allMarkdownRemark(\r\n            sort: { fields: [frontmatter___date], order: DESC }\r\n        ) {\r\n            edges {\r\n                node {\r\n                    html\r\n                    frontmatter {\r\n                        date\r\n                        title\r\n                        category\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If you want to know more details about what happens inside the <code class=\"language-text\">GameScene</code>, check <a href=\"/en/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/\">this blog post</a>.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>I had a lot of fun creating this game for my blog, and besides that, I learned a lot of new things in Phaser and React. Maybe I can even use part of this code to make a real top-down game :eyes:.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACG0lEQVQoz0WQW08TQRhA+2NEFEQq3Z2Z7sw3t6WivhAeDMZnWkNISUx80aihpZUSb4HQYCQGYVsaelmkpeW23d1S5AH/lAESTc7ryUlOZDRzPP66Qt67tzIX+NuaDGzLl6yj+bEmJ5wccrIvcV1YVYkbitQFbgFuctNltCsjqtCeW6lNrwZDS/3RpV6imaS/Oa/qqZe21RZj+zRR0vauNnowUeeoRdAhw01ADUZ9GVG1t8bX7tBSf3DRv7voJ/bmIRCT72z1XWGfm3sMahIcaZSotQHmJjUchlxA7rUszhHZWh7OXo4U/Hv5vigXIABdkKqh1b4kx9x0waxwVOJmmSOHxw/E/zI7i7PKwlD2YjDnDWR60eWO7EyTP1ScjifW5QOXobIwtiC2DWaJx3cFdjmqA2rAlUxDKbqP8Zo7nDsfKfj3c5d8e1n7ip/op5uP7BLYO1zv8IcVIas87km0A8QVqHU9LP7LhjMQtTe3F88HcuFALryT7459aajW84mqbZWE5YDlAHM4ccC46oPpgLHJqKcitKnpGdiHk/RjOZY5imUPYtl2bOEUPv2cKKdoW8c76garo+g/jhTzVYQFivT1k7JKp58lU+lkajb5Ym4mNZucmZ99NSU9Dj0BoeChgFDSUNNQsVDRUNFARainwRf2wRT5XInmg2j+NJr3onnvwYcTa2UDF4u4uI6La3j1B6+meUCpp1lX3fAXiHP5L0RVS7QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pablo gg the game 1\"\n        title=\"pablo gg the game 1\"\n        src=\"/static/6921c5602e9e2c1171362b406e2c817c/42a19/pablo-gg-the-game-1.png\"\n        srcset=\"/static/6921c5602e9e2c1171362b406e2c817c/e3135/pablo-gg-the-game-1.png 256w,\n/static/6921c5602e9e2c1171362b406e2c817c/06341/pablo-gg-the-game-1.png 512w,\n/static/6921c5602e9e2c1171362b406e2c817c/42a19/pablo-gg-the-game-1.png 1024w,\n/static/6921c5602e9e2c1171362b406e2c817c/e8464/pablo-gg-the-game-1.png 1536w,\n/static/6921c5602e9e2c1171362b406e2c817c/ac7a9/pablo-gg-the-game-1.png 1920w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"special-thanks\" style=\"position:relative;\"><a href=\"#special-thanks\" aria-label=\"special thanks permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Special thanks</h2>\n<p>This game would not be possible without the help of some amazing people and their work, so here is my list of special thanks.</p>\n<ul>\n<li><a href=\"https://github.com/photonstorm\" target=\"_blank\" rel=\"noreferrer\">photonstorm</a>, for creating <a href=\"https://github.com/photonstorm/phaser\" target=\"_blank\" rel=\"noreferrer\">Phaser.io</a>.</li>\n<li><a href=\"https://github.com/Annoraaq\" target=\"_blank\" rel=\"noreferrer\">Annoraaq</a>, for creating the <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">grid-engine</a> plugin.</li>\n<li><a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, for the <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">characters sprites and tilesets</a>.</li>\n<li><a href=\"https://elthen.itch.io/\" target=\"_blank\" rel=\"noreferrer\">PixElthen</a>, for the <a href=\"https://elthen.itch.io/2d-pixel-art-small-slime-sprites\" target=\"_blank\" rel=\"noreferrer\">slime sprites</a>.</li>\n<li><a href=\"https://itch.io/profile/pixelartm\" target=\"_blank\" rel=\"noreferrer\">pixelartm</a>, for the <a href=\"https://opengameart.org/content/pirate-1\" target=\"_blank\" rel=\"noreferrer\">pirate hat sprites</a>.</li>\n<li><a href=\"https://opengameart.org/users/jkjkke\" target=\"_blank\" rel=\"noreferrer\">jkjkke</a>, for the <a href=\"https://opengameart.org/content/background-6\" target=\"_blank\" rel=\"noreferrer\">Game Over screen background</a>.</li>\n<li><a href=\"https://opengameart.org/users/knoblepersona\" target=\"_blank\" rel=\"noreferrer\">KnoblePersona</a>, for the <a href=\"https://opengameart.org/content/ocean-background\" target=\"_blank\" rel=\"noreferrer\">Main Menu screen background</a>.</li>\n<li><a href=\"https://opengameart.org/users/min\" target=\"_blank\" rel=\"noreferrer\">Min</a>, for the <a href=\"https://opengameart.org/content/open-book-0\" target=\"_blank\" rel=\"noreferrer\">open book sprite</a>.</li>\n</ul>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTEyVDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-12-i-made-a-top-down-game-version-of-my-blog-with-phaser-and-react.en/","path":"/blog/coding/i-made-a-top-down-game-version-of-my-blog-with-phaser-and-react/","locale":"en"},"rawMarkdownBody":"Yes, that's right, there is now a game version of this website. Tired of clicking around boring pages and reading stuff? What about dive into a journey of a top-down RPG-like game and find the blog posts and read them in-game?\r\n\r\n![pablo.gg - The Game](../../uploads/blog/2021/10/pablo-gg-the-game.gif)\r\n\r\n#### [Play it here!](/en/game)\r\n\r\nYou can also check the source-code for on my [GitHub repository for this project](https://github.com/blopa/top-down-react-phaser-game).\r\n\r\n## Ok, but why?\r\n![But why tho?](../../uploads/blog/2021/10/but-why.gif)\r\n\r\nThe idea was born when I added Konami Code to my website, which makes the Matrix source-code show up in the background of the website (try it now), which although is super cool, I was thinking it would be even cooler to make the Konami Code open a game or something, and since I already have 2 years of experience in Phaser, I decided to make a silly game just as an MVP.\r\n\r\nAround the same days, I found out about the [grid-engine Phaser plugin](https://github.com/Annoraaq/grid-engine) that makes it SO much easier to create a top-down RPG-like game, that I decided to make a game with it, and also because my first \"programming\" experience date backs to 2002 when I was creating games exactly like this with RPG Maker.\r\n\r\nFrom then on the project started to get a little more ambitious, and I thought \"what if I show the blog posts in-game?\", all the blog data is available in React via `GraphQL` anyway, so it shouldn't be too difficult.\r\n\r\n## Using React as UI for Phaser\r\nPhaser works by rendering pixels inside a `canvas` element in the DOM, and it's great, but one of the great features of web development is the power of the DOM and CSS to create great UI elements, and you can't do that with Phaser alone.\r\n\r\nThe simplest way to use Phaser with React is with a functional component like the one below.\r\n\r\n```javascript\r\nimport React from 'react';\r\nimport Phaser from 'phaser';\r\n\r\nfunction GameComponent() {\r\n    const game = new Phaser.Game({\r\n        ...configs,\r\n        parent: 'game-content',\r\n    });\r\n\r\n    return <div id=\"game-content\" />;\r\n};\r\n\r\nexport default GameComponent;\r\n```\r\n\r\nAnd that works fine for most cases, but to make Phaser be able to communicate back and forth with React, like to show a menu item or a dialog box, I will dispatch JavaScript events between Phaser and React.\r\n\r\nThe best way to do it would be with some sort of state management tool like [Flux](https://facebook.github.io/flux/), but since this is just a very small project, dispatching JavaScript events will work for now. Check the example below how to do it:\r\n\r\n```javascript\r\n// React component\r\nfunction GameComponent() {\r\n    const [messages, setMessage] = useState('');\r\n    const [showDialogBox, setShowDialogBox] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const dialogBoxEventListener = ({ detail }) => {\r\n            setMessage(detail.message);\r\n            setShowDialogBox(true);\r\n        };\r\n        window.addEventListener('start-dialog', dialogBoxEventListener);\r\n\r\n        return () => {\r\n            window.removeEventListener('start-dialog', dialogBoxEventListener);\r\n        };\r\n    });\r\n\r\n    const handleMessageIsDone = useCallback(() => {\r\n        const customEvent = new CustomEvent('end-dialog');\r\n        window.dispatchEvent(customEvent);\r\n\r\n        setMessage('');\r\n        setShowDialogBox(false);\r\n    }, [characterName]);\r\n\r\n    return (\r\n        <>\r\n            {showDialogBox && (\r\n                <DialogBox\r\n                    message={message}\r\n                    onDone={handleMessageIsDone}\r\n                />\r\n            )}\r\n            <div id=\"game-content\" />\r\n        </>\r\n    );\r\n};\r\n\r\n// Phaser scene\r\nclass GameScene extends Phaser.Scene {\r\n    constructor() {\r\n        super('GameScene');\r\n    }\r\n\r\n    create() {\r\n        const dialogBoxFinishedEventListener = () => {\r\n            window.removeEventListener('end-dialog', dialogBoxFinishedEventListener);\r\n            // Do whatever is needed when the dialog is over\r\n        };\r\n        window.addEventListener('end-dialog', dialogBoxFinishedEventListener);\r\n    }\r\n}\r\n```\r\n\r\n![Dialog box](../../uploads/blog/2021/10/react-dialog-box.gif)\r\n\r\nIf you want more details on how to create a React dialog box for your Phaser game, [check my blog post on it](/en/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/).\r\n\r\n## Integrating Phaser with Gatsby\r\nGatsby is a static site generator powered by React, but Phaser is a client only package (I mean of course, why would you need Phaser in the backend?), so whenever Gatsby was building my game page I'd get SSR errors because Phaser was trying to access client-side only APIs.\r\n\r\nTo solve this, I used the React hook `useEffect` to dynamically import all my Phaser-related modules, as `useEffect` is only executed on the client-side.\r\n\r\n```javascript\r\nfunction GameComponent() {\r\n    // to use async/await inside a useEffect we need to create an async function and call it\r\n    useEffect(() => {\r\n        async function initPhaser() {\r\n            // Need to initialize Phaser here otherwise Gatsby will try to SSR it\r\n            const Phaser = await import('phaser');\r\n            const { default: GameScene } = await import('../game/scenes/GameScene');\r\n            const { default: GridEngine } = await import('grid-engine');\r\n\r\n            const game = new Phaser.Game({\r\n                ...configs,\r\n                parent: 'game-content',\r\n                scene: [GameScene],\r\n            });\r\n        }\r\n\r\n        initPhaser();\r\n    }, []);\r\n\r\n    return <div id=\"game-content\" />;\r\n};\r\n```\r\n\r\n## Creating the map\r\nTo create the map I will again use Tiled, which is a FOSS in which you can create maps and use them in almost any game engine.\r\n\r\nThe `tileset` I'm using for my map is the [Zelda-like tileset](https://opengameart.org/content/zelda-like-tilesets-and-sprites) created by [ArMM1998](https://itch.io/profile/armm1998), which includes indoor and outdoor tilesets.\r\n\r\nFirst I will create the `tileset` on Tiled and set a property called `ge_collide` to `true` on all tiles I want to have a collision with the hero\r\n\r\n![Collision property on Tiled](../../uploads/blog/2021/10/collision-property-on-tiled.png)\r\n\r\nIt's important to create your map with multiple layers, so some parts can be below and some parts above the hero.\r\n\r\n![Map with layers](../../uploads/blog/2021/10/tiled-map-with-layers.gif)\r\n\r\nAfter the map is done, [I will embed the tileset into the map](/en/blog/games/automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script/), and then I can simply import the map and `tileset` file into my game and load them in Phaser.\r\n\r\n```javascript\r\nimport mainMapaJson from '../../../content/assets/game/maps/main-map.json';\r\nimport tilesetImage from '../../../content/assets/game/maps/tileset.png';\r\n\r\nclass GameScene extends Phaser.Scene {\r\n    constructor() {\r\n        super('GameScene');\r\n    }\r\n\r\n    preload() {\r\n        this.load.tilemapTiledJSON('main-map', mainMapaJson);\r\n        this.load.image('tileset', tilesetImage);\r\n    }\r\n}\r\n```\r\n\r\n## Using the grid-engine Phaser plugin\r\nAs I mentioned at the beginning of the post, creating a top-down RPG Maker style game using the grid-engine plugin is easy-peasy, just configure your game to use arcade physics and add grid-engine as a plugin.\r\n\r\n```javascript\r\nconst game = new Phaser.Game({\r\n    ...configs,\r\n    parent: 'game-content',\r\n    physics: {\r\n        default: 'arcade',\r\n    },\r\n    plugins: {\r\n        scene: [{\r\n                key: 'gridEngine',\r\n                plugin: GridEngine,\r\n                mapping: 'gridEngine',\r\n            }],\r\n    },\r\n});\r\n```\r\n\r\nNow I can access the plugin via `this.gridEngine` inside any Phaser game scene. The next step is to create a sprite and move it with the grid-engine plugin.\r\n\r\n```javascript\r\ncreate() {\r\n    const map = this.make.tilemap({ key: 'main-map' });\r\n    map.addTilesetImage('tileset', 'tileset');\r\n    map.layers.forEach((layer, index) => {\r\n        map.createLayer(index, 'tileset', 0, 0);\r\n    });\r\n\r\n    const heroSprite = this.physics.add.sprite(0, 0, 'hero');\r\n\r\n    const gridEngineConfig = {\r\n        characters: [{\r\n            id: 'hero',\r\n            sprite: heroSprite,\r\n            startPosition: { x: 1, y: 1 },\r\n        }],\r\n    };\r\n    this.gridEngine.create(map, gridEngineConfig);\r\n}\r\n\r\nupdate() {\r\n    const cursors = this.input.keyboard.createCursorKeys();\r\n\r\n    if (cursors.left.isDown) {\r\n        this.gridEngine.move('hero', 'left');\r\n    } else if (cursors.right.isDown) {\r\n        this.gridEngine.move('hero', 'right');\r\n    } else if (cursors.up.isDown) {\r\n        this.gridEngine.move('hero', 'up');\r\n    } else if (cursors.down.isDown) {\r\n        this.gridEngine.move('hero', 'down');\r\n    }\r\n}\r\n```\r\n\r\nThis code was pretty much copied and pasted from [their official documentation page](https://annoraaq.github.io/grid-engine/examples/basic-movement.html).\r\n\r\nAs I mentioned before, to make collisions work automatically with a map created on Tiled, just add the property `ge_collide` set to `true` for the tiles the hero is supposed to collide with.\r\n\r\nNotice that this will make the hero move and collide with objects, but there is no walking animation. To create new sprite animations I will use the `this.anims.create()` function, and then play that animation every time the grid-engine tells me that the player moved, with the `movementStarted`, `movementStopped` and `directionChanged` events dispatched by the grid-engine.\r\n\r\n```javascript\r\ncreate() {\r\n    const heroSprite = this.physics.add.sprite(0, 0, 'hero');\r\n    this.createHeroWalkingAnimation('up');\r\n    this.createHeroWalkingAnimation('right');\r\n    this.createHeroWalkingAnimation('down');\r\n    this.createHeroWalkingAnimation('left');\r\n\r\n    this.gridEngine.create(map, gridEngineConfig);\r\n    this.gridEngine.movementStarted().subscribe(({ direction }) => {\r\n        heroSprite.anims.play(direction);\r\n    });\r\n\r\n    this.gridEngine.movementStopped().subscribe(({ direction }) => {\r\n        heroSprite.anims.stop();\r\n        heroSprite.setFrame('down_01');\r\n    });\r\n\r\n    this.gridEngine.directionChanged().subscribe(({ direction }) => {\r\n        heroSprite.setFrame('down_01');\r\n    });\r\n}\r\n\r\ncreateHeroWalkingAnimation(direction) {\r\n    this.anims.create({\r\n        key: direction,\r\n        frames: [\r\n            { key: 'hero', frame: `${direction}_01` },\r\n            { key: 'hero', frame: `${direction}_02` },\r\n        ],\r\n        frameRate: 4,\r\n        repeat: -1,\r\n        yoyo: true,\r\n    });\r\n}\r\n```\r\n\r\nI go into more detail on how the game mechanics were made [in this post](/en/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/).\r\n\r\n## Getting posts data from Gatsby\r\nGatsby makes all your static data available via `GraphQL`, on my blog I use [the markdown plugin](https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/) for my posts, so I access my data as follows:\r\n\r\n```javascript\r\nimport React from 'react';\r\nimport { graphql } from 'gatsby';\r\n\r\nfunction GamePage({ data }) {\r\n    const allPosts = data.allMarkdownRemark.edges;\r\n    \r\n    return (\r\n        <div>\r\n            {allPosts.map((post, index) => {\r\n                return (\r\n                    <div>\r\n                        <h1>{post.node.frontmatter.title}</h1>\r\n                        <section\r\n                            key={index}\r\n                            dangerouslySetInnerHTML={{ __html: post.node.html }}\r\n                        />\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GamePage;\r\n\r\nexport const pageQuery = graphql`\r\n    query GamePage() {\r\n        allMarkdownRemark(\r\n            sort: { fields: [frontmatter___date], order: DESC }\r\n        ) {\r\n            edges {\r\n                node {\r\n                    html\r\n                    frontmatter {\r\n                        date\r\n                        title\r\n                        category\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n```\r\n\r\nAfter adding the `GraphQL` query, all my posts data are available via the `data.allMarkdownRemark.edges` props.\r\n\r\nNow in the game, I can dispatch a JavaScript event asking React to show all my blog posts in a list or something, and then when a blog post is chosen, show it in a Material UI Modal.\r\n\r\n## Adding it all together\r\nThis is what my `GamePage` final code looks like:\r\n\r\n```javascript\r\nimport React from 'react';\r\nimport { graphql } from 'gatsby';\r\n\r\nfunction GamePage({ data }) {\r\n    const allPosts = data.allMarkdownRemark.edges;\r\n    const [messages, setMessage] = useState('');\r\n    const [showDialogBox, setShowDialogBox] = useState(false);\r\n    const [showBlogPost, setShowBlogPost] = useState(false);\r\n    const [showBlogPostList, setShowBlogPostList] = useState(false);\r\n    const [post, setPost] = useState({});\r\n\r\n    useEffect(() => {\r\n        const dialogBoxEventListener = ({ detail }) => {\r\n            setMessage(detail.message);\r\n            setShowDialogBox(true);\r\n        };\r\n        window.addEventListener('start-dialog', dialogBoxEventListener);\r\n\r\n        const showPostListEventListener = ({ detail }) => {\r\n            setShowBlogPostList(true);\r\n        };\r\n        window.addEventListener('start-dialog', showPostListEventListener);\r\n\r\n        const showPostEventListener = ({ detail }) => {\r\n            setPost(detail.post);\r\n            setShowBlogPost(true);\r\n        };\r\n        window.addEventListener('start-dialog', showPostEventListener);\r\n\r\n        return () => {\r\n            window.removeEventListener('start-dialog', dialogBoxEventListener);\r\n            window.removeEventListener('show-post-list', showPostListEventListener);\r\n            window.removeEventListener('show-post', showPostEventListener);\r\n        };\r\n    });\r\n\r\n    const handleMessageIsDone = useCallback(() => {\r\n        const customEvent = new CustomEvent('end-dialog');\r\n        window.dispatchEvent(customEvent);\r\n\r\n        setMessage('');\r\n        setShowDialogBox(false);\r\n    }, [characterName]);\r\n\r\n    useEffect(() => {\r\n        async function initPhaser() {\r\n            const Phaser = await import('phaser');\r\n            const { default: GameScene } = await import('../game/scenes/GameScene');\r\n            const { default: GridEngine } = await import('grid-engine');\r\n\r\n            const game = new Phaser.Game({\r\n                ...configs,\r\n                parent: 'game-content',\r\n                scene: [GameScene],\r\n            });\r\n        }\r\n\r\n        initPhaser();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            {showDialogBox && (\r\n                <DialogBox\r\n                    message={message}\r\n                    onDone={handleMessageIsDone}\r\n                />\r\n            )}\r\n            {showBlogPost && (\r\n                <BlogPost\r\n                    post={post}\r\n                />\r\n            )}\r\n            {showBlogPostList && (\r\n                <BlogPostList\r\n                    posts={allPosts}\r\n                />\r\n            )}\r\n            <div id=\"game-content\" />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default GamePage;\r\n\r\nexport const pageQuery = graphql`\r\n    query GamePage() {\r\n        allMarkdownRemark(\r\n            sort: { fields: [frontmatter___date], order: DESC }\r\n        ) {\r\n            edges {\r\n                node {\r\n                    html\r\n                    frontmatter {\r\n                        date\r\n                        title\r\n                        category\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n```\r\n\r\nIf you want to know more details about what happens inside the `GameScene`, check [this blog post](/en/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/).\r\n\r\n## Conclusion\r\nI had a lot of fun creating this game for my blog, and besides that, I learned a lot of new things in Phaser and React. Maybe I can even use part of this code to make a real top-down game :eyes:.\r\n\r\n![](../../uploads/blog/2021/10/pablo-gg-the-game-1.png)\r\n\r\n## Special thanks\r\nThis game would not be possible without the help of some amazing people and their work, so here is my list of special thanks.\r\n\r\n- [photonstorm](https://github.com/photonstorm), for creating [Phaser.io](https://github.com/photonstorm/phaser).\r\n- [Annoraaq](https://github.com/Annoraaq), for creating the [grid-engine](https://github.com/Annoraaq/grid-engine) plugin.\r\n- [ArMM1998](https://itch.io/profile/armm1998), for the [characters sprites and tilesets](https://opengameart.org/content/zelda-like-tilesets-and-sprites).\r\n- [PixElthen](https://elthen.itch.io/), for the [slime sprites](https://elthen.itch.io/2d-pixel-art-small-slime-sprites).\r\n- [pixelartm](https://itch.io/profile/pixelartm), for the [pirate hat sprites](https://opengameart.org/content/pirate-1).\r\n- [jkjkke](https://opengameart.org/users/jkjkke), for the [Game Over screen background](https://opengameart.org/content/background-6).\r\n- [KnoblePersona](https://opengameart.org/users/knoblepersona), for the [Main Menu screen background](https://opengameart.org/content/ocean-background).\r\n- [Min](https://opengameart.org/users/min), for the [open book sprite](https://opengameart.org/content/open-book-0).\r\n","frontmatter":{"tags":["coding","games","javascript","phaser","phaser 3","react","blog","rpg","rpg maker","top-down"],"categories":["coding"],"allowComments":true,"publishOnMedium":null,"cover":null,"date":"2021-10-12T00:00:00.000Z","id":null,"path":"i-made-a-top-down-game-version-of-my-blog-with-phaser-and-react","show":true,"title":"I made a top-down game version of my blog with Phaser and React","hideExcerpt":null,"subtitle":"Learn how to create a top-down RPG game using Phaser and React, including integrating with Gatsby and creating the game map with Tiled"}},"next":{"excerpt":"Medium is a great platform to share your blog posts with a…","html":"<p>Medium is a great platform to share your blog posts with a wider audience, but it is a bit annoying that to have code snippets you need to create a GitHub Gist (<a href=\"https://medium.com/pythoneers/9-different-ways-to-embedded-code-in-medium-9213cb4c0a2e\" target=\"_blank\" rel=\"noreferrer\">or others</a>) and embed it into the post.</p>\n<p>As I write a lot of tutorials in my blog, adding all my code snippets one by one to GitHub Gist takes a lot of time, and I’m very lazy, so let’s automate that.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 574px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.453125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVQoz42Q3U7bMBiGfcRVcCHcELfAdUxQaB0gTqo0U7eAaM45adayE1oJDpg07WhKSjb7i6vEJOTHhiRb1Y3fR59sf6/9yLLRfD7/+Gl4MnJOzpyz0chtGL2K67qO48xmMzSZTPZ6+7tHhx+0w56GNYwx1gghxsuYpqlpmud56OLrhUGIZnzeOxp2u739g66uE8uyBoOB1e9b/f7gCbZtE0Km0ynyvC+dA2wahBCdtBh1Q3TdHA5N2yb635ys9g2M8Xg8Rpxz3/cXawRBsAiCW8auj49vTk9DgEUQLP7F933OOVLPIctSKXW5tfVte3vVPuUZWVaVUuq3655vbHibm/HV1Sp8W1ZStvP3nZ2fnc568r9clmWW5zQGEFGSCSll1SBr5Q3QfZ5LWS1F+iMUfsianwnF3Z1SqiqK+rVr1660do2KopBKllLF90qkuUiSvCjUO6hlIZLb8BcDAKAAEEVROzLGKK2TpuVtMUZ5xOM4ppRmWYbSNG0PUcYaq5Gbaj0A4H9YAjC+5EkSMwaP8gMi+Zs9KpVdrQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"code snippet to gist\"\n        title=\"code snippet to gist\"\n        src=\"/static/202c3fa6b99920b5d413ee8045e8c575/312c2/code-snippet-to-gist.png\"\n        srcset=\"/static/202c3fa6b99920b5d413ee8045e8c575/e3135/code-snippet-to-gist.png 256w,\n/static/202c3fa6b99920b5d413ee8045e8c575/06341/code-snippet-to-gist.png 512w,\n/static/202c3fa6b99920b5d413ee8045e8c575/312c2/code-snippet-to-gist.png 574w\"\n        sizes=\"(max-width: 574px) 100vw, 574px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"code-snippets-on-gatsby\" style=\"position:relative;\"><a href=\"#code-snippets-on-gatsby\" aria-label=\"code snippets on gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code snippets on Gatsby</h2>\n<p>To add code snippets in Gatsby, you only need to use the markdown triple backtick and the language that you’re using, like the example below.</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\">javascript</span>\r\n<span class=\"token code-block language-javascript\">    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello world!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\r\n<span class=\"token punctuation\">```</span></span></code></pre></div>\n<p>With that, Gatsby will generate an HTML like the one below. This will be important for later.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gatsby-highlight<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-language</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pre</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>language-javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>code</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>language-javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n            <span class=\"token comment\">&lt;!-- the span element is not exactly like this, this is just an example --></span>\r\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>console.log('hello world!');<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\r\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>code</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pre</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"the-problem\" style=\"position:relative;\"><a href=\"#the-problem\" aria-label=\"the problem permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The problem</h2>\n<p>Medium has a super useful <a href=\"https://medium.com/p/import\" target=\"_blank\" rel=\"noreferrer\">tool to import any post from anywhere into a Medium story</a>, but sadly every code snippet will be ignored by it.</p>\n<p>Ideally, I could have a special URL for my blog posts where all my code snippets would be replaced by a GitHub Gist URL with that code, and this is exactly what I’m going to do next 😎.</p>\n<h2 id=\"creating-a-special-url-for-medium\" style=\"position:relative;\"><a href=\"#creating-a-special-url-for-medium\" aria-label=\"creating a special url for medium permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating a special URL for Medium</h2>\n<p>I want to be able to add <code class=\"language-text\">/medium-import</code> to the end of my blog posts’ URL and load a special post page with all code snippets replaced by GitHub Gists.</p>\n<p>On the <code class=\"language-text\">gatsby-node.js</code> file, in the <code class=\"language-text\">createPages</code> function, I will create an extra page with the <code class=\"language-text\">/medium-import</code> path in the end.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> postsResult<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> post <span class=\"token keyword\">of</span> posts<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/medium-import</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/templates/MediumPost.jsx'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">mediumHTML</span><span class=\"token operator\">:</span> <span class=\"token keyword\">await</span> <span class=\"token function\">generateMediumHTML</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>All my blog posts can be accessed via <code class=\"language-text\">/blog-post-url</code> and also <code class=\"language-text\">/blog-post-url/medium-import</code> now.</p>\n<h2 id=\"generating-a-different-html-for-medium\" style=\"position:relative;\"><a href=\"#generating-a-different-html-for-medium\" aria-label=\"generating a different html for medium permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Generating a different HTML for Medium</h2>\n<p>For the <code class=\"language-text\">generateMediumHTML</code> function, I will use the <code class=\"language-text\">querySelectorAll</code> to find all the HTML nodes with code snippets and replace them with GitHub Gists URLs.</p>\n<p>Since all of this code will be executed on Node, I will need <a href=\"https://github.com/jsdom/jsdom\" target=\"_blank\" rel=\"noreferrer\">jsdom</a> to be able to manipulate the <code class=\"language-text\">HTML DOM</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> jsdom <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateMediumHTML</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">htmlString<span class=\"token punctuation\">,</span> postTitle</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> gistUrls <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">generateGistUrlsForPost</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">,</span> postTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> dom <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">jsdom<span class=\"token punctuation\">.</span>JSDOM</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.gatsby-highlight'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        element<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> gistUrls<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>All code snippets will be replaced by <code class=\"language-text\">&lt;div class=\"gatsby-highlight\" data-language=\"javascript\">https://gist.github.com/some-gist-id&lt;/div></code>.</p>\n<h2 id=\"using-the-github-gist-api\" style=\"position:relative;\"><a href=\"#using-the-github-gist-api\" aria-label=\"using the github gist api permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the GitHub Gist API</h2>\n<p>I will use the <a href=\"https://docs.github.com/en/rest/reference/gists#create-a-gist\" target=\"_blank\" rel=\"noreferrer\">GitHub Gist API</a> for two things, to get all my existing Gists to avoid creating the same Gist twice with a <code class=\"language-text\">GET</code> request, and to create a new Gist with a <code class=\"language-text\">POST</code> request.</p>\n<p>Since the code will be executed in Node, I will use <a href=\"https://github.com/node-fetch/node-fetch\" target=\"_blank\" rel=\"noreferrer\">node-fetch</a> for the API requests.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> gistAccessToken <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GITHUB_ACCESS_TOKEN</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Get all existing gists under my github username</span>\r\n<span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/gists'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">token </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>gistAccessToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token string-property property\">'Content-type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> gistAccessToken <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GITHUB_ACCESS_TOKEN</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// create a new gist</span>\r\n<span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/gists'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">token </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>gistAccessToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token string-property property\">'Content-type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'Code for blog post'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">public</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token punctuation\">[</span><span class=\"token string\">'file-name.js'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">'console.log(\"hello world!\");'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the <code class=\"language-text\">generateGistUrlsForPost</code> function, I will again use the <code class=\"language-text\">querySelectorAll</code> function to get the code via the <code class=\"language-text\">textContent</code> property and then send it to GitHub via the Gist API, for that I will need a <a href=\"https://github.com/settings/tokens\" target=\"_blank\" rel=\"noreferrer\">GitHub Personal Access Token</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateGistUrlsForPost</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">htmlString<span class=\"token punctuation\">,</span> postTitle</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> gistAccessToken <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GITHUB_ACCESS_TOKEN</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> dom <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">jsdom<span class=\"token punctuation\">.</span>JSDOM</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.gatsby-highlight > pre > code'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> slug <span class=\"token operator\">=</span> <span class=\"token function\">convertToKebabCase</span><span class=\"token punctuation\">(</span>postTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// Get all existing gists under my github username</span>\r\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/gists'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">token </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>gistAccessToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string-property property\">'Content-type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> responseData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> responseData<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> fileNames <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> gistUrls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> code <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> extension <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-language'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> fileName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>slug<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-script-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>extension<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// if the gist for the file already exists, then don't create a new one</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fileNames<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> existingGist <span class=\"token operator\">=</span> responseData<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            gistUrls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>existingGist<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/gists'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">token </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>gistAccessToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token string-property property\">'Content-type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                    <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Code for post \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>postTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token keyword\">public</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token punctuation\">[</span>fileName<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                            <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> code<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            gistUrls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        index <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> gistUrls<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"rendering-the-new-html\" style=\"position:relative;\"><a href=\"#rendering-the-new-html\" aria-label=\"rendering the new html permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rendering the new HTML</h2>\n<p>In the React component template, I have access to a new attribute called <code class=\"language-text\">mediumHTML</code> inside the <code class=\"language-text\">pageContext</code>, and that is the new HTML with all code snippets replaced with GitHub Gists.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MediumPostTemplate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> pageContext <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> markdownRemark <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> markdownRemark<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> mediumHTML <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> pageContext<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>article<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>header<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>section\r\n                dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> mediumHTML <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MediumPostTemplate<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query MediumPostBySlug($slug: String!, $categoryImage: String) {\r\n        markdownRemark(fields: { slug: { eq: $slug } }) {\r\n            frontmatter {\r\n                title\r\n            }\r\n        }\r\n    }\r\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I can go into the <a href=\"https://medium.com/p/import\" target=\"_blank\" rel=\"noreferrer\">Medium import tool</a> and import any post via the <code class=\"language-text\">/blog-post-url/medium-import</code>.</p>\n<p>With all this automation in place, expect to see a lot more <a href=\"https://pablopirata.medium.com/\" target=\"_blank\" rel=\"noreferrer\">Medium posts from me</a> 😊.</p>","fields":{"postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIxLTEwLTI0VDAwOjAwOjAwLjAwMFo=","slug":"/2021/2021-10-24-how-to-import-gatsby-posts-into-medium-with-gist-code-snippets.en/","path":"/blog/coding/how-to-import-gatsby-posts-into-medium-with-gist-code-snippets/","locale":"en"},"rawMarkdownBody":"Medium is a great platform to share your blog posts with a wider audience, but it is a bit annoying that to have code snippets you need to create a GitHub Gist ([or others](https://medium.com/pythoneers/9-different-ways-to-embedded-code-in-medium-9213cb4c0a2e)) and embed it into the post.\r\n\r\nAs I write a lot of tutorials in my blog, adding all my code snippets one by one to GitHub Gist takes a lot of time, and I'm very lazy, so let's automate that.\r\n\r\n![](../../uploads/blog/2021/10/code-snippet-to-gist.png)\r\n\r\n## Code snippets on Gatsby\r\nTo add code snippets in Gatsby, you only need to use the markdown triple backtick and the language that you're using, like the example below.\r\n\r\n````markdown\r\n```javascript\r\n    console.log('hello world!');\r\n```\r\n````\r\n\r\nWith that, Gatsby will generate an HTML like the one below. This will be important for later.\r\n\r\n```html\r\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\r\n    <pre class=\"language-javascript\">\r\n        <code class=\"language-javascript\">\r\n            <!-- the span element is not exactly like this, this is just an example -->\r\n            <span>console.log('hello world!');</span>\r\n        </code>\r\n    </pre>\r\n</div>\r\n```\r\n\r\n## The problem\r\nMedium has a super useful [tool to import any post from anywhere into a Medium story](https://medium.com/p/import), but sadly every code snippet will be ignored by it.\r\n\r\nIdeally, I could have a special URL for my blog posts where all my code snippets would be replaced by a GitHub Gist URL with that code, and this is exactly what I'm going to do next 😎.\r\n\r\n## Creating a special URL for Medium\r\nI want to be able to add `/medium-import` to the end of my blog posts' URL and load a special post page with all code snippets replaced by GitHub Gists.\r\n\r\nOn the `gatsby-node.js` file, in the `createPages` function, I will create an extra page with the `/medium-import` path in the end.\r\n\r\n```javascript\r\nconst posts = postsResult.data.allMarkdownRemark.edges;\r\nfor (const post of posts) {\r\n    createPage({\r\n        path: `${post.node.fields.path}/medium-import`,\r\n        component: path.resolve('./src/templates/MediumPost.jsx'),\r\n        context: {\r\n            mediumHTML: await generateMediumHTML(post.node.html, post.node.frontmatter.title),\r\n        },\r\n    });\r\n}\r\n```\r\n\r\nAll my blog posts can be accessed via `/blog-post-url` and also `/blog-post-url/medium-import` now.\r\n\r\n## Generating a different HTML for Medium\r\nFor the `generateMediumHTML` function, I will use the `querySelectorAll` to find all the HTML nodes with code snippets and replace them with GitHub Gists URLs.\r\n\r\nSince all of this code will be executed on Node, I will need [jsdom](https://github.com/jsdom/jsdom) to be able to manipulate the `HTML DOM`.\r\n\r\n```javascript\r\nconst jsdom = require('jsdom');\r\nconst generateMediumHTML = async (htmlString, postTitle) => {\r\n    const gistUrls = await generateGistUrlsForPost(htmlString, postTitle);\r\n\r\n    const dom = new jsdom.JSDOM(htmlString);\r\n    const result = dom.window.document.querySelectorAll('.gatsby-highlight');\r\n    result.forEach((element, index) => {\r\n        element.textContent = gistUrls[index];\r\n    });\r\n\r\n    return dom.window.document.body.innerHTML;\r\n};\r\n```\r\n\r\nAll code snippets will be replaced by `<div class=\"gatsby-highlight\" data-language=\"javascript\">https://gist.github.com/some-gist-id</div>`.\r\n\r\n## Using the GitHub Gist API\r\nI will use the [GitHub Gist API](https://docs.github.com/en/rest/reference/gists#create-a-gist) for two things, to get all my existing Gists to avoid creating the same Gist twice with a `GET` request, and to create a new Gist with a `POST` request.\r\n\r\nSince the code will be executed in Node, I will use [node-fetch](https://github.com/node-fetch/node-fetch) for the API requests.\r\n\r\n```javascript\r\nconst gistAccessToken = process.env.GITHUB_ACCESS_TOKEN;\r\n\r\n// Get all existing gists under my github username\r\nconst response = await nodeFetch('https://api.github.com/gists', {\r\n    method: 'GET',\r\n    headers: {\r\n        Authorization: `token ${gistAccessToken}`,\r\n        'Content-type': 'application/json',\r\n    },\r\n});\r\n```\r\n\r\n```javascript\r\nconst gistAccessToken = process.env.GITHUB_ACCESS_TOKEN;\r\n\r\n// create a new gist\r\nconst response = await nodeFetch('https://api.github.com/gists', {\r\n    method: 'POST',\r\n    headers: {\r\n        Authorization: `token ${gistAccessToken}`,\r\n        'Content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n        description: 'Code for blog post',\r\n        public: true,\r\n        files: {\r\n            ['file-name.js']: {\r\n                content: 'console.log(\"hello world!\");',\r\n            },\r\n        },\r\n    }),\r\n});\r\n```\r\n\r\nFor the `generateGistUrlsForPost` function, I will again use the `querySelectorAll` function to get the code via the `textContent` property and then send it to GitHub via the Gist API, for that I will need a [GitHub Personal Access Token](https://github.com/settings/tokens).\r\n\r\n```javascript\r\nconst generateGistUrlsForPost = async (htmlString, postTitle) => {\r\n    const gistAccessToken = process.env.GITHUB_ACCESS_TOKEN;\r\n\r\n    const dom = new jsdom.JSDOM(htmlString);\r\n    const result = dom.window.document.querySelectorAll('.gatsby-highlight > pre > code');\r\n    const slug = convertToKebabCase(postTitle);\r\n\r\n    // Get all existing gists under my github username\r\n    const response = await nodeFetch('https://api.github.com/gists', {\r\n        method: 'GET',\r\n        headers: {\r\n            Authorization: `token ${gistAccessToken}`,\r\n            'Content-type': 'application/json',\r\n        },\r\n    });\r\n    const responseData = await response.json();\r\n    const files = responseData.map((data) => Object.keys(data.files));\r\n    const fileNames = files.flat();\r\n\r\n    const gistUrls = [];\r\n    let index = 1;\r\n    for (const element of result) {\r\n        const code = element.textContent;\r\n        const extension = element.getAttribute('data-language');\r\n        const fileName = `${slug}-script-${index}.${extension}`;\r\n\r\n        // if the gist for the file already exists, then don't create a new one\r\n        if (fileNames.includes(fileName)) {\r\n            const existingGist = responseData.find(\r\n                (data) => Object.keys(data.files).includes(fileName)\r\n            );\r\n\r\n            gistUrls.push(existingGist.html_url);\r\n        } else {\r\n            const res = await nodeFetch('https://api.github.com/gists', {\r\n                method: 'POST',\r\n                headers: {\r\n                    Authorization: `token ${gistAccessToken}`,\r\n                    'Content-type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    description: `Code for post \"${postTitle}\"`,\r\n                    public: true,\r\n                    files: {\r\n                        [fileName]: {\r\n                            content: code,\r\n                        },\r\n                    },\r\n                }),\r\n            });\r\n\r\n            const data = await res.json();\r\n            gistUrls.push(data.html_url);\r\n        }\r\n\r\n        index += 1;\r\n    }\r\n\r\n    return gistUrls;\r\n};\r\n```\r\n\r\n## Rendering the new HTML\r\nIn the React component template, I have access to a new attribute called `mediumHTML` inside the `pageContext`, and that is the new HTML with all code snippets replaced with GitHub Gists.\r\n\r\n```javascript\r\nimport React from 'react';\r\nimport { graphql } from 'gatsby';\r\n\r\nconst MediumPostTemplate = ({ data, pageContext }) => {\r\n    const { markdownRemark } = data;\r\n    const { title } = markdownRemark.frontmatter;\r\n    const { mediumHTML } = pageContext;\r\n\r\n    return (\r\n        <article>\r\n            <header>{title}</header>\r\n            <section\r\n                dangerouslySetInnerHTML={{ __html: mediumHTML }}\r\n            />\r\n        </article>\r\n    );\r\n};\r\n\r\nexport default MediumPostTemplate;\r\n\r\nexport const pageQuery = graphql`\r\n    query MediumPostBySlug($slug: String!, $categoryImage: String) {\r\n        markdownRemark(fields: { slug: { eq: $slug } }) {\r\n            frontmatter {\r\n                title\r\n            }\r\n        }\r\n    }\r\n`;\r\n```\r\n\r\nNow I can go into the [Medium import tool](https://medium.com/p/import) and import any post via the `/blog-post-url/medium-import`.\r\n\r\nWith all this automation in place, expect to see a lot more [Medium posts from me](https://pablopirata.medium.com/) 😊.\r\n","frontmatter":{"tags":["github","gist","gatsby","javascript","api","react","jsdom","node-fetch"],"categories":["coding"],"allowComments":true,"publishOnMedium":false,"cover":null,"date":"2021-10-24T00:00:00.000Z","id":null,"path":"how-to-import-gatsby-posts-into-medium-with-gist-code-snippets","show":true,"title":"How to import Gatsby posts into Medium with Gist code snippets","hideExcerpt":false,"subtitle":""}},"language":"pt-br","intl":{"language":"pt-br","languages":["en","pt-br"],"messages":{"site_title":"pablo.gg","title":"Título","author":"@thepiratepablo","search_placeholder":"Buscar...","about":"Sobre","photos":"Fotos","archive":"Arquivo","contact":"Contato","close":"Fechar","contact_page":"Página de contato","see_more":"Veja mais posts","built_with":"Feito com ","buy_me_a_soda":"Me pague uma bebida","blog":"Blog","blog_posts":"Posts do blog","go_to_post":"Ir para o post","search":"Busca","loading":"Carregando...","search_results":"Resultados de busca","search_results_for":"{quantity} resultados de busca para: \"{query}\"","search_for_query":"Buscar por \"{query}\"","no_results":"Sem resultados","home":"Home","description":"Apenas mais um blog pessoal","go_back":"Voltar para home","thats_me":"Esse sou eu!","got_it":"Entendi!","check_it_out":"Confira!","we_are":"Faltam","e3":"E3","away_from_next_sgf":"para a Summer Game Fest 2025","away_from_next_gamescom":"para a Gamescom 2024","sgf_countdown":"Contador para Summer Game Fest","gamescom_countdown":"Contador para Gamescom","e3_paragraph_1":"Esta página já contou com uma contagem regressiva para o próximo evento E3, um momento que inúmeros jogadores e profissionais da indústria aguardavam ansiosamente a cada ano. E3 não era apenas um evento; era uma celebração da nossa paixão compartilhada por videogames, um lugar onde sonhos se realizavam e memórias eram feitas.","e3_paragraph_2":"Desde os anúncios eletrizantes até as demos práticas, a E3 era o coração do mundo dos jogos. Ela reunia pessoas de todos os cantos do globo, unidas pelo amor aos jogos. Para muitos, era uma chance de conhecer seus heróis, descobrir novos títulos e experimentar a emoção das últimas inovações em tecnologia de jogos.","e3_paragraph_3":"No entanto, à medida que o cenário dos jogos evoluiu, também evoluiu a maneira como nos conectamos e celebramos nossa paixão. Embora a E3 tenha chegado ao fim, o espírito de excitação e comunidade que ela promoveu continua vivo. Agora esperamos por novas maneiras de nos reunir, compartilhar nosso amor pelos jogos e criar novas memórias.","e3_paragraph_4":"Embora a contagem regressiva tenha acabado, o legado da E3 permanecerá para sempre em nossos corações, nos lembrando das jornadas incríveis que fizemos e dos laços que formamos ao longo do caminho.","sec":"Seg","secs":"Segs","min":"Min","mins":"Mins","hour":"Hora","hours":"Horas","day":"Dia","days":"Dias","month":"Mês","months":"Meses","year":"Ano","years":"Anos","recent_posts":"Posts recentes","email":"E-mail","twitter":"Twitter","name":"Nome","page":"Página","fill_this_want_reply":"Preencha isso se quiser que eu entre em contato com você","sorry_this_post_unavailable_language":"Desculpe, este post não está disponível no idioma que você escolheu","language":"Idioma","comment":"Comentário","comments":"Comentários","no_comments":"Nenhum comentário.","post_comment":"Publicar comentário","send_message":"Enviar mensagem","message":"Mensagem","post_a_comment":"Publicar um comentário","your_comment_submitted":"Seu comentário foi enviado com sucesso.","your_message_submitted":"Sua mensagem foi enviada com sucesso.","on":"em","ok":"Ok","copy":"Copiar","copied":"Copiado","photo_num":"Foto {num}","the_matrix_has_you":"The Matrix has you...","about_paragraph_1":"Entusiasta de tecnologia desde pequeno, sempre me interessei por computadores e videogames.","about_paragraph_2":"Me formei em Tecnologia da Informação na Faculdade Estácio de Sá e sempre procuro me informar sobre novas tecnologias e me envolver em novos projetos de desenvolvimento, alguns deles o código fonte pode ser encontrado no GitHub.","cookie_banner_consent":"Ao usar este site, você concorda com o uso de cookies para oferecer uma melhor experiência.","written_in":"Escrito em ","no_post_this_tag":"Nenhum post em Português contém essa tag.","tags":"Tags","tag_colon":"Tag: ","tags_colon":"Tags: ","posts_tagged":"Posts com a tag ","categories":"Categorias","category":"Categoria","category_colon":"Categoria: ","posts_on_category":"Posts na categoria ","related_posts":"Posts relacionados","read_time":"🕒 {time} min. de leitura","create_post":"Criar Post","show":"Mostrar","date":"Data","download":"Download","add_tag":"Adicionar Tag","hide_excerpt":"Esconder Excerpt","publish_on_medium":"Publicar no Medium","allow_comments":"Permitir Comentários","subtitle":"Subtítulo","you_must_be_truly_desperate":"Você deve estar muito desesperado para me pedir ajuda","game.game_title":"pablo.gg - O Jogo","game.next":"Próxima","game.ok":"Ok","game.loading_asset_colon":"Carregando asset:","game.loading":"Carregando...","game.characters.npc_01":"Frost","game.characters.npc_02":"Gavin","game.characters.npc_03":"Giles","game.characters.npc_04":"Godfrey","game.characters.npc_05":"Hugh","game.characters.npc_06":"Ivar","game.characters.npc_07":"Leopold","game.characters.npc_08":"Lucian","game.characters.npc_09":"Gumercindo","game.characters.npc_10":"Mr. Flower","game.characters.npc_11":"Maxim","game.characters.npc_12":"Milo","game.characters.npc_13":"Otto","game.characters.npc_14":"Palmer","game.characters.npc_15":"Quentin","game.characters.npc_16":"Sebastian","game.characters.npc_17":"Neville","game.characters.npc_18":"Cassian","game.characters.npc_19":"Balthasar","game.characters.sign_01":"Placa","game.characters.book_01":"Livro","game.characters.home_page_city_sign":"Placa","game.characters.coding_category_city_sign_01":"Placa","game.characters.coding_category_city_sign_02":"Placa","game.characters.events_category_city_sign":"Placa","game.characters.funny_category_city_sign":"Placa","game.characters.gadgets_category_city_sign_01":"Placa","game.characters.gadgets_category_city_sign_02":"Placa","game.characters.games_category_city_sign":"Placa","game.characters.general_category_city_sign":"Placa","game.characters.tips_category_city_sign":"Placa","game.characters.toys_category_city_sign":"Placa","game.characters.sword":"Info","game.characters.push":"Info","game.gamepad.a_button":"Botão A","game.gamepad.b_button":"Botão B","game.gamepad.d_pad_left":"D-Pad Esquerda","game.gamepad.d_pad_up":"D-Pad Cima","game.gamepad.d_pad_right":"D-Pad Direita","game.gamepad.d_pad_down":"D-Pad Baixo","game.gamepad.start_button":"Botão Start","game.menu.start":"Começar","game.menu.exit":"Sair","game.menu.settings":"Configurações","game.start_menu.save_game":"Salvar Jogo","game.start_menu.exit":"Sair","game.game_over.game_over":"Game Over","game.game_over.retry":"Tentar Novamente","game.game_over.exit":"Sair","game.browse_posts.choose_a_post":"Escolha um post para ler","game.dialogs.npc_01.01":"Ei, você finalmente acordou!","game.dialogs.npc_01.02":"O quê, você não sabe onde está?","game.dialogs.npc_01.03":"Não seja bobo, você está na Cidade Página Inicial, lembra?","game.dialogs.npc_01.04":"Esta cidade foi fundada por Pablo Montenegro para ser o início de sua jornada","game.dialogs.npc_01.05":"Explore o mundo e encontre outras cidades onde você possa ler o conhecimento acumulado de nossa civilização...","game.dialogs.npc_01.06":"... algumas pessoas chamam de \"Posts do Blog\", não sei por quê...","game.dialogs.npc_02.01":"Tenha cuidado com os Slimes que vivem no mundo aberto.","game.dialogs.npc_02.02":"Pressione ESPAÇO para usar sua espada","game.dialogs.npc_02.03":"O que é ESPAÇO? Eu não faço ideia.","game.dialogs.npc_03.01":"Olá, bem vindo a nossa biblioteca","game.dialogs.npc_03.02":"Temos apenas um livro, que contém todas as publicações da categoria dessa cidade.","game.dialogs.npc_03.03":"Vá dar uma olhada!","game.dialogs.npc_04.01":"Eu gosto de caracóis","game.dialogs.npc_05.01":"Frases incompletas podem causar","game.dialogs.npc_06.01":"O vermelho é mais verde do que o roxo, com certeza.","game.dialogs.npc_07.01":"Ter barba é o novo não ter barba","game.dialogs.npc_08.01":"E aí","game.dialogs.npc_09.01":"\" - Cooper, o que está fazendo?\"\n\" - Atracando.\"","game.dialogs.npc_10.01":"Eu deveria comprar um barco","game.dialogs.npc_11.01":"Conhece a piada do não nem eu? Não? Nem eu!","game.dialogs.npc_12.01":"Eu limpo o banheiro e resgato a princesas, vida boa, certo?","game.dialogs.npc_13.01":"Queremos as ondas de rádio de volta","game.dialogs.npc_14.01":"Salve a líder de torcida, salve o mundo","game.dialogs.npc_15.01":"Olá, como vai?","game.dialogs.npc_15.02":"OK, tchau!","game.dialogs.npc_16.01":"Um canguru é realmente apenas um coelho com esteróides","game.dialogs.npc_17.01":"Pela 216ª vez, ele disse que pararia de beber refrigerante após esta última Coca","game.dialogs.npc_18.01":"Nada e tudo é possímpossivel","game.dialogs.npc_19.01":"Para uma cidade chamada \"Eventos\", não há muito acontecendo...","game.dialogs.sign_01.01":"Parabéns, você pode ler isso!","game.dialogs.book_01.01":"Hey, obrigado por testar esse novo jeito bem esquisito de acessar o meu site","game.dialogs.book_01.02":"Este projeto não seria possível sem o incrível trabalho de muitas pessoas, como:","game.dialogs.book_01.03":"ArMM1998 - Pelos sprites dos personagens e os tilesets","game.dialogs.book_01.04":"PixElthen - Pelos sprites do slime","game.dialogs.book_01.05":"pixelartm - Pelos sprites do chapéu de pirata","game.dialogs.book_01.06":"jkjkke - Pela imagem da tela de Game Over","game.dialogs.book_01.07":"KnoblePersona - Pela imagem da tela do menu inicial","game.dialogs.book_01.08":"Min - Pelo sprite do livro aberto","game.dialogs.book_01.09":"E claro, ao Richard Davey por ter criado o Phaser.io!","game.dialogs.home_page_city_sign":"Cidade Página Inicial","game.dialogs.coding_category_city_sign.01":"Cidade da Categoria Programação","game.dialogs.coding_category_city_sign.02":"Cidade da Categoria Programação","game.dialogs.events_category_city_sign":"Cidade da Categoria Eventos","game.dialogs.funny_category_city_sign":"Cidade da Categoria Engraçado","game.dialogs.gadgets_category_city_sign.01":"Cidade da Categoria Eletrónicos","game.dialogs.gadgets_category_city_sign.02":"Cidade da Categoria Eletrónicos","game.dialogs.games_category_city_sign":"Cidade da Categoria Jogos","game.dialogs.general_category_city_sign":"Cidade da Categoria Geral","game.dialogs.tips_category_city_sign":"Cidade da Categoria Dicas","game.dialogs.toys_category_city_sign":"Cidade da Categoria Brinquedos","game.dialogs.sword_item_description":"Agora você pode atacar, pressione ESPAÇO para usar sua espada.","game.dialogs.push_item_description":"Agora você pode empurrar alguns objetos, pressione ESPAÇO na frente de um objeto para empurrá-lo.","zelda_timeline.title":"Timeline de Zelda","zelda_timeline.timeline_split":"Divisão da Timeline","zelda_timeline.timeline_unification":"Timeline Unificada","zelda_timeline.icons_from":"Os ícones usados nesta página são do zeldauniverse.net e game-icons.net","zelda_timeline.creation":"Criação","zelda_timeline.creation_of_land_sky":"A Criação da Terra e do Céu","zelda_timeline.goddess_hylia_and_sky_era":"Deusa Hylia e a Era do Céu","zelda_timeline.skyward_sword":"Skyward Sword","zelda_timeline.the_ancient_battle":"A Antiga Batalha e a reencarnação da Deusa Hylia","zelda_timeline.return_to_surface":"O retorno à superfície","zelda_timeline.era_of_chaos":"Era do caos","zelda_timeline.sacred_realm_sealed":"O Sacred Realm é selado","zelda_timeline.era_of_prosperity":"Era da Prosperidade","zelda_timeline.establishment_of_hyrule":"O Reino de Hyrule é estabelecido","zelda_timeline.force_era":"Era da Força","zelda_timeline.the_minish_cap":"The Minish Cap","zelda_timeline.rise_of_evil_vaati":"A Ascensão do Maligno Vaati","zelda_timeline.four_swords":"Four Swords","zelda_timeline.resurrection_of_vaati":"A Ressurreição de Vaati","zelda_timeline.era_of_the_hero_of_time":"Era do Herói do Tempo","zelda_timeline.hyrulean_civil_war":"Guerra Civil Hyruleana","zelda_timeline.ocarina_of_time":"Ocarina of Time","zelda_timeline.sacred_realm_becomes_dark_world":"O Sacred Realm se torna o Dark World","zelda_timeline.ganondorf_becomes_ganon":"Ganondorf se torna Ganon","zelda_timeline.hero_is_defeated":"O herói é derrotado","zelda_timeline.decline_of_last_hero":"O declínio de Hyrule e o último herói","zelda_timeline.the_imprisoning_war":"A Guerra do Aprisionamento","zelda_timeline.era_of_dark_and_light":"Era de Luz e Escuridão","zelda_timeline.a_link_to_the_past":"A Link to the Past","zelda_timeline.resurrection_of_ganon":"A Ressurreição de Ganon","zelda_timeline.resurrection_of_ganon_is_prevented":"A ressurreição de Ganon é evitada","zelda_timeline.links_awakening":"Link's Awakening","zelda_timeline.oracle_of_ages_and_seasons":"Oracle of Ages e Oracle of Seasons","zelda_timeline.a_link_between_worlds":"A Link Between Worlds","zelda_timeline.tri_force_heroes":"Tri Force Heroes","zelda_timeline.the_gold_era":"The Gold Era","zelda_timeline.monarchs_of_hyrule_use_triforce":"Os Monarcas de Hyrule usam a Triforce","zelda_timeline.era_of_decline":"A Era do Declínio","zelda_timeline.tragedy_of_princess_zelda_1":"A Tragédia da Princesa Zelda I","zelda_timeline.the_legend_of_zelda":"The Legend of Zelda","zelda_timeline.adventure_of_link":"Adventure of Link","zelda_timeline.hero_defeated":"Hero Derrotado","zelda_timeline.child_era":"Era Infantil","zelda_timeline.adult_era":"Era Adulta","zelda_timeline.sacred_realm_protected":"Sacred Realm está protegido","zelda_timeline.twilight_realm_and_legacy_of_hero":"O Twilight Realm e o legado do Herói","zelda_timeline.majoras_mask":"Majora's Mask","zelda_timeline.prince_of_thieves_is_executed":"O Príncipe dos Ladrões Ganondorf é executado","zelda_timeline.twilight_era":"A Era do Twilight","zelda_timeline.twilight_princess":"Twilight Princess","zelda_timeline.shadow_invasion":"A invasão das sombras","zelda_timeline.shadow_era":"A Era das Sombras","zelda_timeline.four_swords_adventures":"Four Swords Adventures","zelda_timeline.reincarnation_of_ganondorf":"A Reencarnação de Ganondorf","zelda_timeline.ganondorf_is_sealed":"Ganondorf é selado","zelda_timeline.hero_of_wind_and_new_world":"O Herói do Vento e um Novo Mundo","zelda_timeline.era_without_a_hero":"A era sem um herói","zelda_timeline.ganondorf_is_resurrected":"Ganondorf é ressuscitado","zelda_timeline.hyrule_is_sealed_and_flooded":"Hyrule é selado e então inundado","zelda_timeline.era_of_the_great_sea":"A Era do Great Sea","zelda_timeline.the_wind_waker":"The Wind Waker","zelda_timeline.era_of_the_great_voyage":"A Era da Grande Viagem","zelda_timeline.phantom_hourglass":"Phantom Hourglass","zelda_timeline.era_of_hyrule_rebirth":"A Era do Renascimento de Hyrule","zelda_timeline.new_continent_discovered":"Novo continente descoberto","zelda_timeline.new_hyrule_is_founded":"Um novo reino de Hyrule é fundado","zelda_timeline.spirit_tracks":"Spirit Tracks","zelda_timeline.evil_king_malladus_is_resurrected":"O Rei Maligno Malladus é ressuscitado","zelda_timeline.age_of_calamity":"Age of Calamity","zelda_timeline.breath_of_the_wild":"Breath of the Wild","zelda_timeline.era_of_the_wilds":"A Era dos Selvagens","zelda_timeline.calamity_ganon_is_sealed":"Calamity Ganon é Selado. A tecnologia é proibida, levando alguns Sheikah a formar o Yiga Clan","zelda_timeline.divine_beasts_are_cleansed":"As Bestas Divinas são purificadas e Calamity Ganon é Selado","zelda_timeline.tears_of_the_kingdom":"Tears of the Kingdom","zelda_timeline.hyrule_kingdom_is_teared_apart":"Ganondorf é ressuscitado (Será?)","blog_categories.games":"Jogos","blog_categories.general":"Geral","blog_categories.tips":"Dicas","blog_categories.events":"Eventos","blog_categories.coding":"Programação","blog_categories.funny":"Engraçado","blog_categories.toys":"Brinquedos","blog_categories.gadgets":"Eletrónicos","e3_2012_photos.title":"E3 2012","e3_2012_photos.description":"Em junho de 2012 participei da E3 como imprensa para uma cobertura completa para o Nintendo Blast.","e3_2013_photos.title":"E3 2013","e3_2013_photos.description":"Em junho de 2013 participei da E3 como imprensa para uma cobertura completa para o Game Blast.","e3_2014_photos.title":"E3 2014","e3_2014_photos.description":"Em junho de 2014 participei da E3 como imprensa para uma cobertura completa para o Game Blast.","e3_2015_photos.title":"E3 2015","e3_2015_photos.description":"Em junho de 2015 participei da E3 como imprensa para uma cobertura completa para o Game Blast e Game Over TV.","e3_2017_photos.title":"E3 2017","e3_2017_photos.description":"Em junho de 2017 participei da E3 como imprensa para uma cobertura completa para o PlayReplay e Game Over TV.","e3_2019_photos.title":"E3 2019","e3_2019_photos.description":"Em junho de 2019 participei da E3 como imprensa para uma cobertura completa para o PlayReplay.","gamescom_2019_photos.title":"Gamescom 2019","gamescom_2019_photos.description":"Em agosto de 2019 participei da Gamescom como imprensa para uma cobertura completa para o PlayReplay.","san_francisco_2019_photos.title":"San Francisco 2019","san_francisco_2019_photos.description":"Em setembro de 2019, viajei para San Francisco para o show do Metallica S&M2.","forty_two_page.title":"Quarenta e Dois","forty_two_page.description":"Até mais, e obrigado pelos peixes!","projects_page.title":"Projetos","projects_page.description":"Aqui está uma lista de alguns dos meus projetos pessoais favoritos.","projects_page.gatsbyMaterialUiBlogDescription":"Um simples Gatsby Blog Starter com Material UI.","projects_page.contractBuilderDescription":"O Contract Builder é um projeto de código aberto gratuito que permite a qualquer pessoa manter e construir facilmente qualquer tipo de contrato (documentos legais, processos judiciais, aluguel, acordos, construção e assim por diante) usando o Google Spreadsheets. Este foi desenvolvido como um projeto pessoal para ajudar uma amiga que estava com dificuldades de gastar até uma hora para fazer um contrato personalizado, agora ela consegue fazer em menos de 5 minutos. Hooray!","projects_page.resumeBuilderDescription":"Resume Builder é um projeto de código aberto gratuito que permite a qualquer pessoa manter e construir facilmente qualquer tipo de currículo usando o Google Spreadsheets. Este foi desenvolvido como um projeto pessoal para ajudar um amigo que estava com dificuldades de gastar até uma hora para fazer um currículo personalizado.","projects_page.magentoChatbotDescription":"Com este módulo, você pode integrar totalmente a sua loja Magento com os aplicativos de chat mais populares do mercado. Isso significa que simplesmente instalando este módulo e alguns cliques você pode ter uma nova forma de mostrar e vender seus produtos aos seus clientes. Muito fácil de usar! Experimente agora, é GRÁTIS.","projects_page.jamStackSortenerDescription":"Este é um POC de um encurtador de URL básico desenvolvido com Gatsby.","projects_page.gotinhaDescription":"Sempre foi meu sonho fazer meu próprio jogo, e depois de experimentar o Unity alguns anos atrás, decidi tentar novamente com algo com o qual estou mais familiarizado: Javascript. Como desenvolvedor front-end, Javascript já é a linguagem com a qual escrevo a maior parte do meu código no trabalho e também em meus projetos pessoais, e após uma rápida pesquisa consegui encontrar o incrível PhaserJS Framework para construção de jogos web 2D.","notfound.title":"404: Não encontrado","notfound.header":"404 NÃO ENCONTRADO","notfound.description":"Desculpe, esta página parece não existir. Talvez os arquivos estejam incompletos?","seo_keywords.developer":"desenvolvedor","seo_keywords.development":"desenvolvimento","seo_keywords.javascript":"javascript","seo_keywords.es6":"es6","seo_keywords.e3":"e3","seo_keywords.sgf":"sgf","seo_keywords.gamescom":"gamescom","seo_keywords.countdown":"contador","seo_keywords.archive":"arquivo","seo_keywords.about_me":"sobre mim","seo_keywords.personal_blog":"blog pessoal","seo_keywords.personal_projects":"projetos pessoais","seo_keywords.travels":"viagens","seo_keywords.tips":"dicas","seo_keywords.lifehacks":"truques de produtividade","seo_keywords.reviews":"analises","seo_keywords.games":"games","seo_keywords.timeline":"linha do tempo","seo_keywords.photos":"fotos","cookie_law.we_use_cookies":"Usamos cookies para garantir que você obtenha a melhor experiência em nosso site. Ao usar nosso site, você concorda com nossa ","cookie_law.title":"Política de cookies","cookie_law.what_are_cookies":"O que são cookies?","cookie_law.what_are_cookies_text":"Como é prática comum em quase todos os sites profissionais, este site usa cookies, que são pequenos arquivos baixados para o seu computador, para melhorar a sua experiência. Esta página descreve quais informações eles coletam, como as usamos e por que às vezes precisamos armazenar esses cookies. Também compartilharemos como você pode evitar que esses cookies sejam armazenados, no entanto, isso pode diminuir ou 'quebrar' certos elementos da funcionalidade do site. Para obter mais informações gerais sobre cookies, leia ","cookie_law.what_are_cookies_more_info_url":"https://pt.wikipedia.org/wiki/Cookie_(informática)","cookie_law.how_we_use_cookies":"Como usamos cookies","cookie_law.how_we_use_cookies_text":"Usamos cookies por vários motivos detalhados abaixo. Infelizmente, na maioria dos casos, não há opções padrão da indústria para desabilitar cookies sem desabilitar completamente a funcionalidade e os recursos que eles adicionam a este site. Recomenda-se que você deixe todos os cookies se não tiver certeza se precisa deles ou não, caso sejam usados para fornecer um serviço que você usa.","cookie_law.disabling_cookies":"Desativando cookies","cookie_law.disabling_cookies_text":"Você pode impedir a configuração de cookies ajustando as configurações do seu navegador (consulte a Ajuda do navegador para saber como fazer isso). Esteja ciente de que a desativação de cookies afetará a funcionalidade deste e de muitos outros sites que você visita. A desativação dos cookies normalmente resultará na desativação de certas funcionalidades e recursos deste site. Portanto, é recomendável que você não desative os cookies.","cookie_law.the_cookies_we_set":"Os cookies que definimos","cookie_law.site_preferences_cookie":"Cookies de preferências do site","cookie_law.site_preferences_cookie_text":"Para lhe proporcionar uma excelente experiência neste site, fornecemos a funcionalidade para definir as suas preferências de funcionamento deste site quando o utiliza. Para lembrar suas preferências, precisamos definir cookies para que essas informações possam ser chamadas sempre que você interagir com uma página afetada por suas preferências.","cookie_law.third_party_cookies":"Cookies de terceiros","cookie_law.third_party_cookies_text":"Em alguns casos especiais, também usamos cookies fornecidos por terceiros confiáveis. A seção a seguir detalha quais cookies de terceiros você pode encontrar neste site.","cookie_law.third_party_cookies_item_1":"Este site usa o Google Analytics, que é uma das soluções de análise mais difundidas e confiáveis na web para nos ajudar a entender como você usa o site e como podemos melhorar sua experiência. Esses cookies podem rastrear coisas como quanto tempo você passa no site e as páginas que você visita para que possamos continuar a produzir conteúdo envolvente. Para obter mais informações sobre os cookies do Google Analytics, consulte a página oficial do Google Analytics.","cookie_law.third_party_cookies_item_2":"De vez em quando, testamos novos recursos e fazemos mudanças sutis na maneira como o site é fornecido. Quando ainda estamos testando novos recursos, esses cookies podem ser usados para garantir que você receba uma experiência consistente enquanto estiver no site, garantindo que entendemos quais otimizações nossos usuários mais apreciam.","cookie_law.more_information":"Mais informações","cookie_law.more_information_text":"Esperamos que isso tenha esclarecido as coisas para você e, conforme mencionado anteriormente, se há algo que você não tem certeza se precisa ou não, geralmente é mais seguro deixar os cookies ativados, caso eles interajam com um dos recursos que você usa em nosso site. No entanto, se você ainda estiver procurando por mais informações, entre em contato conosco através de nossa "},"routed":true,"originalPath":"/blog/coding/eu-criei-um-jogo-para-acessar-o-conteudo-do-meu-blog-com-phaser-e-react/","redirect":true,"redirectDefaultLanguageToRoot":false,"defaultLanguage":"en","fallbackLanguage":"","ignoredPaths":[]},"blogLocale":"pt-br"}},
    "staticQueryHashes": ["1156153307","1355482417","1591365477","1628619374","2127381735","2288279559","26159077","3566410298","3649515864","3847325417","3982724423","928834867"]}