{
    "componentChunkName": "component---src-pages-game-jsx",
    "path": "/game/",
    "result": {"data":{"site":{"siteMetadata":{"siteUrl":"https://pablo.gg"}},"allMarkdownRemark":{"edges":[{"node":{"excerpt":"I often have friends asking me, “Pablo, how do you manage to…","html":"<p>I often have friends asking me, “Pablo, how do you manage to stay so calm and collected in the face of complex technical challenges?” Well, the truth is, I don’t. I just write blog posts about them to make it seem like I do. This is one of those stories.</p>\n<p>I recently found myself needing to crack open the values of cookies coming from a Laravel application, read them, update them, and then patch them back up in a way the Laravel application wouldn’t even notice. Sounds like the plot of a Mission Impossible movie, right? Let’s roll with that, and I’m Tom Cruise.</p>\n<h2 id=\"the-infamous-nextjs-migration\" style=\"position:relative;\"><a href=\"#the-infamous-nextjs-migration\" aria-label=\"the infamous nextjs migration permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The infamous Next.js migration</h2>\n<p>After migrating from <a href=\"https://medium.com/studocu-techblog/migrating-from-coffeescript-to-javascript-es6-ed73bcae851e\" target=\"_blank\" rel=\"noreferrer\">CoffeeScript to ES6</a> and then from <a href=\"https://medium.com/studocu-techblog/how-we-migrated-our-codebase-to-typescript-c7962f1b877a\" target=\"_blank\" rel=\"noreferrer\">ES6 to TypeScript</a>, it was time for another major refactor: <a href=\"https://medium.com/studocu-techblog/migrating-from-a-monolith-to-next-js-at-studocu-part-1-4b0baf3d5fe9\" target=\"_blank\" rel=\"noreferrer\">detaching our frontend from Laravel into a separate Next.js app</a>.</p>\n<p>In order to improve performance, developer experience, and employer desirability (shameless plug, we’re hiring at <a href=\"https://jobs.studocu.com/job-postings\" target=\"_blank\" rel=\"noreferrer\">Studocu</a> <em>wink-wink</em>), we needed a robust frontend framework that could handle our growing user base and feature set. Next.js seemed like the perfect fit.</p>\n<p>This theoretically would help us stop reinventing the wheel - like writing endless lines of Webpack configurations - and focus on what really matters: building features that our users love. So the plan is that instead of having one spaghetti codebase, we would have two smaller, noodle-like codebases.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.109375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC2klEQVQozy2SV08aAQCA79c0afpgk/ah66EacVAirjiq1lkVsYjQoETREjc2NVpNIY5KVVC0FRcOhhbkuDvAosZto3DcnbdYmva1MfX1S76XLx9whTqvUCeDu3D/dpjaIVGQRu3XFMTgEE3A2KWDDDopDGTwW8ISUIRy4ygYoT0sAQME6oyS8E94+dPU8Pz8qGG0cUJdv2zWaZd0c9ODF6c2hkSo4J3M4K5pvbpLITEMd5MoCNAYCO+ZB9QftbLi5obyPmmaouGtuDa/9f0bgzLPNtMZON1kCJhEwSjjdVj1woK80sL87NTElYUxIER7rTZDn7RALs7rFfKVTWXy2uTytEdPHj1oLubMNeT4NrQhZofFob8Rn3ltqio1sbIgu6zo9apxDMAxeFopqM1IkL98mJX4gsuJS3t+jxP/rDL9cY0of6gx+wAyxEI7GyvjR3urYdKt1fS0SqqHv/QE/U4gcLo1UZMqi48T81Mk5QmSzPuykpTu+rx2abGoKk2hFCwZ1Rbz0snx0bbDen64HqG9/hMbexsPBigC+tEvlBTymkXZnWKO8RsviHDPkazepsyeUp5UUWtaH/fCpvXVRYfdFDjfjNHuGOOOUB4ag4DAhUOl7u0SZnW/y60TF0OWjEsPd0XPaf+QI6/OHRAleZ1T12EfvG24PLNeM96FeW1Xa9Oy7jNDQACFIZrZ8WZ5iUxc2iJKt37n67WvNB1PVZLk/oqkMVVV4NTKEEiEct+Ed+wWQ5u8wDbPVdbx15YmAZZA9vctM0bNYEuFUpDRUcmTNlUo2ouE8jrdUNvZ1iQbBCkcIlHwJuRdWdR1yDLXZ7j1ggzj7AhAoCAZdOG4+9hn8pj1v5ZH3Kavc1ajFVzALu0s6SFxiMJc//ci/M4hVUtdeVGfqsX/2w5QOETjME0gYXY3Gj2Ixg5jsYM/4d3rkI8lvTSOUNidTGOu8BVCE9DJ3hqFucIk8g/70eAbl2hLKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Spaghetti code\"\n        title=\"Spaghetti code\"\n        src=\"/static/63a275658d485cabf21527594c9d1a0d/42a19/spaghetti-code.png\"\n        srcset=\"/static/63a275658d485cabf21527594c9d1a0d/e3135/spaghetti-code.png 256w,\n/static/63a275658d485cabf21527594c9d1a0d/06341/spaghetti-code.png 512w,\n/static/63a275658d485cabf21527594c9d1a0d/42a19/spaghetti-code.png 1024w,\n/static/63a275658d485cabf21527594c9d1a0d/e8464/spaghetti-code.png 1536w,\n/static/63a275658d485cabf21527594c9d1a0d/16e03/spaghetti-code.png 1651w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Spaghetti code</figcaption>\n  </figure></p>\n<h2 id=\"but-why\" style=\"position:relative;\"><a href=\"#but-why\" aria-label=\"but why permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>But why?</h2>\n<p>As <a href=\"https://www.grammy.com/artists/ryan-reynolds/243495\" target=\"_blank\" rel=\"noreferrer\">one-time Grammy-nominated Ryan Reynolds</a> once said: But why?</p>\n<p><img src=\"/f1547924a1c5e48fc3d7132349267d59/but-why.gif\" alt=\"Actual footage of readers of this post\"></p>\n<p>Good question! Here’s the thing: we decided that the best way to implement this transition to Next.js was to move one page at a time. This means we would have to share cookies between the Laravel and Next.js applications. While this brings lots of benefits, it also presents some unique challenges.</p>\n<p>The biggest challenge is that Laravel and Next.js don’t exactly speak the same language when it comes to cookie encryption. Laravel uses its own encryption algorithm and, by default, encrypts every cookie using a private key. Without this key, and without reverse-engineering Laravel’s algorithm, it’s impossible to read the data on the Next.js side.</p>\n<p>On the other hand, Next.js is quite unopinionated about how you store your cookies. Since we were spinning up a new Next.js application from scratch, this was a perfect opportunity to align it with Laravel’s encryption method, allowing us to freely decrypt and encrypt Laravel’s cookies directly in Next.js without risking breaking anything.</p>\n<h2 id=\"diving-into-laravels-cookie-encryption\" style=\"position:relative;\"><a href=\"#diving-into-laravels-cookie-encryption\" aria-label=\"diving into laravels cookie encryption permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Diving into Laravel’s cookie encryption</h2>\n<p>Before we could solve this problem, we needed to understand how Laravel encrypts its cookies. Turns out, there isn’t a whole lot of information out there about this. In an age where it’s hard to find something unique to write a blog post about, I thought this would be the perfect opportunity to share some insights.</p>\n<p>So, how do we figure out how Laravel encrypts its cookies? By diving into <a href=\"https://github.com/laravel/laravel\" target=\"_blank\" rel=\"noreferrer\">the source code</a>, of course! Fortunately, Laravel’s source code is quite readable and well-organized, so it didn’t take long to track down the relevant parts.</p>\n<h3 id=\"application-key\" style=\"position:relative;\"><a href=\"#application-key\" aria-label=\"application key permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Application Key</h3>\n<p>Laravel uses a private key, known as the Application Key, for encryption, which can be generated using the <code class=\"language-text\">php artisan key:generate</code> command. It employs a <code class=\"language-text\">AES-256-CBC</code> cipher for encryption, which requires an Initialization Vector (IV). Additionally, Laravel uses a Message Authentication Code (MAC) to ensure the integrity of the encrypted data.</p>\n<h3 id=\"initialization-vector\" style=\"position:relative;\"><a href=\"#initialization-vector\" aria-label=\"initialization vector permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Initialization Vector</h3>\n<p>The IV is a random value that’s used to ensure that the same plaintext doesn’t encrypt to the same ciphertext. Laravel generates a random IV for each cookie and stores it alongside the encrypted value.</p>\n<h3 id=\"message-authentication-code\" style=\"position:relative;\"><a href=\"#message-authentication-code\" aria-label=\"message authentication code permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Message Authentication Code</h3>\n<p>The MAC is a cryptographic checksum that ensures the integrity of the encrypted data. Laravel generates a MAC using the IV and the encrypted value, which is then used to verify the integrity of the data during decryption.</p>\n<h3 id=\"flow-chart\" style=\"position:relative;\"><a href=\"#flow-chart\" aria-label=\"flow chart permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Flow chart</h3>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 125.78125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFElEQVQ4y32UaXLjNhCFdf87JZUcIDWxtVnyjCURXEDsK7ETKYoux47tdOFHE4UPeHjdxCbGTEl4G4R4Qjwl4fICz+cGAMpYIth3rcTIMRoJDoL7Wuda68ZNwdrgfHIueZ9jLCnNIWSlLCFccK2Vm2y8vAAprPfZ+aSVK6UssHdxzWqtpRRjHEIUY2aMu8/N6yHv4w35ALspHvftw8Nt+9i8/MLvgXmev4J9LLkoZaQ0IyJau/vSGkJMKdWv4gOcU1Fq6jqEEPc+rvpLKdZOKaW8pPO3cAz55xnt9+Bw6Eeoaq1aW4Q5hIRQiTCfJv81HEKS3FJi4MAxUpxZJScplkGJFMxIYZV0hAjBjVaOEMmZXh3Y1FpzLhgzOJChR1KZea4551LmEOJdc5nn2Vob43Kj+13yKmFjTXRTljIgpBi1xsTJJmOWsmO01Nm5bE3i3GoVrEmCT0r5Jbdxg5E9PeH9Dv79o9lt+90Wdq3Go3v4AX7/7a8//3jcbQdKPEaGUi94RKOh1AkeCbZLh8FBXC/4dsXXK75csNE+xtzcSHOjLeAA0JxLzmk1KaU03xM3hQWutQqhR8QI4c4tnzEmzvUICWNqRAyOrO9x32NCZIyvVi+wd6GUGY3qeh1bQJRya50ZNdcLBIAIbnPOzvkYUynzJzjPlxd8Orbn00CwXp0cOvF0bJ+OLRrVXcsr8x84xpgYVRhzgrkQ2loHIcWYjyOlVAlhKJXWTuumKaW14RY4+OhcGAZ2vfQAIIxkStm54H2kVN2usAWo78gImZuiMY4xuR6wwDEkzqfjoTsdu8MBPJ/gWye3Ddtvm/2uOezA40MzDlLrCWNOiZDKOnuXnXJmTGMsKFNK2fpNrC35QfYCp0yIbBo4QCrld/CrnBDeGRZ8tCY+n8fn5/F8hqDhn16OD/GF2+Mouo70HaFU/Q9ZSgkhrK/KK1xKkdIoZYXQQupwj6Ul8lyWxpxzLinGdT7ntzfrDn/lTWkBWUrw1G+3txbQz2sWmBEthRX833H/+yeMFGhoBxi4ETgIKezbsjXnVP8DzmSYeSssc+sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Encryption flow\"\n        title=\"Encryption flow\"\n        src=\"/static/983add2af1440049060bb0a9e7534d24/242a6/encryption-flow.png\"\n        srcset=\"/static/983add2af1440049060bb0a9e7534d24/e3135/encryption-flow.png 256w,\n/static/983add2af1440049060bb0a9e7534d24/06341/encryption-flow.png 512w,\n/static/983add2af1440049060bb0a9e7534d24/242a6/encryption-flow.png 720w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Encryption flow</figcaption>\n  </figure></p>\n<p>All of this might change depending on your version of Laravel or how much you’ve customized your encryption settings. You can check your <code class=\"language-text\">config/app.php</code> file to see how your encryption settings are configured.</p>\n<p>Here’s a simplified breakdown of the process:</p>\n<ol>\n<li><strong>Cookie Value</strong>: The cookie value is stringified and then <a href=\"https://github.com/illuminate/cookie/blob/v9.52.16/Middleware/EncryptCookies.php#L180\" target=\"_blank\" rel=\"noreferrer\">prefixed</a> with <a href=\"https://github.com/illuminate/cookie/blob/v9.52.16/CookieValuePrefix.php#L14\" target=\"_blank\" rel=\"noreferrer\">a <code class=\"language-text\">SHA-1</code> hash</a> based on the cookie name and a version string (<code class=\"language-text\">\"v2\"</code>).</li>\n<li><strong>Encryption</strong>: The prefixed value is <a href=\"https://github.com/illuminate/encryption/blob/v9.52.16/Encrypter.php#L102\" target=\"_blank\" rel=\"noreferrer\">encrypted using <code class=\"language-text\">AES-256-CBC</code></a>.</li>\n<li><strong>MAC Generation</strong>: A MAC is <a href=\"https://github.com/illuminate/encryption/blob/v9.52.16/Encrypter.php#L116\" target=\"_blank\" rel=\"noreferrer\">generated using <code class=\"language-text\">HMAC-SHA256</code></a> over the IV and the encrypted value.</li>\n<li><strong>Payload Assembly</strong>: The encrypted value, IV, MAC, and a tag are <a href=\"https://github.com/illuminate/encryption/blob/v9.52.16/Encrypter.php#L118\" target=\"_blank\" rel=\"noreferrer\">assembled into a JSON object</a>.</li>\n<li><strong>Base64 Encoding</strong>: This JSON object is <a href=\"https://github.com/illuminate/encryption/blob/v9.52.16/Encrypter.php#L124\" target=\"_blank\" rel=\"noreferrer\">then base64-encoded</a> to form the final cookie value.</li>\n</ol>\n<p>An example of the encrypted cookie structure looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"encryptedValue\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"iv\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"base64-encoded-IV\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"mac\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hex-encoded-MAC\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"tag\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"base64-encoded-tag\"</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Understanding this structure was crucial for replicating the encryption and decryption processes in Next.js.</p>\n<h2 id=\"recreating-laravels-encryption-in-nextjs\" style=\"position:relative;\"><a href=\"#recreating-laravels-encryption-in-nextjs\" aria-label=\"recreating laravels encryption in nextjs permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recreating Laravel’s encryption in Next.js</h2>\n<p>To read and update Laravel’s encrypted cookies in Next.js, we needed to replicate Laravel’s encryption logic in our Next.js application. Here’s how we tackled it.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.765625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3UlEQVQozxXL308ScQAA8Psr2npz/bJpreyH2q9hyx9wd0CSoHjC3XH3BQ6OAw+OXxmRlGmOQhIQ0APlN0pLg3KmM1ur9dJbaytb8ZJP/QO91Pq8fyC5xq0c8dzUelSjHg3uR4d9Y0woOJ9TYZ6z7YMRmE4N4EtSIgPjqX6wJDUUEaKEGCoyuioHUOPz/vb+z90fzb1m893Br616WqGiDh3uVo0KnR2aKAxEmMjAhCgjS8OyZYU6D1PVQWLNrM2Y+qHNL1+397/vfNt/f3BQ/7Bbs593ciw9EbN6w51n1TEUZBGyIDeIUpBRn8wOSrJ9TEmnWZ9DM8I1KFGrxyrrydWNaOWF6EJqVEtjFvv4qTEdFzvPDCfkdBbV5VCQ6pO/nXT8rs7UMUVFi72K3ix4eiAEpbvOKSWXhs533ArqYJGXRTzE8zgXTiQvX8TmUUNed2OLvb7KSKqT5NpDU21cvqbXvo6rVwO9kFzBtLUOtB7raT0JL5glz6zt8Vyp+fdPafdNd8dQQgEKSqI0hBVUIK5S7fhPbwZubExpn02rF6yXIRlCt7T0oNbolatDM+q2qP5i8j4XiK2TlqleCZVGiDJKFlFDVmps0PAH34kNn+Tl/GjU1D2Ln4OkSueRo73I+KJWKguaDSO28j2gIZg4xRctwsptespvnHGzMS9mWdYdLzMXyncG9xLqNNcVxk9BmFXsRd1tHViYlPi9c6RvMyqACd8T4HtucucId55058ZcxfS4gjcLSU7pdYUioYmIQ/mA6odwm0jyVZM99tBpM/AFgq94nVMBG4c78hQvElyK5JIYK5ZcCMs9mrVhd3mf1lGx+gtWfxHCuQzO5Yy2GMM9NTiLtLMAhIrRuUI5lnFuUc+m9OyC1rL4xI5ZmeAjjgzZLaNcluaXgLAC0f9DHrirwFMzCkWju2QUysBVofkcaU/r2aSeW9SRoYCZALbHDDttYmf1bIp0pCln9h8Xf01Zd5UGBgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Same cookies\"\n        title=\"Same cookies\"\n        src=\"/static/ff0e8bf793eed9722337c7730b832247/42a19/same-cookies.png\"\n        srcset=\"/static/ff0e8bf793eed9722337c7730b832247/e3135/same-cookies.png 256w,\n/static/ff0e8bf793eed9722337c7730b832247/06341/same-cookies.png 512w,\n/static/ff0e8bf793eed9722337c7730b832247/42a19/same-cookies.png 1024w,\n/static/ff0e8bf793eed9722337c7730b832247/e8464/same-cookies.png 1536w,\n/static/ff0e8bf793eed9722337c7730b832247/2eb59/same-cookies.png 2048w,\n/static/ff0e8bf793eed9722337c7730b832247/5cc60/same-cookies.png 2444w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Same cookies</figcaption>\n  </figure></p>\n<h3 id=\"decrypting-cookies\" style=\"position:relative;\"><a href=\"#decrypting-cookies\" aria-label=\"decrypting cookies permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Decrypting cookies</h3>\n<p>We created a function <code class=\"language-text\">decryptCookieValue</code> that mirrors Laravel’s decryption process. Here’s a simplified version:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">decryptCookieValue</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">encryptedCookieValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> publicKey <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">APP_KEY</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> encoder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TextEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> decoder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TextDecoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token comment\">// Decode and parse the cookie</span>\r\n  <span class=\"token keyword\">const</span> decodedResult <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>encryptedCookieValue<span class=\"token punctuation\">,</span> <span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> parsedResult <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>decodedResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> iv<span class=\"token punctuation\">,</span> mac<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> parsedResult<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token comment\">// Verify the MAC</span>\r\n  <span class=\"token keyword\">const</span> macPayload <span class=\"token operator\">=</span> iv <span class=\"token operator\">+</span> value<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> keyMaterial <span class=\"token operator\">=</span> encoder<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>publicKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> hmacKey <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">importKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">'raw'</span><span class=\"token punctuation\">,</span> keyMaterial<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'HMAC'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">hash</span><span class=\"token operator\">:</span> <span class=\"token string\">'SHA-256'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'verify'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> isMacValid <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">verify</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HMAC'</span><span class=\"token punctuation\">,</span> hmacKey<span class=\"token punctuation\">,</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>mac<span class=\"token punctuation\">,</span> <span class=\"token string\">'hex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> encoder<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>macPayload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isMacValid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'MAC validation failed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token comment\">// Decrypt the value</span>\r\n  <span class=\"token keyword\">const</span> ivArray <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>iv<span class=\"token punctuation\">,</span> <span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> encryptedData <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> <span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> cryptoKey <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">importKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">'raw'</span><span class=\"token punctuation\">,</span> keyMaterial<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'AES-CBC'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'decrypt'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> decryptedData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">decrypt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'AES-CBC'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">iv</span><span class=\"token operator\">:</span> ivArray <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> cryptoKey<span class=\"token punctuation\">,</span> encryptedData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> decryptedString <span class=\"token operator\">=</span> decoder<span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>decryptedData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token comment\">// Remove Laravel's cookie prefix</span>\r\n  <span class=\"token keyword\">return</span> decryptedString<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">41</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This function decrypts the cookie value, verifies the MAC, and returns the decrypted string. We also had to remove Laravel’s cookie prefix with a <code class=\"language-text\">slice</code> - pretty much how it’s done in the <a href=\"https://github.com/illuminate/cookie/blob/v9.52.16/CookieValuePrefix.php#L27\" target=\"_blank\" rel=\"noreferrer\">original code</a> - to get the original cookie value.</p>\n<h3 id=\"encrypting-cookies\" style=\"position:relative;\"><a href=\"#encrypting-cookies\" aria-label=\"encrypting cookies permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Encrypting cookies</h3>\n<p>We also needed to encrypt cookies in Next.js so that Laravel could understand. Here’s the <code class=\"language-text\">encryptCookieValue</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">encryptCookieValue</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">cookieName<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> publicKey <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">APP_KEY</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> encoder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TextEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token comment\">// Create the Laravel cookie prefix</span>\r\n  <span class=\"token keyword\">const</span> cookiePrefix <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createLaravelCookiePrefix</span><span class=\"token punctuation\">(</span>cookieName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> prefixedValue <span class=\"token operator\">=</span> cookiePrefix <span class=\"token operator\">+</span> value<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token comment\">// Generate a random IV</span>\r\n  <span class=\"token keyword\">const</span> iv <span class=\"token operator\">=</span> crypto<span class=\"token punctuation\">.</span><span class=\"token function\">getRandomValues</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Uint8Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> keyMaterial <span class=\"token operator\">=</span> encoder<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>publicKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token comment\">// Encrypt the value</span>\r\n  <span class=\"token keyword\">const</span> cryptoKey <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">importKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">'raw'</span><span class=\"token punctuation\">,</span> keyMaterial<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'AES-CBC'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'encrypt'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> encryptedData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">encrypt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'AES-CBC'</span><span class=\"token punctuation\">,</span> iv <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> cryptoKey<span class=\"token punctuation\">,</span> encoder<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>prefixedValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token comment\">// Generate the MAC</span>\r\n  <span class=\"token keyword\">const</span> encryptedBase64 <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>encryptedData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> ivBase64 <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>iv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> macPayload <span class=\"token operator\">=</span> ivBase64 <span class=\"token operator\">+</span> encryptedBase64<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> hmacKey <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">importKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">'raw'</span><span class=\"token punctuation\">,</span> keyMaterial<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'HMAC'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">hash</span><span class=\"token operator\">:</span> <span class=\"token string\">'SHA-256'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'sign'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> macData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">sign</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HMAC'</span><span class=\"token punctuation\">,</span> hmacKey<span class=\"token punctuation\">,</span> encoder<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>macPayload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> macHex <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>macData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token comment\">// Assemble the payload</span>\r\n  <span class=\"token keyword\">return</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">iv</span><span class=\"token operator\">:</span> ivBase64<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">mac</span><span class=\"token operator\">:</span> macHex<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">tag</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> encryptedBase64<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This function encrypts the cookie value, generates a MAC, and assembles the encrypted cookie payload.</p>\n<p>And here’s the helper function to create the Laravel cookie prefix:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createLaravelCookiePrefix</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">cookieName</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> publicKey <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">APP_KEY</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> encoder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TextEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> encoder<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cookieName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">v2</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> encoder<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>publicKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> cryptoKey <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">importKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">'raw'</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'HMAC'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">hash</span><span class=\"token operator\">:</span> <span class=\"token string\">'SHA-1'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'sign'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> signature <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">sign</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HMAC'</span><span class=\"token punctuation\">,</span> cryptoKey<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> hexSignature <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>signature<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>hexSignature<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">|</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>These functions ensure that cookies encrypted in Next.js can be decrypted by Laravel, allowing for seamless cross-framework integration.</p>\n<h2 id=\"challenges-and-security-considerations\" style=\"position:relative;\"><a href=\"#challenges-and-security-considerations\" aria-label=\"challenges and security considerations permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Challenges and security considerations</h2>\n<p>Of course, this process wasn’t without its hurdles:</p>\n<ul>\n<li><strong>Cryptographic compatibility</strong>: Matching Laravel’s encryption in Node.js requires careful handling of encoding, data types, and cryptographic functions.</li>\n<li><strong>Environment constraints</strong>: We had to ensure that these functions only run on the server side, as they rely on server-side environment variables and cryptography APIs.</li>\n<li><strong>Security considerations</strong>: We took extra care to ensure that the <code class=\"language-text\">APP_KEY</code> remains secure and never exposed to the client side. Error handling, MAC verification, and ensuring the IV is unique for each encryption were key to preventing security vulnerabilities.</li>\n<li><strong>Testing and debugging</strong>: Verifying that our encryption and decryption matched Laravel’s required a lot of trial and error, and a deep understanding of both frameworks.</li>\n<li><strong>Deciding which cookies to encrypt</strong>: Not all cookies needed encryption, so we carefully selected only the ones that handle sensitive data.</li>\n</ul>\n<p>It’s also worth noting that this solution is specific to our use case and may not be suitable for all scenarios. It’s essential to understand the security implications of replicating encryption mechanisms and ensure that your implementation is secure and compliant with best practices.</p>\n<h2 id=\"the-payoff-a-seamless-user-experience\" style=\"position:relative;\"><a href=\"#the-payoff-a-seamless-user-experience\" aria-label=\"the payoff a seamless user experience permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The payoff: A seamless user experience</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVQozwGfAmD9ADcgLDslMUArOEA3RUhdcniitnKZrD1FVzgtPDUiMTEXJjsnM0AyP0Y/S0NJWUNQYT88SkU2QkQwOz0lMgA+JzRBLTpDPkxObIKEuc2isrGXrLJdh6I8T2NAR1g6NEM/PEpETFxMZHdrmbCHvtRnkalNW2xMQUxCLzoAPy06RTxIS2F0V3WLdIyZqrq3u8W1sLCOV2lzSm6IP0xdQldqTW2DZZCokMDSeIyQgJ6pYYeeT1ZkUVppAEE0QURFU1d7kVxwhDEcK2NXVZ2GZIJpU2h/ik53lGCIn22fuWSOpm6NoYCVmyoiH0dGRIiuvG+dtGiVrQBCPElFUGFZfZRecIM9PFBKQ0xtXVtkYGeFmZiIr7trmrNTdY5ka26glna10cijv8SNp6x4g4iCp7ZcZnMAPjtJRFdpRlVqMh0uMR8vU0pMgo2NjbbCi5WMiIRvPF96NEtlWVlcpb64qdzquuHerrGVRS0xUj9EPicyADw5SD1IWTtPZEhJVXaAgqbNzanPzJWimHyPkENddEpZZH+LhZC5xIe2xIOYml1aXV9SSTwkLT4sOkQwPAAxHitDQ09xkJuQwM6Wx9ODk5NvdXVZbX5OZHiFkoiuxbanwbysv6+KhnZ6ipBZdIksK0Q2ITFGOEVBLToAUl1sgq27fqm5cYuXXmBnXGh1UWR2aXFyk6Wfqs/MosG8gHVjeHd0aYibYIqjUG2CPDxONSAuPCo4OiU0AGySpllrek9TX09VZVFcblhganV8fJe+xIy4xHBycHFrZGyDkWmTq1Z4jk1qgURXazUxQjEYKDchMDUeLQBGRFRHRVVTYXI5NUdHVGVzlqZqkaZXa31LSFNdbHlcdYpUcIRJYHVIW3BBUGQ7P1E0JzcsECEwFiYuEiHJohHl9BsUMQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Fully integrated\"\n        title=\"Fully integrated\"\n        src=\"/static/b78488b37ae488bb5c43e5ec64293b2c/42a19/fully-integrated.png\"\n        srcset=\"/static/b78488b37ae488bb5c43e5ec64293b2c/e3135/fully-integrated.png 256w,\n/static/b78488b37ae488bb5c43e5ec64293b2c/06341/fully-integrated.png 512w,\n/static/b78488b37ae488bb5c43e5ec64293b2c/42a19/fully-integrated.png 1024w,\n/static/b78488b37ae488bb5c43e5ec64293b2c/e8464/fully-integrated.png 1536w,\n/static/b78488b37ae488bb5c43e5ec64293b2c/445c6/fully-integrated.png 1792w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Fully integrated</figcaption>\n  </figure></p>\n<p>By replicating Laravel’s encryption mechanisms in Next.js, we achieved a seamless user experience. Users can navigate between Laravel and Next.js pages without any hiccups, and their session data remains consistent throughout. Honestly, it’s quite impressive how seamlessly the whole flow works without users even noticing the transition between the two frameworks.</p>\n<p>This solution also opens up new possibilities for integrating other platforms with Laravel, as long as they can replicate Laravel’s encryption process. It’s a testament to the power of understanding and adapting complex systems to achieve interoperability.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p><img src=\"/1f382bda4eb7e36eb31460d035a5a8d3/cookie-crumbles.gif\" alt=\"That&#x27;s the way the cookie crumbles\"></p>\n<p>Integrating cookies between two different frameworks and programming languages isn’t exactly a walk in the park - unless the park is Central Park, and you’re <a href=\"https://www.youtube.com/watch?v=vm-471akcQU\" target=\"_blank\" rel=\"noreferrer\">John Wick right after being excommunicado</a>. But with a deep dive into how each framework handles encryption and a fair bit of perseverance (and maybe some <a href=\"https://en.wikipedia.org/wiki/Mate_(drink)\" target=\"_blank\" rel=\"noreferrer\">mate</a>), it’s definitely doable.</p>\n<p>I hope this explanation sheds some light on how to tackle such a challenge. If you find this kind of problem-solving exciting, maybe you’d like to join us. We’re always on the lookout for talented individuals - check out our <a href=\"https://jobs.studocu.com/job-postings\" target=\"_blank\" rel=\"noreferrer\">job openings</a>. I know I might have made it sound like a nightmare, but trust me, it’s the fun kind!</p>\n<p>Happy coding!</p>","fields":{"slug":"/2024/2024-10-25-sharing-encrypted-laravel-cookies-with-next-js.en/","path":"/blog/coding/sharing-encrypted-laravel-cookies-with-next-js/","locale":"en"},"readingTime":{"minutes":8.525},"frontmatter":{"date":"2024-10-25T00:00:00.000Z","title":"Sharing encrypted Laravel cookies with Next.js","categories":["coding"]}}},{"node":{"excerpt":"I constantly have that feeling of ”You become the very thing…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVQozwGfAmD9ANp6W958WuB+XeaMatedgt6hgeR6Vd97WLqMfo6RmNuaeeeZc+WEXbiGdueGXeyEW+WBW++HW+N9Wdt3VwDkeFLreFCbdHFxdYGLhoZudoG4mIjj1729zMKZtrzT2MXP0L/Y1cDCs6OognyigHuwgnaZh4vtkGbji2cAv4d5yo97Y2FzKz1geGNoN0NqaH6WfIKHZYGXZ4ifVmh8V2+FQFx5jIqJnJ6fimxwpHVueGFt7ZJo6ZFqAMCVhMCZiJ5uZH5ZWoSBiX2GmX6Cj1hOWE1Zdjteh0NBV11ZZyMlQ2FYYfm6kOetied/Vt2Na+aGXuh+VQDvf1LMk3vPj3XxjGDJtKLJ1caljoNXV2lCV3hTVmtCR2FIUWwnLUppbXfew6npwqDTn4WvnpbniWDphV0A6IRc2o5ts5eM4Jl30b6m4eLIm5WQSE9vYX2UaHSEPFF/VX2qY564aYqfw7Oo5cKisb68xZF83ZBu54dfAOuEWsCairCgmoeEk2V+paqvsaaqppaEhYCNoYiXqmZkgICHmEhgg5mVleDLscfLvZCgsKualMiVgOuAVgDsgFSropyiuLyDeIAgNmWSh47ux6fHnIZ5b4doWXCxe2zSrZaZfHfFn4etwcNHfLlkhbKgm6DQiW7ufU8A5oJanp+j5HpU8HxRcWp0c6e8t8O+l5qYqIJ2dlxfvXhe7s6rwbqndJutgZytgoGTdH6SlqaqfMXcl7K4AJuwtWCPu2ViiYVeaHyHoIGNn3Kcs2CVsH2vwa2imtGmkLmFdqOWk1WOu2djeaBuY2tha4FXXHe82HHL6QByyuZvu9tZmsZajK5knMJrkq9tpMRmpcZeocVtnLiBssiHqbt+r8hgncRrka1umLNxm7VolrVyvt16xt6H9XdtMXZTwwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Musclog illustration\"\n        title=\"Musclog illustration\"\n        src=\"/static/e09791c79da43db20131c45d78322136/42a19/musclog-illustration.png\"\n        srcset=\"/static/e09791c79da43db20131c45d78322136/e3135/musclog-illustration.png 256w,\n/static/e09791c79da43db20131c45d78322136/06341/musclog-illustration.png 512w,\n/static/e09791c79da43db20131c45d78322136/42a19/musclog-illustration.png 1024w,\n/static/e09791c79da43db20131c45d78322136/e8464/musclog-illustration.png 1536w,\n/static/e09791c79da43db20131c45d78322136/445c6/musclog-illustration.png 1792w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Musclog illustration</figcaption>\n  </figure></p>\n<p>I constantly have that feeling of ”<a href=\"https://youtu.be/CqQRDZP3FnQ?si=gAuQhD_7PHF8PAv5&#x26;t=178\" target=\"_blank\" rel=\"noreferrer\">You become the very thing you swore to destroy</a>” due to the amount of time I’ve been dedicating to bodybuilding in the past two years. I’ve been tracking my macros, my workouts, and even taking brogress pictures.</p>\n<p>Not that I had anything against bodybuilding in the past, but I had tried working out before, and I never really got into it. I always felt like I was a skateboarder at heart and that I was betraying my true self by lifting weights. I know, silly.</p>\n<p>Anyway, I’ve been using a combination of apps and integrations to achieve my performance tracking, including a <a href=\"/en/blog/coding/using-google-fitness-api-to-calculate-my-tdee-and-more/\">custom Node.js script to calculate my TDEE and average calories</a> using the <a href=\"https://developers.google.com/fit\" target=\"_blank\" rel=\"noreferrer\">Google Fit API</a>, but since Google Fit is going to be deprecated soon in favor of the new Health Connect, I couldn’t postpone the development of my own app any longer.</p>\n<p>But how? I honestly had no idea where to start, especially tapping into integrations with another app’s API. I didn’t even know in which format this data would be available. What’s the market standard? JSON? XML? Binary? I had no idea. Luckily, I found out that some really smart people created <a href=\"https://github.com/matinzd/react-native-health-connect/\" target=\"_blank\" rel=\"noreferrer\">a library to integrate the Health Connect API with React Native</a>, and knowing that was the tipping point for me to start developing my own app.</p>\n<h2 id=\"the-perfect-solution\" style=\"position:relative;\"><a href=\"#the-perfect-solution\" aria-label=\"the perfect solution permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The perfect solution</h2>\n<p>I created all these scripts and integrations to monitor my workouts and nutrition because one thing I’ve discovered in these past few years of bodybuilding is that what really helps me stay consistent is tracking everything. I’m a data guy, and if I can see my progress in numbers, it motivates me to keep going. The truth is, if you’re not using any anabolic steroids, progress is slow, and at least for me, I don’t see any difference in the mirror, so the numbers are all I have.</p>\n<p>I’ve been tracking everything I eat for two years now, and I also weigh myself with a scale that measures my body fat percentage, so I have a lot of data to analyze and identify my eating and workout patterns. What I want is something that’s really hard to find because most apps or websites out there don’t expect someone to be so meticulous as to track everything obsessively every day, but I love doing it.</p>\n<p>So, the first idea was simply to get the data and continue my calculations with my scripts, and that’s how the idea for my first MVP was born.</p>\n<h2 id=\"the-mvp\" style=\"position:relative;\"><a href=\"#the-mvp\" aria-label=\"the mvp permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The MVP</h2>\n<p>As I said, all I wanted was to access the Health Connect data and get my nutrition and weight data, so I could continue running my Node.js script, even if I had to have a simple app that fetched the data in the background and sent it to my server. Sounds like a plan, right?</p>\n<p>Well… it seems like Health Connect only allows developers to access the <a href=\"https://developer.android.com/health-and-fitness/guides/health-connect/develop/frequently-asked-questions#time-range\" target=\"_blank\" rel=\"noreferrer\">data from the last 30 days due to privacy concerns</a>. Okay… so this means I can’t get my historical data, and everything that is on Google Fit will be lost forever. Awesome!</p>\n<h2 id=\"the-real-mvp\" style=\"position:relative;\"><a href=\"#the-real-mvp\" aria-label=\"the real mvp permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The <em>Real</em> MVP</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAADoElEQVQ4y12U22/iRhTGHcDg+w1jjMEEaAIkKxJIuCQN6WartFWlvqzah3Zf+tqX/ssRhGS7AWMbe2xjz9iuyGUr9ad5mPNJ3+jMfEeDJUmSPpMkqWUGzmb7vN+JEMLz/lim2X67QxMiiTNnTW161JQYgSPYuixjX82+D5dLsHxywxC9KDGE49F31aI66LQlSvixod129avjFokzuT1C4YSd2QNb1/E8L1p+cVdLEPjQtnZHxDC6mf7QVLXx0WFLVn7v7n86P7h+13hXU0/q6qilYRDGyyewfHICH66W3trwfB8+PlgbO0QQ/np7c1QWrrr6ca18LEsdVb44rA5blUGjclpXsfSVBEJorDxzDeIYvdwlidHF2ahM091aNYuR+SyNZygyRxeyVAYryDSHhc9EUWSZ3v3cuJ8brhu8aNvAH52OahIxHVRkgdJKdLlIaQrZ0hmZY6uChDlvmObGXG9MY7NaWrvadW3LvDifKDzbaWgsSZcYtl4SVInnKFqguJoofm37lTCKjRVAME7TFEF4fTFVOHFfrWqM8FunflXXKqLMF1iBZCsc/585jlEUhb4PDQO4rr/LOYp+vpnqIt2ulntK6c9e64+T1r4k6oJY44Wa8Gb2vXC9dhFKttt4tQyDIEQIxTG6Gg0lAtflIofTPzW124NaieXIHEnkKJXl3sx+ZJlBkqS+j1YruN3C3ZvH6HI4FAhcLyk5jOLyLI0zFM4QWZrE6V3bSZIglDgb3zJd34+SJLFMYK4dCBGC0fVkUqSJhspLbEHmKYmlijwh8yRTYHVRwGzLXhubxS6k1efPa8tyHu6N+9nKXDtrwxj1z3ii0G2ouibJIlWR6eOmpBbZIs329BKWJHGa+s8riKIAITdN/STZlQiGw8GlQAmn7U4+J3zDF8eV8qTdYgpcBsvn9ggsTSMA5hDOwnBm2wsIZzC6A+BuGywQ9L4dv1cEZdA5rAryx079r2H7+25jv1yqF6VmqYiFoWlZiyB4cp0vtv0IwJNt/wPchW0/OpuHXz68P1CkSbd+Uq9OtfLf4+6nUbvf0k4blZ6uYAAsgDvb2HPXmTvOHIAHx7nf2DMA5pZ5d3E2EAtEr1HNYPkDXvzY2e/XNSpPZbA8niEwhABCLoReFAEYeRC6wJ2FoRWF9saajfsDDid6zXp2L0/mSTpPE7uQSSJLEjni/+P5PGrx608ShZfDiUgxh5pG4gVdJXWV1BSSxAkyR7EF5l8xwV6kEeY6GQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Perfection\"\n        title=\"Perfection\"\n        src=\"/static/c03a23e83744cf5f92d6e94b6426ecd8/42a19/musclog-mvp-perfection.png\"\n        srcset=\"/static/c03a23e83744cf5f92d6e94b6426ecd8/e3135/musclog-mvp-perfection.png 256w,\n/static/c03a23e83744cf5f92d6e94b6426ecd8/06341/musclog-mvp-perfection.png 512w,\n/static/c03a23e83744cf5f92d6e94b6426ecd8/42a19/musclog-mvp-perfection.png 1024w,\n/static/c03a23e83744cf5f92d6e94b6426ecd8/68141/musclog-mvp-perfection.png 1534w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Perfection</figcaption>\n  </figure></p>\n<p>Cool, so our MVP died before reaching the shore; time to pivot: What if, instead of having a Node.js script that connects to different APIs, I could have a React Native app that will do most of the things, like workout tracking, nutrition insights, TDEE calculation, charts, tips, etc., and any other data that could be missing, I get from the Health Connect API? I could even add an option to import past data from a JSON file. This way, if Google Fit eventually allows me to export my data, I can import it to my app.</p>\n<p>I have actually jumped from app to app in the past, trying to find the best way to track my workouts. I even tried Google Spreadsheet, but the UX was horrible on mobile, and I would like to focus on my workout and not stress myself out about touching the wrong cell on the spreadsheet.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.890625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtElEQVQoz2WSS08TYRiF50+4ceOCDQtZAIZoaaRAEUQsCDWUSwiKAgZqwXBpuFuQUhBBEES8cOnMlE6n07l833wz7bSFliqligmGaiJijAti+icMFNHE5CzPk7znnBeTgCspr+gOb/ji8d0PsbfrfmCz2qrrTab2Po7GvaIbCa5T56kwyDmQQAkMsbkh+4NB2ecLRzY5lr+QVZp79VaWSt/VObCucCJP/YshgUK8ExMYO/DgwIMLjH0jIO7sROPxj1MTkxO2+UQisRnZbr3X4UO0JBwBkCUFBgceMunHgIeALAlYAnKkyJECY1cQPTv1dGx0dmWZej63PNA7Ih+dTUmAkoBT5B2QI48QD4FBljwWEfBxoQDaigQ+7cYgFOZe4AuLxJOZJSiv7+3tRMLKdjQUDqKgIsjABVhCYHBM5EjIOSRA+b085BzhDfng+34icVhYWJdf0ZqZVTY9bPn5Y//w1+HWuyDk1hSZ9Yq0yDkQoDAkOCVAIeBUJDYURLFo6OuXXbcYWHzjVKlulOYWme+32obHoZs++Pb5fTTk9/HJaWRIYycFQtqLGCRQLoaxvqR0LY+AErH2Dc52NizMWKhRXdftKoZHsWjYKzIypCVIH031p3qXgmiCsJf3zBd3PSt7MLnsBL3dg+JY0cpEu2TNL9NVXmufZjjeJ9Knm/+FA5LbOvtK3WDRmec0zVbSIzUOLQw1low3FYzcuVJTUZma32ybfx1A/8HHMejG9odpObXF5rk842O9cVhbZy4obzKW5+s1mhljcUebsd406kc0Av/BIk8ZGs3nUjTaJou2ZUxd0519sy2vqNZUou41qPoN2Y7+0vqWHsGzJh8HPoGRQPklZnV1KSOn6uyZ9JSUyxm5tRma6jSV/nyqts9Q1Hxd3a+/dFeTnnlRh+PLipT8Gddvn3/Y5TycJc0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Fine, I will do it myself\"\n        title=\"Fine, I will do it myself\"\n        src=\"/static/96bce10dcf9e8d007b3b5a85ede8aaed/42a19/fine-i-will-do-it-myself.png\"\n        srcset=\"/static/96bce10dcf9e8d007b3b5a85ede8aaed/e3135/fine-i-will-do-it-myself.png 256w,\n/static/96bce10dcf9e8d007b3b5a85ede8aaed/06341/fine-i-will-do-it-myself.png 512w,\n/static/96bce10dcf9e8d007b3b5a85ede8aaed/42a19/fine-i-will-do-it-myself.png 1024w,\n/static/96bce10dcf9e8d007b3b5a85ede8aaed/e8464/fine-i-will-do-it-myself.png 1536w,\n/static/96bce10dcf9e8d007b3b5a85ede8aaed/dc8ac/fine-i-will-do-it-myself.png 1572w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Fine, I will do it myself</figcaption>\n  </figure></p>\n<h2 id=\"so-react-native-huh\" style=\"position:relative;\"><a href=\"#so-react-native-huh\" aria-label=\"so react native huh permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>So, React Native, huh?</h2>\n<p>Of course, I knew React Native was a thing, but as a React.js developer, I had never really considered diving into it, but surely it couldn’t be that hard, right? I mean, I already knew React, so how different could it be?</p>\n<p>Well…</p>\n<p>It turns out building a React Native app when your only experience is with React.js is like trying to switch from a skateboard to a surfboard. Sure, the principles are somewhat similar—balance, navigation, staying cool when things go wrong, but the medium is entirely different. In this case, the medium involved figuring out how to wrangle all sorts of device-specific quirks while keeping the app functional and responsive.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACnklEQVQozzXL3U8SAQAA8PtremvrzSdfXFn5NZdr6rK0B3O5nMwNUaaiIDOUQCKEjI+Tu+OA45tLODhABIQUUDkQLD7vQIaurJYPPdV66Pf+AxgKrlMwQ0F0Bqqe7JTSYPkYrByDDAU18mgprS+ldJW09rps+doijwveMhO4avpKJQ9dwQEmi/zPcCOH/CiZGlm4WTCgOrlkYf7nF309o79u+qhGYoQrXdXoeSrdE9ba8JRgEzMDNIXUcwYmi9AZuHaGnRT3a+eOZh4+JdUyNl/jJy6qOHke7WFLb3VMdzxdahtaut3JahtevtM1A9BZI5MzMTkTTaH0mblXGR8U2S+LmCmAW1KZvs0gKlitxsFkdGdKsn2P8/7RuqGbp3m8gfQKdoAaZaCzKJ01Vim0kUfjhE7AEa2INW/X5Ycpt9ARslp0127JFaFwJxzDGtcUsjsgd7x2fZxUYUAlg9QySI0y1Ci0kvn3r4rmi7TeFfZ2CfHBWVU4YSvmbM0zi/sIZxHRRU/kJUTIyWD/CgQweax+jtF57KJgaRSwMmUqnhpbFee4JtA5Kpx4tUgGjM1WuNaMkJ9jc+QB2+qft/rGFPa7s1rgpuW7aZF/vgWqVV8+j/9i3L8vie+t0Au+tlr2biNIezfbZDMl60l+JM7zBLlWYkDm7OBoR8RmQBHdk8aiLioKp8LYyR5ViURSBB6w94zy5+bFH7bVb3gb0jXVwv6nJW9oGnJ18tGHy9D4O8szmQVwhCBXGMajaOIITh5qj+JaVC7ijHHteh2R8ttzB6LYQb8S71Pg/WLs/qLu+ZaVizpmDS6W1grEgkqPX42ToJsETX4YDNmU8QDP6JlROYdA4oFA37usHpMZeEaHgtjdCvmELpxjdE5soe2Tkr+lvLqPYoqGewAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Surfing with a skateboard\"\n        title=\"Surfing with a skateboard\"\n        src=\"/static/052058d9f01be0cb6aab7b65270e7f9e/42a19/surfing-with-skateboard.png\"\n        srcset=\"/static/052058d9f01be0cb6aab7b65270e7f9e/e3135/surfing-with-skateboard.png 256w,\n/static/052058d9f01be0cb6aab7b65270e7f9e/06341/surfing-with-skateboard.png 512w,\n/static/052058d9f01be0cb6aab7b65270e7f9e/42a19/surfing-with-skateboard.png 1024w,\n/static/052058d9f01be0cb6aab7b65270e7f9e/e8464/surfing-with-skateboard.png 1536w,\n/static/052058d9f01be0cb6aab7b65270e7f9e/445c6/surfing-with-skateboard.png 1792w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Surfing with a skateboard</figcaption>\n  </figure></p>\n<p>For example, as a web developer I focus on keeping a local state on the client and getting data from the server when needed, but on React Native, I want to have a local database, how should I go about that? Well, I found out about <a href=\"https://react-native-async-storage.github.io/async-storage/\" target=\"_blank\" rel=\"noreferrer\">AsyncStorage</a>, so why not go with it for now? (this will bite me in the ass later)</p>\n<p>Still, I had no idea where to start from, though, but after chatting with my friends <a href=\"https://barreto.jp/\" target=\"_blank\" rel=\"noreferrer\">Juampi</a> and <a href=\"https://www.pato.dev/\" target=\"_blank\" rel=\"noreferrer\">Raf</a> about my idea, they suggested I use <a href=\"https://expo.dev/\" target=\"_blank\" rel=\"noreferrer\">Expo</a>, a framework that allows you to build React Native apps without having to deal with the native side of things. That was honestly a game-changer for me because I could simply run my app in the browser most of the time and only use my phone to test the features that require native code.</p>\n<h2 id=\"diving-into-expo\" style=\"position:relative;\"><a href=\"#diving-into-expo\" aria-label=\"diving into expo permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Diving into Expo</h2>\n<p>I started by creating a new Expo project by following the ”<a href=\"https://docs.expo.dev/tutorial/create-your-first-app/\" target=\"_blank\" rel=\"noreferrer\">Create your first app</a>” tutorial, and then I created a new screen with a simple button that would connect to the Health Connect API and get my nutrition data and there I was, I already had my first MVP done, but because I don’t really like testing on my phone, I basically just copied the JSON response from the API and saved it into a file, so I could continue developing only on my computer and browser—this will bite me in the ass later².</p>\n<p>After playing around with Expo for a weekend, I had a vague idea of what I needed for my app:</p>\n<ul>\n<li><a href=\"https://react-native-async-storage.github.io/async-storage/\" target=\"_blank\" rel=\"noreferrer\">AsyncStorage</a> for storage</li>\n<li><a href=\"https://reactnativepaper.com/\" target=\"_blank\" rel=\"noreferrer\">react-native-paper</a> for the UI</li>\n<li><a href=\"https://www.i18next.com/\" target=\"_blank\" rel=\"noreferrer\">i18next</a> for translations</li>\n<li><a href=\"https://github.com/wuxudong/react-native-charts-wrapper\" target=\"_blank\" rel=\"noreferrer\">react-native-charts-wrapper</a> to show charts</li>\n<li><a href=\"https://github.com/Shopify/flash-list\" target=\"_blank\" rel=\"noreferrer\">@shopify/flash-list</a> to render lists (basically just because of <a href=\"https://www.youtube.com/watch?v=BrYxGrE9sW8\" target=\"_blank\" rel=\"noreferrer\">this talk</a> I was sold on it)</li>\n</ul>\n<p>Time to get my calloused hands to work!</p>\n<h2 id=\"the-joy-and-pain-of-learning-on-the-fly\" style=\"position:relative;\"><a href=\"#the-joy-and-pain-of-learning-on-the-fly\" aria-label=\"the joy and pain of learning on the fly permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The joy (and pain) of learning on the fly</h2>\n<p>As I ventured deeper into the world of React Native, I quickly realized that my trusty toolbox from the React.js universe was, well, not entirely fit for the job. For starters, my database schema was way too complex for AsyncStorage, so, I figured, why not switch to IndexedDB? Spoiler alert: IndexedDB only works on the web, not on the mobile build of the Expo app. Oops.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACW0lEQVQozyXLa0/aUACA4f7QZfu2LNmSZTPuoskucU5FAbkWZ6EtFgqlpYXSc3o9bS2lLRYrlwFOPy2Zbv9iMSbPpzd5sbJo4aJVEswMC9MszLbUDAtTjJJqKEdNkGbBYUN5lGmpR02QbWtl0XqElbpmsWsWOtpBuVGkxVNOpQRdMn1RHxIcrLRAvW91gNtRvSoHC6SwV2kdcxouoYeZkN2WFWn+hXkeWI5XZYTFej2KZ1Ey1yyXk5Tpcj1wouBqqajIcn1Rcw8ZpfI4F7tOmrN3KSDp3kWSAB2tbm+AO1ZQYDgjESA0mgzs0I6ScTK1/AumZxUF84fsViSE7TeN7Sp8WxBwRu4A1wljO4i5ARqYfp2Hp82+6oSi6mpOoDrBeZSwfWuflGkYsFaMUTAgBv5OTaYFtY/Cy/nq95+7UZyUaXEr2/iYbeTJbk91Hvrd/f2/v8AJU5RMKkNaDbADBuzSyociz0NHRgHR0diBDe1ARaMCM/iGcyJ0gR3qbihqXs/wzySjJKCaMix3EbaFC6++117sEPWuHi+WTjzj0Xi+XKPRZONz7vnG3nAy6xuejHxO80Q7avbRlxL3Zp8sdgxsmwBP3uefbaZ59Xw8X4WzpRPPV9fX46tFqniWytPBZHr5cxUl88Wv2+n6BrrRy68nTzczOc7E3p3IhwwQVHsXb5eaymlHqwoGJaEqr7/+VNjcwY9JkezZBK8TvJEhxQNCOBEMyfD2ziBWVXwa+KI7ybX1koDwrlPXIkoL8239oCalqH6ehXU9omBQg6Nc28i1tJrsie6kqvj/Ady2xoYddCZ4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Life of solo developer\"\n        title=\"Life of solo developer\"\n        src=\"/static/2afc83fff1f0d25fe75b2a4b8c7ffbc5/42a19/life-of-solo-developer.png\"\n        srcset=\"/static/2afc83fff1f0d25fe75b2a4b8c7ffbc5/e3135/life-of-solo-developer.png 256w,\n/static/2afc83fff1f0d25fe75b2a4b8c7ffbc5/06341/life-of-solo-developer.png 512w,\n/static/2afc83fff1f0d25fe75b2a4b8c7ffbc5/42a19/life-of-solo-developer.png 1024w,\n/static/2afc83fff1f0d25fe75b2a4b8c7ffbc5/e8464/life-of-solo-developer.png 1536w,\n/static/2afc83fff1f0d25fe75b2a4b8c7ffbc5/445c6/life-of-solo-developer.png 1792w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Life of solo developer</figcaption>\n  </figure></p>\n<p>After some wasted hours trying to polyfill IndexedDB for React Native, I simply gave up and I found myself in the middle of a major refactor. I decided to switch to <code class=\"language-text\">expo-sqlite</code>, a proper local database solution for mobile. But here’s the kicker—I still needed Dexie.js (a wrapper for IndexedDB) to keep the web build functional while I was developing the app since I mostly use the browser for it.</p>\n<p>Thankfully the team behind Expo really did think of everything: Enter <code class=\"language-text\">.web</code> files in Expo—essentially, Expo allows you to create platform-specific files (like <code class=\"language-text\">database.ts</code> and <code class=\"language-text\">database.web.ts</code>) so you can have different implementations for web and mobile. This was a lifesaver, and after this discovery, I can confirm that refactoring code while muttering “better late than never” is totally a thing.</p>\n<p>And let’s not forget the charts—because what’s a fitness app without fancy progress graphs, right? Well, <code class=\"language-text\">react-native-charts-wrapper</code> works great on mobile but not on web, so I had to bring in <code class=\"language-text\">react-chartjs-2</code> for the web version. You can see where this is going: juggling two different chart libraries depending on the platform was just another part of the fun.</p>\n<p>By now, I was deep into this rabbit hole, and to make life a bit easier, I added some developer tools to the app, like export and import database functions. This made it possible to move data between web and mobile during development. It was around this time that I realized why people are so in love with Firebase—maybe in a future version, I’ll make the switch, but for now, Musclog is 100% offline.</p>\n<h2 id=\"building-the-features-one-rep-at-a-time\" style=\"position:relative;\"><a href=\"#building-the-features-one-rep-at-a-time\" aria-label=\"building the features one rep at a time permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building the features, one rep at a time</h2>\n<p>Software development is a lot like bodybuilding, you start with a plan, but then you find out that you have lagging biceps genetics, and you end up pivoting and doing 28 sets for biceps per week (right guys?). My original vision was pretty simple: just a place to track my workouts and nutrition. But to get there, I had to build a robust system for creating and editing exercises, constructing workout plans, viewing past workouts, calculating workout volume, and so much more.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 222.265625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAsCAIAAADqwg+aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFkUlEQVRIx6WW61MTVxjG1wQ0bDbZLLu5LLMbhRCCXEIuJIEsEJRbghGxGDTjhYEwY+XiMMpNC/3QdopVnEKlgoBTudSAgoYkIHeZcRytCs7YOnW0M461X9oR5R8odJKUEANUrb95Puz7nvOcc/bszjkvsPQRAHa7fWhoyPG/AHg8XkhISEBAAIPB2PSBAARBCIVCLpfL+xC4blwzCwQCBEGC3xsEQXAcd5lJkgwPD4dhGEXR9zRzOBySJHEcBxAE4XA4wR8I4gYI/giA9Ub1rAjx4R1mBEEwDNNoErRaiqIopRuVSqVUKimK4vF4fkP4m/l8flhYGEEQIpFIKBSSJBkaGip0g2HYujOjKArDsFgs3rFjh0FvSEhIyMrK0ul0BoNBrzcYjUaxWOz3UfzfmQ3DEATx+XyJRBIWFioSicLDxTiOQxALhuF3bFi4SBQRIY6K2iqVSgmCjIqKiomJwfGQyMiIiAjx2mYURVksdnT01j7rRdv13t6ejp6eC2fONJSWlNTV1R3Yf+jg/gMdHS2xsTEQxPKufMUMQZBSKZ+csE1P2aenHDM3x4adtrExe2/vpeampks/dFgvX9KolUwmtLZZLo+7MTJwc9oxMjzY2dk2NeUcHbMNDFgPHixsbv722qBVoZBB0DpmhUI2Nnp9espZWVnd2Nj46NHd589/vX//9qmGUzbb4OiNofh4+X/NPD5um5x0NDR83d7e/vjx3K1bMz3dXbMP7jycu3Pvp1upuqSgIND7wX3NLLlcenNmtL29/fjxarU6NduQa9yZV119wumwOR3XpqduJFGJIMhc0wypVIrrtisnT35eXV1bW1tz9GjF4EDf3MPbTqejqOjT8+fPJadQIAhi2PKyPT89iqJMJiSTxTqHr50929Ta+v29e9OTk/ampsYLF1pGRob35hfU153UajUgyPT8yC4zhmECgYDH4/H5fJIklUqFRBIplUqTk6nt23XbtqVIJJEajSY6OlYmiyMIAsMwPp+P4ziGYYBQKKQoKjMzU+tGpVJrNAnx8UqZTCaVxsXFyVSqeLlcrlQqFQqFTqfLzMxMTU3VarVCodB1DGVkZFRUVKSnp5tMptzc3D179iQnJycmJnqG8z6o1erdu3cfPny4uLg4OzubIAjX6Wk0Gi0Wi8GNxk3COqjVaoVCkZaWlpGRQZIkINy8OS09XW8wpKWnZ+n1VFLSiii3fDJJSckUlaTTpabodJu3bAGCEYTDhmCIyWFBMIsZDLO9QjlwMAf2zXiEsFkIzHYdgKERkQU1XxbXn7bUnbLUnyqqW9ZnDYdqviio/WolsyxL/TcFNV+GRkQCVNbOq08Xrjx985aeLfQ/mf9uYrZ15uf+J/NXnvl3uPp0gcraCfAFuN5cuMtSllNY4qddRaW7ikrXyFvK9OZCvgAHUox5EwtLE2/8NTa/2P3wjx9/+XNs/u/J1R0WllKMeYAghMgpPJJfVmUqOWYqOe5Vfmnl3vKaveU1+aWVvnlTybH8sqqcwiOCEALQpOm7Zl90zf7uq+65l513njWPP2gef3Dx7m/dcy/9OnTNvtCk6QFJrKzqXNeJNmtt6+UVtVmrWrrLT7eWn26taun2az3RZq061yWJlQEwmx20MXC1wE0boaAgCAwCN21cswPMZgMoinK5vDWFcbmY6w5fuxVFUWD1fb9+NcDzawR8awyGm/UqkCCGS2/VJPuWMZvNJpMpLy/PbDbvW4XZvC/nE5d8GwFPRbW4uLi0tPT69etXr+a9oRdPdPcvl7zhv3WYB6fT2d/f39fX53Q6PRmbG8+zw2HvtNo6L9ucDq/DDvgCgkwOBwEAYMOGDQAACNx4Q89eekMXAcvQ6XQGgwGCIJ1ODwwMpNFoLDc0Gi0wMJBOp0GQK6TTaV7LP1SqCK8kQQwAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Workouts tracking\"\n        title=\"Workouts tracking\"\n        src=\"/static/d41801c4cd3ed5901fa8893f146a8c94/42a19/musclog-workout-screenshot.png\"\n        srcset=\"/static/d41801c4cd3ed5901fa8893f146a8c94/e3135/musclog-workout-screenshot.png 256w,\n/static/d41801c4cd3ed5901fa8893f146a8c94/06341/musclog-workout-screenshot.png 512w,\n/static/d41801c4cd3ed5901fa8893f146a8c94/42a19/musclog-workout-screenshot.png 1024w,\n/static/d41801c4cd3ed5901fa8893f146a8c94/b4ad3/musclog-workout-screenshot.png 1080w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Workouts tracking</figcaption>\n  </figure></p>\n<p>And nutrition tracking? Well, it’s not just about logging meals. I needed to be able to add foods, different macros, track calories, and integrate all of this with the workout data. As I kept adding features, I noticed that I was using GPT for nutrition information. So, why not integrate it into the app? That’s how Musclog ended up with a chatbot feature. Now, I can ask it things like, “How many calories are in a banana?” and get a quick answer. But let’s not get ahead of ourselves.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 222.265625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAsCAIAAADqwg+aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAG3UlEQVRIx6WVa2wU1xXHBwR4lz5s73vnuW+vpcZm1/O489yZ2ZnZHXttLWvW2JJNMDUxdu02TVFs2hAwINHEITYxAkwoSq2AS9qqCgkQ4rpNEA+VJM2Hth/oxyof+pCiSpWI1A91NTO2WUKqvn462j333nOu5t77v+dCK/8H0BWbt/8noEAgAMPwpk2bXC5X3Rfgeszq1n+haCyWTKVCMIygGIJhMIrCKGo5CAojaBiGv8gQx4FO3vjgxZ+9/9KVW9Nv3jz+k+XpN2+eeOv2Cz/9he3cmlv66PP27r1Xrv9q7sa9uaUPofcerFz67Z9e++gPi7/7y7nb91//zR/f+P1fFz7+5Icff3L5/qfvPVh5aJ+t3Pxs5f2//eON+5++8+e/33ywAk2cvjh5dnHy7OKB+cXJcz+amF+cmF+cnF+cOHPJstMXJ87Ydvri/rmF/acWnj21sP+V1549tTBx+iK01VXnmGvLplB9Pe7zoR5PBIFxBMaQ8Fe/tNW9ZbO7bstWV1044A/6fd6GejQcrv/Kl911W6BAMIjhOI4TGI7HR/qbp55OHRxPiGw6mUql0zhBxOLxeCIBwwhOEIBlFVVNJJIwjPj8fsjr9YZCoWAwGAqH4YMj0fPH0DOHgjyJBUMohgUCgWjMSvf7/XV1da2traqqut3uhoYGj8cDBYPBVCrVnE4nE4lUczqebkqkm5KJRCwSTSSTqaZUPBaLx6wJYrEYjmEoisbj8WgsGgwGIYIgJFHU29v1ardW7sqXu5RSu9JuKqWOQt/OfFdJzOUkXQM0LcmyapqCKPIcx/N8JBKxkkVB0EyTEwQ+l+MUOVc05Pai3GGyLCvpmrajIhdNyTDylbLSVdJ7urVqRTJ0HMMgHMdFUVQVBQDAAgBoBtA0oGmGolkbhmFERXbmcmJ4SeJ4niCI1eR8Ps+yLMdxrPPHcazjr8HQjDNkT2G5VrL12aIoyzKwYRgG/Duc6VaTBUEwDCOXyymKIstyrVPblGXZcSRJBAAQhL1hDMNIkrQe6sRJkqRpmqqqko1oI0kSz3PFUpeiG9aGEQTB83zt8uwlcwAAXdcLhcL6d672M4yiGapRsJK9Xi+CICiKIjV8run0rHaiKGzj9XqhSCRCkmT2v4QkSUskqVSqXC739vaapsnzvPgfIAhCLpdLp9PWOWcymdYatv0LagMymQyO41BjY6P/UTw2Xq/XU4PX63VGfT5ffX29z+drbGyEMAyja2AYRtM0wzA0TdN1XdO0QqFgGEY+n2cYhiRJURSr1SoAAEVRa8O4NSU6p7J9+/ZKpbLdplwud3d379ixo7Ozk2VZmqYVRRkaGuIdbRME4aifoiiGsQRM1UDTNEVRJEnSFGXdCdbSbzab5TjuobZzOclsL+VkhaIojuMEQeBto2mK51d9RyeOogBgLHk6t4oHzNcPPM9JYt/gU0pe29byRFtbhiLbSl1lkmxra8tmWp/YNfotUZa3tXxNNzt6+p9E4DAUi8WMYrGQk+nxvTv3jnRNTFT3Dg8Nj/f2Dewe/ub0O7e//dzR4acnx7/z3OD5C9U9Q+WOzvKTg+0jo2goCKWamjpLHZphPnN54XvLd/f9+NLk20uT79459stfH1i6w/9get+15WeuLY9dXe69fOb5n985cu3uoatL5tBONARbb5Way7F59dLy/PFrs9fvXji7fPb49dn9V2Znb5y8de/V2RszV++ce+v2/Acfnj+1NDez9OqFu69PHdjr84egSISgaDqvyEe++9TLh0e/f3DfCweHXz48+tKhkROHR1+c+sbJo+MzR8ZOHh2bnhqbOTJ+Ymp05thYX08XDKPWbgMARFFsN00pr/O6rhVLqmEahqnpBTGn0CxPA8c4mhVoINCAkyTJOqpIJOIIxDRUWVWEvKIXinlNM/JqZ0d7Pq+yAFgVjbWNYwFDa4WibnasVk9bJICiaMaumzRFMTRNkqQsy44qawsYQ9OSokqygmEo5PF4wuEw/CgIgsAwHA6HA4HA46PhkPVAWcUAhuHWx2hpabGUkc2yLEuSZEtLy6N3NpPJZmEYttbM8zxXg1PxKpVKX1/fwMBAd3c39ygMTTM0tfrcOOXaWRtFUYZhDA4OViqVcrlcrVZ7enoGBgaKxSJJkgAAsi1rlLp69gyjCAJFo1HrGqwhCAIAoFwuDw4O7tq1q7+/f/fu3ZVK5eEowxgdnd0De6zdDgQCzc3N6TUSiQRJkrqu2yXaWo4oioqiZLPZZDLZ1NSUTqdj0WgEx/1+P1RLQ0NDIBCAIGjjxo0QZBUZDMPWm84pQBC0YcOG1YQNa0AQtHnzZpfLtR691Wa96Xa7neZ6yj8B8tDSCGGw/9QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Nutrition charts\"\n        title=\"Nutrition charts\"\n        src=\"/static/b69f535658f7c245847ca719437cf7af/42a19/musclog-nutrition-screenshot.png\"\n        srcset=\"/static/b69f535658f7c245847ca719437cf7af/e3135/musclog-nutrition-screenshot.png 256w,\n/static/b69f535658f7c245847ca719437cf7af/06341/musclog-nutrition-screenshot.png 512w,\n/static/b69f535658f7c245847ca719437cf7af/42a19/musclog-nutrition-screenshot.png 1024w,\n/static/b69f535658f7c245847ca719437cf7af/b4ad3/musclog-nutrition-screenshot.png 1080w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Nutrition charts</figcaption>\n  </figure></p>\n<h2 id=\"from-tracking-to-chatting\" style=\"position:relative;\"><a href=\"#from-tracking-to-chatting\" aria-label=\"from tracking to chatting permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>From tracking to chatting</h2>\n<p>So, here I was, juggling workout logs, nutrition tracking, and managing multiple components for different platforms, and still I decided to add some ✨AI✨ into the mix? After all, everyone loves a good chatbot these days, and if you know me, oh boy, do I like a chatbot—so much that I’ve spent hundreds of hours coding a <a href=\"https://github.com/blopa/Magento-Chatbot\" target=\"_blank\" rel=\"noreferrer\">Magento chatbot extension</a> that for many years was my most popular open-source project.</p>\n<p>I started by adding a simple chat interface to the app, where users could ask questions like, “What’s a good post-workout meal?” or “How do I improve my bench press form?” The idea was to create an AI-powered personal trainer that’s always on hand, ready to provide insights and tips.</p>\n<p>As usual, after many hours of coding, I decided to show my progress to my friends, and they were like, “Why not use <a href=\"https://github.com/FaridSafi/react-native-gifted-chat/\" target=\"_blank\" rel=\"noreferrer\">Gifted Chat</a> for this?“. Wait so you’re telling me after implementing a chat interface from scratch, sending and parsing messages, I could have just used a library? Well, I guess that’s the beauty of learning on the fly.</p>\n<h2 id=\"openai-integration\" style=\"position:relative;\"><a href=\"#openai-integration\" aria-label=\"openai integration permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OpenAI integration</h2>\n<p>Integrating OpenAI into Musclog was a no-brainer for me. I had already dabbled with it in other projects, like when I used OpenAI to <a href=\"/en/blog/coding/creating-instagram-reels-coding-tutorials-automatically-with-openais-gpt/\">automatically create Instagram Reels coding tutorials</a>. With that experience, I was already familiar with function calls, parsing responses, and handling prompts. So, I thought, why not add this powerful tool to my app?</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 222.265625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAsCAIAAADqwg+aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHPUlEQVRIx6XWeUyTaR4H8AcopRTRQi+ERURFUXe5FCi0FAoIGmSEGRyBlT0yOzMxMTBsnEODM9nNuu4fkxWG5RDEHY4KcqhUdKSAUEsppfTgKO1bQan0gJZytl0GhHfTt4LiMrNx95NvnvyeN+8vv/d98zQpgP8PgIVo+Z8AEonk6emJQqEwGIyT07sF+O7Zs2//gZ1eXp5eXjs9Pd8poKBVeLXp8d/vdxe2iYo7B4ofS/9bBoraJYXs/sI2EeD8C65TTJfynt55YWmdhX+Yhn8wvp1HM6/rFj3MnoU5ZrjLAoML31V+Wcx8OKLpGDWwoUk2NNmmnGpVaNnKyUcKbSukax81PJRPtj+dYisnWyGdaHqlskuSm//Pr0puAQ8Pgu9en/ZWNgQppRLpwMDg4OCQVDrQL+zv7xcJhSKpuPeZvGdcpX42NvZC9QKG4StX/goA2O7qCvKu5v2j4tu29s4fFw1zBs2icXLRqDPNTC5M6xaNuvlpnck4sWZ6sWJZeGmeW1qYhuG1q3/OQwPgQSIA/0OHfnlg35G41ON/LDuWXZTwWUniZyW21VrkliTmlsRnlx7LLjqWU3Qsu+h4bsnuEzmYI5m4fWHAdYfbdkeAOf43fBHsk7/slb/mXbC267s1pFjdVbDqXbC6u3DVK39t5zXrdY9ra3uLX5LLYVRWA8ATyQQXh20p+X4VcHCJJbhs+XDxSlj58uHi5UNF1iKgZPlo+XJgqTWHi5ePlK34F1qIBbDj2SbgTiDhne22pRX4VsH+11d8S+G91+F912G/Mnh/Gby/HN5TCh8oh/3LrfXBG9bC9duXqGsw+ncs4E4g4l1Q6NCPwXkIfNwHPhWBT/qt+VSE1JvzByH4SIjNluz8k8ot+Qpwd3fH4XDffPN1410Ws66RWdfAvN106/bd6tp6Zl1jTW0D83Zjbf0dZl3jrfqm5geP7jQ/CIugbduBx+PdAc7NjUQi9QoEKpVKCUEKhVL1fESnkiqgp+Pj46OjowqFAoKgZ2Nj4+PjM0YjDMNnz551dHQkkkgAh8ORyeS2trb+fhGvp4fbzROLBP19nD6hqFcg4PN7e3r4fH5vn1DI5/cK+vomp6YyMjLRaCcikQjckMlcLlen0w0PD8tkw6OjY3KFcnT0qXKdAgFBkE6ns1gs6enpaDT6VTORSOzp6bFYLAMDA2Kx2Ho+hwZHRkbkcrlEIoEgSKvVqtVqvV4/Pz9vMpnebubxeDMzMzwej81mP3nypKOjg8vl8vn87u7u3t5ekUg0NDQkEAggCFpaWtpistlslslkEolELBYrFAqNRqNWqzUajUqlUqvVKpXq+fPnWq12i8e2TeYgeDweh8MRi8UymWwYIZFI5HL54KD1Xcxm8xbNc3NzEoRQKJRIJHw+f3BwcAD5iUokEqlUKpPJ3p7sjncnk8k9PXyTycTj8bhcbldXV2dnZ19fn23y0NCQbb5cLlepVJs+mAvWZft2HIfDMRgMEAQplUrIelQUExMTGo1Gq9XaVp1ONzExodVqFxcXz5w586r5o/O/vfiXC908wcyMUa/XGwwGvV5vNBoNBsPU1JRer9doNFNTUwaDQa1Wz87O2k4YGo0mkUgg5cP3f5N15sIXXzXU19fU1NQibiFq/0NdXV1NTU1wcDAWi3VzcwO+u319dvn4+Oz6xRt2bcXb29tW+Pn5HTx40N/fH1Bp1DhEfHz8cUR8fDyNRqMiaDRaFCI6OjpmHZ1Op9FokZGRIDQ09NSpU5mZmRkZGZmZmVlZWenp6fHx8TExMXFxcXQ6PSwsjEKhREVFJZx87+QHHyanpScknYyKiqJQKIBCodBoNAaDER0dTafTY2JiGAxGXFwcg8GIjY2l0+nh4eEUCoVKpdJtrLdFU6lUa3N4ePiJEydOnz4dGxsbFRVFpVKPHj0ats7W+VOszUlJSWlpacnJySkpKcnJyYmJiRsDf561OSEhISUlJRWRlJSUmppKp9MjIyOpb4iIiNiiOTLCKigoKDAwMAgREBAQtFlgYGBoaGhkpO3e1wCJ7EEgkr++fLmhoaGysrKqqorJZFZVVVUjampqqqurmUwmg8EgEAje3t5ebwCf5Pw+7+rnAqF0+celubk5k8lksVgWEQsLC2azeX5+Hobhc+fO2dnZ4fF43DrrCTuV9v6vM06fz8n9vvL7GzcqKm7erKi4+WqteF2HUyg7cDgSmUwkkTYCUA4oezsHB3s7sJmzkxPB3Y2Id8M6YwAAGDRqGxbj4uz0OlhnEEGlUsNDwtNyQi7zQi51BF/qCLnUEXKxI/hiR8ilx8hqTeCXbQFfsF/l80e/usgJSc8DqzYwvALDL9/1f1hLSwuLxbrPambdu9N8t+nB/eaHLSxbWlj3Wlj3fmr78EHLpvfEYrE4HA4AYGdn/QRksgeZ7LGxJRCJRCJpY2uFWufg4IDBYLBYrIODg6Ojo729vSvC3t7+re1Gy78BjSQRtkO9ctIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Chatting on Musclog\"\n        title=\"Chatting on Musclog\"\n        src=\"/static/704cbad9cc4378eb4a5830458e14e1ff/42a19/musclog-chat-screenshot.png\"\n        srcset=\"/static/704cbad9cc4378eb4a5830458e14e1ff/e3135/musclog-chat-screenshot.png 256w,\n/static/704cbad9cc4378eb4a5830458e14e1ff/06341/musclog-chat-screenshot.png 512w,\n/static/704cbad9cc4378eb4a5830458e14e1ff/42a19/musclog-chat-screenshot.png 1024w,\n/static/704cbad9cc4378eb4a5830458e14e1ff/b4ad3/musclog-chat-screenshot.png 1080w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Chatting on Musclog</figcaption>\n  </figure></p>\n<p>The integration itself was pretty straightforward. I used OpenAI’s API to process user queries and provide insightful responses. Every time a user sends a message, the chat history is sent back to OpenAI to keep the conversation context intact. To give the AI a bit of personality, I used system messages like, “You’re a helpful personal trainer named Chad, and you’re here to help with fitness journeys. Ask me anything!”</p>\n<p>But it didn’t stop there. I figured if I’m already integrating OpenAI, why not take it a step further? So, I added an option to ask OpenAI to create a workout plan directly. For instance, you can use the chatbot to ask, “Can you please create me a push-pull-legs workout?” and boom—Chad the trainer springs into action, generating a customized workout routine on the spot. This feature is particularly handy when you’re not sure how to structure your training or if you’re looking to mix things up.</p>\n<p>The possibilities here are pretty exciting. With this integration, Musclog isn’t just a static workout tracker; it becomes a dynamic fitness coach that evolves with your needs. And let’s be honest, having an AI that can whip up a workout plan in seconds feels like a superpower, especially when you’re in the gym and need a quick routine on the fly.</p>\n<p>Not only that, but I also gave access to all the health information to OpenAI, so my nutrition, workouts, weight, and fat percentage data is available for the AI to use, so it can give me better insights. Of course, due to privacy concerns, I made it optional, and I also added a feature to delete all the data whenever the user wants. But imagine, doing a really hard workout and then asking GPT what it thinks about it, pretty cool, right?</p>\n<h2 id=\"app-designs\" style=\"position:relative;\"><a href=\"#app-designs\" aria-label=\"app designs permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>App designs</h2>\n<p>I’m not a designer, but I like to think I have a good eye for good UI/UX due to many years of web development., but mobile development was a completely different beast, so I had to outsource the UI designs and any arts to either free open-source resources or to AI.</p>\n<p>Yeah yeah I know about the whole hate for AI-generated art, but it was either that or art made on MS-Paint, so I went with the AI-generated art.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 678px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABUElEQVQY03WMUW+CMBSF+f8/Z8n2MLO9LAvEhIehVbAFEVCgt1hhpVCwdFEzY5bsy83NOfeeHMv8Ml25i7v9j2marMPhEAQBxvjm/7wB4LHOGCOl1Fr3fS+EsKIochzH8zyMMefcGCOEUEpxzpumIYQ8lrZtO5vNhmGoqmo+n1uEkHEcgdIVQgvPYwAE47IoVgh1UkZhSDDeBIHv+5vNZrlYhGFY13Unpeu6Ft5GxphknwFjn45zrOvlev2FUJymQsokywJCPLREK2Tb9j7PP2z76eX59f1t7rqWyktzasYSdAltkg4FrUmkCtrt8y7NzKnpD4UoKaWAAzyKduInWPmqoEaNFoOYljGDHYP4WKUV2/FjxmBXsaRiCdC4gh3/Lr6I5yc+43tabutTfs2nVnvupFZS91L37fm2u/bc30ZqdRFjpyaltJLXixgvgU4PP+Z5vEEZQerAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MS-Paint Musclog logo\"\n        title=\"MS-Paint Musclog logo\"\n        src=\"/static/7e20ac19f1f7fbefd54041cd6e4b562a/dc057/mspaint-musclog-logo.png\"\n        srcset=\"/static/7e20ac19f1f7fbefd54041cd6e4b562a/e3135/mspaint-musclog-logo.png 256w,\n/static/7e20ac19f1f7fbefd54041cd6e4b562a/06341/mspaint-musclog-logo.png 512w,\n/static/7e20ac19f1f7fbefd54041cd6e4b562a/dc057/mspaint-musclog-logo.png 678w\"\n        sizes=\"(max-width: 678px) 100vw, 678px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">MS-Paint Musclog logo</figcaption>\n  </figure></p>\n<h3 id=\"ui\" style=\"position:relative;\"><a href=\"#ui\" aria-label=\"ui permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UI</h3>\n<p>For the app UI, I used <a href=\"https://reactnativepaper.com/\" target=\"_blank\" rel=\"noreferrer\">react-native-paper</a> components, which made it easy to create a clean, modern look and has most of the components I needed, like buttons, cards, and modals.</p>\n<p>That took care of the functional side of things, but what about the aesthetics? I outsourced my efforts to <a href=\"https://v0.dev/\" target=\"_blank\" rel=\"noreferrer\">v0</a>, a tool by Vercel that uses AI to generate simple one-page applications to be used in a Next.js app. I simply inputted the text explaining what I needed, and asked it to be mobile-first, and voilà, I had a beautiful design for my app.</p>\n<h3 id=\"logo-and-illustrations\" style=\"position:relative;\"><a href=\"#logo-and-illustrations\" aria-label=\"logo and illustrations permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Logo and illustrations</h3>\n<p>For the logo and illustrations, I used <a href=\"https://openai.com/research/dall-e/\" target=\"_blank\" rel=\"noreferrer\">OpenAI’s DALL-E</a> to generate the images. I simply inputted the text explaining what I needed and details about my app and got some really cool results. I then used <a href=\"https://www.photopea.com/\" target=\"_blank\" rel=\"noreferrer\">Photopea</a> to do some retouching and add some effects to the images.</p>\n<h2 id=\"making-it-to-google-play\" style=\"position:relative;\"><a href=\"#making-it-to-google-play\" aria-label=\"making it to google play permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Making it to Google Play</h2>\n<p>After months of development, testing, and an unhealthy amount of Pepsi Max, Musclog was finally ready for the big stage: Google Play. But here’s where things got… interesting. I was under the impression that I could just submit my app and be done with it, like I did back in 2019 for my game Gotinha. Ha! Little did I know, Google Play forces you to get 20 people to test your app before it goes live, even if you’re just a solo developer. WTF, right?</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8ACwpKVxXVDEvMCAfIHVvarOuquro5NTV1aWmp0NGTHJvbsTBvdrX1MG/vHFvbjs5OTEvMEE8O3JtaiYlJgAnJCY6ODhfXFtOTE6DgH5nZmZ0dnswMTS6t7SanKDGxMNaXWOTkI+oqatbWFmLioomIyR8d3Tn5N9YWFoAMDAyMjAxQkA/aGdnQkJETUtKSklLoZ6bycrMa2tsjIyMZGJiqKWisrS2XFxdW1teLiwsv7+8dXR1FhUXAHZ3eh0dH0I+PVBOT1ZTUmdnaK6urtTV02tqanFvbmhmZVxZVrWzsKmqq1dVVlBOT25tbF5eXy0pKD87OQBJR0gjIyZ0cG5sbXJzc3RdXF2XlpSgnZpoZWJjX12ioqGFhIWgn56ZmJaCgYBSTk5cW1xPTU1aVFFSTEkAKCYnUE9RWFVVbm5vsLCvc3R2f3x6u7q3fHp4h4aFjY2Oh4WFw8LCn52cbGppeHRzfn1+XVlYVlJPLiwsAGpmY/L08mVnbElGRYB9fICBgpeVlL6+vaurq7a2tbq6uK+vsMLCw56en1xaWaqoppeYmFdUU0tGRR8eHwAYFxi6uLSxtblRT1BtammKiorPzsxWVVZ/fn97enmDg4OCgoNaWVjR0M57e31raml0cnFYVVRgXl4eHR4ACgsOPz08pKanYWBhhIF/zMzJg4KDFRYZU09OaGhpaWlrUE9PLCwwkZGS3NvalJOSRkJCnpuajY2PDg4PACUlKCUjJXl3d4aGiLi1s5+fnzo7QDM2PEtJSoyLi46NjFpaXD9BSDw9QqenprGwrmpnaFlaXDMyMnx5egAsLC86OTtgXl60srHCwL1NT1JQSUtuZm5zdntfYGJfX2F0dXhpaGlHR0lSU1e9vLuxsbFTU1ZOTU85OjwAIyQnWlhYsa+t29vZdnZ2UExOWHB2VXxxXl1gVVlfVlpfZGZqX2FlXmBjTk9ThISF5OPhxsfGbW5yGxsgAGRkZLu5uNbV05GRkVVVVmFdXxU/UDFMQicmJjA2PT9DSC4yOC80OhwhJ2NkZ1xeYaalo9fW1LKys19gZaAKVbzZf9AuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Musclog on Google Play\"\n        title=\"Musclog on Google Play\"\n        src=\"/static/2f4435481c82229b5ad1e2f673ddf4d0/42a19/20-testers.png\"\n        srcset=\"/static/2f4435481c82229b5ad1e2f673ddf4d0/e3135/20-testers.png 256w,\n/static/2f4435481c82229b5ad1e2f673ddf4d0/06341/20-testers.png 512w,\n/static/2f4435481c82229b5ad1e2f673ddf4d0/42a19/20-testers.png 1024w,\n/static/2f4435481c82229b5ad1e2f673ddf4d0/7383e/20-testers.png 1535w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Musclog on Google Play</figcaption>\n  </figure></p>\n<p>Finding 20 people to test your app sounds easy until you’re actually doing it. I ended up recruiting anyone and everyone—friends, family, co-workers, acquaintances at parties, I might have even asked a few strangers on the street (kidding, maybe). But after gathering my testing “bros” and getting through the initial testing phase, guess what happened? My app got rejected. Yeah, it’s like life just wasn’t ready to let me win.</p>\n<p>So there I was, waiting another 14 days, fixing the issues they pointed out, and resubmitting the app. It was a rollercoaster of emotions, to say the least. And as if that wasn’t enough, because I wanted Health Connect integration, <strong>but not only that</strong>, believe it or not I also needed to have a public website for my app, so I had to create a website for it, and write a privacy policy, and fill out a form explaining why I needed access to Health Connect data. So I quickly spun a website using <a href=\"https://nextjs.org/\" target=\"_blank\" rel=\"noreferrer\">Next.js</a> and <a href=\"https://v0.dev/\" target=\"_blank\" rel=\"noreferrer\">https://v0.dev/</a>, and got GPT to write a privacy policy for me, you can see it here: <a href=\"https://blopa.github.io/musclog-website/\" target=\"_blank\" rel=\"noreferrer\">https://blopa.github.io/musclog-website/</a>.</p>\n<p>You might be wondering if I made this app for myself, why do I care to have it on Google Play? Well for one, I think Google Play is quite convenient and I want convenience on installing the app on my phone, and second, I want to share it with my friends and family, and I think it’s easier to share a link to the app on Google Play than to send them an APK file.</p>\n<p>But after all the hoops, I finally got the green light, and Musclog was officially on Google Play. So yeah, it wasn’t easy, but it was definitely worth it.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACCUlEQVQoz2N4+PDRnTt3noPB06dPnz179vTp01u3bt+6dfvZs+f/UcH3P//W3nm39s6bpddfPf/ym+HBo0cPHj58/uLFu3fvXr169fTpsydPQEbcv3//zZu3cG1///37////0XvvXBqXLT9+3bd91ax91xn+Ewf+/gVp3nP2TnzN1M0nr2V1Luxftoth8aUj8y8cvP7m6f////+hAhTNYO7tRy8CC7vd0ps8Mlu2HznPMP30nqmndp97dv/X719/UTWgAYhxN+49PXD6yrlrd//+/Qd19r8/f/79+f3n968/v3/Blf79/evf37///vz+9+cPVuMY/AP8e6dOK2lqn7VoWeuEKe2TprW0t2dkZk2aObuipXPu0pW1HT0rNmz+////mzdvPn36hOwpBl0dncDQUCN7+5iEhIPHTixfs87d11/T0CQqLt7A2CQlPdPS1q6qtu7///8/fvz49esXis05OZkJiYnuXh7Z2ZmTJ01sbm4OCQkxMNCPS0hQ1VSPiYkxs7JcvHgxOMD/ojs7LK8yNTPbztIiPiGpqLg4JSXVx8dXR083IjJCRU0tIiJCz8CgqroaHuAomvNKypvqavqa69u6+zo7Ojo6O2tqauPj4zs7O9PT0/v6+nNz82bPmQMPbRTNHz9++Pnz15dv3379+vnnzx9Mt+EBDJ8+ff758+c/vDGMSzMAxD14Zb8NfeEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Musclog on Google Play\"\n        title=\"Musclog on Google Play\"\n        src=\"/static/94c86cf4c9336297db75be297075c49d/42a19/musclog-on-google-play.png\"\n        srcset=\"/static/94c86cf4c9336297db75be297075c49d/e3135/musclog-on-google-play.png 256w,\n/static/94c86cf4c9336297db75be297075c49d/06341/musclog-on-google-play.png 512w,\n/static/94c86cf4c9336297db75be297075c49d/42a19/musclog-on-google-play.png 1024w,\n/static/94c86cf4c9336297db75be297075c49d/9bae8/musclog-on-google-play.png 1330w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Musclog on Google Play</figcaption>\n  </figure></p>\n<h2 id=\"to-open-source-or-not-to-open-source\" style=\"position:relative;\"><a href=\"#to-open-source-or-not-to-open-source\" aria-label=\"to open source or not to open source permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>To open-source or not to open-source</h2>\n<p>I always open-source all my projects—it’s kind of my thing. But when it came to Musclog, I hesitated. This app took me over 300 hours to develop, and it has some really nice features that I haven’t seen in other fitness apps. I figured maybe I could recoup some of the time I spent on it by selling it on Google Play or maybe adding a “tip me” button.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAELklEQVQ4y2WUWVMiVxiG+Z/5A8ldapKZi4xJSh3jgsuwg4psg+zdQAOyNDS90Mgm2Mgi7jqZmkr+Qjxv6hwHS2suvj770++3nGO6HtVxdSbhZlTH7VhmdvNtjq7NbT6mLbWHcxVfLjTcT5VXa6bnwVCCUI5CqMRwOXx9+CX0iv54IkOp8uC5MI6VLO5eQBnwbiwjL8awEbbBEXVDbwi4m8jfwS6ZMgUFIQb7fghJoYwt+x6kSoopvpwrpEBFTcMacyHA+zDoFJnrc4Vzo6GY9svwfwrDdRDBT28WcBBOwRfw42b8wmW6UZRS2I3tYTVgQbYSxcNUfXb9Zg5nSmvw+v346A7i3R9r8EczCIZ8LJZPCkcS7icKWsc5eLg9eHkvTnsl3E0UBjs/rWJ8UnkO/v25gk4jhy2rA7/+uQbP/j5GvfLzuunCqGHYLWM2qEJXsmiqAqZ9EUanxIBdvYAtiwWh0AGL66QvMus184hwfpy2i2xMoSwptKPU0lBraWhSBo16BrqcZf2ZUUVHyyMQ9MKz72FxpQCpwrH1jl5grSzyOFaEJyBVOGgVGVCVMqiWUqiLPJuj5dFUBNidDrQVAXfnCib9CgtBV8/D43GwfdSbs7lCmp3ZaRUtLYeCEEWGDzOF9BAFtupZCHse8C4nBnoet1OFxXfUK2Fnx8wSQfe9yvLlsIYvlw1EwvuIHnrx94XGMjwb1iBmIkh8tCJqszM4OzyqM6DNus3OzmFMIf3MgVzCj3QywPp07noiQztKImO1oRwNYtQXcX32dFNOmgVs75hZQqcD8fXVmxk1fL3SwcX9DPr5QmNheJipKAtRLL1fRjoRwrlRw7lRxXRQRVvLYWljBZFCEOOByFxnwJtRnXyeqORiLJFYxAuBC5F/r5u4OauDtlwqjB9+fIfltU12329HMh4mKtq6gIXVJdg4N3q9IzxMvtXh2aACoRaDr+gnm7vbZDfoJAUtSeic3s0Rj9+DNwtLWPiwhqrCoagkkJcTOMh48dvqIiwpF6y8G1KDZ2Vl6nWPSFaKEb4WgV84gJPzYIdzwhy3E0vWjfc76+Tt8gfy8++LMEds2Eo56BrsvBt7/B4SlTCEegyixrEkmrw5LwPKeoYMB2UyMURi9Mt0jJwWJyu2bfL2rxX8srgMd2wXJS2FVjsP6tnYENHu5FFRUwgXA8jX4zAlxcNHC+ci64dWYku4yadi4LGm8f/NjNrj18sGtq1WYrZZyNKGGcVcHP9c6eh2CshKMewLXliSLmwmHQgU/BgNKjDdjWViDMokmPaRRecmsfAurMdt8BV8j8NeieQyETSkDElzhzDaJdT1NMwJO4PsJJzYOrTjSE6wWqQJe3oPJ+zpId1OgegtgZTV1GOuHn+cGlXyeabSYBNae/RF0Y6zKMgJqM0smq0cTrpHrNDndfg/b78BFDz446kAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"To open-source or not\"\n        title=\"To open-source or not\"\n        src=\"/static/dd0d3e91e6e919e174aae6ca82c7d985/42a19/open-source-or-not.png\"\n        srcset=\"/static/dd0d3e91e6e919e174aae6ca82c7d985/e3135/open-source-or-not.png 256w,\n/static/dd0d3e91e6e919e174aae6ca82c7d985/06341/open-source-or-not.png 512w,\n/static/dd0d3e91e6e919e174aae6ca82c7d985/42a19/open-source-or-not.png 1024w,\n/static/dd0d3e91e6e919e174aae6ca82c7d985/e8464/open-source-or-not.png 1536w,\n/static/dd0d3e91e6e919e174aae6ca82c7d985/a52c7/open-source-or-not.png 2024w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">To open-source or not</figcaption>\n  </figure></p>\n<p>But once my app was approved and, to be honest, after using it for the past few weeks, I realized that while the features and ideas are cool, the app isn’t as polished as I would like it to be. It dawned on me that maybe Musclog would be better off as an open-source project, where the community could help me improve it—which, to be honest, is also wishful thinking because most open-source projects don’t get much traction and are mainly maintained by the creator, so the best I can hope for is people creating issues and asking for features. Hooray!</p>\n<p>Honestly, my dream would be to have an open-source app that somehow makes me money—something like Mindustry or Blender. So, after cleaning up the Git commit history, not because I’m ashamed of my code—okay, maybe a little—but mostly because I wasn’t sure if I had committed an OpenAI key by mistake, I decided to open-source Musclog.</p>\n<p>You can check out the code here: <a href=\"https://github.com/blopa/musclog-app\" target=\"_blank\" rel=\"noreferrer\">https://github.com/blopa/musclog-app</a>. If you’re into fitness and coding, feel free to contribute. Who knows? Maybe together we can turn this into something really special.</p>\n<h2 id=\"whats-next-for-musclog\" style=\"position:relative;\"><a href=\"#whats-next-for-musclog\" aria-label=\"whats next for musclog permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What’s Next for Musclog?</h2>\n<p>Now that Musclog is out in the wild, I’m already thinking about what’s next. There are a ton of features I’d love to add, like more detailed workout analytics, enhanced AI capabilities, and maybe even some social features to share workouts with friends or join challenges.</p>\n<p>One “problem” with Musclog is that it’s really an app for advanced lifters, not that I am advanced myself (I am not), but I am crazy about data and tracking, and my app really shines if you’re the type of person who tracks every single rep, set, and calorie. So, I’m thinking about creating a simpler version of the app, with fewer features, or maybe with a better onboarding process, so beginners can use it too, after all, most lifters are beginners, right? I also would like to be able to convince my friends to start working out and using my app, so I need to make it more appealing to them.</p>\n<p>Some of the features I’m thinking about adding are:</p>\n<ul>\n<li>Integration with BLE devices</li>\n<li>In-app food tracking capabilities</li>\n<li>More detailed workout analytics</li>\n<li>Option to use a custom OpenAI model</li>\n<li>Maybe a local LLM one day</li>\n<li>Online account to sync data between devices</li>\n<li>Online profile to share workouts and challenges</li>\n<li>Gamification features</li>\n</ul>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Looking back, the journey of building Musclog has been as much about personal growth as it has been about coding. I’ve learned so much about mobile development, which is always a good thing. I might be a web developer nowadays, but that’s not how everything started; back in my college days, I was a C++ developer, and web development wasn’t even a track in my course, so kind of coming back to platform development is a nice change of pace.</p>\n<p><img src=\"/c1611424e8d127b69fc982f398783569/just-do-it.gif\" alt=\"Just do it!\"></p>\n<p>So, if you’re thinking about starting your own project—whether it’s an app, a website, or something else entirely—my advice is simple: just do it. Embrace the challenges, learn from the setbacks, and enjoy the process. Because at the end of the day, the only thing standing between you and your goals is the decision to take that first step.</p>\n<p>Thanks for joining me on this journey, and I can’t wait to see what we build next. Lift, Log, Repeat!</p>\n<p>See you in the next one!</p>\n<p>PS: If you want to try Musclog, you can download it from Google Play: <a href=\"https://play.google.com/store/apps/details?id=com.werules.logger\" target=\"_blank\" rel=\"noreferrer\">https://play.google.com/store/apps/details?id=com.werules.logger</a>.</p>\n<h3 id=\"what-about-code-snippets\" style=\"position:relative;\"><a href=\"#what-about-code-snippets\" aria-label=\"what about code snippets permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What about code snippets?</h3>\n<p>I actually wanted to include code snippets and explain how most of the features work, but I realized that it would make this post way too long, so I decided to write a series of posts explaining how I built Musclog, so stay tuned for that!</p>","fields":{"slug":"/2024/2024-09-21-musclog-leveraging-my-reactjs-experience-to-build-a-react-native-app.en/","path":"/blog/coding/musclog-leveraging-my-reactjs-experience-to-build-a-react-native-app/","locale":"en"},"readingTime":{"minutes":17.685},"frontmatter":{"date":"2024-09-21T00:00:00.000Z","title":"Musclog: Leveraging my React.js experience to build a React Native App","categories":["coding"]}}},{"node":{"excerpt":"As a developer fully committed (pun intended, and not the…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVQozwGfAmD9AMiUA8uYBMuWAsmYC8+XBG51Z5OSWq6VQY6LV9i1I9ClFrGfW5qeW7aIDs+LAMyYDs+WBtOZAM+ZA9CaAgDNlgHUmQHjnACtsj2qwEpza1Obqbqus7l8j6yPkGaenWq0n1pMbalea2GJuocoqr5hl3TglgDUmwPSmwIAnok+o5JH3agH0blJraxOZWdxi5GbsrG1zb7Al4VdVWRjVVJVJENtFXikG4mqbnJGRI+Lw5EU0JMEzZcEAI59SJ240LS+rMC+ip+QT08zQGZga9fOvurUzLa0kpaPTGIlRFA5WxJYgR5DaaeQPjmmppiOObiLGNCWAgCwiBSlsbHq6s6Xn5pBRVdPUWpncofk5NOdsLRnloqlyG1eS1hhQVUZXYANUn5yY0GrrEKnnjzIoh3goAAA0KEQl6KUy8vBsZSHjoJzMUVoSVBdYVlmkIFrT3ltPHN/cKJ9XYVoE3qXGY2tbXBW9rkvzq03mJpE5akEAOevCKKaYrzByPnctIN6cQgaTqGobNvOUtnIVv/pVFV+bhZbfBlFZBw0WB6sx0uTlNChSO+8MHyPV8ylGQDmqA+xljyuvsX/9tBwdXd0eINYZnCounf/9Vf/9FSOekBGNTG3nES0lTlYY1AhK1WTjlmauW5IeXHjsA0A5MkX2Mcpn56Oi310XWZ12NrJpJ5vZmxX9Ohbzs9mp7VwhXJtnKl4oJ5hootJVGVXFUt5MlZhtZgl/80EAN+0G7GMSlhDSlpeg4GNkXtwcqt8X3VhRJCCT3mHbU95o3V6l3eMmnJ3kntiUEmDhD5fbZ19ZsaeOPC+BQDxvgO/jx+VeTmYe0yvnmuqrHy4mm+lfShnXVW0iDqZg2drgpCLb4Z9XlKomH6ojF/IiyOus6amj1P4xwWkVkqDztXvPgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"illustration of how it feels to work with foss\"\n        title=\"illustration of how it feels to work with foss\"\n        src=\"/static/e33431ea4c32553f41b55b637ea5a114/42a19/foss-git-calculation-illustration.png\"\n        srcset=\"/static/e33431ea4c32553f41b55b637ea5a114/e3135/foss-git-calculation-illustration.png 256w,\n/static/e33431ea4c32553f41b55b637ea5a114/06341/foss-git-calculation-illustration.png 512w,\n/static/e33431ea4c32553f41b55b637ea5a114/42a19/foss-git-calculation-illustration.png 1024w,\n/static/e33431ea4c32553f41b55b637ea5a114/e8464/foss-git-calculation-illustration.png 1536w,\n/static/e33431ea4c32553f41b55b637ea5a114/445c6/foss-git-calculation-illustration.png 1792w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">illustration of how it feels to work with foss</figcaption>\n  </figure></p>\n<p>As a developer fully committed (pun intended, and not the only one) in FOSS side projects, I often lose track of time. It feels like I’ve spent countless hours coding, but how many exactly? Curiosity got the best of me, so I decided to write a Node.js script to find out. Spoiler: I immediately regretted this decision after seeing just how much of my free time was spent coding. Here’s the story.</p>\n<h2 id=\"drafting-the-plan\" style=\"position:relative;\"><a href=\"#drafting-the-plan\" aria-label=\"drafting the plan permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Drafting the plan</h2>\n<p>I wanted a script that could calculate my working hours based on my GIT commits. Since I’m an avid believer of the atomic commits conventions, the idea is simple: when I’m working on my side projects, I’m committing. If there’s a gap of more than 3 hours between commits it means I’m probably off doing something else, like eating, sleeping, or watching programming videos (no wait).</p>\n<h2 id=\"choosing-the-right-package\" style=\"position:relative;\"><a href=\"#choosing-the-right-package\" aria-label=\"choosing the right package permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Choosing the right package</h2>\n<p>There are many GIT libraries for Node.js, but I went with <code class=\"language-text\">simple-git</code> for its ease of use. It’s a wrapper around GIT commands, making it perfect for this task.</p>\n<p>So after installing <code class=\"language-text\">simple-git</code>, and doing <code class=\"language-text\">npm init</code> and all of these shenanigans, I was ready to start coding.</p>\n<h2 id=\"the-code\" style=\"position:relative;\"><a href=\"#the-code\" aria-label=\"the code permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The code</h2>\n<p>Ok, let’s first get familiarized with <code class=\"language-text\">simple-git</code>, here is a simple code to fetch the commit log:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> simpleGIT <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'simple-git'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> git <span class=\"token operator\">=</span> <span class=\"token function\">simpleGIT</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCommitLog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> log <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> git<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> log<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error fetching commit log:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">getCommitLog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">commits</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>commits<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With the commit log in hand, let’s ”<a href=\"https://git-scm.com/docs/git-apply\" target=\"_blank\" rel=\"noreferrer\">apply</a>” our drafted plan into code and calculate the work hours. The idea is to iterate through the commits, and whenever there’s a gap of more than 3 hours between two commits, consider the previous commit as the end of a work session.</p>\n<p>So for example, if I start working at 9 AM and commit at 10 AM, then commit again at 3 PM, the script should consider the work session to be from 9 AM to 10 AM, so 1 hour.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">calculateWorkHours</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> commits <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getCommitLog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>commits<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'No commits found in this repository.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">let</span> totalWorkTime <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">let</span> currentCommit <span class=\"token operator\">=</span> commits<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> maxInterval <span class=\"token operator\">=</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3 hours in milliseconds</span>\r\n\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> commits<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> nextCommit <span class=\"token operator\">=</span> commits<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> currentCommitTime <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>currentCommit<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> nextCommitTime <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>nextCommit<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>currentCommitTime <span class=\"token operator\">-</span> nextCommitTime<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> maxInterval<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                totalWorkTime <span class=\"token operator\">+=</span> currentCommitTime <span class=\"token operator\">-</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>commits<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                currentCommit <span class=\"token operator\">=</span> nextCommit<span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        totalWorkTime <span class=\"token operator\">+=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>currentCommit<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>commits<span class=\"token punctuation\">[</span>commits<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> totalWorkHours <span class=\"token operator\">=</span> totalWorkTime <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1000</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Total work hours: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>totalWorkHours<span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> hours</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error calculating work hours:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">calculateWorkHours</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s basically it, but since we’re here, why not squeeze some more information? Not that knowing the total hours isn’t enough, but now I want to know how much time, on average, I am, uh, wasting—uh, I mean, having some quality time with my laptop.</p>\n<p>Let’s add that calculation:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">calculateWorkHours</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> commits <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getCommitLog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>commits<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'No commits found in this repository.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">let</span> totalWorkTime <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">let</span> currentCommit <span class=\"token operator\">=</span> commits<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> maxInterval <span class=\"token operator\">=</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3 hours in milliseconds</span>\r\n\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> commits<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> nextCommit <span class=\"token operator\">=</span> commits<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> currentCommitTime <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>currentCommit<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> nextCommitTime <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>nextCommit<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>currentCommitTime <span class=\"token operator\">-</span> nextCommitTime<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> maxInterval<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                totalWorkTime <span class=\"token operator\">+=</span> currentCommitTime <span class=\"token operator\">-</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>commits<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                currentCommit <span class=\"token operator\">=</span> nextCommit<span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        totalWorkTime <span class=\"token operator\">+=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>currentCommit<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>commits<span class=\"token punctuation\">[</span>commits<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> totalWorkHours <span class=\"token operator\">=</span> totalWorkTime <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1000</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> firstCommitTime <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>commits<span class=\"token punctuation\">[</span>commits<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> lastCommitTime <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>commits<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> totalDays <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>lastCommitTime <span class=\"token operator\">-</span> firstCommitTime<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1000</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">24</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> averageHoursPerDay <span class=\"token operator\">=</span> totalWorkHours <span class=\"token operator\">/</span> totalDays<span class=\"token punctuation\">;</span>\r\n\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Total work hours: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>totalWorkHours<span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> hours</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Average hours per day: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>averageHoursPerDay<span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> hours</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error calculating work hours:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">calculateWorkHours</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"lets-put-it-to-practice\" style=\"position:relative;\"><a href=\"#lets-put-it-to-practice\" aria-label=\"lets put it to practice permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’s put it to practice</h2>\n<p>After running the script on my latest side project, which I might write a blog post about soon, I was greeted with the following output:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">node</span> scripts/calculateWorkHours.js \r\nTotal work hours: <span class=\"token number\">98.77</span> hours\r\nAverage hours per day: <span class=\"token number\">3.74</span> hours</code></pre></div>\n<p>Excuse me, what? 98.77 hours? That’s almost 100 hours spent on a side project in a month. And 3.74 hours per day? I mean, I knew I was spending a lot of time on my side projects, but seeing the numbers was a bit of a shock.</p>\n<p>If people ask me, I say I’m quite an active person, after all, I do springboard diving 3 times a week, for a total of 4 hours per week, plus the gym sessions, around a total of 6 hours per week. So, yeah, a total of 10 hours per week, or 1.42 hours per day, not even close to the 3.74 hours per day I’m spending on my side projects.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.171875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHUlEQVQozwXB2XKaUAAAUD6hnaTGqAQXDBExUTZFtntBRCKybwJK1ESzzLRvnT71A/rVPQcJjFlqiTtbOrjqwVWqjfziqpWj5pa4W8sHD3xsXW2qgjHP4iOVnvGDCdHqEc1evvYQU2YDS01tfeuaqbPcOnpiw+J5fvTUS6T/LM3PIpsOWX7IEHcE2e4TGNGuo82rZumGiCXRnj7zIRvqs/TZeM2zY7I5h6tzoB7d2d+v3fu2GOMP4/4jVsfublACIzq3d71G1xAUJIBMqLEhZBLI5AuuXANbB5YopVB628B/f37z5Ai7aZHdYe17rV1Hhx2y+aOOt7p4C0cCQCc6lxjT3BQKU9hbQmyKGjeWyAG8Rdejp+lgMKUGfbTbuL7p1NFOA699u25c1aYUhQQqnUAmUsYZpPcmV9li5ajVRkyBAPCBNBxBhg2XamTwB3ceaBxH9vtofUK0y/UciSGbGXwG6dJg9iv66MpHV3pPQKhrc4q35hNT5ucsw5NdRxm/J9pnqr2FyiVSD84cidVJApmjo5xc8bgRzjE8h/LXVj8H2sEBn4nyq1xdYi23JZV7MgQmWYmHcFF6YO/ISCw/RjKVLZ5ebObFYU/+7BTMTv70LRIusXCOpK9Cf83BPtUTB3jPkibTBuB8G+yiJZJrdKZRkY7FS6xwHip/mLv3uXOfWnixISv/sfQo3yLXy66p4QvQWxk9oHSWOul7+n989pj+LrbIxQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"dissapointed but not surprised\"\n        title=\"dissapointed but not surprised\"\n        src=\"/static/342ed021e5dea82ee6c67621bde3a959/42a19/perfectly-balanced.png\"\n        srcset=\"/static/342ed021e5dea82ee6c67621bde3a959/e3135/perfectly-balanced.png 256w,\n/static/342ed021e5dea82ee6c67621bde3a959/06341/perfectly-balanced.png 512w,\n/static/342ed021e5dea82ee6c67621bde3a959/42a19/perfectly-balanced.png 1024w,\n/static/342ed021e5dea82ee6c67621bde3a959/6ee55/perfectly-balanced.png 1496w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">dissapointed but not surprised</figcaption>\n  </figure></p>\n<h2 id=\"caveats\" style=\"position:relative;\"><a href=\"#caveats\" aria-label=\"caveats permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caveats</h2>\n<p>While this script is nifty, it’s not without its flaws:</p>\n<ul>\n<li><strong>Assumptions on Breaks</strong>: It assumes any period longer than 3 hours between commits is a break. This might not always be true, but it’s a good enough approximation.</li>\n<li><strong>Commit Habits</strong>: If you’re someone who forgets to commit frequently, the script’s accuracy plummets.</li>\n<li><strong>Timezone Differences</strong>: Commits made in different time zones can mess with the calculations.</li>\n<li><strong>Figuring out how much time you’re wasting</strong>: This one is a bit subjective, I guess, but in my case, oof, I was not ready for that number.</li>\n</ul>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Writing this script was enlightening and horrifying all at once. I now have concrete proof of the absurd number of hours I spend on my side projects. If you’re curious (or crazy) enough to ”<a href=\"https://git-scm.com/docs/git-bisect\" target=\"_blank\" rel=\"noreferrer\">bisect</a>” your programming habits, it can be quite a “fun” exercise.</p>\n<p>And remember, while tracking your productivity is great, sometimes ignorance is bliss because after seeing my total hours, I just wanted to curl up and play some of my backlog games to compensate for all that lost free time.</p>\n<p>Happy coding, and happy atomic commits!</p>","fields":{"slug":"/2024/2024-06-16-tracking-my-working-hours-on-personal-projects-ssing-nodejs.en/","path":"/blog/coding/tracking-my-working-hours-on-personal-projects-ssing-nodejs/","locale":"en"},"readingTime":{"minutes":5.265},"frontmatter":{"date":"2024-06-16T00:00:00.000Z","title":"Tracking my working hours on personal projects using Node.js","categories":["coding"]}}},{"node":{"excerpt":"Navigating the intricacies of manga as a Western reader can…","html":"<p>Navigating the intricacies of manga as a Western reader can feel a bit like debugging assembly code, frustrating, and with a high risk of getting it all wrong. But fear not, my fellow manga misfits! With a pinch of Python code, and a heaping spoonful of programming prowess, I’ve created a masterpiece script to transform manga pages for Western consumption.</p>\n<p>So if you’re quite lazy, like me, this script is for you.</p>\n<p><strong>Disclaimer:</strong> This project is a fun exploration into image processing with Python. It’s not intended to undermine the traditional manga experience but rather to provide an alternative for those who might struggle with it.</p>\n<h2 id=\"but-why\" style=\"position:relative;\"><a href=\"#but-why\" aria-label=\"but why permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>But… why?</h2>\n<p>As a colossal Dragon Ball fan, waiting for the new season of “Dragon Ball Super” has felt like an impossible task, even though I’ve already been waiting for seven years. With the new season not even confirmed to happen yet, and Dragon Ball Daima just around the corner, my only recourse to finally learn who Moro is was the manga. However, the traditional manga format, read from right to left, completely obliterates my monkey brain (perhaps with some dyslexic tendencies) and Western reading habits.</p>\n<h2 id=\"this-foss-project-is-brought-to-you-by\" style=\"position:relative;\"><a href=\"#this-foss-project-is-brought-to-you-by\" aria-label=\"this foss project is brought to you by permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>This FOSS project is brought to you by</h2>\n<h3 id=\"easyocr\" style=\"position:relative;\"><a href=\"#easyocr\" aria-label=\"easyocr permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>easyOCR</h3>\n<p>Let’s take a moment to sing praises for <code class=\"language-text\">easyOCR</code>, the hero of this project. It not only reads text from images — it provides the precise coordinates (x, y) along with width and height.</p>\n<p>This is crucial because, in our script, knowing where the text lives is the first step in the magical process of flipping it correctly, and most OCR tools don’t provide this level of detail. With this information, we can mirror the image while keeping the text in the right place, so it reads left to right.</p>\n<p>You can read more about <code class=\"language-text\">easyOCR</code> <a href=\"https://github.com/JaidedAI/EasyOCR\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<h3 id=\"chatgpt\" style=\"position:relative;\"><a href=\"#chatgpt\" aria-label=\"chatgpt permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChatGPT</h3>\n<p>ChatGPT is like that friend who insists on reading the instructions when you just want to put the furniture together and see what happens.</p>\n<p>It was great working with <code class=\"language-text\">easyOCR</code> and <code class=\"language-text\">PIL</code> to read the data and manipulate the images, but when it came to flipping the text to it’s correct position, I needed a little more help.</p>\n<p>Also, things like make the script work with different params from the command line, and writing the README.md file, ChatGPT was there to help me.</p>\n<p>Well, actually for the README.md file, I just used Copilot, since it had the full context of the code and the project. But I guess “potato, potahto”.</p>\n<h3 id=\"the-art-of-procrastination\" style=\"position:relative;\"><a href=\"#the-art-of-procrastination\" aria-label=\"the art of procrastination permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The art of procrastination</h3>\n<p>I could have spent my time learning how to read manga the traditional way, but where’s the fun in that? Instead, I decided to create a Python script that would do the heavy lifting for me. And so, the <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a> was born.</p>\n<h2 id=\"the-magical-mirror-\" style=\"position:relative;\"><a href=\"#the-magical-mirror-\" aria-label=\"the magical mirror  permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Magical Mirror ✨</h2>\n<p>Ok but how can we actually do this without having to re-draw the whole manga page? Are we really going to hire someone on Fiverr to do this for us? No, we’re not. We’re going to use Python.</p>\n<p>Imagine mirroring a manga page in a way that doesn’t make your brain hurt. That’s what we’re doing here.</p>\n<p>We flip the whole image horizontally but carefully reposition the text, so it reads left to right, just like a Western comic. It’s a bit like a sticker book, where you can peel off the text, use Python to flip the page horizontally and stick it back on the other side. That’s how they work back in the days, right?</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHszbJKD//EABoQAAMAAwEAAAAAAAAAAAAAAAECAwAREjH/2gAIAQEAAQUCQDN7Po4oHorkSSvP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgIBBQAAAAAAAAAAAAAAAAECETEDQYGRof/aAAgBAQAGPwKtxqOn2J1VjcY+jTVXkwnyf//EABoQAQEBAQADAAAAAAAAAAAAAAERACFBUZH/2gAIAQEAAT8hloL70vMvpR4QQ0CVAZoiPu7DqE6L9wkMjxc//9oADAMBAAIAAwAAABDAz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQADAQEAAwAAAAAAAAAAAAEAESExUUFhkf/aAAgBAQABPxAKHo+A4jAU9ApdPN57kBBsRyz6i8hoKRLz8gu6KLDiPrCqcpljZTTrMyf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"A boy placing stickers in a sticker book, from which a Python snake emerges to help\"\n        title=\"A boy placing stickers in a sticker book, from which a Python snake emerges to help\"\n        src=\"/static/d17cb3dc28424401404395a9b03cef41/63217/python-snake-stickers.jpg\"\n        srcset=\"/static/d17cb3dc28424401404395a9b03cef41/db830/python-snake-stickers.jpg 256w,\n/static/d17cb3dc28424401404395a9b03cef41/8102f/python-snake-stickers.jpg 512w,\n/static/d17cb3dc28424401404395a9b03cef41/63217/python-snake-stickers.jpg 1024w,\n/static/d17cb3dc28424401404395a9b03cef41/f2d78/python-snake-stickers.jpg 1359w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">A boy placing stickers in a sticker book, from which a Python snake emerges to help</figcaption>\n  </figure></p>\n<p>(this is what DALL·E thinks the joke above looks like)</p>\n<h2 id=\"coding\" style=\"position:relative;\"><a href=\"#coding\" aria-label=\"coding permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Coding</h2>\n<p>As mentioned before, thanks to <code class=\"language-text\">easyOCR</code>’s meticulous text mapping, we can pinpoint where text blocks start and end. We use this info to keep our text from turning into an unreadable mirrored mess after flipping.</p>\n<p>So first, we create a function called <code class=\"language-text\">extract_text_from_manga</code> that loads the image and use <code class=\"language-text\">easyOCR</code> to detect the text blocks and their coordinates and returns a JSON with the data.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">extract_text_from_manga</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    reader <span class=\"token operator\">=</span> easyocr<span class=\"token punctuation\">.</span>Reader<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'en'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> Image<span class=\"token punctuation\">.</span>Image<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        base_image <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\r\n\r\n    results <span class=\"token operator\">=</span> reader<span class=\"token punctuation\">.</span>readtext<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> detail<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n    extracted_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n    <span class=\"token keyword\">for</span> result <span class=\"token keyword\">in</span> results<span class=\"token punctuation\">:</span>\r\n        data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">:</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"location\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> point <span class=\"token keyword\">in</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"width\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"height\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        extracted_data<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">return</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>extracted_data<span class=\"token punctuation\">,</span> ensure_ascii<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>With this data, we can now reposition the texts by creating a new function, <code class=\"language-text\">create_image_with_inverted_text_placement</code>, which takes text position data and creates a new image.</p>\n<p>This function adds the texts to their respective positions but inverts them horizontally. For example, if a text is originally positioned at 10 in an image with a width of 100, its new position becomes 90 due to the inversion (calculated as 100 - 10 = 90).</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">create_image_with_inverted_text_placement</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    width<span class=\"token punctuation\">,</span> height <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>size\r\n    new_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>new<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n    data <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">for</span> index<span class=\"token punctuation\">,</span> item <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'location'</span><span class=\"token punctuation\">]</span>\r\n        box_width<span class=\"token punctuation\">,</span> box_height <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">]</span>\r\n        <span class=\"token keyword\">if</span> box_width <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token keyword\">or</span> box_height <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">continue</span>\r\n\r\n        new_x <span class=\"token operator\">=</span> width <span class=\"token operator\">-</span> x <span class=\"token operator\">-</span> box_width\r\n        cropped_image <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>crop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x <span class=\"token operator\">+</span> box_width<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> box_height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n        cropped_image <span class=\"token operator\">=</span> cropped_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\r\n        new_image<span class=\"token punctuation\">.</span>paste<span class=\"token punctuation\">(</span>cropped_image<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>new_x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cropped_image<span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">return</span> new_image</code></pre></div>\n<p>Now the final step is to take the original image, flip it horizontally, and paste the transparent image with the texts on top of it. This is done by the <code class=\"language-text\">overlay_flipped_with_transparent</code> function, which takes the base image, the transparent image with the text, and the path to save the final output image.</p>\n<p>The function flips the base image, converts it to RGBA, and then uses <code class=\"language-text\">Image.alpha_composite</code> to overlay the flipped image with the transparent image. Finally, it saves the output image to the specified path.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">overlay_flipped_with_transparent</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token operator\">=</span><span class=\"token string\">'final_output_image.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    flipped_base_image <span class=\"token operator\">=</span> base_image<span class=\"token punctuation\">.</span>transpose<span class=\"token punctuation\">(</span>Image<span class=\"token punctuation\">.</span>FLIP_LEFT_RIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">if</span> transparent_image<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">!=</span> <span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">:</span>\r\n        transparent_image <span class=\"token operator\">=</span> transparent_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGBA'</span><span class=\"token punctuation\">)</span>\r\n\r\n    combined_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>alpha_composite<span class=\"token punctuation\">(</span>flipped_base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">if</span> final_output_image_path<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">'.jpg'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> final_output_image_path<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">'.jpeg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        combined_image <span class=\"token operator\">=</span> combined_image<span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">'RGB'</span><span class=\"token punctuation\">)</span>\r\n\r\n    combined_image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>final_output_image_path<span class=\"token punctuation\">)</span></code></pre></div>\n<p>So, putting it all together, we can now extract the text from the manga image, invert the text positions, and overlay the flipped image with the text in the correct position. The result is a manga page that reads from left to right, just like a Western comic.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">do_task</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        base_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\r\n    extracted_text <span class=\"token operator\">=</span> extract_text_from_manga<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span>\r\n    base_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> base_image\r\n    transparent_image <span class=\"token operator\">=</span> create_image_with_inverted_text_placement<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> extracted_text<span class=\"token punctuation\">)</span>\r\n    overlay_flipped_with_transparent<span class=\"token punctuation\">(</span>base_image<span class=\"token punctuation\">,</span> transparent_image<span class=\"token punctuation\">,</span> final_output_image_path<span class=\"token punctuation\">)</span></code></pre></div>\n<p>And that’s it! Of course there’s more code to account for different scenarios, like processing multiple images or CBR files, but the core logic remains the same. You can check the full script <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<h2 id=\"how-to-use-it\" style=\"position:relative;\"><a href=\"#how-to-use-it\" aria-label=\"how to use it permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use it</h2>\n<p>To get started with the <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a>, you’ll first need to ensure your environment is set up correctly:</p>\n<ol>\n<li>\n<p><strong>Clone or Download the Script</strong>: Get a copy of the script from our repository. If you’re familiar with Git, you can clone it; otherwise, simply download the zip file and extract it to a convenient location on your computer.</p>\n</li>\n<li>\n<p><strong>Install Dependencies</strong>: Open your terminal and navigate to the script’s directory. Install all required dependencies by running:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-r</span> requirements.txt</code></pre></div>\n</li>\n<li>\n<p><strong>Prepare Your Manga Files</strong>: Make sure your manga pages are in a supported format (common image formats like JPG, PNG are perfect). Organize the pages in a single directory if you have multiple files.</p>\n</li>\n<li>\n<p><strong>Run the Script</strong>: Use the command line to specify the source and the output directory. If you don’t specify an output directory, the script will automatically create one. Here’s how you can run the script:</p>\n<ul>\n<li>To convert a single manga page:\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga_page.jpg <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div>\n</li>\n<li>To convert multiple pages stored in a folder:\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga_folder <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div>\n</li>\n<li>To convert a CBR file:\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python3 script.py <span class=\"token parameter variable\">--source</span> manga.cbr <span class=\"token parameter variable\">--output</span> comic_folder</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Check the results</strong>: Once the script has finished processing, check the output directory for your newly transformed comic pages.</p>\n</li>\n</ol>\n<h2 id=\"some-caveats\" style=\"position:relative;\"><a href=\"#some-caveats\" aria-label=\"some caveats permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Some caveats</h2>\n<p>While the <a href=\"https://github.com/blopa/manga-converter\" target=\"_blank\" rel=\"noreferrer\">Manga to Comics Converter</a> aims to simplify your manga reading experience, there are a few points to keep in mind:</p>\n<ul>\n<li><strong>Quality of Text Recognition</strong>: The accuracy of text detection can vary based on the quality of the manga images. High-resolution images tend to yield better results.</li>\n<li><strong>Cultural Nuances</strong>: Flipping the images can sometimes disrupt the original artistic intent or the flow of the story. Certain visual elements intended to be on one side of the page might not translate well when mirrored.</li>\n<li><strong>Performance</strong>: Processing multiple or high-resolution manga pages can be computationally intensive, especially if you don’t use a GPU.</li>\n<li><strong>Specific Glitches</strong>: If the text overlays significant visual elements (like a “BOOOM” in the middle of a character drawing), the part of the image underneath the text will be flipped, which could result in a glitched visual. This is due to the script flipping the entire page except for the text areas.</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 569px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 150%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGpUlEQVQ4yy2Vb0xS3x/H7+ppqzWz5eZq63mrZ9XaWvVrucJ0/rkynNrUxYP+TKUcuFx/lNQxMTWNBHRoJPmPoCQBUZTpxYFeVCDRKZB5vcDlXi4Eaqmc75Tf69F5cj7nnPfn/f4cyOfzBQIBsVj8/ft3AIDVahWJRC9fvnz//r3ZbF5eXvb7/Tab7cePHzKZbGJiQqPRfPv2ra2tjcViQX6/v+qQ4uJivV5vMpkUCkVLS0t9ff3i4mIkEgmFQj6fLxKJqA/59OkTn8+XyWQNDQ3Q3Nzc5cuXL168eP36dS6X+/HjR6FQKBKJVCqVx+OhKIogiD9//gAAzGbzw4cPeTyeVCpdX1/X6XSQVqu9dOmSRCKpr6/PzMy0WCy9vb11dXX9/f04jgeDQZIkt7a2AABqtVqhULS2tg4MDESjUalUCi0vLysUilgs5nK57t69W1NTMzk5OTs7S9M0QRAul2tlZSVx88bGxoaGhpmZmV+/fmEYNjk5CW1vb0ej0WAwuLq6yufzX79+PTIygqIoTdM/f/5EUdTr9dpstsXFxYmJCRRFHQ4HiqLDw8NNTU1QIBBYWFiYm5sLBoNqtbqurk4oFCIIQtN0OBymafrfv38YhlEURZJkLBZDEGRgYEAkEn3+/BnS6XQSiQRF0YqKCgiCJBLJ4uJid3f3ysoKOCQaja6trSXW4XB4aGhILBYbDAav1wv19vZCEHTkyJGjR49CENTY2OjxeJaXl9fW1iiKAgDQNJ0Q7O/fv+vr6xRFzc/PWywWh8MBWSyWnJycwsLCoqIiGIa1Wi2O4wRB+P1+p9OJ4zhFUUql0ul02mw2t9ttsVhMJtPU1JTb7Ya2trb29vYoivp3CHmIz+fDcZym6cRTURS12+06na6mpqaiooLD4Uil0rGxMQjDMKfT6fP5CIIIhUKRSGR7ezsUCm1sbHi93q2tLbvdLpFIfv/+bTQau7q6JBJJe3t7f39/Z2cnRBDE0tISSZJut9vj8bjd7kShQCDgcrkwDENRVC6Xc7lcHo9nMBh4PN6XL18SboEoigqFQtvb238OScgTj8dpmsZx3O/37+7uJjS/cuWKWq0uKyszGAxSqXRpaenAJPF4fH9/PxqN0jS9u7tLkmRfX19ra2tXVxeO4/F4XKPR7O/v19bWfvjwAQCAYRiXy93c3ITGxsY6OjoQBHG73QRBjIyMZGZmCgSCvr6+/v5+s9kMAMjKylKpVOPj42lpacPDwxwOZ3BwcHd3F6qsrBQKhRwOB4bhtra2wsJCJpNptVp7eno0Go1CoaAoSiAQ1NfXz8/Pv3jxQqfT2e12r9dLkiS0uroqFAqdTqdSqRQKhXK5vK+vLyMjo7u7OxwOT01Neb1evV6vUqlMJpNIJNrZ2UEQZHJycnBw8KBVbDa7vb29qampuroaABCLxZRKZVVV1dDQ0OzsrMlkWlhYWF1d7erq4nA4QqFQo9EgCPLmzRvIarU+e/YsKysrOzsbRVEMwwAAYrGYzWbzeLyEMcrKysrLyysqKp4/f56fn4/jOACAx+NB09PTMAxnZWXp9fqOjg6bzabX669evVpSUgLDcHV1dVFREZPJzM/PZ7FYRUVF6enpHR0dAID8/HzIaDReu3aNwWA8ePDgwoULIpGIyWTevHmTwWDcuHGDy+Xeu3fv1q1bt2/f/t8hd+7cYTAYb9++ZTAYkEqlOnbsWHJy8okTJ1JTU0+fPn3u3LnU1NSkpKTjx4+XlJScP3/+5MmTycnJSUlJycnJp06dOnPmTEpKytmzZyGz2ZyRkQHDcF5eXk5OTl5eXnZ2NpPJLC0tLS4uFggEBQUFOTk5TCaTxWLBMJybmwvDMIvFys3NPUhVAp/Pl0hYLBaz2Wzl5eWPHz+urKzEMGxzc9Nms6EoGgwGI5FIOByOx+MAACiRAb/fbzKZEpPN4XB0dnaWlpaWl5enpKQgCKJQKBobG7VaLYqiHo+HIIidnZ14PA6RJLmxsdHT02MwGMbHx+fn52dmZlZWVsbHxwEAzc3NT548qaysZLPZX79+nZqamp2dtdvte3t7BydHIpFAIMDj8dhstkAgmJmZGRkZ2dnZWVhYePfuXXp6+qtXr0pKSjgcjkwmm5ubk8vlCIIkRtrBd4Oi6PT09KNHj/h8/ujoqFqtTrQxLS1tbGzM6XRKJJKnT5/K5XKr1SoWi00m0/83b25uqtVqu93e0tLC4XCam5s7OztJkqytrTUajZmZmffv3zcYDDKZrKCgQCwWK5XK0dHRhGD/AWVownytEmZHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"glitched manga page\"\n        title=\"glitched manga page\"\n        src=\"/static/f70dec21cf63a8d87241917f2b71a8ea/7ca0c/glitched-manga-page.png\"\n        srcset=\"/static/f70dec21cf63a8d87241917f2b71a8ea/e3135/glitched-manga-page.png 256w,\n/static/f70dec21cf63a8d87241917f2b71a8ea/06341/glitched-manga-page.png 512w,\n/static/f70dec21cf63a8d87241917f2b71a8ea/7ca0c/glitched-manga-page.png 569w\"\n        sizes=\"(max-width: 569px) 100vw, 569px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">glitched manga page</figcaption>\n  </figure></p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>We’ve bridged the gap between East and West with a few lines of Python, transforming right-to-left manga into left-to-right page-turners. Now, you can enjoy “Dragon Ball Super” without feeling like you’re reading a book in a mirror.</p>","fields":{"slug":"/2024/2024-05-01-transforming-manga-pages-for-western-readers.en/","path":"/blog/coding/transforming-manga-pages-for-western-readers/","locale":"en"},"readingTime":{"minutes":7.605},"frontmatter":{"date":"2024-05-01T00:00:00.000Z","title":"Transforming manga pages for lazy western readers","categories":["coding"]}}},{"node":{"excerpt":"After creating a Node.js script to automatically post…","html":"<p>After creating a Node.js script to <a href=\"/en/blog/coding/posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations/\">automatically post Instagram Reels</a> and one to <a href=\"/en/blog/coding/how-to-automatically-create-thumbnails-for-your-videos-with-nodejs/\">automatically generate thumbnails for a Instagram Reels</a>, what comes next? Automatically generating the content of the video, of course!</p>\n<p>In this post I’ll show you how to use OpenAI’s GPT-3.5 to generate the content of a coding tutorial video. I’ll use the same Node.js script I used in the previous posts, plus a <code class=\"language-text\">create-react-app</code> that will be used to type in the code from the generated tutorial.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADKElEQVQozwXBWUzTBwDA4T+DcTnAEKAUWqUDWi5rAaFgBbMqZ01bYAhylk5aOZxU1kKhwEBhKIhYFDBgZIBAq5I5QAScWyRbsiW7spctZG9L9uLDkmXJnvbb9wlRUg1yWTpnM3OxX+7gxfYcvxy8xLt0n5qCCyi1TRwpNnG0uhVphZUjla2IKqxElF0iUn+JaIMFsd5CUEox/qIchFiZlix5Nm3nythxD/L3gRf++5G/DnZxj6+i7VsnzrGGpGsVyexLRJ4fiNv4lXj7BKHv1RKibye0yk6wugr/2HwEkUyLIimbkpJyrg1e5+fvHvHmjx02th/TbhtA23iFQ6dbEDm8FP0Dx/+FuDcQ2zvLO7UODrseIH/4JWEV3fjF5COEywqRHTtNhs5EUccI888esPX9Fs2L65yq/xCxsYfUvmWy7j4j+dE+0Ss/IXvxG0enPCTOrJKz8ZrEtdeEVfbiKz2LECY3ID6hJ73OTp5zEuvdSQY+W6Hy08/JsjpJndxB3uUhvcSCkFTDsYZ7qKdf8e7aLineTdS736Dc3Ceq8RqCzIgQmFqNuKiFAtcw6v5bGO7MYb4ziXFqCcnt31E+/xPZ4rdIbA8JufqU8Cvr5I1tUrj8hLTlFRSLXtK924ibbyIoGhCEjDbiG7spuH4LVb8b2+MVdENuDB+PYVjYI9bUR8r0GrnrX5C79QqV52skM/uY51fRjI4jd1zl5JCLGPM4gsqGEJDRQHjpZTRj81i8HipnF4g03eCMzUW1s5MAZT7Fjh4uToxiGujAPPIRF929WEd7aOw2k1RVTnzNeSKrBxHU/QiBqgZ8dG5iHEsoemeIsN4ktGkYqbGdpGYXhzM1pL1vIt95D/86D4JugZP229RP9JGgKySksJwIQwVB+j6EU8MIvqpWgnVu/BLOEJGsISL3HGH1nYiNzeS02Ui0ucg0WZDqaznR1ImvsoK0Fgel07NElpbhc95EQJ0ZP50TIbMHwVdxAf8sC28n5BF0XEuw/gMktiGSu8ZQLT4n/pNpsm9MIfPuod37iui5ZaJGp4gdneOQsQn/FieBI/d5q2wQH3kr/wMcxNdOxLj/fAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AI is taking over\"\n        title=\"AI is taking over\"\n        src=\"/static/cdcc77b7fb8d6bdf43386ce698ba2c79/42a19/auto-generating-tutorials.png\"\n        srcset=\"/static/cdcc77b7fb8d6bdf43386ce698ba2c79/e3135/auto-generating-tutorials.png 256w,\n/static/cdcc77b7fb8d6bdf43386ce698ba2c79/06341/auto-generating-tutorials.png 512w,\n/static/cdcc77b7fb8d6bdf43386ce698ba2c79/42a19/auto-generating-tutorials.png 1024w,\n/static/cdcc77b7fb8d6bdf43386ce698ba2c79/e8464/auto-generating-tutorials.png 1536w,\n/static/cdcc77b7fb8d6bdf43386ce698ba2c79/445c6/auto-generating-tutorials.png 1792w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">AI is taking over</figcaption>\n  </figure></p>\n<h2 id=\"prompting-engineeering\" style=\"position:relative;\"><a href=\"#prompting-engineeering\" aria-label=\"prompting engineeering permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prompting engineeering</h2>\n<p>The first question I had to ask myself was: how can I prompt GPT-3.5 to generate a coding tutorial? I mean, I can’t just ask it to generate a coding tutorial, right? I need to give it some context, some information, something to work with.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpklEQVQoz4WSaY6cMBCF+xg9wwyLjfcFGwxmb6DpZZLc/zwJTdKKlIxGerL8431Vr8o+DNN5udz7cZmW63r7hoiAmBGuEZVhgo5B9Pqe/KtjEAHEDnU3jtPaDXPTncZ5VaYo665q+rxsirIJE/TyFn8KA8Qo1ynhEHMqNEgpFRlmCmKOqAxCcAyip17fkyAEQQhe3uINJlzlZZ3llTJO29I6L3Se5ZXznSkq59u8bKzzvh1M4bmyEG9tkpQyaQ6Yyp0UympbKuMI1zsvs0IZpx7nw1MgKiOAY0hCgDeYSWNdra1j0mR5tZUwrqp7ZQrrvPOtzAqu7N7A+c75zjqvjKMiOwht5/V2uf9wVdsO83S+LZf7OF/60+Kqdlquw7TW3bjevp+vH0132uI8ym2dk5QhqriyKREpEUwaJu2eHFGJmaIioyLjygqdE6ZiSJKURntsKrKq6bV1Zd0X1RYySWmS0t30vO9KUgoQA4jFkGwwxHz/EoTr/YX+Nn2m37DQth2mP5uou3Eb27o6huRrGCCGmcJUIiIQEeQxJCLimfm/iiH5te2fhep7nFSF4lsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Future is here\"\n        title=\"Future is here\"\n        src=\"/static/f74dd4bc90e600f64b196b06fb41b1db/42a19/programming-2050.png\"\n        srcset=\"/static/f74dd4bc90e600f64b196b06fb41b1db/e3135/programming-2050.png 256w,\n/static/f74dd4bc90e600f64b196b06fb41b1db/06341/programming-2050.png 512w,\n/static/f74dd4bc90e600f64b196b06fb41b1db/42a19/programming-2050.png 1024w,\n/static/f74dd4bc90e600f64b196b06fb41b1db/69083/programming-2050.png 1158w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Future is here</figcaption>\n  </figure></p>\n<p>In this new era of working with language models, it’s weird that if you want the model to do someting, you just have to ask for it. So, I started by creating a list of things I wanted to be in the video, like:</p>\n<ul>\n<li>A title</li>\n<li>A description</li>\n<li>The code itself</li>\n<li>A list of ideas I’ve used before</li>\n<li>A list of things to avoid</li>\n</ul>\n<p>And then I started to think about how I could use this information to prompt GPT-3.5 to generate a coding tutorial. I came up with the following prompt:</p>\n<blockquote>\n<p>Take a deep breath, relax, and think analytically about the problem you’re trying to solve.\r\nI have a JSON file for a script for a video coding tutorial for Instagram Reels, which looks like this:\r\n&#x3C;JSON_EXAMPLE_HERE>\r\nPlease use this template to generate a new script for a video coding tutorial for Instagram Reels.\r\nAvoid using the following ideas:\r\n&#x3C;USED_IDEAS>\r\nAnd avoid the following topics:\r\n&#x3C;AVOID_TOPICS>\r\nMake sure to only answer me with a JSON file with the same structure as the one I gave you and nothing else.</p>\n</blockquote>\n<p>After crafting this prompt, I tested it a few time on the ChatGPT, and it was looking good, but as expected, sometimes the output wasn’t a valid JSON format, and that’s when I’ve learned about <a href=\"https://openai.com/blog/function-calling-and-other-api-updates\" target=\"_blank\" rel=\"noreferrer\">function calling</a>.</p>\n<h2 id=\"function-calling\" style=\"position:relative;\"><a href=\"#function-calling\" aria-label=\"function calling permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Function calling</h2>\n<p>Function calling is a new feature of the OpenAI API that allows you to call a function from the prompt, and it helps it to make sure the output from GPT is what you expect.</p>\n<p>In my case, I created a function called <code class=\"language-text\">generateTutorialViaOpenAi</code> that receives the JSON file with the script for the video and returns a new JSON file with the script for the video.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> OpenAI <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'openai'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> openai <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OpenAI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">apiKey</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">OPENAI_API_KEY</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateTutorialViaOpenAi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prompt</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> schema <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">required</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'commands'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'files'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'description'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">properties</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'A nice and catchy description for the tutorial.'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">commands</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'A string with the code and commands to use for the tutorial. It must not be empty.'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'array'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'The list of files that are going to be used in the tutorial. One of them MUST be index.html'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'A file that is going to be used in the tutorial'</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">required</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'content'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">properties</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'The name of the file'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'The content of the file. Should be empty for the file that is going to be typed from the script.'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> reelsCommands <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> openai<span class=\"token punctuation\">.</span>chat<span class=\"token punctuation\">.</span>completions<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token string\">'gpt-3.5-turbo'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">messages</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n      <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">role</span><span class=\"token operator\">:</span> <span class=\"token string\">'system'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">'You are a helpful programming professor.'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">role</span><span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> prompt <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">functions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'generate_tutorial'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">parameters</span><span class=\"token operator\">:</span> schema <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">function_call</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'generate_tutorial'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> reelsCommands<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>As you can see, the <code class=\"language-text\">schema</code> object is the key here, making sure the output from GPT is what I expect.</p>\n<h2 id=\"generating-the-video\" style=\"position:relative;\"><a href=\"#generating-the-video\" aria-label=\"generating the video permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Generating the video</h2>\n<p>Now that I have a JSON file generated on demand by OpenAI, I need to somehow convert it into a video, and this is where the Puppeteer.js script comes into play.</p>\n<p>I’m not going to get into too much detail here because this is actually the most complex part, and it deserves its own post one day, but in a nutshell, I’m using Puppeteer.js to open a headless Chrome browser, load a React app, and using <a href=\"https://www.npmjs.com/package/react-ace\" target=\"_blank\" rel=\"noreferrer\">react-ace</a> for the coding highlighting, then with Puppeteer.js I’m typing away the code and taking a screenshot of the page and saving it as a PNG file by using the <a href=\"https://chromedevtools.github.io/devtools-protocol/tot/Page/#event-screencastFrame\" target=\"_blank\" rel=\"noreferrer\">‘Page.screencastFrame’</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> allFrames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">pages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">target</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">createCDPSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nclient<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Page.screencastFrame'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> sessionId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Page.screencastFrameAck'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> sessionId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  allFrames<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After that, I’m using <a href=\"https://ffmpeg.org/\" target=\"_blank\" rel=\"noreferrer\">ffmpeg</a> to convert the PNG files into a video.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> ffmpeg <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fluent-ffmpeg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> ffmpegPath <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ffmpeg-static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> ffprobe <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ffprobe-static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\nffmpeg<span class=\"token punctuation\">.</span><span class=\"token function\">setFfmpegPath</span><span class=\"token punctuation\">(</span>ffmpegPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nffmpeg<span class=\"token punctuation\">.</span><span class=\"token function\">setFfprobePath</span><span class=\"token punctuation\">(</span>ffprobe<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createVideoFromFrames</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token parameter\">fps<span class=\"token punctuation\">,</span>\r\n  frames<span class=\"token punctuation\">,</span>\r\n  outputPath</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> tempOutput <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>outputPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.temp</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">ffmpeg</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">input</span><span class=\"token punctuation\">(</span>frames<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">inputFPS</span><span class=\"token punctuation\">(</span>fps<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">toFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mp4'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">videoCodec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'libx264'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">videoBitrate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'5000k'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addOption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-crf'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'23'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addOption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-g'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'30'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addOption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-profile:v'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'high'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addOption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-level'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'4.0'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> resolve<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>tempOutput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">ffmpeg</span><span class=\"token punctuation\">(</span>tempOutput<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fps</span><span class=\"token punctuation\">(</span><span class=\"token constant\">FPS</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> resolve<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">output</span><span class=\"token punctuation\">(</span>outputPath<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"putting-it-all-together\" style=\"position:relative;\"><a href=\"#putting-it-all-together\" aria-label=\"putting it all together permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Putting it all together</h2>\n<p>Now that I have all the pieces, I just need to put them together. I created a new Node.js script that will:</p>\n<ul>\n<li>Generate a new JSON file with the script for the video</li>\n<li>Generate a new video with the script for the video</li>\n<li>Generate a new thumbnail for the video</li>\n<li>Post the video to Instagram Reels</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> generateTutorialViaOpenAi <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./generate-tutorial-via-openai'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> generateImageForPost <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./generate-image-for-post'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> generateVideoForPost <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./generate-video-for-post'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> postVideoToInstagramReels <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./post-video-to-instagram-reels'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> prompt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./prompt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateTutorial</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> reelsCommands <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">generateTutorialViaOpenAi</span><span class=\"token punctuation\">(</span>prompt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> description<span class=\"token punctuation\">,</span> commands<span class=\"token punctuation\">,</span> files <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> reelsCommands<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>choices<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> outputPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./output/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> thumbnailPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>outputPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/thumbnail.png</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> videoPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>outputPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/video.mp4</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token function\">generateImageForPost</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">'./assets/background.png'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'./assets/foreground.png'</span><span class=\"token punctuation\">,</span>\r\n    description<span class=\"token punctuation\">,</span>\r\n    thumbnailPath\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token function\">generateVideoForPost</span><span class=\"token punctuation\">(</span>commands<span class=\"token punctuation\">,</span> files<span class=\"token punctuation\">,</span> videoPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token function\">postVideoToInstagramReels</span><span class=\"token punctuation\">(</span>description<span class=\"token punctuation\">,</span> videoPath<span class=\"token punctuation\">,</span> thumbnailPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token function\">generateTutorial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The actual code I’m using is a little bit more complex, but this is the gist of it.</p>\n<h2 id=\"proof-of-concept\" style=\"position:relative;\"><a href=\"#proof-of-concept\" aria-label=\"proof of concept permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of concept</h2>\n<p>Of course after doing all this work I had to test it, so I created a <a href=\"https://www.instagram.com/anchorarray/\" target=\"_blank\" rel=\"noreferrer\">new Instagram account</a> that will post a new tutorial every day, and always avoid existing ideas and topics, well, at least in theory…</p>\n<p><div class=\"instagram-embed\"><iframe src=\"https://instagram.com/p/C1OpOUzsfwd/embed\" frameborder=\"0\" allowfullscreen scrolling=\"no\" allowtransparency width=\"400\" height=\"400\"></iframe></div></p>\n<p>… but the reality ended up being that the generated tutorials are not that good, and I’m not sure if it’s because of the prompt I’m using, or because of the model itself, but I’m sure it’s a combination of both. For some reason it keeps generating the same tutorials, always related to coloring things using CSS.</p>\n<p>I have been running this account for 3 months now, and it got only 38 followers as of today and 466 accounts reached in the past 30 days, so I’m not sure if it’s worth it to keep it running, even though it’s fully automated and the total cost so far was only U$1.00.</p>\n<p>I think the best approach here is a hybrid one, where I generate my own scripts and use my Node.js code to generate the video and post it to Instagram Reels, which already automates a lot of the work.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>I’m really excited about this new era of working with language models. I’m sure we’ll see a lot of cool stuff being created in the next few years.</p>\n<p>Even though this project didn’t work as expected, I learned a lot about OpenAI’s API and how to use it, and I’m sure I’ll be using it in the future.</p>\n<p>I hope you enjoyed this post, and don’t forget to check how to <a href=\"/en/blog/coding/posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations/\">automatically post Instagram Reels using Node.js</a> and <a href=\"/en/blog/coding/how-to-automatically-create-thumbnails-for-your-videos-with-nodejs/\">how to automatically generate thumbnails for your videos with Node.js</a>.</p>","fields":{"slug":"/2023/2023-12-20-creating-instagram-reels-coding-tutorials-automatically-with-openais-gpt.en/","path":"/blog/coding/creating-instagram-reels-coding-tutorials-automatically-with-openais-gpt/","locale":"en"},"readingTime":{"minutes":6.64},"frontmatter":{"date":"2023-12-20T00:00:00.000Z","title":"Creating Instagram Reels coding tutorials automatically with OpenAI's GPT","categories":["coding"]}}},{"node":{"excerpt":"Just last week I posted about how to create upload reels to…","html":"<p>Just last week I posted about <a href=\"/en/blog/coding/posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations/\">how to create upload reels to Instagram using Node.js</a>, and in the code it was possible to upload a cover image for the video too, but I didn’t explain how to create this cover image.</p>\n<p>I mean, of course you can go to <a href=\"https://www.photopea.com/\" target=\"_blank\" rel=\"noreferrer\">Photopea</a> and create a cover image for your video, but what if you want to automate this process? What if you want to create a cover image for all your videos automatically?</p>\n<p>Well, that’s what I’m going to show you today.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACdklEQVQozxXQu27TUACA4RPbcXx8ObaPj+9O7DiXNiRNUqcpzQXVtEFtgBZISUsZ6JWFAaR2oEUVEoKyMQALQkgIgZB4AAYkZgpvgMTEBhti7QDqv3/LDzJyTlOxJkhIwgwvMgJKESNFdK1ey9QaaKIjFcdhJqsJrqd4rkZUETEMTVMnAdkPHC9r6cSUtRTkoJOG/bly3F3vnFmNop34fK/Y5KImKtctwyI2EXgOQi7FJk+wK+YDbcTHPuZlybGMVie8Opg+1azLwXRQXa1EIs3xVoEMh07UUlSDRwqEMEFRAAAQ4BFH8TCUpSSHwtC4NH86OxH5uYtxayxXmBqvtJsNjPJm7zKOY8XIknToYEfhcZJlgeNWMG9CSpQoQRovkelOGYdPb20cf3/769vL4x/vv757OOpNpsbG8EzbhJjnOchBHvI8zwPbCV3X1kQNcaLcLHNxA7BMvzKIq93Pzw9uLsz368u+kgOjWXu2l04XdFOj6QSgAM3QILRyGYOwKTYBgJDzxZV+M2rcXdvffnz45+j1kxeHd+4/W47OWutLdq2mY8siro5MldWSVBIUUclNZpBiasTl83lpZeHKcOPD7Z1/vz9+ebD/9+jNz0+vds+tlW4MFN/VdUMUDVkwECtTgAIuDhRT51VMVMUqBnh+1tvf6PbOHizObcUze4ML16e6+c1luz1t2CWVOFDioAQTicTJbZR1FN3UkYNVJBGN1CfNa4tgb8mz9dnqaMv3wUwV3Vs3i/WQ8wuGZxNTEmU2xdJJBmRRwU55FrKwqqgKQpYRxl3t0ZbT7gMARMHUdjfR9tAOqg7x1EA3DWJgRUEiQzP/AerQaSbt1hVqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Illustration\"\n        title=\"Illustration\"\n        src=\"/static/f8272dae5fedf81e3304107e04988bdb/42a19/instagram-reels-thumbnail-illustration.png\"\n        srcset=\"/static/f8272dae5fedf81e3304107e04988bdb/e3135/instagram-reels-thumbnail-illustration.png 256w,\n/static/f8272dae5fedf81e3304107e04988bdb/06341/instagram-reels-thumbnail-illustration.png 512w,\n/static/f8272dae5fedf81e3304107e04988bdb/42a19/instagram-reels-thumbnail-illustration.png 1024w,\n/static/f8272dae5fedf81e3304107e04988bdb/e8464/instagram-reels-thumbnail-illustration.png 1536w,\n/static/f8272dae5fedf81e3304107e04988bdb/445c6/instagram-reels-thumbnail-illustration.png 1792w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Illustration</figcaption>\n  </figure></p>\n<h2 id=\"finding-the-right-package\" style=\"position:relative;\"><a href=\"#finding-the-right-package\" aria-label=\"finding the right package permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Finding the right package</h2>\n<p>As a frontend developer, the only thing I know about image manipulation is by using canvas, and luckly there’s a Node.js library that allows us to do that, it’s called <a href=\"https://www.npmjs.com/package/canvas\" target=\"_blank\" rel=\"noreferrer\">node-canvas</a>.</p>\n<p>With it, we can create a canvas, draw images, text, shapes, etc. It’s pretty cool, check out the example below:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createCanvas<span class=\"token punctuation\">,</span> loadImage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'canvas'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> writeFileSync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> canvas <span class=\"token operator\">=</span> <span class=\"token function\">createCanvas</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> ctx <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nctx<span class=\"token punctuation\">.</span>font <span class=\"token operator\">=</span> <span class=\"token string\">'30px Impact'</span><span class=\"token punctuation\">;</span>\r\nctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#000'</span><span class=\"token punctuation\">;</span>\r\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World!'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ncanvas<span class=\"token punctuation\">.</span><span class=\"token function\">toBuffer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'image/png'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> buffer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./hello-world.png'</span><span class=\"token punctuation\">,</span> buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"coming-up-with-a-design\" style=\"position:relative;\"><a href=\"#coming-up-with-a-design\" aria-label=\"coming up with a design permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Coming up with a design</h2>\n<p>I’m not a designer, so I’m not going to teach you how to create a good design, but I can show you how I came up with the design for my thumbnails.</p>\n<p>I started by creating a new file on Photopea with the same size as the Instagram Reels video, which is 1080x1920px. Then I added a background image and a text with the title of the video, and also a background color for the text with some opacity.</p>\n<p>And for the cherry on top, I added a foreground image with a transparent background with an image of myself in pixel art style.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.734375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAIAAAAGkY33AAAACXBIWXMAAAsTAAALEwEAmpwYAAAHoUlEQVRIxy1VWXAbWRXtYRbHlmTtliNLvbz3elN3q6VudavV2ndZtuU940kcT8ngCZnYhGBnw3bisZ0EkUwcJeCkTIVMUYGESg0MpCiYqQxkUixf+aKKml9++OCTgiq+MMjk1P295713zz3vYIackwWFZWmEIElRBEHRLOAkmKlFcqOh1AhnVrncOB8v02ZWTeaEwohQmRFqb0fKmWEsGxsaTE2lTKUxGq9UlGJBicUigsADEgASUGSHS4jQsoZiuqxGQ0lTzKYjmiJFZBkDIIhDnEIUx9GKIqRSUipjplJKY0QfqseKpVhUDLMQcCKNEAUAIHFAUEGaBgwLsSwZrhORvKAgDuFEECdIAACEkGFoUWBimiixIUVhEjUmOcSl6kyixGcSJZnXBC6MTY6bmVg4CyKqqAucyLIMQhDRAEIKQEBRACKAEIIA0TTiBaQYfFLLFfWJQXMGy+clSWYliBJSJqs00tF6NGQwkOeQiACNECBJAsdxgjgonAgM4AOBw4Hg4UBwADt82OtyWZ2enq6u151dFp9jIOBBPgfutfv9bsrttPv6Lf4Bp91ut1gsXV1dVqvVYrHarDaXy4VZrbZmc35zc+vWrfbS4tLW5pWTC0vL3zy/vra+tnbp5s2b165tX7x4ttVqnThx4sKFC5VKZWJiolAoWK1WzGazzc8319fXd3Z2isXi1NTUwnsLW9ubc3NzU1OTd+7cabdvNxqjzWZzeXl5dXV1Y2Pj3Llzuq5bLBbM6XRGIpFarRaPxzOZzMhIIx6PFwoFTdO0mFapVHK5XD6f0w/AcRxJkt3d3b29vW63G7Pb7StnVz755OcvXrzY3d29d+9eq9VaWlra29t7+PDhy5cvnz179vTp00ePHu3u7rbb7Uq12tXV5fV6O2+22+2yHJYkyTAMnuc5jpMkCcdxCGE6nVYURT1AOBw2TbNarYZCIfcBOs2BYHBza/uHDx589NGDlZXlvb0f7Oy079+/v7q2un1l+8mTJ3fv3m2321evXn38+NHW1mar1Tp16tSrazMDvqwRmxwbnZgYy2RizeZMs/nO+Hgjm83NzMzMz88fP358enp6cnJydnZ2cHBQ0zTTNB0Ox8HJ3v7lxZNrZ791aXX93MoFTY1tbFwEkLQ7HG6Pu7un+1D3IYulp6enp7u722az2e12q9XqOgDmc+EXz6+1b7dv3r5+fad1+szizZ0PxZAU6ANUgDnsC3g9Xq+3z+V2ut0uj8fjdrs9Hs+rZr+/P+AjPHbXgNNO9XsA7QsiJ4n6SSIACJwMUAEf5feQA33A4/Q5HU63y9NrtzocdrvDjtE0wcnBaCguUzHOCxQksSHW5/cFAv0A+Bk2EIvRERmqsigLLAgGBKgpbIoiAMBZrKxPGtG0GS1n1aFktJRN1FRaChN8iA/TNKJpmuOYSCQUj4dyxXAqGQ1LIVMz40qqbExhRX3MiOTSsXpcNDSVyYzxiSKdUHRTLSYSGscjkiQo6sCbEDAdoJDAJORSxZjCSvHxRKSQ04aL6aISY+PxqJkVy4WhIXPWUHIxyZBEmWFomoYdnx8UhBAhwDAsVtTHzUgpqw7n05l8XolLUZ1OlONHDMFMs7GcMVpM1SJymKRwiCiEII0g3QFCCGD1aCEeN3J6PZsxjXRUZHkJqVl1JCcmUoxQTI0V1NGMWgnzihxSOl8KAhQgKEBACDBTTuo5AUVZq83WbbNDVTUbQ1RYIfyEIcWKxnhBayTkvCHn8kZDo1idjmhyNhyK0jTCjHCp34ljX3nztdffwjCsy+mJpFN8OkPrGs8ZBWU0rwzHRDMZLSejZZ2gDU6rJo42CsfSySQm0DKGYXGy/5dnj1yeTA/0WrA3et7wBelE0gMZyIgZo6hFzLw2YsQSPAQyG87FRsv5mixLmCqkXBarGuz73unR/b/cfd6a/86JkY9Pj2YE2sNLRIjXTVkQOUACnuU7ciEKQDIUCrEsg3n6+jh3b5EOvHWo6yffnt7//Mq/Pt18fuvEtSO5N3usfgo3S0x+kjfyIVnhOAEiiCDszAwhiC3XjfdzyvUbLac/kCN8q8MG4Xe/hmGM1+GyHqLogFnlM+NMuirnh5TCNJ8oMrquKWK803ypEP340rvPP/3ZqfeO//1HK1sz5V4cLR4dl929vX12zeTTDa74Np+tRUsN1awzehFWCvWxzHxaLWPHTPmLu4v7f77z7y/a+3/Y+fIX312/1rp3dW1MwtnObiMhQseydKqgpob4whE+Ueaq2ZGiNqFJSczu9t5bnfvN979xZqK0OVb752fX9r/88a+2mhslZS4dHSApBCBFAAgQLyLFZLQ0V0mN14yZuJzBhvXQh18fv3xmdne9+f5cY2/jq//49QcLw+nb09m0SAdInKEhwxyk1SsWyLFcRNC0cApbrBo33q3dOX90qdn46Vbz5MJ0rl5GRPCdY5FUKaGKSYQQCXAS4uiAhaZfTRsACvvs8uxfH5392+Nzf2o1f3/jawujGau7D0IAGEpT1ZI+NmjOpNWqKhqoE5wEgB2R/u8NbP/z7f/87sr+b6/88WqzxpGLpojwAOrkLKQoigI4y7JRUc+qdU01dDmjigbT8RT4n1T/BXdR/JE3X+zEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Reels thumbnail\"\n        title=\"Reels thumbnail\"\n        src=\"/static/352db45cb6eb4b617148e7cfaf35c1dd/42a19/instagram-reels-thumbnail.png\"\n        srcset=\"/static/352db45cb6eb4b617148e7cfaf35c1dd/e3135/instagram-reels-thumbnail.png 256w,\n/static/352db45cb6eb4b617148e7cfaf35c1dd/06341/instagram-reels-thumbnail.png 512w,\n/static/352db45cb6eb4b617148e7cfaf35c1dd/42a19/instagram-reels-thumbnail.png 1024w,\n/static/352db45cb6eb4b617148e7cfaf35c1dd/b4ad3/instagram-reels-thumbnail.png 1080w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Reels thumbnail</figcaption>\n  </figure></p>\n<h2 id=\"creating-the-thumbnail\" style=\"position:relative;\"><a href=\"#creating-the-thumbnail\" aria-label=\"creating the thumbnail permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating the thumbnail</h2>\n<p>Now that we have the design, we can start coding. First, we need to create a function that will create the thumbnail for us, and it will receive a background image, a foreground image, a title and the path to save the thumbnail as parameters.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateImageForPost</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token parameter\">backgroundImagePath<span class=\"token punctuation\">,</span>\r\n  foregroundImagePath<span class=\"token punctuation\">,</span>\r\n  title<span class=\"token punctuation\">,</span>\r\n  outputPath</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> backgroundImage <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">loadImage</span><span class=\"token punctuation\">(</span>backgroundImagePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> foregroundImage <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">loadImage</span><span class=\"token punctuation\">(</span>foregroundImagePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> canvas <span class=\"token operator\">=</span> <span class=\"token function\">createCanvas</span><span class=\"token punctuation\">(</span>backgroundImage<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> backgroundImage<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> ctx <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">drawImage</span><span class=\"token punctuation\">(</span>foregroundImage<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token comment\">// TODO add text</span>\r\n  <span class=\"token comment\">// addCenteredTextWithBackground(ctx, title, canvas.width, canvas.height);</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> out <span class=\"token operator\">=</span> <span class=\"token function\">createWriteStream</span><span class=\"token punctuation\">(</span>outputPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">createPNGStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    stream<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>out<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    out<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'finish'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The PNG file was created.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    out<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code will load the background and foreground images, create a canvas with the same size as the background image, draw the foreground image on the canvas, and save the canvas as a PNG file. That was the easy part, now we need to add the text.</p>\n<p>The challenge here is to add the text in the center of the canvas, and make sure it won’t overflow the canvas. Let’s take a look how we can do that.</p>\n<h2 id=\"adding-the-text\" style=\"position:relative;\"><a href=\"#adding-the-text\" aria-label=\"adding the text permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding the text</h2>\n<p>First, we need to create a function that will add the text in the center of the canvas, and it will receive the text and the canvas as parameters. We’re going to do that in the <code class=\"language-text\">addCenteredTextWithBackground</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addCenteredTextWithBackground</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token parameter\">ctx<span class=\"token punctuation\">,</span>\r\n  text<span class=\"token punctuation\">,</span>\r\n  canvasWidth<span class=\"token punctuation\">,</span>\r\n  canvasHeight</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> fontSize <span class=\"token operator\">=</span> <span class=\"token number\">150</span><span class=\"token punctuation\">;</span>\r\n  ctx<span class=\"token punctuation\">.</span>font <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fontSize<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px Impact</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> lines <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> textHeight <span class=\"token operator\">=</span> fontSize <span class=\"token operator\">*</span> lines<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> rectWidth <span class=\"token operator\">=</span> canvasWidth<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> rectHeight <span class=\"token operator\">=</span> textHeight <span class=\"token operator\">+</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> rectX <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>canvasWidth <span class=\"token operator\">-</span> rectWidth<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> rectY <span class=\"token operator\">=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span>\r\n\r\n  ctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'rgba(0, 0, 0, 0.5)'</span><span class=\"token punctuation\">;</span>\r\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span>rectX<span class=\"token punctuation\">,</span> rectY<span class=\"token punctuation\">,</span> rectWidth<span class=\"token punctuation\">,</span> rectHeight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  ctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'white'</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span> line<span class=\"token punctuation\">]</span> <span class=\"token keyword\">of</span> lines<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> textX <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>canvasWidth <span class=\"token operator\">-</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">measureText</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> textY <span class=\"token operator\">=</span> rectY <span class=\"token operator\">+</span> fontSize <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    ctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">,</span> textX<span class=\"token punctuation\">,</span> textY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This function will calculate the size of the rectangle that will be the background of the text, and then it will draw the rectangle and the text on the canvas. Unfortunately, just doing <code class=\"language-text\">text.split(' ');</code> won’t do the job, because splitting the text by spaces will simply make the text’s height bigger, but it won’t necessarely make the text fit in the canvas.</p>\n<p>So let’s create a function called <code class=\"language-text\">breakTextToFitCanvas</code> that will receive the text, a canvas context and a maximum width as parameters, and it will return an array of strings with the text broken into lines that will fit in the canvas.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">breakTextToFitCanvas</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">,</span> maxWidth</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> words <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> lines <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">let</span> currentLine <span class=\"token operator\">=</span> words<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> words<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> word <span class=\"token operator\">=</span> words<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">measureText</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currentLine<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>word<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>width <span class=\"token operator\">&lt;</span> maxWidth<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      currentLine <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>word<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n      lines<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>currentLine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      currentLine <span class=\"token operator\">=</span> word<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  lines<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>currentLine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> lines<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"putting-it-all-together\" style=\"position:relative;\"><a href=\"#putting-it-all-together\" aria-label=\"putting it all together permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Putting it all together</h2>\n<p>Now that we have all the functions we need, we can put it all together and create the thumbnail. Let’s create a function called <code class=\"language-text\">generateThumbnail</code> that will receive the title of the video and the path to save the thumbnail as parameters.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateThumbnail</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">title<span class=\"token punctuation\">,</span> outputPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> backgroundImagePath <span class=\"token operator\">=</span> <span class=\"token string\">'./background.png'</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> foregroundImagePath <span class=\"token operator\">=</span> <span class=\"token string\">'./foreground.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> <span class=\"token function\">generateImageForPost</span><span class=\"token punctuation\">(</span>\r\n    backgroundImagePath<span class=\"token punctuation\">,</span>\r\n    foregroundImagePath<span class=\"token punctuation\">,</span>\r\n    title<span class=\"token punctuation\">,</span>\r\n    outputPath\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And now we can call this function and create the thumbnail.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">generateThumbnail</span><span class=\"token punctuation\">(</span><span class=\"token string\">'How to create thumbnails for your videos with Node.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'./thumbnail.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>And that’s it! Now you can create thumbnails for your videos automatically. I hope you enjoyed this post, and  don’t forget to check how to <a href=\"/en/blog/coding/posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations/\">upload Instagram Reels using Node.js</a>.</p>\n<p>See you next time!</p>","fields":{"slug":"/2023/2023-10-25-how-to-automatically-create-thumbnails-for-your-videos-with-nodejs.en/","path":"/blog/coding/how-to-automatically-create-thumbnails-for-your-videos-with-nodejs/","locale":"en"},"readingTime":{"minutes":4.74},"frontmatter":{"date":"2023-10-25T00:00:00.000Z","title":"How to automatically create thumbnails for your videos with Node.js","categories":["coding"]}}},{"node":{"excerpt":"Hey guys! It’s hard to be a geek these days, so many events…","html":"<p>Hey guys! It’s hard to be a geek these days, so many events are exclusive to media people and influencers - <a href=\"https://www.ign.com/articles/2017/02/08/e3-2017-open-to-the-public-tickets-on-sale-next-week\" target=\"_blank\" rel=\"noreferrer\">even E3 was a trade-only show for many years</a>. So let’s say you’re already happy with your job, and you don’t really want to become a journalist, so your best bet is to become an influencer, and then maybe get invited to the next <code class=\"language-text\">[insert name of gaming franchise]</code> release event, right?</p>\n<p>I’m pretty lucky to have worked as a freelancer journalist for various media outlets in Brazil, but since I moved to the Netherlands, I can’t go to these events anymore, since I have no media contacts here, and also don’t speak Dutch. One of the things I’ve already missed this year was the <a href=\"https://www.youtube.com/watch?v=rkeZx_wDLKs\" target=\"_blank\" rel=\"noreferrer\">The Last of Us release event in Amsterdam</a> and recently (just last week) the <a href=\"https://playsense.nl/558031/prijsvraag-ga-mee-naar-de-marvels-spider-man-2-launchparty/\" target=\"_blank\" rel=\"noreferrer\">Marvel Spider-Man 2 event in Hilversum</a>.</p>\n<p>Ok so now what? Well, I’ve decided to become an influencer, and I’ve started posting on Instagram, but I don’t really enjoy posting stuff on Instagram, I’d rather spend my time coding, and of course, becoming an Instagram celebrity these days is not an easy task, so I decided to automate some parts of it, after all, Meta provides an API that allows us to do many things, including posting Stories, Reels, or photos, so what could go wrong?</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVQozwGfAmD9AB4DGR8HJSENLiERNCAVOiAaQCAdRSAhSSAlTh0lTiIwVz9RcjM/ZBgcRRsaRCAYPiETNiENLx8HJR4DGQAeBB0gCyshEjUgFjsfHEMfIkofJ08dKlIcL1cbNFxZb5Bxgqt5jadjdJA3N1gbHUYcGD8iFDcgDCweBB4AHwYiIQ4wIRU5IBpBHyBJHidPHS1VIjtjKEVwO1qDX3qsYHeoTFmMVFFoOCA1UUheOC5MHBQ7Ig8xHwYkAB8HJCERMyAYPh8eRh4kTB4vVy1LdC5ReUFeiEd+tWir42mm2ExTky42Vyg5V08xOjgzUBsXPyIRNB8HJQAfCCYhEjYgG0IfIkkfL1Y3TnQ2U3sxXIZLirxHndVdrN5IbKkmOmxKfZ2Dm60tKEMaJ1EhHkUhFDgfCScAHwkoIRU6IB9GHSdNJj1sMlGCQGKWdqrhgL/yWK3kRIa1OnCXUomnc5u1QztTGTNXHi5VHyJJIRY8HwopACALKyEXPB8hSCUxVTFReCFMbV1ep7uB5cyb6naUyidljSxXfV1vkE0/VjJAVBg+Yh4xVh8mTCEZPiAMLAAhDjAhG0AdJ00cNVY/U3JAWn+Uc4P9gpzRbclKZqAjZIMmWX4bJEkwGS85VGoWRWYbOVodLFEgHUIhDzEAIh9BIjRWJkZlK118OEZmSGGBi7S39tKyzYS5Up24S5qtQHWVOk6DLSFCZ09TPnOMLWJ/J1BuIzhaISBDACY9XTNfeUZ/mz5cmDZHY02Bs06Lz2amynOuzlmdz2m20kZefjJDeiMjSjwcKFhkcEeIokF0jTJcdyU7WwAlMVIuTWw6Z4Q+aYY+ZoxUj7pqrc1UkclEeLlRispknsZdkbRKeKA7WoQtQms1R2gvTm8tR2gpPl4kLE2TfspoXO4w5gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Instagram automation\"\n        title=\"Instagram automation\"\n        src=\"/static/275b237567c6ae515dbfdcf11f91ffc4/42a19/auto-post-instagram.png\"\n        srcset=\"/static/275b237567c6ae515dbfdcf11f91ffc4/e3135/auto-post-instagram.png 256w,\n/static/275b237567c6ae515dbfdcf11f91ffc4/06341/auto-post-instagram.png 512w,\n/static/275b237567c6ae515dbfdcf11f91ffc4/42a19/auto-post-instagram.png 1024w,\n/static/275b237567c6ae515dbfdcf11f91ffc4/e8464/auto-post-instagram.png 1536w,\n/static/275b237567c6ae515dbfdcf11f91ffc4/445c6/auto-post-instagram.png 1792w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Instagram automation</figcaption>\n  </figure></p>\n<h2 id=\"the-instagram-api\" style=\"position:relative;\"><a href=\"#the-instagram-api\" aria-label=\"the instagram api permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Instagram API</h2>\n<p>Awesome, so we simply <code class=\"language-text\">npm install axios</code> and start posting on Instagram, right? Well… for some reason, you can’t upload videos to Instagram directly via the API, you need to provide an URL which then they will download your video from… like… what? I mean, <a href=\"https://www.dailymail.co.uk/news/article-3263921/What-mean-no-one-Mars-Scores-people-believe-blockbuster-movie-Martian-based-true-story.html\" target=\"_blank\" rel=\"noreferrer\">we’ve sent people to Mars</a>, but we can’t send a video to Instagram without a link?</p>\n<p>But fear not, I am here to help you solve this problem, my fellow developer. I’ve created a Node.js script that will allow you to post videos to Instagram, and I’ll explain how it works.</p>\n<h2 id=\"the-instagram-video-posting-dilemma\" style=\"position:relative;\"><a href=\"#the-instagram-video-posting-dilemma\" aria-label=\"the instagram video posting dilemma permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Instagram video posting dilemma</h2>\n<p>Before we dive deep, let’s get our tools ready. Install the necessary libraries:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> axios @ngrok/ngrok express fluent-ffmpeg ffmpeg-static</code></pre></div>\n<p>Now, let’s break down the code and understand the magic behind it.</p>\n<p>First, we need to set up our environment. We’re using <code class=\"language-text\">axios</code> for HTTP requests, <code class=\"language-text\">ngrok</code> to expose our local server to the world (because, you know, Instagram needs a link), and express to serve our video.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> ngrok <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@ngrok/ngrok'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">GRAPH_API_VERSION</span> <span class=\"token operator\">=</span> <span class=\"token string\">'v18.0'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> expressApp <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now, let’s get to the fun part. We need to upload our video to a container on Instagram. But remember, we’re not actually uploading the video. We’re just telling Instagram where to find it. So we need to create a container, and then upload the video to it.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">uploadReelsToContainer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token parameter\">accessToken<span class=\"token punctuation\">,</span>\r\n  instagramAccountId<span class=\"token punctuation\">,</span>\r\n  caption<span class=\"token punctuation\">,</span>\r\n  videoUrl<span class=\"token punctuation\">,</span>\r\n  coverUrl</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://graph.facebook.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">GRAPH_API_VERSION</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>instagramAccountId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/media</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">access_token</span><span class=\"token operator\">:</span> accessToken<span class=\"token punctuation\">,</span>\r\n      caption<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">media_type</span><span class=\"token operator\">:</span> <span class=\"token string\">'REELS'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">video_url</span><span class=\"token operator\">:</span> videoUrl<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">cover_url</span><span class=\"token operator\">:</span> coverUrl<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code simply makes a <code class=\"language-text\">POST</code> request to the Instagram API to create a container and “upload” the video to it.</p>\n<p>The “upload” is in quotes because we’re not actually uploading the video, we’re just telling Instagram where to find it.</p>\n<p>Cool, but you must be thinking, “where do I get the <code class=\"language-text\">accessToken</code> and <code class=\"language-text\">instagramAccountId</code> from?” Well, you need to create a Facebook app, and then create an Instagram account, and then link your Instagram account to your Facebook app. You can find more information about this <a href=\"https://developers.facebook.com/docs/instagram-api/getting-started\" target=\"_blank\" rel=\"noreferrer\">here</a>. To be honest, this is the hardest part of the process, but once you get it working, you’re good to go.</p>\n<p>Ah, wait, you also want to know how to get the <code class=\"language-text\">videoUrl</code> and <code class=\"language-text\">coverUrl</code>, right? Patience, my sweet padawan, we’ll get there.</p>\n<p>After the container is created, we need to check its status. We need to wait until the video is fully downloaded by Instagram.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getStatusOfUpload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">accessToken<span class=\"token punctuation\">,</span> igContainerId</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://graph.facebook.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">GRAPH_API_VERSION</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>igContainerId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">access_token</span><span class=\"token operator\">:</span> accessToken<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">fields</span><span class=\"token operator\">:</span> <span class=\"token string\">'status_code'</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If the status is <code class=\"language-text\">FINISHED</code>, then we can proceed to the next step, which is finally publishing the video, or as Meta calls it: <code class=\"language-text\">media publishing</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">publishMediaContainer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">accessToken<span class=\"token punctuation\">,</span> instagramAccountId<span class=\"token punctuation\">,</span> creationId</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://graph.facebook.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">GRAPH_API_VERSION</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>instagramAccountId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/media_publish</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">access_token</span><span class=\"token operator\">:</span> accessToken<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">creation_id</span><span class=\"token operator\">:</span> creationId <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And what is the point of posting it and getting all these weird IDs? What we actually want is the Instagram post URL, right? For that, we need to get the <code class=\"language-text\">permalink_url</code> from the response.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchPermalink</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">accessToken<span class=\"token punctuation\">,</span> mediaId</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://graph.facebook.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">GRAPH_API_VERSION</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>mediaId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">access_token</span><span class=\"token operator\">:</span> accessToken<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">fields</span><span class=\"token operator\">:</span> <span class=\"token string\">'permalink'</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"lets-stitch-it-all-together\" style=\"position:relative;\"><a href=\"#lets-stitch-it-all-together\" aria-label=\"lets stitch it all together permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’s stitch it all together</h2>\n<p>I’ve been postponing this part for a while, but now it’s time to explain how to get the <code class=\"language-text\">videoUrl</code> and <code class=\"language-text\">coverUrl</code>, and this is where <code class=\"language-text\">ngrok</code> comes into play. We need to create a local <code class=\"language-text\">express</code> server that will serve our video and cover, and then expose it to the world using <code class=\"language-text\">ngrok</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">expressApp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\nexpressApp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/video'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendFile</span><span class=\"token punctuation\">(</span>videoFilePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nexpressApp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/cover'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendFile</span><span class=\"token punctuation\">(</span>thumbnailFilePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With this code, we will serve our video and cover on <code class=\"language-text\">http://localhost:3000/video</code> and <code class=\"language-text\">http://localhost:3000/cover</code>, respectively. The variables <code class=\"language-text\">videoFilePath</code> and <code class=\"language-text\">thumbnailFilePath</code> should contain a local path to the video and cover files.</p>\n<p>Now we’ll expose it to the world using <code class=\"language-text\">ngrok</code>. This will give us a URL that we can use to upload our video to Instagram.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> listener <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> ngrok<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> listener<span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> videoUrl <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/video</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> coverUrl <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/cover</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And now putting it all together:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">postInstagramReel</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token parameter\">accessToken<span class=\"token punctuation\">,</span>\r\n  pageId<span class=\"token punctuation\">,</span>\r\n  description<span class=\"token punctuation\">,</span>\r\n  thumbnailFilePath<span class=\"token punctuation\">,</span>\r\n  videoFilePath</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> expressApp <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  expressApp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  expressApp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/video'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendFile</span><span class=\"token punctuation\">(</span>videoFilePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  expressApp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/cover'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendFile</span><span class=\"token punctuation\">(</span>thumbnailFilePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> listener <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> ngrok<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> listener<span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> containerId <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">uploadReelsToContainer</span><span class=\"token punctuation\">(</span>\r\n    accessToken<span class=\"token punctuation\">,</span>\r\n    pageId<span class=\"token punctuation\">,</span>\r\n    description<span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/video</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/cover</span><span class=\"token template-punctuation string\">`</span></span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">let</span> status <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token constant\">TWO_MINUTES</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> startTime <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">!==</span> <span class=\"token string\">'FINISHED'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> startTime <span class=\"token operator\">></span> <span class=\"token constant\">TWO_MINUTES</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">await</span> ngrok<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Upload took longer than 2 minutes.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    status <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getStatusOfUpload</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">,</span> containerId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> creationId <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">publishMediaContainer</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">,</span> pageId<span class=\"token punctuation\">,</span> containerId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> permalink <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchPermalink</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">,</span> creationId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">await</span> ngrok<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> creationId<span class=\"token punctuation\">,</span> permalink <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This function will start the <code class=\"language-text\">express</code> server and set the <code class=\"language-text\">ngrok</code> URL. Then it will “upload” the video to Instagram, and wait until the video is fully downloaded. After that, it will publish the video and return the Instagram post URL.</p>\n<p>And that’s it! Now you can post videos to Instagram using Node.js. I hope you liked it.</p>\n<p>Wait, what? Ah… you want to know why I made you install <code class=\"language-text\">ffmpeg</code>? Ok sure, let’s talk about it.</p>\n<h2 id=\"making-sure-the-video-is-instagram-ready\" style=\"position:relative;\"><a href=\"#making-sure-the-video-is-instagram-ready\" aria-label=\"making sure the video is instagram ready permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Making sure the video is Instagram-ready</h2>\n<p>Everything is good and the code is nice and dandy, but there’s one more thing we need to do before we can post our video to Instagram. We need to make sure the video is in the right format. Instagram has some <a href=\"https://developers.facebook.com/docs/video-api/guides/publishing\" target=\"_blank\" rel=\"noreferrer\">requirements</a> for videos, and we need to make sure our video meets these requirements. For that, we’ll use <code class=\"language-text\">ffmpeg</code>.</p>\n<p>There are two very nice NPM packages that allow us to use <code class=\"language-text\">ffmpeg</code> in Node.js: <code class=\"language-text\">fluent-ffmpeg</code> and <code class=\"language-text\">ffmpeg-static</code>. The first one is a wrapper around <code class=\"language-text\">ffmpeg</code>, and the second one is a static build of <code class=\"language-text\">ffmpeg</code> that we can use in our code.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">processVideo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">inputPath<span class=\"token punctuation\">,</span> outputPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">ffmpeg</span><span class=\"token punctuation\">(</span>inputPath<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">toFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mp4'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1080x1920'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">aspect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'9:16'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">videoCodec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'libx264'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">audioCodec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'aac'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">audioChannels</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">audioFrequency</span><span class=\"token punctuation\">(</span><span class=\"token number\">48000</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">audioBitrate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'128k'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Processing finished. Output saved to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>outputPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error processing video: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>outputPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code will make sure that the video is in the right format. It will convert the video to <code class=\"language-text\">mp4</code>, resize it to <code class=\"language-text\">1080x1920</code>, and make sure the aspect ratio is <code class=\"language-text\">9:16</code>. It will also make sure the video codec is <code class=\"language-text\">libx264</code>, and the audio codec is <code class=\"language-text\">aac</code>. It will also make sure the audio has 2 channels, a frequency of <code class=\"language-text\">48000</code>, and a bitrate of <code class=\"language-text\">128k</code>.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>And that’s it, with a little bit of code and trickery, we can now post videos to Instagram using Node.js. Was it worth the hours I’ve spent researching and coding this? Probably not, but I had fun, and I learned a lot, so I guess it was worth it then. Uhmn…</p>\n<p>Ah, and don’t forget to follow me on Instagram at <a href=\"https://www.instagram.com/thepiratepablo/\" target=\"_blank\" rel=\"noreferrer\">@thepiratepablo</a> and help me become an influencer. I promise I’ll post often. I’m just a bit lazy, but I’ll get there.</p>\n<p>I hope you liked it and that this was useful to you somehow. See you next time! Cheers!</p>","fields":{"slug":"/2023/2023-10-14-posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations.en/","path":"/blog/coding/posting-instagram-reels-using-nodejs-and-the-art-of-overcoming-limitations/","locale":"en"},"readingTime":{"minutes":7.485},"frontmatter":{"date":"2023-10-14T00:00:00.000Z","title":"Posting Instagram Reels using Node.js and the art of overcoming limitations","categories":["coding"]}}},{"node":{"excerpt":"In a world dominated by social media platforms, where…","html":"<p>In a world dominated by social media platforms, where ‘Stories’ have become an omnipresent feature, I found myself pondering - does my blog really need Stories? The answer, of course, is a resounding ‘fuck no’. But here we are, my blog now has Stories, and I’m not entirely sure why.</p>\n<p><img src=\"/4cdd7b249c219b923c1baef9632ccdbc/stories-on-my-blog.gif\" alt=\"Stories\"></p>\n<h2 id=\"the-genesis-of-an-unnecessary-idea\" style=\"position:relative;\"><a href=\"#the-genesis-of-an-unnecessary-idea\" aria-label=\"the genesis of an unnecessary idea permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The genesis of an unnecessary idea</h2>\n<p>It all started when I was using my mobile internet provider app, and to my surprise, they had added Stories to their app. This was simply too much for me to handle. A mix of joy, wonder, and confusion overtook me. I mean, why would an internet provider app need Stories? It was at this moment that I decided, if they can do it, why can’t I? And so, the journey began.</p>\n<p>Naturally, as a developer with a penchant for the absurd, I fired up my code editor and started coding, and my goal was to Stories to my blog. The reasoning behind it? That’s still a work in progress.</p>\n<h2 id=\"the-technical-journey\" style=\"position:relative;\"><a href=\"#the-technical-journey\" aria-label=\"the technical journey permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The technical journey</h2>\n<p>The process of adding Stories to my blog was surprisingly straightforward, thanks to the power of <del>communism</del> open-source. Open-source tools and libraries are a blessing for developers. They save time, effort, and often lead to better solutions than one could come up with on their own. After a bit of research, I stumbled upon a fantastic package that seemed to be the answer to all my prayers - <a href=\"https://www.npmjs.com/package/react-insta-stories\" target=\"_blank\" rel=\"noreferrer\">react-insta-stories</a>. This package is designed to create Instagram-like Stories on React, which was exactly what I was looking for.</p>\n<p>The <code class=\"language-text\">react-insta-stories</code> package is incredibly versatile and customizable. It allows you to create stories with images, videos, and even custom components. You can customize the duration of each story, add action buttons, and much more. It was almost too good to be true. With this package, I was able to add Stories to my blog in no time, and with minimal effort.</p>\n<h2 id=\"deciding-what-to-show-in-the-stories\" style=\"position:relative;\"><a href=\"#deciding-what-to-show-in-the-stories\" aria-label=\"deciding what to show in the stories permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deciding what to show in the stories</h2>\n<p>Initially, I thought about creating custom videos using default backgrounds from stock video websites. I even went as far as creating a script using FFmpeg and Node.js to automate the process. However, after some consideration, I decided to drop that idea. For the first iteration, I decided to create a story for each of the last five blog posts on my website.</p>\n<p>For the stories content, I decided to keep it simple. I would display a background image from a stock photo related to the category of the blog post, overlay the title of the blog post, and include a link to access it. This way, the stories would not only serve as a visual teaser but also as a functional gateway to the full content of the blog post.</p>\n<p>To make it more organized, I grouped these stories by the category of the blog post. For example, if out of the past five blog posts, three were in the “coding” category and two in the “games” category, I would display two different story previews - those little image circles that you click to see the stories. Then, “inside” each of these grouped circles, you would click and see those stories.</p>\n<p>This approach seemed more manageable and, let’s be honest, required less effort on my part. It also provided a way for visitors to quickly catch up on my latest posts in a more interactive and engaging manner. Not that I’m particularly concerned about visitor retention or engagement. I’m just adding this feature because, well, why not?</p>\n<h2 id=\"lets-get-coding\" style=\"position:relative;\"><a href=\"#lets-get-coding\" aria-label=\"lets get coding permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’s get coding</h2>\n<p>Once the decision was made (with a shrug and a “why not”), it was time to dive into the deep end of the coding pool. Here’s a brief overview of the steps I took, or rather, the rabbit hole I went down:</p>\n<ol>\n<li><strong>Creating the StoriesPreview component</strong>: This component is responsible for displaying the preview of the stories on the main page of the blog.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">circleImage</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">objectFit</span><span class=\"token operator\">:</span> <span class=\"token string\">'cover'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">marginLeft</span><span class=\"token operator\">:</span> <span class=\"token string\">'5px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'relative'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">storyImage</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">objectFit</span><span class=\"token operator\">:</span> <span class=\"token string\">'cover'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">objectPosition</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">storiesWrapper</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token string\">'15px 0'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">previewWrapper</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token string\">'15px 0'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">StoriesPreview</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">useStaticQuery</span><span class=\"token punctuation\">(</span>\r\n    graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n      query {\r\n        allMarkdownRemark(\r\n          filter: { frontmatter: { show: { eq: true } } }\r\n          sort: { fields: [frontmatter___date], order: DESC }\r\n          limit: 10\r\n        ) {\r\n          edges {\r\n            node {\r\n              excerpt(pruneLength: 60)\r\n              fields {\r\n                path\r\n                locale\r\n                postHashId\r\n              }\r\n              frontmatter {\r\n                title\r\n                categories\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    </span><span class=\"token template-punctuation string\">`</span></span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> intl <span class=\"token operator\">=</span> <span class=\"token function\">useIntl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>locale <span class=\"token operator\">===</span> intl<span class=\"token punctuation\">.</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showModal<span class=\"token punctuation\">,</span> setShowModal<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>currentStoriesIndex<span class=\"token punctuation\">,</span> setCurrentStoriesIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>seenStories<span class=\"token punctuation\">,</span> setSeenStories<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useLocalStorage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'seenStories'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>tempSeenStories<span class=\"token punctuation\">,</span> setTempSeenStories<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> stories <span class=\"token operator\">=</span> <span class=\"token function\">useStories</span><span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">,</span> seenStories<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> onStoryEnd <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">currentStoriesIndex<span class=\"token punctuation\">,</span> currentStoryIndex</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> newTempSeenStories <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\r\n        <span class=\"token operator\">...</span>tempSeenStories<span class=\"token punctuation\">,</span>\r\n        stories<span class=\"token punctuation\">[</span>currentStoriesIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>currentStoryIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>postHashId<span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token function\">setTempSeenStories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>newTempSeenStories<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">[</span>tempSeenStories<span class=\"token punctuation\">,</span> stories<span class=\"token punctuation\">]</span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> handleImageClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setCurrentStoriesIndex</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token function\">setShowModal</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> handleCloseModal <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setShowModal</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> newSeenStories <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>seenStories<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>tempSeenStories<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token function\">setSeenStories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>newSeenStories<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token function\">setTempSeenStories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>seenStories<span class=\"token punctuation\">,</span> setSeenStories<span class=\"token punctuation\">,</span> tempSeenStories<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> handleNextStories <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentStoriesIndex <span class=\"token operator\">&lt;</span> stories<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">setCurrentStoriesIndex</span><span class=\"token punctuation\">(</span>currentStoriesIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">handleCloseModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currentStoriesIndex<span class=\"token punctuation\">,</span> handleCloseModal<span class=\"token punctuation\">,</span> stories<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> handlePreviousStories <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentStoriesIndex <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">setCurrentStoriesIndex</span><span class=\"token punctuation\">(</span>currentStoriesIndex <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">handleCloseModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currentStoriesIndex<span class=\"token punctuation\">,</span> handleCloseModal<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> handleOnAllStoriesEnd <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">handleNextStories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>handleNextStories<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>storiesWrapper<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>previewWrapper<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">{</span>stories<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">storiesArray<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n            <span class=\"token operator\">&lt;</span>StoryImage\r\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span>\r\n              category<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>storiesArray<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>category<span class=\"token punctuation\">}</span>\r\n              previewImage<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>storiesArray<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>previewImage<span class=\"token punctuation\">}</span>\r\n              unseen<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">isClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> storiesArray<span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">story</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>story<span class=\"token punctuation\">.</span>viewed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n              onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">handleImageClick</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>Divider <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n      <span class=\"token punctuation\">{</span>showModal <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>StoryModal\r\n          stories<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>stories<span class=\"token punctuation\">[</span>currentStoriesIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n          onClose<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleCloseModal<span class=\"token punctuation\">}</span>\r\n          onPrevious<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handlePreviousStories<span class=\"token punctuation\">}</span>\r\n          onNext<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleNextStories<span class=\"token punctuation\">}</span>\r\n          showPrevious<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentStoriesIndex <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span>\r\n          showNext<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentStoriesIndex <span class=\"token operator\">&lt;</span> stories<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\r\n          currentStoriesIndex<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentStoriesIndex<span class=\"token punctuation\">}</span>\r\n          onAllStoriesEnd<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleOnAllStoriesEnd<span class=\"token punctuation\">}</span>\r\n          onStoryEnd<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentStoryIndex</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">onStoryEnd</span><span class=\"token punctuation\">(</span>currentStoriesIndex<span class=\"token punctuation\">,</span> currentStoryIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          onStoryStart<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentStoryIndex</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">onStoryEnd</span><span class=\"token punctuation\">(</span>currentStoriesIndex<span class=\"token punctuation\">,</span> currentStoryIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"2\">\n<li><strong>Creating the StoryImage component</strong>: This component is responsible for displaying the image of the story.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token function-variable function\">circleImage</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> unseen <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">objectFit</span><span class=\"token operator\">:</span> <span class=\"token string\">'cover'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">marginLeft</span><span class=\"token operator\">:</span> <span class=\"token string\">'5px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'relative'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>unseen\r\n      <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span>palette<span class=\"token punctuation\">.</span>secondary<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span>\r\n      <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">StoryImage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> category<span class=\"token punctuation\">,</span> previewImage<span class=\"token punctuation\">,</span> unseen<span class=\"token punctuation\">,</span> onClick <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> unseen <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token comment\">// eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions</span>\r\n    <span class=\"token operator\">&lt;</span>img alt<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>category<span class=\"token punctuation\">}</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>previewImage<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>circleImage<span class=\"token punctuation\">}</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"3\">\n<li><strong>Creating the StoryModal component</strong>: This component is responsible for displaying the story in a modal when the user clicks on the story image.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">modal</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'fixed'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgba(0, 0, 0, 0.5)'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">backdropFilter</span><span class=\"token operator\">:</span> <span class=\"token string\">'blur(5px)'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">zIndex</span><span class=\"token operator\">:</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">modalContent</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'transparent'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span><span class=\"token function\">spacing</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">flexDirection</span><span class=\"token operator\">:</span> <span class=\"token string\">'column'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex-end'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">closeButton</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">marginBottom</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span><span class=\"token function\">spacing</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">arrowButton</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'translateY(-50%)'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'2rem'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">arrowLeft</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span><span class=\"token function\">spacing</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">arrowRight</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span><span class=\"token function\">spacing</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">StoryModal</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\r\n  stories<span class=\"token punctuation\">,</span>\r\n  onClose<span class=\"token punctuation\">,</span>\r\n  onPrevious<span class=\"token punctuation\">,</span>\r\n  onNext<span class=\"token punctuation\">,</span>\r\n  showPrevious<span class=\"token punctuation\">,</span>\r\n  showNext<span class=\"token punctuation\">,</span>\r\n  currentStoriesIndex<span class=\"token punctuation\">,</span>\r\n  onStoryEnd<span class=\"token punctuation\">,</span>\r\n  onStoryStart<span class=\"token punctuation\">,</span>\r\n  onAllStoriesEnd<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> intl <span class=\"token operator\">=</span> <span class=\"token function\">useIntl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> isMobileDevice <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>isMobile<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> handleKeyDown <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>key <span class=\"token operator\">===</span> <span class=\"token string\">'ArrowRight'</span> <span class=\"token operator\">&amp;&amp;</span> showNext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token function\">onNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>key <span class=\"token operator\">===</span> <span class=\"token string\">'ArrowLeft'</span> <span class=\"token operator\">&amp;&amp;</span> showPrevious<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token function\">onPrevious</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">[</span>onNext<span class=\"token punctuation\">,</span> onPrevious<span class=\"token punctuation\">,</span> showNext<span class=\"token punctuation\">,</span> showPrevious<span class=\"token punctuation\">]</span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyDown<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyDown<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>handleKeyDown<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">}</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onClose<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>modalContent<span class=\"token punctuation\">}</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> e<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span>Button className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>closeButton<span class=\"token punctuation\">}</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onClose<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n          <span class=\"token punctuation\">{</span>intl<span class=\"token punctuation\">.</span><span class=\"token function\">formatMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'close'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>isMobileDevice <span class=\"token operator\">&amp;&amp;</span> showPrevious <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>ArrowBackIcon\r\n            className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">classNames</span><span class=\"token punctuation\">(</span>classes<span class=\"token punctuation\">.</span>arrowButton<span class=\"token punctuation\">,</span> classes<span class=\"token punctuation\">.</span>arrowLeft<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onPrevious<span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>isMobileDevice <span class=\"token operator\">&amp;&amp;</span> showNext <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>ArrowForwardIcon\r\n            className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">classNames</span><span class=\"token punctuation\">(</span>classes<span class=\"token punctuation\">.</span>arrowButton<span class=\"token punctuation\">,</span> classes<span class=\"token punctuation\">.</span>arrowRight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onNext<span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span>Stories\r\n          stories<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>stories<span class=\"token punctuation\">}</span>\r\n          key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentStoriesIndex<span class=\"token punctuation\">}</span>\r\n          currentIndex<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span>\r\n          onStoryEnd<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onStoryEnd<span class=\"token punctuation\">}</span>\r\n          onStoryStart<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onStoryStart<span class=\"token punctuation\">}</span>\r\n          onAllStoriesEnd<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onAllStoriesEnd<span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"4\">\n<li><strong>Creating the useLocalStorage hook</strong>: This custom hook is used to manage the state of the seen stories in the local storage.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">useLocalStorage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> initialValue</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>storedValue<span class=\"token punctuation\">,</span> setStoredValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">return</span> item <span class=\"token operator\">?</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> initialValue<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">return</span> initialValue<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setValue</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> valueToStore <span class=\"token operator\">=</span> value <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Function</span> <span class=\"token operator\">?</span> <span class=\"token function\">value</span><span class=\"token punctuation\">(</span>storedValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> value<span class=\"token punctuation\">;</span>\r\n      <span class=\"token function\">setStoredValue</span><span class=\"token punctuation\">(</span>valueToStore<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>valueToStore<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>storedValue<span class=\"token punctuation\">,</span> setValue<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"5\">\n<li><strong>Creating the useStories hook</strong>: This custom hook is used to manage the state of the stories.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">seeMore</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span>palette<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span>primary<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">textDecoration</span><span class=\"token operator\">:</span> <span class=\"token string\">'inherit'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgb(0 0 0 / 40%)'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'10px 0'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">textAlign</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token string\">'auto'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">bottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'0px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">zIndex</span><span class=\"token operator\">:</span> <span class=\"token string\">'9999'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'auto'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">contentWrapper</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'#333'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'white'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">contentTextWrapper</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token string-property property\">'&amp; h1, p, a'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgb(0 0 0 / 40%)'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'10px 25px'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useStories</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">posts<span class=\"token punctuation\">,</span> seenStories</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> intl <span class=\"token operator\">=</span> <span class=\"token function\">useIntl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> imagesData <span class=\"token operator\">=</span> <span class=\"token function\">useStaticQuery</span><span class=\"token punctuation\">(</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query {\r\n      allFile(filter: { relativeDirectory: { eq: \"categories\" }, extension: { eq: \"jpg\" } }) {\r\n        edges {\r\n          node {\r\n            base\r\n            childImageSharp {\r\n              gatsbyImageData\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> storiesMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    posts<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> frontmatter<span class=\"token punctuation\">,</span> fields<span class=\"token punctuation\">,</span> excerpt <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> title<span class=\"token punctuation\">,</span> categories <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> frontmatter<span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> category <span class=\"token operator\">=</span> categories<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> path<span class=\"token punctuation\">,</span> postHashId <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> fields<span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> imageNode <span class=\"token operator\">=</span> imagesData<span class=\"token punctuation\">.</span>allFile<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">edge</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>base<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> gatsbyImageData <span class=\"token operator\">=</span> <span class=\"token function\">getImage</span><span class=\"token punctuation\">(</span>imageNode<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> categoryImage <span class=\"token operator\">=</span> gatsbyImageData<span class=\"token punctuation\">.</span>images<span class=\"token punctuation\">.</span>fallback<span class=\"token punctuation\">.</span>src<span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">const</span> story <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        category<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">previewImage</span><span class=\"token operator\">:</span> categoryImage<span class=\"token punctuation\">,</span>\r\n        postHashId<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">viewed</span><span class=\"token operator\">:</span> seenStories<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>postHashId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token function-variable function\">content</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> action<span class=\"token punctuation\">,</span> isPaused <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div\r\n            className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>contentWrapper<span class=\"token punctuation\">}</span>\r\n            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n              <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">linear-gradient(rgba(51, 51, 51, 0.5), rgba(51, 51, 51, 0.5)), url(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>categoryImage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">) no-repeat center center</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>contentTextWrapper<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n              <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n              <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>excerpt<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>path<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>seeMore<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">{</span>intl<span class=\"token punctuation\">.</span><span class=\"token function\">formatMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'go_to_post'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">const</span> categoryStories <span class=\"token operator\">=</span> storiesMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n      categoryStories<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>story<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      storiesMap<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">,</span> categoryStories<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>storiesMap<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> aHasFalse <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>item<span class=\"token punctuation\">.</span>viewed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> bHasFalse <span class=\"token operator\">=</span> b<span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>item<span class=\"token punctuation\">.</span>viewed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>aHasFalse <span class=\"token operator\">&amp;&amp;</span> bHasFalse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>aHasFalse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\r\n    posts<span class=\"token punctuation\">,</span>\r\n    imagesData<span class=\"token punctuation\">.</span>allFile<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">,</span>\r\n    seenStories<span class=\"token punctuation\">,</span>\r\n    classes<span class=\"token punctuation\">.</span>contentWrapper<span class=\"token punctuation\">,</span>\r\n    classes<span class=\"token punctuation\">.</span>contentTextWrapper<span class=\"token punctuation\">,</span>\r\n    classes<span class=\"token punctuation\">.</span>seeMore<span class=\"token punctuation\">,</span>\r\n    intl<span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>The process of adding Stories to my blog was surprisingly straightforward, thanks to the open-source package <code class=\"language-text\">react-insta-stories</code>.</p>\n<p>Was I adding Stories to my blog to enhance the user experience? lol no. Do I regret it? Well… no really. In a world where we are constantly bombarded with new features, updates, and innovations, it’s easy to get caught up in the whirlwind of “keeping up with the JS” 🥁.</p>\n<p>So, here we are. My blog now has Stories, a completely unnecessary addition, but one that I can’t help but find amusing. I hope you enjoy this completely unnecessary, yet oddly satisfying addition to my blog.</p>\n<p>See you in the next post!</p>","fields":{"slug":"/2023/2023-09-04-my-blog-now-has-stories-and-im-not-sure-why.en/","path":"/blog/coding/my-blog-now-has-stories-and-im-not-sure-why/","locale":"en"},"readingTime":{"minutes":9},"frontmatter":{"date":"2023-09-04T00:00:00.000Z","title":"My blog now has Stories, and I'm not sure why","categories":["coding"]}}},{"node":{"excerpt":"Looking to achieve your fitness goals, such as losing some…","html":"<p>Looking to achieve your fitness goals, such as losing some weight or building muscle? It’s all about knowing how many calories you burn in a day, which is called your Total Daily Energy Expenditure (TDEE).</p>\n<p>Think of TDEE as the golden number that guides your food and workout choices. You have to know it to figure out how much to eat if you want to maintain, pack on some kilos, or slim down.</p>\n<p>Now, there are a bunch of online tools that can guess your TDEE, but getting data from your own body will give you the real deal.</p>\n<p>I get it, crunching these numbers can be a drag, especially if math isn’t your jam. But hey, the Google Fitness API’s got your back on this one!</p>\n<p>In this blog post, we’ll show you how to use the Google Fitness API to calculate your TDEE and track your progress over time.</p>\n<p>Of course, for this to work you need to consistently track your weight and food intake. I highly recommend getting a bioimpedance scale, which can measure your weight, body fat percentage, and muscle mass and the app <a href=\"https://lifesum.com/\" target=\"_blank\" rel=\"noreferrer\">Lifesum</a> to track your food intake.</p>\n<h2 id=\"using-the-google-fitness-api\" style=\"position:relative;\"><a href=\"#using-the-google-fitness-api\" aria-label=\"using the google fitness api permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the Google Fitness API</h2>\n<p>Got the basics of TDEE down? Cool, let’s dive into how we can get the scoop using the Google Fitness API. This nifty tool lets coders grab data from Google Fit – that’s the app that gathers health info from your phone, smartwatches, and other apps.</p>\n<p>To get started with the Google Fitness API, first, go to the Google Cloud Console and turn on the Fitness API. Then, we’ll need to create credentials for our project, so we can tap into the API. For more details, check their <a href=\"https://developers.google.com/fit/rest/v1/get-started\" target=\"_blank\" rel=\"noreferrer\">Getting Started guide</a>.</p>\n<p>Once we’re all set up, it’s all about using the API to get our hands on some juicy Google Fit data. We’re talking weight and food stats, which will help us nail down our TDEE calculation.</p>\n<h2 id=\"retrieving-and-parsing-the-data\" style=\"position:relative;\"><a href=\"#retrieving-and-parsing-the-data\" aria-label=\"retrieving and parsing the data permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Retrieving and Parsing the Data</h2>\n<p>Now that we have our Google Fitness API set up and ready to go, it’s time to start retrieving and parsing the data that we need to calculate our TDEE. The first step is to make a request to the API, asking for our weight and nutrition data for the past 30 days.</p>\n<p>Here’s an example of what this request might look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> google <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'googleapis'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> auth <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> google<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">fromJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">TOKEN_TYPE</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">client_id</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">CLIENT_ID</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">client_secret</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">CLIENT_SECRET</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">refresh_token</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REFRESH_TOKEN</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  auth<span class=\"token punctuation\">.</span>scopes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token string\">'https://www.googleapis.com/auth/fitness.nutrition.read'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'https://www.googleapis.com/auth/fitness.body.read'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n\r\n  <span class=\"token keyword\">const</span> endDate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> startDate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  startDate<span class=\"token punctuation\">.</span><span class=\"token function\">setDate</span><span class=\"token punctuation\">(</span>startDate<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// past 30 days</span>\r\n  <span class=\"token keyword\">const</span> startTimeNs <span class=\"token operator\">=</span> startDate<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> endTimeNs <span class=\"token operator\">=</span> endDate<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> weightData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchDataForDataSource</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">'derived:com.google.weight:com.google.android.gms:merge_weight'</span><span class=\"token punctuation\">,</span>\r\n    auth<span class=\"token punctuation\">,</span>\r\n    startTimeNs<span class=\"token punctuation\">,</span>\r\n    endTimeNs\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> fatPercentageData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchDataForDataSource</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">'derived:com.google.body.fat.percentage:com.google.android.gms:merged'</span><span class=\"token punctuation\">,</span>\r\n    auth<span class=\"token punctuation\">,</span>\r\n    startTimeNs<span class=\"token punctuation\">,</span>\r\n    endTimeNs\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> nutritionData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchDataForDataSource</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">'derived:com.google.nutrition:com.google.android.gms:merged'</span><span class=\"token punctuation\">,</span>\r\n    auth<span class=\"token punctuation\">,</span>\r\n    startTimeNs<span class=\"token punctuation\">,</span>\r\n    endTimeNs\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The function <code class=\"language-text\">google.auth.fromJSON</code> is used to create an authentication object that can be used to make requests to the Google Fitness API. We then set the scopes that we want to request data for, which in this case are <code class=\"language-text\">https://www.googleapis.com/auth/fitness.nutrition.read</code> and <code class=\"language-text\">https://www.googleapis.com/auth/fitness.body.read</code>. After that, we set the start date and end date for our request, which is 30 days ago and today respectively. Finally, we call the <code class=\"language-text\">fetchDataForDataSource</code> function three times, once for weight data, once for fat percentage data, and once for nutrition data.</p>\n<p>But what does the <code class=\"language-text\">fetchDataForDataSource</code> function do? Let’s take a look:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fitness <span class=\"token operator\">=</span> google<span class=\"token punctuation\">.</span><span class=\"token function\">fitness</span><span class=\"token punctuation\">(</span><span class=\"token string\">'v1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchDataForDataSource</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dataSourceId<span class=\"token punctuation\">,</span> auth<span class=\"token punctuation\">,</span> startTimeNs<span class=\"token punctuation\">,</span> endTimeNs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fitness<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span>dataSources<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">userId</span><span class=\"token operator\">:</span> <span class=\"token string\">'me'</span><span class=\"token punctuation\">,</span>\r\n    dataSourceId<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">datasetId</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>startTimeNs<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>endTimeNs<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    auth<span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With the fitness API from <code class=\"language-text\">googleapis</code> we can make requests to the Google Fitness API. In this case, we’re using the <code class=\"language-text\">users.dataSources.datasets.get</code> method to get data for a specific data source. We pass in the <code class=\"language-text\">userId</code> as <code class=\"language-text\">me</code> to get data for the current user, the <code class=\"language-text\">dataSourceId</code> that we want to get data for, and the <code class=\"language-text\">datasetId</code> which is a combination of the start and end time in nanoseconds. Finally, we pass in the authentication object that we created earlier.</p>\n<h2 id=\"aggregating-the-data\" style=\"position:relative;\"><a href=\"#aggregating-the-data\" aria-label=\"aggregating the data permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Aggregating the Data</h2>\n<p>Let’s take a look at the data we got back from the Google Fitness API:</p>\n<h3 id=\"weight\" style=\"position:relative;\"><a href=\"#weight\" aria-label=\"weight permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Weight</h3>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">\"minStartTimeNs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690662651313000000\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"maxEndTimeNs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1691008251313000000\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"dataSourceId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"derived:com.google.weight:com.google.android.gms:merge_weight\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"point\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token punctuation\">{</span>\r\n      <span class=\"token property\">\"startTimeNanos\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690961397000000000\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"endTimeNanos\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690961397000000000\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"dataTypeName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"com.google.weight\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"originDataSourceId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"raw:com.google.weight:cn.fitdays.fitdays:\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">77.59</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"mapVal\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"modifiedTimeMillis\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690963181330\"</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"fat-percentage\" style=\"position:relative;\"><a href=\"#fat-percentage\" aria-label=\"fat percentage permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fat Percentage</h3>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">\"minStartTimeNs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690662651313000000\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"maxEndTimeNs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1691008251313000000\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"dataSourceId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"derived:com.google.body.fat.percentage:com.google.android.gms:merged\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"point\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token punctuation\">{</span>\r\n      <span class=\"token property\">\"startTimeNanos\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690961397000000000\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"endTimeNanos\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690961397000000000\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"dataTypeName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"com.google.body.fat.percentage\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"originDataSourceId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"raw:com.google.body.fat.percentage:cn.fitdays.fitdays:\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"mapVal\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"modifiedTimeMillis\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690963181468\"</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"nutrition\" style=\"position:relative;\"><a href=\"#nutrition\" aria-label=\"nutrition permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nutrition</h3>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">\"minStartTimeNs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690662651313000000\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"maxEndTimeNs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1691008251313000000\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"dataSourceId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"derived:com.google.nutrition:com.google.android.gms:merged\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"point\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token punctuation\">{</span>\r\n      <span class=\"token property\">\"startTimeNanos\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690961397000000000\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"endTimeNanos\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690961397000000000\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"dataTypeName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"com.google.nutrition\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"originDataSourceId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"raw:com.google.nutrition:com.sillens.shapeupclub:health_platform\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"mapVal\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fat.total\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">16.349998474121094</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sodium\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"potassium\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fat.unsaturated\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fat.saturated\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">13.34999942779541</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"protein\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5.25</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"carbs.total\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">60.45000076293945</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cholesterol\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"calories\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">412.5</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sugar\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">42.599998474121094</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n              <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dietary_fiber\"</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token property\">\"fpVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n          <span class=\"token punctuation\">]</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"intVal\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"mapVal\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"stringVal\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Salted caramel cornetto\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"mapVal\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"modifiedTimeMillis\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1690805813623\"</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you can see, the data is in a format that is not very easy to work with. We need to parse this data and aggregate it into a usable format.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> curatedWeightData <span class=\"token operator\">=</span> <span class=\"token function\">extractBodyData</span><span class=\"token punctuation\">(</span>weightData<span class=\"token punctuation\">,</span> <span class=\"token string\">'weight'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> curatedFatPercentageData <span class=\"token operator\">=</span> <span class=\"token function\">extractBodyData</span><span class=\"token punctuation\">(</span>fatPercentageData<span class=\"token punctuation\">,</span> <span class=\"token string\">'fatPercentage'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> curatedNutritionData <span class=\"token operator\">=</span> <span class=\"token function\">aggregateNutritionData</span><span class=\"token punctuation\">(</span><span class=\"token function\">extractNutritionData</span><span class=\"token punctuation\">(</span>nutritionData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After using these mysterious functions, our data will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>curatedWeightData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// [{ date: '02/08/2023', weight: 77.5999984741211 }]</span>\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>curatedFatPercentageData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// [{ date: '02/08/2023', fatPercentage: 20 }]</span>\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>curatedNutritionData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// [{ date: '02/08/2023', foods: ['Salted caramel cornetto'], protein: 5.25, fat: 16.349998474121094, carbs: 60.45000076293945, fiber: 0, sugar: 42.599998474121094 }]</span></code></pre></div>\n<p>Ok now let’s write the functions that do this magic, or better, let’s ask ChatGPT to do it for us.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">nanosToDateString</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nanos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> milliseconds <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>nanos<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>milliseconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleDateString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'en-GB'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">extractBodyData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">jsonArray<span class=\"token punctuation\">,</span> type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> jsonArray<span class=\"token punctuation\">.</span>point<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dataPoint</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> date <span class=\"token operator\">=</span> <span class=\"token function\">nanosToDateString</span><span class=\"token punctuation\">(</span>dataPoint<span class=\"token punctuation\">.</span>startTimeNanos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> dataPoint<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fpVal<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> date<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>type<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And for the nutrition data aggregation:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">aggregateNutritionData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nutritionArray</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> aggregatedData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n  nutritionArray<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nutrition</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> date<span class=\"token punctuation\">,</span> foodName<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>nutritionValues <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> nutrition<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>aggregatedData<span class=\"token punctuation\">[</span>date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      aggregatedData<span class=\"token punctuation\">[</span>date<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        date<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">foods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>foodName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token operator\">...</span>nutritionValues<span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n      aggregatedData<span class=\"token punctuation\">[</span>date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>foods<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>foodName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>nutritionValues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>nutritionValues<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n          aggregatedData<span class=\"token punctuation\">[</span>date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> nutritionValues<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>aggregatedData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The last thing to do is to merge these 3 arrays into one and sort them by date.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">mergeDataArrays</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>arrays</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> mergedData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n  arrays<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">array</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    array<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> date<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> item<span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>mergedData<span class=\"token punctuation\">[</span>date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        mergedData<span class=\"token punctuation\">[</span>date<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> date<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>mergedData<span class=\"token punctuation\">[</span>date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> rest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>mergedData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">mergeDataArrays</span><span class=\"token punctuation\">(</span>curatedWeightData<span class=\"token punctuation\">,</span> curatedFatPercentageData<span class=\"token punctuation\">,</span> curatedNutritionData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// [{\"date\":\"02/08/2023\",\"weight\":77.5999984741211,\"fatPercentage\":20,\"foods\":[\"Salted caramel cornetto\"],\"protein\":5.25,\"fat\":16.349998474121094,\"carbs\":60.45000076293945,\"fiber\":0,\"sugar\":42.599998474121094}]</span></code></pre></div>\n<p><del>Alright, time to use this data to get some insights.</del> Actually, we need one more thing before we can do that.</p>\n<h2 id=\"muscle-mass-and-body-fat-composition\" style=\"position:relative;\"><a href=\"#muscle-mass-and-body-fat-composition\" aria-label=\"muscle mass and body fat composition permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Muscle mass and body fat composition</h2>\n<p>Before diving into the calculations, we need to understand how muscle and fat are distributed in the body.</p>\n<p>I wanted to figure out how many calories are in 1kg of muscle and 1kg of fat, so I started looking for books on <a href=\"https://www.google.com/books\" target=\"_blank\" rel=\"noreferrer\">Google Books</a> to find the exact composition of muscle and fat tissue, and I did find some information on <a href=\"https://www.google.com/books/edition/The_Nutritionist/olIsBgAAQBAJ?hl=en&#x26;gbpv=1&#x26;pg=PA148&#x26;printsec=frontcover\" target=\"_blank\" rel=\"noreferrer\">The Nutritionist Food, Nutrition, and Optimal Health By Robert Wildman</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.71875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzElEQVQoz3WRS4+iUBSE+xebuCBR4/PvTFy4cKkhKkZU5KmJROV1CQJyLxcQFAkyaXWc6emZ2n+nqk59IISWy6XjOOfzeTwe/3hoNBrFcRxFkeu6zEOLxcIwDIxxlmXFL31cr1eO4wzDgBDOZrPhcDgYDCaTSRiGURQBAEiSpCiKJElZlk+nU5IkRVHc7/cXzDAMAMDzPEmSeJ7nOI7n+SAI4jg+HA6NRqNarRIEQdO07/uXy+W38+12kyTJMAzXdS3Lwhj7vg8A8H3/CbdarXq9XqlU5vM5xphhGFEUdV2PougjTVOO4wAAjuNgjJ8nEULfYZqmMcbT6XS1WgmC4HneK7Zpmn/Cnuf90xkhJMvydrsVRfETfju7rvuGIYQY4yRJFEVpt9tv2Pd9lmUlSbIsKwzDz87fY0MI/9eZZdn1eg0hfMGCIPwV+w0ritLpdJrNZq1We8Z+fvs1VZZlm81G13XbtiGEeZ5nWeY4DkIojuPdbkcQRLlcLpVKFEUhhJ47v6YqikJVVQAAxtg0TU3TVFU1DCMMwyAIbNvu9/u9Xq/b7SqKghBK0/QLnOd5URRxHMuyrGna4aEoip5v3+/3CCHXdY/HY/FVPwEsxGsqnk8+zAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"muscle and fat composition\"\n        title=\"muscle and fat composition\"\n        src=\"/static/78e0682ff9af97a8ebc8b291b53f97a9/42a19/muscle-and-fat-composition.png\"\n        srcset=\"/static/78e0682ff9af97a8ebc8b291b53f97a9/e3135/muscle-and-fat-composition.png 256w,\n/static/78e0682ff9af97a8ebc8b291b53f97a9/06341/muscle-and-fat-composition.png 512w,\n/static/78e0682ff9af97a8ebc8b291b53f97a9/42a19/muscle-and-fat-composition.png 1024w,\n/static/78e0682ff9af97a8ebc8b291b53f97a9/775e3/muscle-and-fat-composition.png 1189w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>But I still needed to know what is the energy cost to build that 1kg of muscle and 1kg of fat, so for that, I asked ChatGPT.</p>\n<blockquote>\n<p>Hi. What is the exact composition in percentages of 1kg of skeletal muscle and 1kg of adipose tissue? Also, provide the source of the information. Please give me a short answer, thank you.</p>\n</blockquote>\n<blockquote>\n<p>Sure! Here’s a short answer for the general composition of 1kg of skeletal muscle and 1kg of adipose tissue:</p>\n<p>Skeletal Muscle (1kg):</p>\n<ul>\n<li>Water: ~75%</li>\n<li>Protein: ~20%</li>\n<li>Fats: ~5%</li>\n<li>Other (minerals, glycogen, etc.): Trace amounts</li>\n</ul>\n<p>Adipose Tissue (1kg):</p>\n<ul>\n<li>Lipids: ~80-90%</li>\n<li>Water: ~10-20%</li>\n<li>Protein: ~2%</li>\n<li>Other (minerals, etc.): Trace amounts</li>\n</ul>\n<p>Please note that these values can vary depending on factors like age, sex, diet, and overall health. The information is based on general scientific understanding and can be found in various human physiology and anatomy textbooks, such as “Human Anatomy &#x26; Physiology” by Elaine N. Marieb and Katja Hoehn.</p>\n</blockquote>\n<blockquote>\n<p>And what is the synthesis efficiency in percentage to build 1 gram of muscle protein and 1 gram of lipids?  Also, provide the source of the information. Please give me a short answer, thank you.</p>\n</blockquote>\n<blockquote>\n<p>The synthesis efficiency for building muscle protein and lipids varies widely depending on factors like species, diet, age, and health. However, a general estimate can be provided:</p>\n<ul>\n<li>For muscle protein, the efficiency is often around 20-25%. This means that only about 20-25% of the amino acids consumed are incorporated into muscle protein.</li>\n<li>For lipids, the efficiency of conversion from dietary fats can be higher, around 90-95%.</li>\n</ul>\n<p>These numbers are rough estimates and can vary significantly. The information is derived from general knowledge of nutritional biochemistry and can be found in textbooks like “Biochemical, Physiological, and Molecular Aspects of Human Nutrition” by Martha H. Stipanuk and Marie A. Caudill, and scientific papers on the subject. Always consult specific research or a professional in the field for more precise information tailored to a particular situation.</p>\n</blockquote>\n<p>Cool. Let’s do some math now!</p>\n<h3 id=\"muscle-calculation\" style=\"position:relative;\"><a href=\"#muscle-calculation\" aria-label=\"muscle calculation permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Muscle calculation</h3>\n<p>Now that we know a kilogram of muscle is made up of 20% protein and 5% fat. With 1g of protein having 4 calories and 1g of fat containing 9 calories, that means 1kg of muscle has 800 calories from protein and 450 from fat, totaling 1250 calories.</p>\n<h3 id=\"fat-calculation\" style=\"position:relative;\"><a href=\"#fat-calculation\" aria-label=\"fat calculation permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fat calculation</h3>\n<p>As for fat, a kilogram is made up of 85% lipids and 2% protein. With 1g of lipids having 9 calories, and 1g of protein having 4 calories, that means 1kg of fat has 7650 calories from lipids and 80 calories from protein, totaling 7730 calories.</p>\n<h3 id=\"synthesis-cost\" style=\"position:relative;\"><a href=\"#synthesis-cost\" aria-label=\"synthesis cost permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Synthesis cost</h3>\n<p>When it comes to building the essential components of our body, the efficiency varies for different substances.</p>\n<p>For proteins, our body’s efficiency is about ~23%. That means for every 1g of protein, which has 4kcal, we need around ~17kcal to make it. Think of it like this: 4kcal goes into the actual amino acids in the protein, and the other 13kcal is the energy used up in the building process.</p>\n<p>Now, lipids are a different story. Our body’s a bit more efficient here, at ~93%. So for 1g of lipids, which has 9kcal, it only takes about 10kcal to make it. That’s 9kcal for the amino acids in the lipids, and just 1kcal for the synthesis.</p>\n<h3 id=\"calculating-the-energy-cost\" style=\"position:relative;\"><a href=\"#calculating-the-energy-cost\" aria-label=\"calculating the energy cost permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculating the energy cost</h3>\n<p>So, let’s wrap our heads around all these numbers and see what they mean for the energy cost of building muscle and fat.</p>\n<p>For muscle, we’ve got 1kg with 200g of protein and 50g of lipids. Since it takes about 17kcal to make 1g of protein and 10kcal for 1g of lipids, the total energy cost for 1kg of muscle is:</p>\n<ul>\n<li>Protein: 200 x 17 = 3400kcal</li>\n<li>Fat: 50 x 10 = 500kcal</li>\n<li>Grand Total: 3400 + 500 = 3900kcal</li>\n</ul>\n<p>Now, for body fat, with 1kg having 850g of lipids and 20g of protein, the total energy cost is:</p>\n<ul>\n<li>Lipids: 850 x 10 = 8500kcal</li>\n<li>Protein: 20 x 17 = 340kcal</li>\n<li>Grand Total: 8500 + 340 = 8840kcal</li>\n</ul>\n<p>So there you go! With these numbers, I will add the following <code class=\"language-text\">consts</code> to my code:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">CALORIES_STORED_KG_FAT</span> <span class=\"token operator\">=</span> <span class=\"token number\">7730</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CALORIES_BUILD_KG_FAT</span> <span class=\"token operator\">=</span> <span class=\"token number\">8840</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CALORIES_STORED_KG_MUSCLE</span> <span class=\"token operator\">=</span> <span class=\"token number\">1250</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CALORIES_BUILD_KG_MUSCLE</span> <span class=\"token operator\">=</span> <span class=\"token number\">3900</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>A quick reminder that these are all estimates, and the actual numbers may vary depending on your body composition, diet, and other factors. Also, I’m not a doctor or a nutritionist, so please don’t take this as medical advice.</p>\n<h2 id=\"calculating-the-tdee\" style=\"position:relative;\"><a href=\"#calculating-the-tdee\" aria-label=\"calculating the tdee permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculating the TDEE</h2>\n<p>Now that we have our parsed weight and fat percentage data and have aggregated it into a usable format, we can start to calculate our TDEE.</p>\n<p>To calculate your TDEE, follow these steps:</p>\n<ol>\n<li>Get the total number of calories consumed during the 30-day period.</li>\n<li>Calculate the weight difference between the start and end of the 30-day period.</li>\n<li>Convert the weight difference to calories by multiplying it by the number of muscle/fat gained/lost.</li>\n<li>Subtract the result from step 3 from the total calories consumed in the 30-day period.</li>\n<li>Divide the result from step 4 by 30 to get your average daily calorie intake, which should be your TDEE.</li>\n</ol>\n<p>Here’s the code to calculate TDEE and more using the code:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">calculateStatistics</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dataArray</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> totalDays <span class=\"token operator\">=</span> dataArray<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n    totalFat<span class=\"token punctuation\">,</span>\r\n    totalFiber<span class=\"token punctuation\">,</span>\r\n    totalCarbs<span class=\"token punctuation\">,</span>\r\n    finalWeight<span class=\"token punctuation\">,</span>\r\n    totalProtein<span class=\"token punctuation\">,</span>\r\n    totalCalories<span class=\"token punctuation\">,</span>\r\n    initialWeight<span class=\"token punctuation\">,</span>\r\n    initialFatPercentage<span class=\"token punctuation\">,</span>\r\n    finalFatPercentage<span class=\"token punctuation\">,</span>\r\n    initialDate<span class=\"token punctuation\">,</span>\r\n    finalDate<span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">accumulateData</span><span class=\"token punctuation\">(</span>dataArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n    fatDifference<span class=\"token punctuation\">,</span>\r\n    weightDifference<span class=\"token punctuation\">,</span>\r\n    muscleDifference<span class=\"token punctuation\">,</span>\r\n    fatDifferencePercentage<span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">calculateWeightDifference</span><span class=\"token punctuation\">(</span>initialWeight<span class=\"token punctuation\">,</span> finalWeight<span class=\"token punctuation\">,</span> initialFatPercentage<span class=\"token punctuation\">,</span> finalFatPercentage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> muscleCalories<span class=\"token punctuation\">,</span> fatCalories <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">calculateMuscleAndFatCalories</span><span class=\"token punctuation\">(</span>muscleDifference<span class=\"token punctuation\">,</span> fatDifference<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> tdee <span class=\"token operator\">=</span> <span class=\"token function\">calculateTDEE</span><span class=\"token punctuation\">(</span>totalCalories<span class=\"token punctuation\">,</span> muscleCalories<span class=\"token punctuation\">,</span> fatCalories<span class=\"token punctuation\">,</span> totalDays<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">*From </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>initialDate<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>finalDate<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">*\\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Days Range: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>totalDays<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">TDEE: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tdee<span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> kcal</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Average Calories: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>totalCalories <span class=\"token operator\">/</span> totalDays<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> kcal</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Average Protein: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>totalProtein <span class=\"token operator\">/</span> totalDays<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> g</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Average Carbs: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>totalCarbs <span class=\"token operator\">/</span> totalDays<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> g</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Average Fat: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>totalFat <span class=\"token operator\">/</span> totalDays<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> g</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Average Fiber: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>totalFiber <span class=\"token operator\">/</span> totalDays<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> g</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Weight Difference: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>weightDifference <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">'+'</span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>weightDifference<span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> kg (</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>initialWeight<span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> -> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>finalWeight<span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Fat Difference: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fatDifference <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">'+'</span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fatDifference<span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> kg</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Non-Fat Difference: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>muscleDifference <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">'+'</span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>muscleDifference<span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> kg</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Fat Percentage Difference: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fatDifferencePercentage <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">'+'</span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fatDifferencePercentage<span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">%  (</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>initialFatPercentage<span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> -> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>finalFatPercentage<span class=\"token operator\">?.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This function returns a string with details for a 30-day period, including the number of days, TDEE, average daily intake of calories, protein, carbohydrates, fat, and fiber, as well as the weight, fat, non-fat, and fat percentage differences between the start and end of the period.</p>\n<p>As for the missing functions <code class=\"language-text\">accumulateData</code>, <code class=\"language-text\">calculateWeightDifference</code> and <code class=\"language-text\">calculateTDEE</code>, here they are:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">accumulateData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dataArray</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> lastOccurrence <span class=\"token operator\">=</span> dataArray<span class=\"token punctuation\">[</span>dataArray<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> firstOccurrence <span class=\"token operator\">=</span> dataArray<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> accumulator <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">totalCalories</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">totalProtein</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">totalCarbs</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">totalFat</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">totalFiber</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">initialWeight</span><span class=\"token operator\">:</span> firstOccurrence<span class=\"token operator\">?.</span>weight<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">finalWeight</span><span class=\"token operator\">:</span> lastOccurrence<span class=\"token operator\">?.</span>weight<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">initialFatPercentage</span><span class=\"token operator\">:</span> firstOccurrence<span class=\"token operator\">?.</span>fatPercentage<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">finalFatPercentage</span><span class=\"token operator\">:</span> lastOccurrence<span class=\"token operator\">?.</span>fatPercentage<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">initialDate</span><span class=\"token operator\">:</span> firstOccurrence<span class=\"token operator\">?.</span>date <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">finalDate</span><span class=\"token operator\">:</span> lastOccurrence<span class=\"token operator\">?.</span>date <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n  dataArray<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    accumulator<span class=\"token punctuation\">.</span>totalCalories <span class=\"token operator\">+=</span> data<span class=\"token punctuation\">.</span>caloriesConsumed<span class=\"token punctuation\">;</span>\r\n    accumulator<span class=\"token punctuation\">.</span>totalProtein <span class=\"token operator\">+=</span> data<span class=\"token punctuation\">.</span>protein<span class=\"token punctuation\">;</span>\r\n    accumulator<span class=\"token punctuation\">.</span>totalCarbs <span class=\"token operator\">+=</span> data<span class=\"token punctuation\">.</span>carbs<span class=\"token punctuation\">;</span>\r\n    accumulator<span class=\"token punctuation\">.</span>totalFat <span class=\"token operator\">+=</span> data<span class=\"token punctuation\">.</span>fat<span class=\"token punctuation\">;</span>\r\n    accumulator<span class=\"token punctuation\">.</span>totalFiber <span class=\"token operator\">+=</span> data<span class=\"token punctuation\">.</span>fiber<span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> accumulator<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">calculateWeightDifference</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialWeight<span class=\"token punctuation\">,</span> finalWeight<span class=\"token punctuation\">,</span> initialFatPercentage<span class=\"token punctuation\">,</span> finalFatPercentage</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> weightDifference <span class=\"token operator\">=</span> finalWeight <span class=\"token operator\">-</span> initialWeight<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> initialFat <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>initialFatPercentage <span class=\"token operator\">*</span> initialWeight<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> finalFat <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>finalFatPercentage <span class=\"token operator\">*</span> finalWeight<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> fatDifference <span class=\"token operator\">=</span> finalFat <span class=\"token operator\">-</span> initialFat<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> muscleDifference <span class=\"token operator\">=</span> weightDifference <span class=\"token operator\">-</span> fatDifference<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> fatDifferencePercentage <span class=\"token operator\">=</span> finalFatPercentage <span class=\"token operator\">-</span> initialFatPercentage<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> weightDifference<span class=\"token punctuation\">,</span> fatDifference<span class=\"token punctuation\">,</span> muscleDifference<span class=\"token punctuation\">,</span> fatDifferencePercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">calculateTDEE</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">totalCalories<span class=\"token punctuation\">,</span> muscleCalories<span class=\"token punctuation\">,</span> fatCalories<span class=\"token punctuation\">,</span> totalDays</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> caloriesDifference <span class=\"token operator\">=</span> fatCalories <span class=\"token operator\">+</span> muscleCalories<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>totalCalories <span class=\"token operator\">-</span> caloriesDifference<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> totalDays<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you can see, the <code class=\"language-text\">calculateStatistics</code> function calls the <code class=\"language-text\">accumulateData</code> function to get the total calories, protein, carbohydrates, fat, and fiber consumed during the 30-day period, as well as the initial and final weight and fat percentage.</p>\n<p>Then, it calls the <code class=\"language-text\">calculateWeightDifference</code> function to calculate the weight, fat, non-fat, and fat percentage differences between the start and end of the period.</p>\n<p>Finally, it calls the <code class=\"language-text\">calculateTDEE</code> function to calculate the TDEE.</p>\n<h2 id=\"send-the-data-to-telegram\" style=\"position:relative;\"><a href=\"#send-the-data-to-telegram\" aria-label=\"send the data to telegram permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Send the data to Telegram</h2>\n<p>Once you have calculated your TDEE, you may want to share this information with others, such as a personal trainer or a friend. One easy way to do this is by sending the data to a Telegram group chat. This can be done using the Telegram Bot API.</p>\n<p>Here’s an example code snippet that sends the TDEE result to a Telegram group chat:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token function\">calculateStatistics</span><span class=\"token punctuation\">(</span>agragatedData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">await</span> <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.telegram.org/bot</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">TELEGRAM_BOT_ID</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/sendMessage</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  text<span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">chat_id</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">TELEGRAM_GROUP_ID</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">parse_mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'markdown'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In this code, we are using the <code class=\"language-text\">node-fetch</code> package to make an HTTP POST request to the Telegram Bot API’s sendMessage method. We pass in the TDEE result as the text field in the request body, along with the chat_id of the Telegram group we want to send the message. We also set the <code class=\"language-text\">parse_mode</code> field to <code class=\"language-text\">markdown</code> to enable formatting in the message.</p>\n<p>Note that in order to use this code, you will need to set the <code class=\"language-text\">TELEGRAM_BOT_ID</code> and <code class=\"language-text\">TELEGRAM_GROUP_ID</code> environment variables to the appropriate values.</p>\n<h2 id=\"bonus\" style=\"position:relative;\"><a href=\"#bonus\" aria-label=\"bonus permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bonus</h2>\n<p>You can copy the text you got from this script and send it to ChatGPT for even more insights 👀.</p>\n<blockquote>\n<p>Hi. What do you think of these data from my personal health track from the past 30 days or so? Can you give me a short and concise insight into what I’m doing well and where I should improve? Thanks\r\n&#x3C;- My Text Data -></p>\n</blockquote>\n<blockquote>\n<p>Sure! Based on the data you’ve provided, here’s a brief analysis:</p>\n<p>What You’re Doing Well:\r\nCaloric Balance: Your average caloric intake is very close to your Total Daily Energy Expenditure (TDEE), which suggests that you are maintaining your weight effectively.\r\nWeight Loss: You’ve lost 0.80 kg over the past month, which is a healthy and sustainable rate of weight loss if that’s your goal.\r\nProtein Intake: Your average protein intake seems to be in a good range, especially if you’re engaging in physical activities that require muscle repair and growth.</p>\n<p>Areas for Improvement:\r\nFat Percentage Increase: The increase in fat percentage and fat mass might be a concern if you are aiming to reduce body fat. This could be related to the type of foods you are consuming or the balance of macronutrients.\r\nFiber Intake: Your average fiber intake is a bit on the lower side. Increasing fiber intake by consuming more whole grains, fruits, and vegetables can aid in digestion and may help with weight management.</p>\n<p>Remember, these insights are based on the data provided and general guidelines. Individual needs can vary widely, so it’s always a good idea to consult with a healthcare provider or nutrition professional for personalized advice.</p>\n</blockquote>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>That’s it, now you will always know precisely what your TDEE is. You can use this information to adjust your diet and exercise routine to achieve your fitness goals, you can even put this script into a GitHub Actions workflow to run it automatically every day and send the results to a Telegram group chat.</p>\n<p>If you want to see the full code, <a href=\"https://github.com/blopa/google-fit-telegram/\" target=\"_blank\" rel=\"noreferrer\">you can find it in my GitHub</a>, which includes a GitHub Action workflow that runs the script every day and sends the results to a Telegram chat, so feel free to simply clone the repository and use it.</p>\n<p>I hope you found this article useful. If you have any questions or comments, feel free to <a href=\"/en/contact\">reach out</a> or leave your feedback in the comments section below.</p>","fields":{"slug":"/2023/2023-08-02-using-google-fitness-api-to-calculate-my-tdee-and-more.en/","path":"/blog/coding/using-google-fitness-api-to-calculate-my-tdee-and-more/","locale":"en"},"readingTime":{"minutes":16.2},"frontmatter":{"date":"2023-08-02T00:00:00.000Z","title":"Using Google Fitness API to calculate my TDEE and more","categories":["coding"]}}},{"node":{"excerpt":"Gatsby is a popular static site generator that is built on…","html":"<p>Gatsby is a popular static site generator that is built on React, and it’s the one that I use to create this blog. With its powerful plugin system, it allows developers to easily add features to their sites.</p>\n<p>One feature that can be added is API endpoints, which can be used to serve JSON data to the client.</p>\n<p>In this post, we will look at how to add API endpoints to Gatsby v3 by modifying the <code class=\"language-text\">gatsby-node.js</code> file.</p>\n<p>First post of 2023, let’s go!!</p>\n<h2 id=\"the-problem\" style=\"position:relative;\"><a href=\"#the-problem\" aria-label=\"the problem permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The problem</h2>\n<p>In a Gatsby site, the data that is used to build pages is typically sourced from a variety of sources, such as <code class=\"language-text\">Markdown</code> files or a headless CMS.</p>\n<p>In my case, all my posts come from <code class=\"language-text\">Markdown</code> files, and I have some custom scripts to match related posts, get the blog post comments, etc.</p>\n<p>Since all my data is stored “offline”, if I want to access it in another application I would have to pretty much scrape my own website, and that’s not good.</p>\n<h2 id=\"the-solution\" style=\"position:relative;\"><a href=\"#the-solution\" aria-label=\"the solution permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The solution</h2>\n<p>If I create an API endpoint for my blog, then I can expose all data that is currently already public and displayed as <code class=\"language-text\">HTML</code>, but provide it as a “raw” JSON data.</p>\n<p>To add API endpoints to a Gatsby site, we need to take advantage of the <code class=\"language-text\">onPostBuild</code> lifecycle method in the <code class=\"language-text\">gatsby-node.js</code> file. This method is called after the site has been built, and allows us to perform additional actions, such as creating JSON files.</p>\n<p>Since I do a lot of custom scripting on all my pages, we are using a global variable called <code class=\"language-text\">jsonFiles</code> that will dynamically populate with data from the <code class=\"language-text\">onCreatePage</code> function.</p>\n<p>This will be used to store the data that we want to use to create the JSON files then loop through each path in the <code class=\"language-text\">jsonFiles</code> object and use the <code class=\"language-text\">createPage</code> action to create a new page for each <code class=\"language-text\">path</code>.</p>\n<p>Here is an example of how I’m doing it:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> writeFileSync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> jsonFiles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreatePage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> page <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    jsonFiles<span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> page<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onPostBuild</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonFiles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>filePath<span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> fileFullPath <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>\r\n            __dirname<span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'public'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token operator\">...</span>filePath<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">part</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> part<span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>fileFullPath<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"consuming-the-data-from-the-api-endpoints\" style=\"position:relative;\"><a href=\"#consuming-the-data-from-the-api-endpoints\" aria-label=\"consuming the data from the api endpoints permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Consuming the data from the API endpoints</h2>\n<p>Once the API endpoints have been created, the next step is to consume the data from the client side. This can be done by using the <code class=\"language-text\">fetch()</code> function.</p>\n<p>Here is an example of how to use <code class=\"language-text\">fetch()</code> to get the data from the endpoint for this blog post:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://pablo.gg/en/blog/coding/creating-rest-api-endpoints-to-my-gatsby-blog.json'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token comment\">// { comments: [], html: '&lt;p>..&lt;/p>', language: 'en', path: 'blog-path', postHashId: 'hash', relatedPosts: [], title: 'Post title' }</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Adding API endpoints to a Gatsby site is a simple task, but can enhance the possibilities of your website.</p>\n<p>I will soon (I hope) share what I plan to do with my own API 👀</p>\n<p>That’s all I have for you guys today, see you on the next one!</p>","fields":{"slug":"/2023/2023-01-22-creating-rest-api-endpoints-to-my-gatsby-blog.en/","path":"/blog/coding/creating-rest-api-endpoints-to-my-gatsby-blog/","locale":"en"},"readingTime":{"minutes":2.57},"frontmatter":{"date":"2023-01-22T00:00:00.000Z","title":"Creating Rest API endpoints to my Gatsby blog","categories":["coding"]}}},{"node":{"excerpt":"Last year, I wrote a blog post about where to find the best…","html":"<p>Last year, <a href=\"/en/blog/general/a-guide-to-cliff-diving-in-benagil/\">I wrote a blog post about where to find the best cliff diving spots in Benagil</a>, Portugal, and let’s just say I was a little bit hooked. I mean, who wouldn’t be? Cliff diving is the ultimate mix of excitement and adrenaline. So, when I heard that Amsterdam also has some great opportunities for this thrilling activity, I knew I had to check it out.</p>\n<p>Whether you’re a seasoned cliff diver or just looking for a new and exciting activity to try, Amsterdam has plenty of options for all skill levels.</p>\n<p>In this blog post, we’ll provide an overview of the different options for cliff diving in Amsterdam, as well as some important safety considerations.</p>\n<h2 id=\"jumping-from-canals-and-bridges\" style=\"position:relative;\"><a href=\"#jumping-from-canals-and-bridges\" aria-label=\"jumping from canals and bridges permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jumping from canals and bridges</h2>\n<p>Amsterdam’s canals and bridges offer some prime spots for cliff diving, with heights ranging from 1 to 11 meters. The Pythonbrug and Het Stenen Hoofd are two popular locations for this activity.</p>\n<p>Now, it might not be strictly legal, but it’s a common activity among locals and tourists alike. The cool waters of the canals provide a refreshing break from the summer heat, and the views from the top of the bridges are absolutely breathtaking.</p>\n<h2 id=\"diving-from-indoor-pools\" style=\"position:relative;\"><a href=\"#diving-from-indoor-pools\" aria-label=\"diving from indoor pools permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Diving from indoor pools</h2>\n<p>If you’re more of a controlled environment kind of person, don’t worry, Amsterdam has you covered. The Noorderparkbad and Sloterparkbad both have pools that are suitable for diving, and the Sloterparkbad even offers skilled classes through the Indoor Cliff Diving club.</p>\n<p>This club is a great way to learn new techniques and improve your skills in a safe, indoor setting.</p>\n<h2 id=\"indoor-cliff-diving-classes\" style=\"position:relative;\"><a href=\"#indoor-cliff-diving-classes\" aria-label=\"indoor cliff diving classes permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Indoor Cliff Diving classes</h2>\n<p>During the class, you’ll start by learning the basic diving techniques on a trampoline before moving on to the diving platform, which ranges from 3 to 10 meters. The platform is a safe and controlled environment, allowing you to focus on perfecting your dive without the added stress of external factors.</p>\n<p>As you progress through the class, you’ll have the opportunity to try different dives and increase the height of the platform. Before you know it, you’ll be confidently diving from heights of up to 10 meters!</p>\n<p>Not only is indoor diving a thrilling and unique activity, it’s also a great way to challenge yourself and build confidence. Plus, the indoor setting means you can enjoy this activity year-round, regardless of the weather.</p>\n<p>The experienced instructors at Indoor Cliff Diving will teach you the proper techniques for a successful dive.</p>\n<h2 id=\"prices-and-schedule\" style=\"position:relative;\"><a href=\"#prices-and-schedule\" aria-label=\"prices and schedule permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prices and schedule</h2>\n<p>The Indoor Cliff Diving club meets every Friday and Sunday at the Sloterparkbad, and offers a range of classes for all skill levels.</p>\n<p>Whether you’re a beginner looking to try diving for the first time, or an experienced diver looking to perfect your technique, there is a class for you.</p>\n<p><a href=\"https://indoorcliffdiving.com/#pricing\" target=\"_blank\" rel=\"noreferrer\">Prices for classes depend on the package you choose</a>, but trust me, they are very affordable and well worth the experience.</p>\n<h2 id=\"safety-first\" style=\"position:relative;\"><a href=\"#safety-first\" aria-label=\"safety first permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Safety First</h2>\n<p>No matter where you choose to cliff dive in Amsterdam, it’s important to keep safety in mind. Always check the depth of the water before jumping, and be sure to follow any rules or guidelines set by the location where you are diving.</p>\n<p>It’s also a good idea to have a trusted buddy with you to help spot you and ensure your safety.</p>\n<p>With a little bit of caution and common sense, cliff diving can be a thrilling and enjoyable activity in Amsterdam.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Cliff diving in Amsterdam is a unique and thrilling activity that offers a unique way to experience the city and a variety of options for all skill levels.</p>\n<p>Whether you choose to jump from the canals or take a class at the Indoor Cliff Diving club, I hope you have a good time. Just remember to always prioritize safety and follow any rules or guidelines set by the location where you’re diving. With a little bit of caution and common sense, you’ll be able to fully enjoy the excitement of cliff diving in Amsterdam.</p>","fields":{"slug":"/2022/2022-12-28-a-guide-to-cliff-diving-in-amsterdam.en/","path":"/blog/general/a-guide-to-cliff-diving-in-amsterdam/","locale":"en"},"readingTime":{"minutes":3.325},"frontmatter":{"date":"2022-12-28T00:00:00.000Z","title":"A guide to \"cliff\" diving in Amsterdam","categories":["general"]}}},{"node":{"excerpt":"It’s happening, it’s finally happening - After 3 years of…","html":"<p>It’s happening, it’s finally happening - After 3 years of hiatus, E3 is finally coming back as a physical event in 2023, and I can’t contain myself.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEBQP/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAe7rzGgoEysupa1SEy//xAAfEAACAQMFAQAAAAAAAAAAAAABAgMAITMEEBESIkL/2gAIAQEAAQUCW4UhtvhcnFahvET9ZTIGqTI1A2//xAAXEQEAAwAAAAAAAAAAAAAAAAABABAR/9oACAEDAQE/AQvZ/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAECAQE/AXS//8QAGxAAAQUBAQAAAAAAAAAAAAAAAQACEBEhMXH/2gAIAQEABj8CwrHAxSbweQQEwgVSuBH/xAAcEAADAAMAAwAAAAAAAAAAAAAAAREhMUFRYXH/2gAIAQEAAT8hmlEUlI3BpkVp8ONeYM5OyZgW/sgs2scNwiWC4OWx/9oADAMBAAIAAwAAABDcFXH/xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAEDAQE/EKC9I3//xAAXEQEAAwAAAAAAAAAAAAAAAAABABAR/9oACAECAQE/EHCFpZ//xAAbEAEBAAMBAQEAAAAAAAAAAAABEQAhMXFBsf/aAAgBAQABPxAhsOJiiRwVmDfmQVAUF9CYuSaIG7qa+Zt5lGjNvPzEFNBd9JjiDAiZiYVi7w1gKlnswICM/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Me while writting this post\"\n        title=\"Me while writting this post\"\n        src=\"/static/0e93743a85e03fab3fe678df24268bce/63217/e3_selfie.jpg\"\n        srcset=\"/static/0e93743a85e03fab3fe678df24268bce/db830/e3_selfie.jpg 256w,\n/static/0e93743a85e03fab3fe678df24268bce/8102f/e3_selfie.jpg 512w,\n/static/0e93743a85e03fab3fe678df24268bce/63217/e3_selfie.jpg 1024w,\n/static/0e93743a85e03fab3fe678df24268bce/d58d1/e3_selfie.jpg 1536w,\n/static/0e93743a85e03fab3fe678df24268bce/09658/e3_selfie.jpg 2048w,\n/static/0e93743a85e03fab3fe678df24268bce/869dc/e3_selfie.jpg 2464w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Me while writting this post</figcaption>\n  </figure></p>\n<p>A few months ago it was the 10 years anniversary of my first E3, and <a href=\"/en/blog/games/10-years-anniversary-of-my-first-e3/\">I extensively wrote about all my experience</a> with past events and why I think we still need E3.</p>\n<p>My main reason was that a focused event with all major game announcements induces hype in everyone, and although you <a href=\"https://en.wikipedia.org/wiki/Don%27t_Believe_the_Hype\" target=\"_blank\" rel=\"noreferrer\">shouldn’t believe the hype</a>, in this case, the hype is good, it helps the games to reach a broader audience that otherwise wouldn’t.</p>\n<p>I know I’m right because Gamescom this year was simply E3 but in Europe. I was even planning to go there this year, but I thought it wouldn’t be as nice to go myself, etc, and I canceled my plans, and now I regret it miserably.</p>\n<p>ANYWAY</p>\n<p>So when is E3 happening?</p>\n<h2 id=\"the-dates\" style=\"position:relative;\"><a href=\"#the-dates\" aria-label=\"the dates permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The dates</h2>\n<p>E3 2023 will happen from June 13th till June 16th, four days after the event for the first time - at least in the 10 years, I’ve been attending it.</p>\n<p>Not only that but two of these four days will be dedicated to media press and business, something that ESA probably learned from Gamescom.</p>\n<p>The two other days, called “Gamer Days”, will be open to the public, and you will be able to buy your tickets soon.</p>\n<p>I already updated my <a href=\"https://pablo.gg/en/e3/\" target=\"_blank\" rel=\"noreferrer\">E3 Countdown</a> page with the update dates. A bit more than 8 months for the best videogames event ever. Can’t wait!!</p>\n<p>See you guys there!</p>","fields":{"slug":"/2022/2022-09-27-e3-2023-dates-revealed.en/","path":"/blog/games/e3-2023-dates-revealed/","locale":"en"},"readingTime":{"minutes":1.345},"frontmatter":{"date":"2022-09-27T00:00:00.000Z","title":"E3 2023 dates revealed","categories":["games"]}}},{"node":{"excerpt":"The housing market in Amsterdam is crazy, so crazy that…","html":"<p>The housing market in Amsterdam is crazy, so crazy that <a href=\"https://www.dutchnews.nl/news/2022/06/dont-come-unless-you-have-a-place-to-live-universities-warn-international-students/\" target=\"_blank\" rel=\"noreferrer\">universities are telling students to not come to Amsterdam unless they already have a place to live here</a>, and it’s only getting worse.</p>\n<p>Rent and property prices are skyrocketing, and as Amsterdam is a tech hub, there’s always a Booking engineer with enough money to overbid you. So what can you do?</p>\n<p>Well, if you’re fast enough you can book a viewing as soon as a house hits the market and then make an offer that is good enough for the property owner to accept it on the spot.</p>\n<p>The best way to get notified as soon as a house is listed is by paying a subscription to one of those rental agencies, and they will let you know when a new house is listed on your email.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.765625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACyklEQVQoz0WSSU8TAQCFJzFevGhiCBcTvakXPZH4Fzh4wAuJ4lJDQjQhEMAFoRHBCNRoi8hearFAWwMIpaULVKEL3ehKOzOdTtsprZ2Zzj60wsGAQQ4mL3mX9+UlLw+ACPZUIM6COAOXeJQtZ2kRo/g9kitghSyKgST3P0awKCvm9isgzgD/MAbG6QzNJ9kyFNqNDwwEpFLv5IS/97WrvcM7roK5ClRkIIJO4AxcoIfGLHOr/jQnnsBpWoC4Q0siHyowu2hu077p8wV1PzyyBbkp7ApiQYTkwZPagzRbsdgiHa1fGiSfkxQPgCRvS+QGFRPN9x++15pTwmFW/K0LxGSmzTZtR/OU9GtAG6KOEYKK5NbjRSyGEF3d8z2y5Qy/D+gCqOTeo87mlhmLyxBqL/B7DlAvNz925Hbc7qbo2E2l6oE1at1IRxe9ZxFc9Us8DqF5lBVgkgUieeqbM+zOl2EiFnJd5dJyOzQ6bbwDJp6vgB/CLol7/kbW36C3Dz+brJqzv3OjPCqKKUoACRaASTbDCAh9mEyadN/POD11htVahaamZ+pNl7S+pndMpmns0ao33N1aR6N6ZUKjn3av+MzhBFLiTwZLFClUOIpFjLODF43G851N5+aUV5Y0Er387sLM06GpekVfo2P9ujNSXXTc4jxP4B3TegxFShwA4nSqVLEnzPq1SzvG6rz3Mq85S23dZmgnGG0tC/OukFmx3D+yWquZvaCaq/oZV/qwbIoWQIIBkBIXzJIv+l52tl2T9tQp1N1LE6+W9HLVhm0jrN2MmxAypfOtvNUPd34aX1xUe2Gbbw8DcQYiWCBFC9tQTqk16w2ej5NWrSXeO24dmLINji73j6y1SNVbUawgHhnC2GIEzYh/kqUDpCScvg04tQxfyZUPs0I5zQowTiMUFy9S22DG5k9EcjhMsijFpUociNMQQUMEcwr/BZKnGjZP1yudAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"home finder banner\"\n        title=\"home finder banner\"\n        src=\"/static/fa1bf554d6509ee52be1e8a65cbfc25e/42a19/home_finder_banner.png\"\n        srcset=\"/static/fa1bf554d6509ee52be1e8a65cbfc25e/e3135/home_finder_banner.png 256w,\n/static/fa1bf554d6509ee52be1e8a65cbfc25e/06341/home_finder_banner.png 512w,\n/static/fa1bf554d6509ee52be1e8a65cbfc25e/42a19/home_finder_banner.png 1024w,\n/static/fa1bf554d6509ee52be1e8a65cbfc25e/e8464/home_finder_banner.png 1536w,\n/static/fa1bf554d6509ee52be1e8a65cbfc25e/ac7a9/home_finder_banner.png 1920w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>That’s great, but since I wanted to get notifications on Telegram plus didn’t want to spend any money because <code class=\"language-text\">#frugallife</code>, <a href=\"/en/blog/coding/using-nodejs-and-github-action-to-find-a-house-on-fundanl/\">I wrote a script to scrape funda.nl and find a house for me</a>.</p>\n<p>That worked out great for me, but for people lacking programming skills, setting up a GitHub account, and messing up with GitHub Actions was a bit too much, so I decided to create a free and <a href=\"https://github.com/WeRules/home-finder\" target=\"_blank\" rel=\"noreferrer\">open-source project called Home Finder</a> (a unique name, I know) that uses GitHub Actions and Google Forms to help anyone find a new house.</p>\n<h2 id=\"startup\" style=\"position:relative;\"><a href=\"#startup\" aria-label=\"startup permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Startup?</h2>\n<p>You must be wondering why I call this a Startup, well, <a href=\"https://www.reddit.com/r/Amsterdam/comments/6kvofb/whats_your_experience_been_with_rental_or_room/\" target=\"_blank\" rel=\"noreferrer\">there are plenty of companies providing services like this for a monthly fee</a>, so yeah, I guess you can simply:</p>\n<ol>\n<li>Clone my projects</li>\n<li>Deploy to your own web domain</li>\n<li>????</li>\n<li>Profit</li>\n</ol>\n<p>Why am I making this free and open-source you ask? Well because I’m mad.</p>\n<h2 id=\"the-business-plan\" style=\"position:relative;\"><a href=\"#the-business-plan\" aria-label=\"the business plan permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The business plan</h2>\n<p>Paying rent in Amsterdam is already expensive enough, and with <a href=\"https://www.dutchnews.nl/news/2022/02/average-energy-bills-could-rise-86-as-gas-and-electricity-prices-soar/\" target=\"_blank\" rel=\"noreferrer\">heating prices going up faster than Dogecoin</a>, paying an extra service to find a house is a no-no, but hosting a website with a database and a backend to scrape the web is not free, the cheapest tear on Digital Ocean will cost U$5 per month - still better than most rental agencies, though.</p>\n<p>Thankfully, <a href=\"https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions#included-storage-and-minutes\" target=\"_blank\" rel=\"noreferrer\">GitHub Actions have a 2000 hours free tier</a> for any GitHub account, so that solves the problem of having a script scraping the web in the background, but how can users submit their data so the script can look for houses based on their needs?</p>\n<p><a href=\"https://blog.webjeda.com/google-form-customize/\" target=\"_blank\" rel=\"noreferrer\">There is a workaround to use Google Forms as a form on any website</a>, using any layout you want, and all the form submitted data will be stored in a Google Spreadsheet, that later can be downloaded via the scraping script to get the user data and look for houses.</p>\n<p>So that’s the stack: GitHub Actions, GitHub Pages, Google Spreadsheet, and Google Forms.</p>\n<p>But before doing any code, I started thinking about the business model and use cases and came up with the following use case:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEYUlEQVQ4yzWP2U8bZxTF55/rY6WqAULAILUkaiOqLmmTPqQ0qZTS0DRKAG+z2C5ObWK8jE1Igg2BxMvstsfY4/GCt8/M2J7NQ4CkD6VUrlrp6ujq6J7f0YU8rOZidYSQUULCWMPN6R5Wc/8/LlZHaQVldDenuVn9P5MzRg6rQyijYZmupJmSZnrSLZTsIZTqGZ1qGDf0kt00XwuSdZjWELKPUCrGqP5UdYs5xKgBtM5KPdW4uLg4P//r9PREHihbeYDSqpvVPG/qHqLrz+vr7FGI7fRU47XYRylljZZ9XN/NqJCX6W/ycpjrRrLdKK9s8vpTboT3cLozLaG0ipE9ogxasiobJ21ZCdAdlDOdlIaxOjR6mDGwkR470wJKxJFMDqN0mFT2y308LzuIUYmbHqBk30X3PZzuJuQ4D9aZLuSiB25Kwughmkpt8LZYZSVcsrqJICmCi7/PdfO02JQ2OAll9FGMMxFC/v11YSvbWWckyEVKrtctNPUqIqxGq0i4goRrcFS0xcU/ojm/n+AiefUJLblY1cUM0TTlz7pCAuKm1p3EEeTmTlAiHy5aN6touOzcZtBdBouISKTixKv2QMHuTJIYc+zmTpA0GzxYiVUdURGOVa1eyg85M0drLIzXVzYE2wZvBUm8uRP0U8uRMhwqOiOCI3hgRVOUMyk8zaGbNRivILgI4yKCi3Zonc1SjfhuNsH0dmM5WMk8L+8E7C/uOeKLj/E7zvhirIaEBUe46AyLto2iLZxzhIp2vALjIgyRYF+uv1u6ln2rnQ20xv3UWu1IfFZ2BfjVQG41VLTHqki0DEercELwlguJs3qJLcUCgjVWQaAUiIO28iZWea+bZ2fG5O7jrNrYrvmflhwhAQmW0KCAhNqwd+/xTtD3xGbb9vviibVAyRoUUIg5+KrG+3KZPYF5c9bvdBq1QY86EG/ki/MlYb5Ynsuw17nlR/QD38pvvyze/XL113t3F75ZWp3jha+h49alQc6X2ElmUsm3/F7x+WopsdQvff6+NzFsTiiNJf1Z8NzyfGB99eCH23cXLmHLS1u+lTI59k66Amnty23mUYGgeWJvkNkFuZuH3Bzz8lbjYLySWdPENMjdVHw/H/q3EvijbPLjfhE3hKxSvzoE05AJLL3aVDNpl1Mv8y+WdOZFi/1eZCeGYKxduCeQC2zqg2J+vJGNq9VlA3wol1w1YvOotGB2xyGzOyUL11spa2F7sZm9DnLfdtNekIG7pRvFJzOBHy9XC5NKbaqwjw3qn6nNj0DhYZu/0+Aeaq1JyARTSu3Txj7czs+zL2+A8rjWnpQKt5rEfTq4iCPzcvVKr/JTanO5V7MY7dkq5RjUrxWSC8PODDTsWIbgSoO4k9/7Qu+MmZ1ZE1iOjyaMzvgQWP5UZ0DJEvF+RySuyhWLVPmkTN4e1KeBMH3cnR6FTWAxwLjenjTBrNGxjHDtGbMzO/x3VxrTh/zYcXfKBBa9Na23Lo/oXYvRsfwDMsh076WO9ywAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"youre safe now jamstack\"\n        title=\"youre safe now jamstack\"\n        src=\"/static/067740f521cc1df37c8f23330fbb435c/42a19/youre_safe_now_jamstack.png\"\n        srcset=\"/static/067740f521cc1df37c8f23330fbb435c/e3135/youre_safe_now_jamstack.png 256w,\n/static/067740f521cc1df37c8f23330fbb435c/06341/youre_safe_now_jamstack.png 512w,\n/static/067740f521cc1df37c8f23330fbb435c/42a19/youre_safe_now_jamstack.png 1024w,\n/static/067740f521cc1df37c8f23330fbb435c/e8464/youre_safe_now_jamstack.png 1536w,\n/static/067740f521cc1df37c8f23330fbb435c/2eb59/youre_safe_now_jamstack.png 2048w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"why-not-use-firebase\" style=\"position:relative;\"><a href=\"#why-not-use-firebase\" aria-label=\"why not use firebase permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why not use Firebase?</h2>\n<p>Because.</p>\n<h2 id=\"the-coding\" style=\"position:relative;\"><a href=\"#the-coding\" aria-label=\"the coding permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The coding</h2>\n<p>To build this website I started with my to-go SSG framework, Gatsby. I pretty much just <a href=\"https://github.com/blopa/Resume-Builder\" target=\"_blank\" rel=\"noreferrer\">copy</a> and <a href=\"https://github.com/blopa/gatsby-material-ui-blog-starter\" target=\"_blank\" rel=\"noreferrer\">paste</a> the same code from one Gatsby project to another, and this time was no different.</p>\n<p>The great thing about Gatsby is that I can fetch the data in the <code class=\"language-text\">node.js</code> part of Gatsby, and filter out any data I don’t want to send to the frontend, like the user email, and tcharam, with no data leakage. For this project, I didn’t have to do this, but I do it for this blog - so whenever a user leaves a comment with their email, that email never shows up in the frontend build.</p>\n<p>This project will have 2 different parts, the Gatsby site, which I will build once, <a href=\"https://github.com/WeRules/home-finder/blob/main/src/utils/gatsby-node-helpers.js#L18\" target=\"_blank\" rel=\"noreferrer\">get the form data from Google Forms using Node Fetch</a>, and the script that <a href=\"https://github.com/WeRules/home-finder-script/blob/main/scraper.js#L17\" target=\"_blank\" rel=\"noreferrer\">will download the Google Spreadsheet data</a> and parse it with <a href=\"https://www.npmjs.com/package/xlsx\" target=\"_blank\" rel=\"noreferrer\">xlsx</a>.</p>\n<p>I also want to make sure I won’t send the same house to the same user twice, and for that, I will need a database to persist the houses I already send to that user, for that I will simply use a <code class=\"language-text\">db.json</code> file with the following structure:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">\"user@email.com\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"https://somelink.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://otherlink.com\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token property\">\"user2@email.com\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"https://linklink.com\"</span><span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To persist this data to the repo, I will use the <a href=\"https://github.com/stefanzweifel/git-auto-commit-action\" target=\"_blank\" rel=\"noreferrer\">git-auto-commit-action</a> GitHub Action. This is problematic because now anyone can go to that repo and see all the users’ emails and links, and I can’t have that, so that repo needs to be private, but you can clone <a href=\"https://github.com/WeRules/home-finder-script\" target=\"_blank\" rel=\"noreferrer\">this one</a> to your own GitHub account if you want.</p>\n<h2 id=\"limitations\" style=\"position:relative;\"><a href=\"#limitations\" aria-label=\"limitations permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Limitations</h2>\n<p>Since I don’t want to use more than the GitHub Actions free tier, I will be running the script every hour, this should be enough to not pass the monthly limit - well, it depends on the number of users, of course.</p>\n<p>I also had to manually write the scraping scripts for <a href=\"https://github.com/WeRules/home-finder-script/blob/main/scraper.js#L133\" target=\"_blank\" rel=\"noreferrer\">various real estate websites</a>, so it’s not like you can get notifications from any website anywhere in the Netherlands.</p>\n<p>That’s why I made this free and open-source and I highly encourage people to deploy their own version and change the frequency of the scraping script to match their needs.</p>\n<p>There’s also a chance that any of the websites can block the user-agent from scraping them, in this case, you need to keep an eye on it and change the user-agent if needed.</p>\n<h2 id=\"deploying-your-own-version\" style=\"position:relative;\"><a href=\"#deploying-your-own-version\" aria-label=\"deploying your own version permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploying your own version</h2>\n<p>To deploy your own version you will need to clone 2 GitHub repos, the <a href=\"https://github.com/WeRules/home-finder\" target=\"_blank\" rel=\"noreferrer\">Home Finder</a> and the <a href=\"https://github.com/WeRules/home-finder-script\" target=\"_blank\" rel=\"noreferrer\">Home Finder Script</a>. If you don’t really need the frontend part, you can just clone the script repo.</p>\n<h3 id=\"the-frontend\" style=\"position:relative;\"><a href=\"#the-frontend\" aria-label=\"the frontend permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The frontend</h3>\n<p>For the <a href=\"https://github.com/WeRules/home-finder\" target=\"_blank\" rel=\"noreferrer\">Home Finder</a> project, you will need to do the following steps:</p>\n<ol>\n<li>Clone the project using the <code class=\"language-text\">Use this template</code> button on GitHub and make sure the project stays public, otherwise you cannot deploy it to GitHub Pages.</li>\n<li>Change the <a href=\"https://github.com/WeRules/home-finder/blob/b79635bf04ed9161c425b37df0d95f5f80c9f449/gatsby-config.js#L13\" target=\"_blank\" rel=\"noreferrer\">siteUrl</a> and the <a href=\"https://github.com/WeRules/home-finder/blob/b79635bf04ed9161c425b37df0d95f5f80c9f449/gatsby-config.js#L6\" target=\"_blank\" rel=\"noreferrer\">pathPrefix</a> properties for Gatsby, so GitHub Actions can deploy the project to <code class=\"language-text\">username.github.io/home-finder</code> properly.</li>\n<li>Create a <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfNXZrkvG-in6kurmGRQt4SOt2xyDOautibKpC4PAeQElzrgQ/viewform\" target=\"_blank\" rel=\"noreferrer\">Google Forms like this one</a> with the exact same field names and field types.</li>\n<li>Get the Google Forms form ID, for example, <code class=\"language-text\">1FAIpQLSfNXZrkvG-in6kurmGRQt4SOt2xyDOautibKpC4PAeQElzrgQ</code>, and add it to your <a href=\"https://docs.github.com/en/actions/reference/encrypted-secrets\" target=\"_blank\" rel=\"noreferrer\">repo’s secret</a> with the name <code class=\"language-text\">GATSBY_GOOGLE_FORM_ID</code>.</li>\n<li>Push your changes to the <code class=\"language-text\">main</code> branch and the website will build automatically on push.</li>\n</ol>\n<h3 id=\"the-backend\" style=\"position:relative;\"><a href=\"#the-backend\" aria-label=\"the backend permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The backend</h3>\n<p>For the <a href=\"https://github.com/WeRules/home-finder-script\" target=\"_blank\" rel=\"noreferrer\">Home Finder Script</a> project, you will need to do the following steps:</p>\n<ol>\n<li>Clone the project using the <code class=\"language-text\">Use this template</code> button on GitHub and make sure to change the project to private, otherwise you may leak user data.</li>\n<li>Update the <code class=\"language-text\">template.html</code> to use your own website URL\n<ol>\n<li>or if you’re skipping the frontend, you can simply remove the link in the footer of the email.</li>\n</ol>\n</li>\n<li>Get the Google Spreadsheet from the previously created form and make sure to <a href=\"https://support.google.com/a/users/answer/9308870\" target=\"_blank\" rel=\"noreferrer\">publish the Google Spreadsheet to the web</a> and make it available to anyone with the link too.\n<ol>\n<li>or if you’re skipping the frontend any Google Spreadsheet will do, but the spreadsheet needs to have the same header fields as the Google Forms.</li>\n</ol>\n</li>\n<li>Get the Google Spreadsheet <code class=\"language-text\">ID</code> and <code class=\"language-text\">Grid ID</code>, for example, <a href=\"https://docs.google.com/spreadsheets/d/1jRMEvfI6OsWUwnaHgH5UwnoikZA0a3s8wPnCortNJ_A/edit#gid=0\" target=\"_blank\" rel=\"noreferrer\">for this spreadsheet</a>, the <code class=\"language-text\">ID</code> is <code class=\"language-text\">1jRMEvfI6OsWUwnaHgH5UwnoikZA0a3s8wPnCortNJ_A</code> and the <code class=\"language-text\">Grid ID</code> is <code class=\"language-text\">0</code>.</li>\n<li>Add 5 new <a href=\"https://docs.github.com/en/actions/reference/encrypted-secrets\" target=\"_blank\" rel=\"noreferrer\">repo’s secret</a>:\n<ol>\n<li><code class=\"language-text\">EMAIL_USER</code>: The Gmail email that will be used to send emails.</li>\n<li><code class=\"language-text\">EMAIL_PASSWORD</code>: The password of the Gmail account. It’s highly recommended that you <a href=\"https://support.google.com/mail/answer/185833?hl=en-US\" target=\"_blank\" rel=\"noreferrer\">create an App Password</a> for that.</li>\n<li><code class=\"language-text\">GOOGLE_SPREADSHEET_ID</code>: The Google Spreadsheet <code class=\"language-text\">ID</code>.</li>\n<li><code class=\"language-text\">GOOGLE_SPREADSHEET_GID</code>: The Google Spreadsheet <code class=\"language-text\">Grid ID</code>.</li>\n<li><code class=\"language-text\">USER_AGENT</code>: The user-agent to be used by the scraper script. You can use <a href=\"https://www.whatismybrowser.com/detect/what-is-my-user-agent/\" target=\"_blank\" rel=\"noreferrer\">your own user-agent</a> if you want.</li>\n</ol>\n</li>\n<li>Update <a href=\"https://github.com/WeRules/home-finder-script/blob/main/.github/workflows/run-task.yml#L5\" target=\"_blank\" rel=\"noreferrer\">the cron job frequency</a> to match your needs.</li>\n<li>Push your changes to the <code class=\"language-text\">main</code> branch and the script will automatically run accordingly with the cron job settings.</li>\n</ol>\n<h2 id=\"how-to-use-the-website\" style=\"position:relative;\"><a href=\"#how-to-use-the-website\" aria-label=\"how to use the website permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use the website</h2>\n<p>Go to the <a href=\"https://werules.github.io/home-finder/en/form\" target=\"_blank\" rel=\"noreferrer\">form page in the Home Finder website</a>, and fill the form with your email and all the links from the real estate websites with your search parameters, for example <a href=\"https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/\" target=\"_blank\" rel=\"noreferrer\">https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/</a>, and click submit. After that simply wait for the script to find new houses and send them directly to your email.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.04687499999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABC0lEQVQoz5WOz0vDMBiGs9687OT/6kVED20duE1mxZP4Z3gqaBlanHofDBFtl/4Ky5JsSb6MTeIuFlHWh4eP9/Lxvmj/ZtC+Pm8FHgpc59JvBZ5z1XEuPNQ//kune9LuH+0NDpAXhW4UHoa3fhz1Xh/Pnh96L/b6o6E/Gp5+6z9Z3Tja6sdRN77vxHfoYzzBb+/JeCIKsmICKNOU6Rkzc75iwlAOlNkwF5v1elMH5YRm5SwnFBckzao0qxJcJVmZ4HKakzS3eZoTXJCFVFLrnyIhuDEGQBsD/wmg6mitEcYZAOgdgF8gzrnWWjXHNifJp5RLO3yn+toQVFaEC8UXIJbQFCSlUgq2Nn3+AvUADjHqpB6FAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"home finder form page\"\n        title=\"home finder form page\"\n        src=\"/static/bc9c639baec65c912d862fee2d78adae/42a19/home_finder_form_page.png\"\n        srcset=\"/static/bc9c639baec65c912d862fee2d78adae/e3135/home_finder_form_page.png 256w,\n/static/bc9c639baec65c912d862fee2d78adae/06341/home_finder_form_page.png 512w,\n/static/bc9c639baec65c912d862fee2d78adae/42a19/home_finder_form_page.png 1024w,\n/static/bc9c639baec65c912d862fee2d78adae/b0f6f/home_finder_form_page.png 1042w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>As the time of this writing, the websites supported by this project are: <a href=\"https://funda.nl\" target=\"_blank\" rel=\"noreferrer\">funda.nl</a>, <a href=\"https://vbo.nl\" target=\"_blank\" rel=\"noreferrer\">vbo.nl</a>, <a href=\"https://huislijn.nl\" target=\"_blank\" rel=\"noreferrer\">huislijn.nl</a>, <a href=\"https://zah.nl\" target=\"_blank\" rel=\"noreferrer\">zah.nl</a>, <a href=\"https://pararius.nl\" target=\"_blank\" rel=\"noreferrer\">pararius.nl</a>, <a href=\"https://jaap.nl\" target=\"_blank\" rel=\"noreferrer\">jaap.nl</a> and <a href=\"https://hoekstraenvaneck.nl\" target=\"_blank\" rel=\"noreferrer\">hoekstraenvaneck.nl</a>, so go ahead to these websites, add your filters and add them to <a href=\"https://werules.github.io/home-finder/en/\" target=\"_blank\" rel=\"noreferrer\">Home Finder</a>.</p>\n<p><strong>Please remember that</strong> this website is only <strong>half of the work</strong>, you will be notified when a new house is listed, but it’s up to you to take action fast to be the first one to book a viewing for that house.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>With a combination of GitHub Actions, creativity, and some hacking you can do pretty much anything without any budget, and then if needed scale from there.</p>\n<p>If you have a nice idea, deploy it to GitHub Pages, use GitHub Actions, use Google Spreadsheet (ok ok, or Firebase) and start your project from there, if you use more than the free tier it’s probably a good time to start scaling, and maybe thinking about making some revenue or find partners or investors for your idea.</p>\n<p>Good luck, and if you’re looking for a house in the Netherlands, don’t forget to use <a href=\"https://werules.github.io/home-finder/en/\" target=\"_blank\" rel=\"noreferrer\">Home Finder</a> and recommend it to your friends.</p>\n<p>See you in the next one.</p>","fields":{"slug":"/2022/2022-09-13-creating-a-startup-with-github-actions-and-google-forms.en/","path":"/blog/coding/creating-a-startup-with-github-actions-and-google-forms/","locale":"en"},"readingTime":{"minutes":7.87},"frontmatter":{"date":"2022-09-13T00:00:00.000Z","title":"Creating a Startup with GitHub Actions and Google Forms","categories":["coding"]}}},{"node":{"excerpt":"A few months ago, I published a blog post discussing the…","html":"<p>A few months ago, I published a blog post <a href=\"/en/blog/coding/how-to-get-the-redux-state-from-a-production-build-via-the-browsers-console/\">discussing the process of retrieving the Redux state from a production build through the browser’s console</a>. However, this method no longer works after the release of React 18.</p>\n<p>In this article, we will explore the reasons for this change and discuss how to create a new script that works with the latest version of React.</p>\n<h2 id=\"what-changed\" style=\"position:relative;\"><a href=\"#what-changed\" aria-label=\"what changed permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What changed?</h2>\n<p>In React 17, the <code class=\"language-text\">_reactRootContainer</code> property was present in the React container. However, this is no longer the case in React 18. Instead, the <code class=\"language-text\">__reactContainer</code> prefix with a random key at the end is used, <a href=\"https://github.com/facebook/react/blob/a724a3b578dce77d427bef313102a4d0e978d9b4/packages/react-dom/src/client/ReactDOMComponentTree.js#L40\" target=\"_blank\" rel=\"noreferrer\">as shown in the React source code</a>.</p>\n<p>To find the React container in React 18, we can search for DOM elements that contain a property starting with <code class=\"language-text\">__reactContainer</code>. To do this, we first need to find all potential DOM elements that could be the React container.</p>\n<p>In most React apps, the container is set using an HTML <code class=\"language-text\">id</code> and queried with <code class=\"language-text\">getElementById()</code>. To find all elements with an <code class=\"language-text\">id</code> in the document, we can use <code class=\"language-text\">document.querySelectorAll(\"*[id]\")</code>.</p>\n<p>To search for all React containers on the page, we can run the following script:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> internalRoots <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*[id]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">keyName</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> keyName<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'__reactContainer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">at</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> el<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Done! Now all we have to do is find the <code class=\"language-text\">_internalRoot</code> and we’re set, right? Right?!?!</p>\n<h2 id=\"no\" style=\"position:relative;\"><a href=\"#no\" aria-label=\"no permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>No</h2>\n<p>To be honest, it wasn’t too difficult to figure out the first part of this problem. However, as I am not very familiar with the React source code, I initially struggled to find a solution. Eventually, I decided to take a lazy approach and simply search through the container element’s properties for the Redux state.</p>\n<p><img src=\"/6a9e8f39c841ed588e5798fba7412e92/element-diving.gif\" alt=\"\"></p>\n<p>As we all know, to retrieve the Redux state we use the <code class=\"language-text\">getState()</code> function. To access this function, we can perform a tree search within the React container variable.</p>\n<p>Fortunately, there is already a <a href=\"https://gist.github.com/mindplay-dk/1843c267fc633688059dfa5e3b07d0dd\" target=\"_blank\" rel=\"noreferrer\">GitHub Gist available that demonstrates how to do this</a>. We can simply adapt this script to our specific use case, searching within a specific variable rather than at <code class=\"language-text\">window</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> stores <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// code from https://gist.github.com/mindplay-dk/1843c267fc633688059dfa5e3b07d0dd</span>\r\ninternalRoots<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> seen <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>seen<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        seen<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>name <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'getState'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                stores<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">?.</span>hasOwnProperty<span class=\"token operator\">?.</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Done, now we can access the states with <code class=\"language-text\">[...stores].map((store) => store.getState())</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.0625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACy0lEQVQozx2S32tcRRzF758i/Q980zd9C/igFmraRtJak8bE/GBDi0UNsbSb2JD2pWGtIoVIoL9AQcEnLaFVow9pbRqjMWuyye7evTPznbkzc+f33b1Xtm/n5RzO53AiQki9XpdSlmUpZSbjDkOIMpZlMlOq2Wy3mu1WGzXbBJgQUmaZRnGr1Y47CY4QwvsHDSllnnedtS7kzgfnfB5yKWWCEFDgShtrQwh5CN4H50MIwRgTMZ4lhCMQxoayLIte0esVIe+WZWmMTdOUYYZamGBIuQSurTUqU1obrU303Q8/bjx6+Puv63fu37v3YPXxxsbO7oERYv3RTxt/PDbaJjsdvIcIBoThBRCjL/pLqaLNJ38+23r+9NnW5tOt7e3N3fref42WEqJxuLd/8K/ONNnHuIkpYZRRjEGIzFjjnFdKRb1eT2cyBF8Uvf5ESnW7uVRKSuVDbo1F/yTx8zbeRzjG/QCaSiE0T41SUfAhZsq4blmUWmtrXVmWznutdVEU1ji0m+BDzBgDSjkXBCgA5YwbraOVB98uPWysfb96e2156fr8ra+Xb9Zu3Lm7dvubuz+v/+K9RzsdckhI35JiQoFyAIaB9gd77Y23z42ffuvEyyNjg+PDp6fPvDk+MTk6OTs4PHrx0sfWWFLH+AgDoQQ4IgwAGEuFEM656NOpyo0ri+dPnnr/3PnF5VptfuHKpU8uVCqzkxPXFqpWG/R3kvzVAQQIUwIZwoQQIADa6Oh6dXpsbGiuMjr/2Vyt9tWtlS/OjEycnPr8xIfV6sqaNS7ejuGIAE1ZmiqlOecy07r/Ghu9+97A0NnXB46/enXxamV2Zmp8+Ozl1YEvO68s7U7db3W9Ew0ECIBxxrjiqWR9JYX03kcXRodmhgcnPhiZnLk4PfvRS8eOnXrn+FJ17trC5Zu12lGH//akk8R9Ts4lF1kqpOCCcyGE/B8w0X/4WbfnOgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux state on instagram\"\n        title=\"redux state on instagram\"\n        src=\"/static/532aa2000a29f36e8c59da4250cfcb2f/42a19/redux-state-on-instagram.png\"\n        srcset=\"/static/532aa2000a29f36e8c59da4250cfcb2f/e3135/redux-state-on-instagram.png 256w,\n/static/532aa2000a29f36e8c59da4250cfcb2f/06341/redux-state-on-instagram.png 512w,\n/static/532aa2000a29f36e8c59da4250cfcb2f/42a19/redux-state-on-instagram.png 1024w,\n/static/532aa2000a29f36e8c59da4250cfcb2f/92844/redux-state-on-instagram.png 1032w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>You can copy and paste the full script below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> internalRoots <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*[id]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">keyName</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> keyName<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'__reactContainer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">at</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> el<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> stores <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// code from https://gist.github.com/mindplay-dk/1843c267fc633688059dfa5e3b07d0dd</span>\r\ninternalRoots<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> seen <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>seen<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        seen<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>name <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'getState'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                stores<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">?.</span>hasOwnProperty<span class=\"token operator\">?.</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>stores<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>To conclude, in this article we explored the reason why the previous method for accessing the Redux state in a production build stopped working in React 18 and presented an updated solution that allows for accessing the Redux state in production.</p>\n<p>Although it was a challenge to discover the new method, with the help of an existing script and some modification, we were able to find a viable solution.</p>\n<p>I hope that this article was helpful and that you will be able to use it in your own projects.</p>","fields":{"slug":"/2022/2022-08-21-how-to-get-the-redux-state-from-a-react-18-production-build-via-the-browsers-console.en/","path":"/blog/coding/how-to-get-the-redux-state-from-a-react-18-production-build-via-the-browsers-console/","locale":"en"},"readingTime":{"minutes":2.995},"frontmatter":{"date":"2022-08-21T00:00:00.000Z","title":"How to get the Redux State in a React 18 production build via the browser's console","categories":["coding"]}}},{"node":{"excerpt":"I still remember the first time I planned to go to E3 with…","html":"<p>I still remember the first time I planned to go to E3 with some friends, back in 2009. It felt like a distant dream, just the idea of going to E3 was already exciting enough. At the time, I didn’t even realize that E3 was an event for media press only and that I wouldn’t be able to just buy a ticket and attend. Of course, I eventually did get to go to E3, but how?</p>\n<p>As a huge fan of video games, especially Nintendo games, I applied to be an editor for Nintendo Blast, the biggest Brazilian blog about Nintendo. I was accepted and started writing blog posts and making videos for their YouTube channel. A few years later, I received an email from one of the blog managers saying they were looking for people to travel to Los Angeles to cover E3. I was over the moon and applied right away.</p>\n<p>Since Nintendo Blast was a voluntary work, I had to pay for my own trip, but they would offer me something money couldn’t buy: a media badge.</p>\n<p>I had to go through the process of getting a visa to enter the US, which was quite bureaucratic, but fortunately, my visa was approved. The hotel and tickets were booked and our media badges were issued, and all I had to do was wait for the day of the trip. I was so excited that I had trouble sleeping for months.</p>\n<h2 id=\"first-time-in-los-angeles\" style=\"position:relative;\"><a href=\"#first-time-in-los-angeles\" aria-label=\"first time in los angeles permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>First time in Los Angeles</h2>\n<p>Attending E3 had an unexpected side effect: I fell in love with Los Angeles. It’s cliché, I know, but LA is not only the home of E3, but also the home of many famous skate spots that I had seen in skate videos my whole life. Being able to visit these spots in person was very emotional for me, and I even bought a Plan B deck while I was there. Downtown LA is practically filled with famous skate spots from 90s skate parts.</p>\n<p>This was also my first time in the US, so I experienced many new things, like extra-large meals at McDonald’s, shopping at Target, receiving massive receipts from CVS, going to a GameStop, buying Old Spice products, going to White Castle, and, as a Forest Gump fan, finally visiting a Bubba Gump restaurant.</p>\n<p>We were a group of seven young video game enthusiasts, ready to cover the biggest video game event in the world. We had lots of things we wanted to do in LA, but we had no time to waste as E3 was starting just two days after we arrived.</p>\n<h2 id=\"a-little-help-from-the-veterans\" style=\"position:relative;\"><a href=\"#a-little-help-from-the-veterans\" aria-label=\"a little help from the veterans permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A little help from the veterans</h2>\n<p>Despite being a small team, we were fortunate enough to be staying at the same hotel as several veteran editors from Nintendo World, the official Nintendo magazine in Brazil. As someone who has been a fan of Nintendo World since childhood, it was a surreal experience to be there with these legends.</p>\n<p>In fact, some of us were even given the opportunity to write a guest article for the magazine - although unfortunately, I was not selected. Nevertheless, just being considered for the opportunity was one of the greatest achievements of my life so far.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMCBAUB/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAD/9oADAMBAAIQAxAAAAFk7Cy+kSmprCw1zFHn/8QAHhAAAQQBBQAAAAAAAAAAAAAAAgABAxIhBBETICL/2gAIAQEAAQUCIarjwEQkzPYpjCkWnxM+4j6TH0//xAAZEQEAAgMAAAAAAAAAAAAAAAAAERMBUWH/2gAIAQMBAT8BlOdrF3H/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEhD/2gAIAQIBAT8ByUP/xAAiEAACAgEBCQAAAAAAAAAAAAAAAQIRUSISEyAhMjNBYYH/2gAIAQEABj8C1RR2zoj9JbyK0tUSjtVY78vI45KnzXtFY4P/xAAeEAACAgICAwAAAAAAAAAAAAABEQAhMUEQYYGRof/aAAgBAQABPyFpkeVDl9mYwP8AuU3iw1CljXkw4MewdILKNSgEjdaogAESoL4V8f/aAAwDAQACAAMAAAAQoOi9/8QAGREBAQADAQAAAAAAAAAAAAAAAQARQWHw/9oACAEDAQE/EM3d5McSxn//xAAaEQEBAAIDAAAAAAAAAAAAAAABABEhMVFh/9oACAECAQE/EACwdT6jTm//xAAcEAEBAAIDAQEAAAAAAAAAAAABEQAhMUFxUWH/2gAIAQEAAT8QJutMitmpqVyN9groe8Y1IL0UaO+z3Gu/pkTzvt4xLqLZC0rZrg/MrzaRVQTBGG8iIH1+76xwZeIeOcnww0eIfuAQ0YjqYhXRn//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Nintendo World #159\"\n        title=\"Nintendo World #159\"\n        src=\"/static/1bd637a064f5ba27be82ffab40d2d631/63217/nintendo_world_159.jpg\"\n        srcset=\"/static/1bd637a064f5ba27be82ffab40d2d631/db830/nintendo_world_159.jpg 256w,\n/static/1bd637a064f5ba27be82ffab40d2d631/8102f/nintendo_world_159.jpg 512w,\n/static/1bd637a064f5ba27be82ffab40d2d631/63217/nintendo_world_159.jpg 1024w,\n/static/1bd637a064f5ba27be82ffab40d2d631/d58d1/nintendo_world_159.jpg 1536w,\n/static/1bd637a064f5ba27be82ffab40d2d631/d7bd3/nintendo_world_159.jpg 1933w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Nintendo World #159</figcaption>\n  </figure></p>\n<p>In addition, we participated in several meetings on how to make the most of our time at E3, which proved to be extremely valuable and have proven useful at every E3 I’ve attended since then.</p>\n<h2 id=\"wait-when-does-e3-starts\" style=\"position:relative;\"><a href=\"#wait-when-does-e3-starts\" aria-label=\"wait when does e3 starts permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wait, when does E3 starts?</h2>\n<p>Every E3, I would see articles stating when the event was supposed to start, only to have the Sony, Microsoft, and Nintendo conferences happen a few days earlier.</p>\n<p>These conferences, while not technically part of E3, are still closely associated with the event. E3, organized by the Entertainment Software Association (ESA), is a trade show where gaming companies can showcase their products and new game releases to media and traders.</p>\n<p>During this time, the entire gaming industry is focused on E3, leading major companies to schedule press conferences a few days beforehand to give attendees an idea of what to expect at the event.</p>\n<p>However, for those of us watching from home, it can be confusing as E3 seems to begin with the start of the conferences and end after the final conference.</p>\n<p>I remember being surprised when I was told that the Sony conference was being held at a location far from the Los Angeles Convention Center (LACC), as I had assumed all conferences were held at the LACC as part of E3. It was a shock to me, and in the years since, I’ve noticed that many other E3 attendees have had similar confusion.</p>\n<h2 id=\"the-conferences\" style=\"position:relative;\"><a href=\"#the-conferences\" aria-label=\"the conferences permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The conferences</h2>\n<p>Typically, access to the highly sought-after E3 conferences requires an invitation. However, many media professionals still make the journey to the conference location in the hope of securing a last-minute spot. In my experience, I have always been able to attend the conferences, even if it meant making phone calls and reaching out to PR professionals to try and secure a spot. On one occasion, I didn’t even try to attend a conference, only to later learn that it was the last year that Nintendo held a traditional E3 conference.</p>\n<p>The conferences are typically scheduled at specific times and locations to allow attendees to move from one to the next. A typical conference day might include a Microsoft conference in the morning, followed by Ubisoft, a lunch break, and finally, Sony. There are even special buses that provide transportation between the conferences for free - I’m not sure where these buses come from, but they are incredibly helpful.</p>\n<p>Many conferences also provide attendees with souvenirs such as pins, t-shirts, and action figures. These items can often be found for sale on eBay for hundreds of dollars later the same day. Personally, I have kept all of the souvenirs I have received and still wear at least one E3 t-shirt every week.</p>\n<p>The locations of the conferences are always iconic places in Los Angeles, such as the Dolby Theater on Hollywood Boulevard where the Bethesda conferences were held in 2015, or the LA Memorial Sports Arena and Galen Center, where Sony and Microsoft conferences are typically held.</p>\n<h2 id=\"the-event\" style=\"position:relative;\"><a href=\"#the-event\" aria-label=\"the event permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Event</h2>\n<p>E3 typically takes place over the course of three days, from Tuesday to Thursday. However, if you want to see everything, three days is not enough. Attending the event is an incredible experience, but it’s easy to miss out on a lot of things due to the sheer size of the Los Angeles Convention Center (LACC) and the time it takes to walk from booth to booth.</p>\n<p>To make the most of our time at E3, our team split up into smaller groups and booked slots for hands-on demos, interviews, and presentations with various publishers in advance. This allowed us to skip the long lines and go straight to the hands-on experiences. As I mentioned before, three days is not a lot of time to see everything, so it’s important to try to avoid wasting time waiting in lines.</p>\n<p>During my first year at E3, I was a bit lost and wasn’t sure what to do, but I still managed to play a lot of games for the Wii U and PS3, including ZombiU, Nintendo Land, LittleBigPlanet Karting, and PlayStation All-Stars Battle Royale. My favorite game from that year, however, was not playable - Dead Space 3. That’s when I became a fan of the series and received a nice beanie, which I still have to this day.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 612px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAgP/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQD/2gAMAwEAAhADEAAAAV66GDeAwHLrUJlt0jgf/8QAHhABAAEEAgMAAAAAAAAAAAAAAgEAAwQTERIUIjP/2gAIAQEAAQUCxQLqjjY0u+sePgL31qUkrdByEeyN/wCU1tfH/8QAFxEBAQEBAAAAAAAAAAAAAAAAAAECEf/aAAgBAwEBPwFxU2//xAAZEQEAAgMAAAAAAAAAAAAAAAAAAQIREjH/2gAIAQIBAT8BZV41l//EAB8QAAICAQQDAAAAAAAAAAAAAAABAhExEBIhQSIycf/aAAgBAQAGPwLyVUhOLVX0S47JbMoaJfSUVhlx4Llli09j/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBcWH/2gAIAQEAAT8hS1i52hgadUVHelIlIqwta+yjnFHPs4je57iL7mMPMZmDTJtX5BrAwWyf/9oADAMBAAIAAwAAABB0Jr//xAAXEQEBAQEAAAAAAAAAAAAAAAABABFx/9oACAEDAQE/EDW5mjkABf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QMnDdRR2//8QAIBABAAMAAgAHAAAAAAAAAAAAAQARITFBUWGBkaHB8P/aAAgBAQABPxDia9cyFPhALEZ4YGvvkQAAI8dsu4v5RaF/HUC2s5GD+MvRXmjfcIv5iGHnH1jgiVcaPPcOOwg1eYvnCEBT6QAIBqBRhwM//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dead Space beenie\"\n        title=\"Dead Space beenie\"\n        src=\"/static/ab69ba0d7bcc1956e599f91a725c55b5/6c4e2/dead_space_beenie.jpg\"\n        srcset=\"/static/ab69ba0d7bcc1956e599f91a725c55b5/db830/dead_space_beenie.jpg 256w,\n/static/ab69ba0d7bcc1956e599f91a725c55b5/8102f/dead_space_beenie.jpg 512w,\n/static/ab69ba0d7bcc1956e599f91a725c55b5/6c4e2/dead_space_beenie.jpg 612w\"\n        sizes=\"(max-width: 612px) 100vw, 612px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Dead Space beenie</figcaption>\n  </figure></p>\n<p>The LACC is divided into two main areas where you can find booths from various companies, as well as several meeting rooms where companies often have VIP areas with closed presentations and demos. These two main areas are connected by a large open area that is open to the public and also full of activities, including exclusive games to play. It takes about 10 minutes to walk from one main area to the other, so it’s important to try to book appointments that are close to each other to avoid getting stuck in the middle of the open area.</p>\n<p>There is also a special room for media with computers and high-speed internet, allowing journalists to quickly edit and publish their articles and videos. Additionally, there is a “chill” room where we could relax and get a free lunch around noon.</p>\n<p>During our free time, we could explore and find interesting things to cover. Personally, I spent most of my free time at Nintendo’s booth, trying to play as many games as possible and collect as many souvenirs (also known as “swag”) as I could. One of the best things about E3 is the opportunity to receive a wide variety of free items, such as keychains, t-shirts, and action figures.</p>\n<h2 id=\"the-swags\" style=\"position:relative;\"><a href=\"#the-swags\" aria-label=\"the swags permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The swags</h2>\n<p>One of the most exciting aspects of E3 is collecting “swags”, or free souvenirs. Each company booth has its own unique swags and ways to obtain them, which change from year to year. At the Nintendo booth during my first E3, for example, we could earn a pin for each mini-game we played in Nintendo Land, with the goal of collecting them all (which I was able to do).</p>\n<p>Some swags required playing a game against other attendees and winning in order to obtain them, such as the 2014 Smash shirt - although I’m not very good at Smash, my friend Danilo from Hyrule Legends was able to secure one for me. Other swags could be obtained simply by asking, although they could also “sell out” quickly and need to be waited for the next day to obtain.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwAEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABzOS6uVHR/8QAGxAAAgIDAQAAAAAAAAAAAAAAAQIAAwQQERL/2gAIAQEAAQUCoStpagOsdOIynwTP/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAS/9oACAEDAQE/AZK//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bp//EABwQAAEEAwEAAAAAAAAAAAAAAAABAjFREBEhIv/aAAgBAQAGPwJXKR28bsd6IP/EABkQAAIDAQAAAAAAAAAAAAAAAAERACFBMf/aAAgBAQABPyEoK0UsgOgQVwpWqKOtvIWxiioJ3H//2gAMAwEAAgADAAAAEDT/AP/EABcRAAMBAAAAAAAAAAAAAAAAAAABEUH/2gAIAQMBAT8Q2SKf/8QAFxEBAAMAAAAAAAAAAAAAAAAAARARMf/aAAgBAgEBPxAGXH//xAAbEAEBAAMBAQEAAAAAAAAAAAABEQAhQTFx0f/aAAgBAQABPxAwQkXUvi7ypHUXDcTuJ7BXcTIg9itRon7j2hs4Ehm1BoN+mf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Nintendo Land pins\"\n        title=\"Nintendo Land pins\"\n        src=\"/static/bcbc5e01cc243731110599099965072c/63217/nintendo_land_swags.jpg\"\n        srcset=\"/static/bcbc5e01cc243731110599099965072c/db830/nintendo_land_swags.jpg 256w,\n/static/bcbc5e01cc243731110599099965072c/8102f/nintendo_land_swags.jpg 512w,\n/static/bcbc5e01cc243731110599099965072c/63217/nintendo_land_swags.jpg 1024w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Nintendo Land pins</figcaption>\n  </figure></p>\n<p>As a collector, I always appreciate receiving swags, but the ones that are most useful are the ones that can be worn. I wear a different E3 t-shirt almost every week, and my favorite is probably the Lego Dimensions t-shirt from 2015, which I was able to convince the booth staff to give me, even though it wasn’t technically a swag.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.734375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAkABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAUB/8QAFwEAAwEAAAAAAAAAAAAAAAAAAgMEAf/aAAwDAQACEAMQAAABzWojvrQAs1/PiwNq5O3lxKVd0Ts//8QAHRAAAQQCAwAAAAAAAAAAAAAAAgABAxIRIjEyM//aAAgBAQABBQLL5qSciZ6YI2qo4BILbGQGOyflRxkcb9lD4//EABYRAAMAAAAAAAAAAAAAAAAAAAARIP/aAAgBAwEBPwEU/wD/xAAZEQACAwEAAAAAAAAAAAAAAAAAAQIQEjH/2gAIAQIBAT8BNqnKNPp//8QAHRAAAgEEAwAAAAAAAAAAAAAAAAECEBEhMRIiYf/aAAgBAQAGPwKmzseibbyO+jArSsOkWuI6Rwf/xAAdEAACAgIDAQAAAAAAAAAAAAAAAREhMWFBUZGB/9oACAEBAAE/IU7K+yPf0jDstiVibSgUiViS8TsSrsDjfTJZUUYH9hMpCRyP6ElaWD//2gAMAwEAAgADAAAAEK8Aw3vf/8QAGBEBAQEBAQAAAAAAAAAAAAAAAQAxIRH/2gAIAQMBAT8QHl7Y5GbEZf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QTsm5JsBRmHV//8QAHRABAAMAAwEBAQAAAAAAAAAAAQARITFBcVGBsf/aAAgBAQABPxAAW1lqSc6mrVhxjlxg1aV370WX7BVTSulnUGMuICuZfdbWgGy3J3INMk8nCrIWevyIBei/s0IIN1Nt3b8jeyggYwFv2m8s/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lego Dimensions t-shirt\"\n        title=\"Lego Dimensions t-shirt\"\n        src=\"/static/74aa085aa80943dabfc4ce90ce0cddea/63217/lego_dimensions_shirt.jpg\"\n        srcset=\"/static/74aa085aa80943dabfc4ce90ce0cddea/db830/lego_dimensions_shirt.jpg 256w,\n/static/74aa085aa80943dabfc4ce90ce0cddea/8102f/lego_dimensions_shirt.jpg 512w,\n/static/74aa085aa80943dabfc4ce90ce0cddea/63217/lego_dimensions_shirt.jpg 1024w,\n/static/74aa085aa80943dabfc4ce90ce0cddea/b37e7/lego_dimensions_shirt.jpg 1080w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Lego Dimensions t-shirt</figcaption>\n  </figure></p>\n<p>I consider “ultimate swags” to be items that are not typically available as souvenirs, but somehow I manage to obtain them through persuasion or other means. For example, I attempted to get a water bottle meant for booth staff at E3 2012 but was unsuccessful. However, the following year, I was able to persuade the staff to give me a water bottle, which I was able to obtain.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABYBAQEBAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAABTKKVGJZLJ+yzGVOEkT//xAAbEAADAAMBAQAAAAAAAAAAAAABAgMEERIyIf/aAAgBAQABBQJkpqSl2tPT5Tlp4yOK1kHdjwYa6Y/beZeaUbv/xAAWEQADAAAAAAAAAAAAAAAAAAAAECH/2gAIAQMBAT8BK//EABcRAAMBAAAAAAAAAAAAAAAAAAAQESL/2gAIAQIBAT8BplU//8QAHhAAAgIBBQEAAAAAAAAAAAAAAAERIRICEDFCYUH/2gAIAQEABj8C4cLw0xbTLWJguzH1ZLZLvwvl7Jk/R2f/xAAcEAEBAQADAAMAAAAAAAAAAAABEQAhMUFRYaH/2gAIAQEAAT8hEK1KvTKHeGajdPMxtPBXElA9S6ClnxvsLxjaQ91dCNwB2Pe5fuwQHDf/2gAMAwEAAgADAAAAECjFPf/EABgRAAIDAAAAAAAAAAAAAAAAAAABEBEx/9oACAEDAQE/EEWMj//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8QbUWNGUf/xAAdEAEAAwEAAwEBAAAAAAAAAAABABEhMUFRYZFx/9oACAEBAAE/EKpKSoe6r/Cc3+6WVpKcYHH9mtsEKAN38gxK3QV/D7caCUG25O7JaXDJpsb645CIHieIMg6cmRaMtB4sA9ZP/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Booth staff water bottle\"\n        title=\"Booth staff water bottle\"\n        src=\"/static/72c94af053f2053c72db23db62ec96e3/63217/nintendo_staff_water_bottle.jpg\"\n        srcset=\"/static/72c94af053f2053c72db23db62ec96e3/db830/nintendo_staff_water_bottle.jpg 256w,\n/static/72c94af053f2053c72db23db62ec96e3/8102f/nintendo_staff_water_bottle.jpg 512w,\n/static/72c94af053f2053c72db23db62ec96e3/63217/nintendo_staff_water_bottle.jpg 1024w,\n/static/72c94af053f2053c72db23db62ec96e3/d58d1/nintendo_staff_water_bottle.jpg 1536w,\n/static/72c94af053f2053c72db23db62ec96e3/09658/nintendo_staff_water_bottle.jpg 2048w,\n/static/72c94af053f2053c72db23db62ec96e3/78fc5/nintendo_staff_water_bottle.jpg 2736w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Booth staff water bottle</figcaption>\n  </figure></p>\n<p>At the end of each day at E3, my friends and I would meet up for a nice dinner and discuss the swags we collected and how we obtained them, as well as the games we played and our overall experiences for the day.</p>\n<p>I typically leave my last day at E3 fairly open, allowing me to walk around and collect any remaining swags or replay my favorite games. Afterwards, we would gather all of our swags and game-related purchases for an epic group photo.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAMAAv/aAAwDAQACEAMQAAABj0WEvNXLP//EABsQAQACAgMAAAAAAAAAAAAAAAIAAQMREiEy/9oACAEBAAEFAsQWkJ2Ziauhd8n6/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/AcR//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQACEf/aAAgBAgEBPwF1PBv/xAAbEAACAgMBAAAAAAAAAAAAAAAAMQERAhAhUf/aAAgBAQAGPwJMpeFZM7JOv//EABoQAQACAwEAAAAAAAAAAAAAAAEAIRExkWH/2gAIAQEAAT8hWR4RANzSYGRqeTI8jN6lnb2f/9oADAMBAAIAAwAAABBAL//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QWSmqf//EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxCA8DP/xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAhMXGhYf/aAAgBAQABPxDaAXLSE8xktcDnrzG4TxCvcQtpK9mKVphtPuHd06NjP//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"E3 2017 swags\"\n        title=\"E3 2017 swags\"\n        src=\"/static/cde3a8668d9d6f594f53d323de0fcdf3/63217/e3_swags_2017.jpg\"\n        srcset=\"/static/cde3a8668d9d6f594f53d323de0fcdf3/db830/e3_swags_2017.jpg 256w,\n/static/cde3a8668d9d6f594f53d323de0fcdf3/8102f/e3_swags_2017.jpg 512w,\n/static/cde3a8668d9d6f594f53d323de0fcdf3/63217/e3_swags_2017.jpg 1024w,\n/static/cde3a8668d9d6f594f53d323de0fcdf3/33266/e3_swags_2017.jpg 1440w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">E3 2017 swags</figcaption>\n  </figure></p>\n<h2 id=\"the-food\" style=\"position:relative;\"><a href=\"#the-food\" aria-label=\"the food permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The food</h2>\n<p>There are several options for obtaining food at E3. Media professionals can get a decent lunch for free in the press room, while others can purchase overpriced food at the various cafeterias within the convention center.</p>\n<p>If I’m lucky, I don’t even have to stop to eat because some company booths offer snacks while you play their games - this was often my main meal during E3. Why would I stop to eat when I could just power through and play games at the largest gaming convention in the world?</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAFCgngNYiBP/8QAHBAAAQQDAQAAAAAAAAAAAAAAAgABAxMREiEi/9oACAEBAAEFAo8M4nzdTB5uVpr/xAAXEQADAQAAAAAAAAAAAAAAAAAAARFB/9oACAEDAQE/AVNIf//EABURAQEAAAAAAAAAAAAAAAAAAAAh/9oACAECAQE/AVf/xAAdEAEAAgAHAAAAAAAAAAAAAAABABEQEjFBUWGx/9oACAEBAAY/Akun2G/PWGYjYLNZ/8QAHhAAAgIABwAAAAAAAAAAAAAAAAERQSExUYGRofD/2gAIAQEAAT8hZoZFJxyNlW7EJE6pZjd4sXEHqj//2gAMAwEAAgADAAAAEKc//8QAGBEAAwEBAAAAAAAAAAAAAAAAAAEhEVH/2gAIAQMBAT8QVpBjp//EABcRAAMBAAAAAAAAAAAAAAAAAAEQEUH/2gAIAQIBAT8QNxP/xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFR0f/aAAgBAQABPxBwyOJivWHMQDGFbRzDYMxrWooVGY9DuDrmEjAZwdSv6DP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CD Projekt Red booth snacks\"\n        title=\"CD Projekt Red booth snacks\"\n        src=\"/static/1fa57646e94beba38a37da61486bffb9/63217/e3_booth_food.jpg\"\n        srcset=\"/static/1fa57646e94beba38a37da61486bffb9/db830/e3_booth_food.jpg 256w,\n/static/1fa57646e94beba38a37da61486bffb9/8102f/e3_booth_food.jpg 512w,\n/static/1fa57646e94beba38a37da61486bffb9/63217/e3_booth_food.jpg 1024w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">CD Projekt Red booth snacks</figcaption>\n  </figure></p>\n<h2 id=\"meeting-your-heroes\" style=\"position:relative;\"><a href=\"#meeting-your-heroes\" aria-label=\"meeting your heroes permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Meeting your heroes</h2>\n<p>One of the best things about E3 is the possibility of meeting the people who create the games you love. If you’re media, you might be able to book an interview or assisted hands-on session with them.</p>\n<p>Alternatively, you might simply stumble upon them while walking around the convention. This is how I met Hideo Kojima, and I even managed to get an autograph from Shigeru Miyamoto after running into him returning from the bathroom. (I apologize for the awkward encounter, Miyamoto! 😅).</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAwH/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAP/2gAMAwEAAhADEAAAAd5FQLpCFvRFrvjmMV//xAAbEAACAgMBAAAAAAAAAAAAAAABAgASAwQQM//aAAgBAQABBQKq5Ay1aazhJmYsbHg84O//xAAYEQACAwAAAAAAAAAAAAAAAAAAARAREv/aAAgBAwEBPwFOjc//xAAYEQACAwAAAAAAAAAAAAAAAAAAEgEQEf/aAAgBAgEBPwFdEm//xAAbEAACAwADAAAAAAAAAAAAAAABAgAQESBBUf/aAAgBAQAGPwLU7mE1jEgRmG5PKbj/AP/EAB4QAQACAQUBAQAAAAAAAAAAAAEAESExQVFhcYGx/9oACAEBAAE/ITKli/kvCXsbnsErWWHHBxA77Jwvghm0o6lKxV1/ImY4aSp//9oADAMBAAIAAwAAABD8+sz/xAAZEQACAwEAAAAAAAAAAAAAAAAAEQEQIVH/2gAIAQMBAT8QSF4Tlf/EABkRAAMAAwAAAAAAAAAAAAAAAAABESFBUf/aAAgBAgEBPxDI9D6CVRD/xAAeEAEAAgICAwEAAAAAAAAAAAABABEhMUFhUXHBgf/aAAgBAQABPxA0F1gWdo9poIFaNu7iQiTze4fVhKr8i32ziymeCsHyA8D4VHTOCu3RHhk3Kqixn9liXca9zJXEPE//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Me and Kojima\"\n        title=\"Me and Kojima\"\n        src=\"/static/a303cab53d35091c02dfabe70b84abec/63217/me_and_kojima.jpg\"\n        srcset=\"/static/a303cab53d35091c02dfabe70b84abec/db830/me_and_kojima.jpg 256w,\n/static/a303cab53d35091c02dfabe70b84abec/8102f/me_and_kojima.jpg 512w,\n/static/a303cab53d35091c02dfabe70b84abec/63217/me_and_kojima.jpg 1024w,\n/static/a303cab53d35091c02dfabe70b84abec/d58d1/me_and_kojima.jpg 1536w,\n/static/a303cab53d35091c02dfabe70b84abec/09658/me_and_kojima.jpg 2048w,\n/static/a303cab53d35091c02dfabe70b84abec/b6833/me_and_kojima.jpg 3672w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Me and Kojima</figcaption>\n  </figure></p>\n<p>An unconventional way to meet game developers is to wait at the entrance of the Convention Center early in the morning and wait for them to pass by on their way into the event.</p>\n<p>While they are often accompanied by security guards and may not have much time due to their busy schedules, there are occasionally moments when they are able to take a moment to interact with fans. This is how I was able to meet Miyamoto and get my 3DS Zelda Edition signed by him, which is now my most prized possession in my collection.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABY4SqUYFw/8QAGxABAQABBQAAAAAAAAAAAAAAAQIABBITIzL/2gAIAQEAAQUCdUVB55ayRp297Fw//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8BJ//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAMAAwEAAAAAAAAAAAAAAAABEQIhkaH/2gAIAQEABj8CnozV6KCjtRHif//EABoQAQACAwEAAAAAAAAAAAAAAAEAESExYVH/2gAIAQEAAT8hYaqVDxl79lngYxSGWfJ1qGzUQGs7P//aAAwDAQACAAMAAAAQzz//xAAXEQADAQAAAAAAAAAAAAAAAAAAASEx/9oACAEDAQE/EGmEP//EABYRAQEBAAAAAAAAAAAAAAAAAAEQYf/aAAgBAgEBPxBxn//EABsQAQEAAwEBAQAAAAAAAAAAAAERACExcWGB/9oACAEBAAE/EDqVtk38wVZIEZIgnPt7nIV1ML+O/cI4Ryp7g0HGtFhT0HEBmWhjW5//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Me and Miyamoto\"\n        title=\"Me and Miyamoto\"\n        src=\"/static/a128a6cbf2e50686858bbbd3aaf528ce/63217/me_and_miyamoto.jpg\"\n        srcset=\"/static/a128a6cbf2e50686858bbbd3aaf528ce/db830/me_and_miyamoto.jpg 256w,\n/static/a128a6cbf2e50686858bbbd3aaf528ce/8102f/me_and_miyamoto.jpg 512w,\n/static/a128a6cbf2e50686858bbbd3aaf528ce/63217/me_and_miyamoto.jpg 1024w,\n/static/a128a6cbf2e50686858bbbd3aaf528ce/d58d1/me_and_miyamoto.jpg 1536w,\n/static/a128a6cbf2e50686858bbbd3aaf528ce/09658/me_and_miyamoto.jpg 2048w,\n/static/a128a6cbf2e50686858bbbd3aaf528ce/08826/me_and_miyamoto.jpg 3264w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Me and Miyamoto</figcaption>\n  </figure></p>\n<p>After I shared my story of obtaining an autograph from Miyamoto with friends, they decided to try the same thing and were able to get autographs as well. Excited about their success, they told their own friends about the method, leading to a large group of Brazilians who didn’t even know each other waiting at the event entrance in hopes of getting photos and autographs from their heroes.</p>\n<p>This became a popular way for fans to meet their idols at E3, with a growing group of people waiting at the entrance each year.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 820px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.828125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADnklEQVQozwGTA2z8AP////7+/vf39f3+/f///8LTzqO5rmKFc5eipK+w14CDaNbIOYipo06EaJKrn8PC0c3O1drb6Pb28////wD///+5usN3eKfNyqHDvqAudkN7l4w4hlsbTVJLQ8ptam3eyTxginwJdkFkkX9eW8BVW7PDv3nLxVf09v8A////xsLYLj2imJw2v7MFJXAtF19RJW5HIHNDJk6EVH1if6QgNm9BIXJKVIZtREu0rqy+5NoXy8aE////AP///4OymxIuVEZ7N1u1KBaORVylIpCeD5aXEVeWNjmxUwenTRWiRiCfQhmhPxybTFiiRKmgEF6aXbjSwgDC4cwem0BAYzcTn01WtTnC0hablD6KXj+1cEq+iV2knlxZmSk1skQVr1IctFEfukwglkRUYEEyYitjoXEAUrlwHJM8aGhOqsEg//8AlZNMFRqpq5Fnsn9YnWdLVCohai8Xz8gJm8scSK04Iq5IKqlKdG9KHpI8ltGpACOnTi+VObGdLMqUOfPsAEtRh0ZIqbOhZoZmRHg+L3k1KKyaa9rTJP/5AP/xALTLC3p4RmqETBitSdPg1AAZlT4jo0ilxxXKnC/CpSCUmoN4dKiPWjZ7RzWRZkSlk1pzdFy1sDX//gDj6gOKlDaWbU4PljdSr29tZGUAd62GF6lHNaVXlrAfu4gxvak4PEaBY0Rrdk4wb29GTk4vBwkLdHJK0L4MZrkqbHdQboldi5V5PEowCgkLAPj5+JSvlpq8nhCYQXuXMb+DO8K2JX12VV06LwAAAAkIBm9hQXdJMFF1IHV5TGZiN4WFWuGNkp5mR1w/LQCflIlVMCRYTT5CnFgTsDp1kTywb0jMthmZbTZtQzZzUDhrNyg2UyZVfkJMajNvKB+SQTGPVjepakjGh4AAs6ahXkM6dl1P7/TtUa90GqVJXnkvo2ZEsnZQomlLm2BFel0+Z2Y4cIlje7+VuMScdEQ8rINlnW1UmFtGAMzFwjgeEwEAAGlrbbyrl5aljXLAh2yFNZ5nSYteRalvUHtVOneeedjw4////9fc1DFBNURLNWBhSlVJNgDa19SflIsxJR8FAQBmRETh1tf////U5eGie160c1C4elinb0zNubH////LraxzGxt6TD9VPjIyKiFNMiQA////2NHMcFhJ39rX7u3s/////Pz7////u5V/tXFMu31avn1aq2hEwqaV9vT2kjtCjCcimUk7jD0xnmBFH7i1SJv1hZIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Hue Hue BR\"\n        title=\"Hue Hue BR\"\n        src=\"/static/64fd508b9c457acf6fdb28cacade5271/0bbcd/hue_hue_br.png\"\n        srcset=\"/static/64fd508b9c457acf6fdb28cacade5271/e3135/hue_hue_br.png 256w,\n/static/64fd508b9c457acf6fdb28cacade5271/06341/hue_hue_br.png 512w,\n/static/64fd508b9c457acf6fdb28cacade5271/0bbcd/hue_hue_br.png 820w\"\n        sizes=\"(max-width: 820px) 100vw, 820px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Hue Hue BR</figcaption>\n  </figure></p>\n<p>However, once E3 became open to the public, famous people and staff began using a different entrance, rendering this “trick” ineffective. Despite this change, the memories and experiences of meeting beloved game developers will always remain with those lucky enough to have had the opportunity.</p>\n<h2 id=\"after-parties\" style=\"position:relative;\"><a href=\"#after-parties\" aria-label=\"after parties permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>After parties</h2>\n<p>During my time at E3, my days were filled with waking up at the crack of dawn and heading over to the convention center. I made sure to get there early to avoid long lines and make the most of my time there. I spent the majority of my day playing games and exploring all that the convention had to offer. It wasn’t uncommon for me to be there until the event ended for the day at 6:00 PM. By that point, I was usually pretty exhausted.</p>\n<p>But the fun didn’t stop there. After a long day at E3, I would often meet up with my friends and gather my gear before heading out to explore the vibrant nightlife of LA. There was always a party happening somewhere, and I was always game to join in on the fun. Some of these parties were exclusive to media professionals, while others were open to any game enthusiast in the area. Some were paid events, while others were free. Some offered free food and drinks, while others had swag to give away. No matter what type of party it was, there was always something for everyone to enjoy.</p>\n<p>The best part of these parties, for me, was getting the chance to meet new people and hang out with my friends. We would spend hours talking about the day’s events and getting hyped about all the new releases that were coming that year. It was a great way to unwind after a long day at E3 and make some lasting memories with like-minded individuals.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgME/9oADAMBAAIQAxAAAAHOkti/OFQaP//EABsQAQACAgMAAAAAAAAAAAAAAAIBAwAEERIU/9oACAEBAAEFAgEzBtcZS+mvVHpq5z//xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIDEv/aAAgBAwEBPwF2NSNn/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAECAQE/AZiP/8QAHBABAAICAwEAAAAAAAAAAAAAAQIRAAMQIjEy/9oACAEBAAY/AlDzHp48bZVdVkdklGK/PH//xAAaEAADAQEBAQAAAAAAAAAAAAAAAREhMXGx/9oACAEBAAE/Ibu/okD8MUhXXKZto8fpzGVaU0f/2gAMAwEAAgADAAAAEBj/AP/EABYRAAMAAAAAAAAAAAAAAAAAAAEQUf/aAAgBAwEBPxA8if/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EAsP/8QAHRAAAgIDAAMAAAAAAAAAAAAAAREAITFBUWFxgf/aAAgBAQABPxATegrZbC6VX2GQR5nAZCOxGaAq05WnGGKfoX5jN7jZzecjkLGs9Ln/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PC Game Show party\"\n        title=\"PC Game Show party\"\n        src=\"/static/9b7cb544792f5e0a25356d10bd77cf9c/63217/pc_game_show_party.jpg\"\n        srcset=\"/static/9b7cb544792f5e0a25356d10bd77cf9c/db830/pc_game_show_party.jpg 256w,\n/static/9b7cb544792f5e0a25356d10bd77cf9c/8102f/pc_game_show_party.jpg 512w,\n/static/9b7cb544792f5e0a25356d10bd77cf9c/63217/pc_game_show_party.jpg 1024w,\n/static/9b7cb544792f5e0a25356d10bd77cf9c/d58d1/pc_game_show_party.jpg 1536w,\n/static/9b7cb544792f5e0a25356d10bd77cf9c/97b1a/pc_game_show_party.jpg 1576w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">PC Game Show party</figcaption>\n  </figure></p>\n<h2 id=\"post-e3\" style=\"position:relative;\"><a href=\"#post-e3\" aria-label=\"post e3 permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Post E3</h2>\n<p>During my first trip to E3, we barely had time to explore all the other things Los Angeles had to offer - like walking around Santa Monica pier, visiting retro gaming stores like Game Dude, and checking out Universal Studios, the Hollywood Walk of Fame, and the Hollywood Sign. We were only there for a week, which was just enough time to attend the conferences and the main event, and have an extra day for shopping.</p>\n<p>On all my subsequent trips to E3, I made sure to stay for at least two weeks. That gave us plenty of time to fully experience E3, as well as explore all the other things LA has to offer. After the event was over, my friends and I always had a whole week to do things like hunt for game deals, eat as much junk food as we could, and do all the other touristy things. One time, we even took a weekend trip to Las Vegas - it was amazing!</p>\n<h2 id=\"going-back-home\" style=\"position:relative;\"><a href=\"#going-back-home\" aria-label=\"going back home permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Going back home</h2>\n<p>Saying goodbye to E3 was always the saddest moment of the trip, especially during my first year when I was not only saying goodbye to the event, but also to my first trip to LA, which had been an unforgettable experience.</p>\n<p>Returning home was always a bit bittersweet, but at least I knew I would have the opportunity to come back to LA again the following year. At least, that’s what I thought until 2019 😅.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAZc5zElsVKj/xAAZEAEBAQEBAQAAAAAAAAAAAAACAQADEhP/2gAIAQEAAQUCXRSlpGrpu59aKfGq7//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEv/aAAgBAwEBPwGSv//EABYRAQEBAAAAAAAAAAAAAAAAAAEDEP/aAAgBAgEBPwEoZ//EABwQAAEEAwEAAAAAAAAAAAAAAAABESGRAjEyof/aAAgBAQAGPwIjFLOUshRpc34f/8QAHBABAAIBBQAAAAAAAAAAAAAAAQARMVGBkaHR/9oACAEBAAE/ISqcRo7yfAwNbBWrmQUBTekS49J//9oADAMBAAIAAwAAABCsz//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCrX//EABcRAQEBAQAAAAAAAAAAAAAAAAEAETH/2gAIAQIBAT8Q6Rsb/8QAHhABAQABBAMBAAAAAAAAAAAAAREAITFBcVGx0eH/2gAIAQEAAT8QtS7KuNDkMimIE/HBJJTTVxs8vmEPB1iB2RGye8LNyEn0z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"See you at E3 2020\"\n        title=\"See you at E3 2020\"\n        src=\"/static/33c1a52743b117b1d6186b1c79d76504/63217/e3_see_you_next_year.jpg\"\n        srcset=\"/static/33c1a52743b117b1d6186b1c79d76504/db830/e3_see_you_next_year.jpg 256w,\n/static/33c1a52743b117b1d6186b1c79d76504/8102f/e3_see_you_next_year.jpg 512w,\n/static/33c1a52743b117b1d6186b1c79d76504/63217/e3_see_you_next_year.jpg 1024w,\n/static/33c1a52743b117b1d6186b1c79d76504/d58d1/e3_see_you_next_year.jpg 1536w,\n/static/33c1a52743b117b1d6186b1c79d76504/09658/e3_see_you_next_year.jpg 2048w,\n/static/33c1a52743b117b1d6186b1c79d76504/e7f75/e3_see_you_next_year.jpg 2592w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">See you at E3 2020</figcaption>\n  </figure></p>\n<p><a href=\"https://www.theverge.com/2020/3/11/21163570/e3-canceled-coronavirus-outbreak-xbox-nintendo\" target=\"_blank\" rel=\"noreferrer\">Yeah…</a></p>\n<h2 id=\"is-e3-still-relevant\" style=\"position:relative;\"><a href=\"#is-e3-still-relevant\" aria-label=\"is e3 still relevant permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Is E3 still relevant?</h2>\n<p>This is a controversial question, but I believe we need E3 to return. The truth is that E3 was already struggling prior to the pandemic, and the pandemic was the final blow that ended the event. E3 could not survive as a media-only event, as it no longer made financial sense for news companies to send journalists to Los Angeles to cover the event when everything could be easily shown on YouTube.</p>\n<p>When E3 opened to the public in 2017, the event was not prepared for such a large audience and it resulted in extremely long lines - for example, there were reportedly 5 hours of wait time to watch the presentation of Cyberpunk 2077, in addition to long lines just to enter the event. The Electronic Software Association (ESA), which organizes E3, was also facing challenges before E3 2020 was canceled, as Geoff Keighley had already announced he would not be attending the event that year.</p>\n<p>While it may seem like there’s no need for E3 anymore, as conferences can be held online and game demos can be made available for everyone to play, there is one thing that cannot be fully replicated in the digital world: the hype. E3 is a great tool for creating buzz and increasing hype around game releases, as all gaming enthusiasts are paying attention to everything that happens at the event. It’s practically a week when all of our gamer dreams come true, as we get to look forward to what’s coming in the next year. It’s like Christmas, but better.</p>\n<p>Without E3, we don’t know what to expect from the gaming industry in the year. This is why even without E3, many companies still used the E3 time frame to announce their new games in 2020, but it’s just not the same without the big in-person event. Plus, there’s something special about being able to physically be at the event and see everything in person. It adds to the excitement and creates a more immersive experience.</p>\n<p>For example, there are still movie trailers shown at Comic-Con. Why do they show trailers at Comic-Con weeks before they are released on YouTube? It’s because this creates anticipation and excitement for finally seeing the trailers, as we know others have already seen it and are reading reactions and comments about it. E3 is the same way, but for games. I attended Gamescom in 2019 and it was a great event, but many of the games that were there had already been announced and the closed presentations were similar to those at E3. Despite being an event that is up to three times larger than E3, it doesn’t create the same level of hype.</p>\n<h2 id=\"what-now\" style=\"position:relative;\"><a href=\"#what-now\" aria-label=\"what now permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What now?</h2>\n<p>It’s still uncertain if E3 2023 will happen or not, but with the pandemic hopefully coming to an end in the near future, there’s a good chance that the Electronic Software Association (ESA) will be able to bring E3 back next year. If that happens, count me in! I always look forward to attending E3, as it’s not only an opportunity for me to play amazing games and meet new people, but it’s also a chance for me to have an awesome trip with my friends. It can be difficult for us to all get together, since we have busy schedules and live in different countries.</p>\n<p>E3 is such a special event for the gaming community, and it’s a shame that it had to be canceled in 2020 and 2021 due to the pandemic. But I have high hopes that it will return in 2023, and I can’t wait to experience all the excitement and hype that comes with it. From the big game announcements to the hands-on demos, there’s just nothing like being at E3 in person.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHmWjUMyX//xAAaEAEBAQADAQAAAAAAAAAAAAABAgADESEx/9oACAEBAAEFAg9IFJlytbj6nP3/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFH/8QAHBAAAQQDAQAAAAAAAAAAAAAAEQABAhADISJB/9oACAEBAAY/AmKDS8W8grqJr//EABoQAQADAQEBAAAAAAAAAAAAAAEAESExUXH/2gAIAQEAAT8hoAJfsBarOvIHfx1ExvhRAi8ObDSn/9oADAMBAAIAAwAAABBY/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPxCq/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EMU//8QAHBABAQADAAMBAAAAAAAAAAAAAREAITFhceHw/9oACAEBAAE/EGA7cUlL2esKCNPOL8yQi8jiGggXn6YF1KFpFxQMN2HDP//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Team Nintendo Blast\"\n        title=\"Team Nintendo Blast\"\n        src=\"/static/98cc107e7213fa6b104251307e7d5c8a/63217/nintendo_blast_crew.jpg\"\n        srcset=\"/static/98cc107e7213fa6b104251307e7d5c8a/db830/nintendo_blast_crew.jpg 256w,\n/static/98cc107e7213fa6b104251307e7d5c8a/8102f/nintendo_blast_crew.jpg 512w,\n/static/98cc107e7213fa6b104251307e7d5c8a/63217/nintendo_blast_crew.jpg 1024w,\n/static/98cc107e7213fa6b104251307e7d5c8a/d58d1/nintendo_blast_crew.jpg 1536w,\n/static/98cc107e7213fa6b104251307e7d5c8a/09658/nintendo_blast_crew.jpg 2048w,\n/static/98cc107e7213fa6b104251307e7d5c8a/49580/nintendo_blast_crew.jpg 3648w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Team Nintendo Blast</figcaption>\n  </figure></p>\n<p>Let’s hope for an E3 come back in 2023 and see you there!</p>","fields":{"slug":"/2022/2022-06-01-10-years-anniversary-of-my-first-e3.en/","path":"/blog/games/10-years-anniversary-of-my-first-e3/","locale":"en"},"readingTime":{"minutes":17.19},"frontmatter":{"date":"2022-06-01T00:00:00.000Z","title":"10 years anniversary of my first E3","categories":["games"]}}},{"node":{"excerpt":"I constantly write about code and share code snippets in my…","html":"<p>I constantly write about code and share code snippets in my blog posts and copy-pasting code is an essential skill for software engineers, and since selecting a text then pressing <code class=\"language-text\">CTRL + C</code> then <code class=\"language-text\">CTRL + V</code> is a lot of work, I decided to add a copy button to all my code snippets to facilitate the life of all my fellow software engineers.</p>\n<h2 id=\"possible-solutions\" style=\"position:relative;\"><a href=\"#possible-solutions\" aria-label=\"possible solutions permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Possible solutions</h2>\n<p>The proper way to do this is by creating a plugin to tap into the Gatsby HTML generation process and access the code snippets object in the AST data structure. There is a <a href=\"https://thundermiracle.medium.com/add-copy-button-to-your-gatsbyjs-blogs-code-block-a2711364a229\" target=\"_blank\" rel=\"noreferrer\">very nice tutorial</a> by <a href=\"https://thundermiracle.medium.com/\" target=\"_blank\" rel=\"noreferrer\">@thundermiracle</a> on how to do this.</p>\n<p>Of course, I decided to do it the shitty way, which is by altering the HTML string on the <code class=\"language-text\">createPages</code> function in the <code class=\"language-text\">gatsby-node.js</code> file.</p>\n<h2 id=\"the-code\" style=\"position:relative;\"><a href=\"#the-code\" aria-label=\"the code permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The code</h2>\n<p>Inside the loop that creates the post pages, I added the following code on <code class=\"language-text\">gatsby-node.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> /* some graphQL query */ </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">edge</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> alternativeHtml <span class=\"token operator\">=</span> <span class=\"token function\">generateAlternativeHtml</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        actions<span class=\"token punctuation\">.</span><span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./src/templates/PostTemplate.jsx</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> alternativeHtml <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>For the <code class=\"language-text\">generateAlternativeHtml</code> function I will use the <a href=\"https://www.npmjs.com/package/jsdom\" target=\"_blank\" rel=\"noreferrer\">jsdom</a> package to parse the HTML string and convert it to a DOM object and use the <code class=\"language-text\">querySelectorAll</code> method to find all the code snippets and add the copy button to them.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">generateAlternativeHtml</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">html</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> dom <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JSDOM</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> document <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> codeSnippets <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.gatsby-highlight'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    codeSnippets<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">codeSnippet</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        wrapper<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy-code-block'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// add your own css styles here, css classes, etc.</span>\r\n        <span class=\"token keyword\">const</span> copyButton <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        copyButton<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'Copy'</span><span class=\"token punctuation\">;</span>\r\n        codeSnippet<span class=\"token punctuation\">.</span><span class=\"token function\">insertAdjacentHTML</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">afterend</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> copyButton<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now all the code snippets will have a copy button, but the button doesn’t do anything. I will add the <code class=\"language-text\">onclick</code> event handler to the copy button to copy the code snippet to the clipboard. That needs to be done in the <code class=\"language-text\">React</code> part of the code with an <code class=\"language-text\">useEffect</code> in the <code class=\"language-text\">PostTemplate.jsx</code> file.</p>\n<p>To copy the code snippet to the clipboard I will use the <a href=\"https://www.npmjs.com/package/clipboard-copy\" target=\"_blank\" rel=\"noreferrer\">clipboard-copy</a> package.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> copy <span class=\"token keyword\">from</span> <span class=\"token string\">'clipboard-copy'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">BlogPostTemplate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> pageContext <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> alternativeHtml <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> pageContext<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> codeSnippets <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.copy-code-block button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        codeSnippets<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">elementWrapper</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            codeSnippet<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> codeSnippet <span class=\"token operator\">=</span> elementWrapper<span class=\"token punctuation\">.</span>parentElement<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.gatsby-highlight'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">const</span> code <span class=\"token operator\">=</span> codeSnippet<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">;</span>\r\n                <span class=\"token function\">copy</span><span class=\"token punctuation\">(</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>section<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>markdownRemark<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> alternativeHtml <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Done! Hacky and gross, but also beautiful in many ways.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>This solution adds a tiny bit of overhead to the Static Site Generator process and some DOM manipulation in the client, but it’s a good solution for the time being. If you’re looking for a quick and easy solution, this is the way to go.</p>\n<p>That’s it for this post. I hope you enjoyed it.</p>","fields":{"slug":"/2022/2022-05-05-adding-a-copy-button-to-code-snippets-on-gatsby-the-lazy-way.en/","path":"/blog/coding/adding-a-copy-button-to-code-snippets-on-gatsby-the-lazy-way/","locale":"en"},"readingTime":{"minutes":2.41},"frontmatter":{"date":"2022-05-05T00:00:00.000Z","title":"Adding a copy button to code snippets on Gatsby: The lazy way","categories":["coding"]}}},{"node":{"excerpt":"Webpack is the most popular module bundler for JavaScript…","html":"<p>Webpack is the most popular module bundler for JavaScript, it’s a tool for bundling modules together into a single file and more.</p>\n<p>One thing that always bugged me was how it handles dynamic imports with variable paths, I mean, I knew it was not magic, but I didn’t know how it works, and I always forgot to research it… until now.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1007px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.67187499999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVQY022QXW6DMBCEuU1VAokxxMTBib22sdeGQP7al6oX6Al6/IpQ0aqqNNqX0czufkkBmDVmtdcph5TDaq8X5cLmws7uv0oKiPmhpToWEHJhFyPlQCEc+jtV+Lv0u+sxk8r0RCJzY+3PzA1ZY9aHNmvM5uhYe2ritXbDnEk55MISFTYSqY5EYlL7cdsOFCJzQ+3HpXvnR/fyvvPjsb8T6anCtbCZsKXpiMLKnogKSY0X5oat7anutu60hDme5fBKIZQ6ljoWCol0ubAUIlFh2qwwmbxHkuoouvtqP51dKNy5YR8urD1tbZ81Zj47E3bnRwqR47k0XUIklrZv4o1InIGlHEodK9OV02OeQvgDOeXwxGTKIeF4IQrzxj6QwoJ01ubofmKNea6Plb/ePj7D6xtr+y/liXJ/sFdToQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Magic?\"\n        title=\"Magic?\"\n        src=\"/static/e6e021a037da7763c8f6affd02c34110/b82a7/webpack-magic.png\"\n        srcset=\"/static/e6e021a037da7763c8f6affd02c34110/e3135/webpack-magic.png 256w,\n/static/e6e021a037da7763c8f6affd02c34110/06341/webpack-magic.png 512w,\n/static/e6e021a037da7763c8f6affd02c34110/b82a7/webpack-magic.png 1007w\"\n        sizes=\"(max-width: 1007px) 100vw, 1007px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Magic?</figcaption>\n  </figure></p>\n<h2 id=\"how-file-imports-work\" style=\"position:relative;\"><a href=\"#how-file-imports-work\" aria-label=\"how file imports work permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How file imports work</h2>\n<p>Whenever you import a file in your code, Webpack will look for it in the project directory and copy it to the <code class=\"language-text\">build</code> folder with a new name, then Webpack replaces the import code in your bundled JavaScript file with the path to the newly copied file.</p>\n<p>Here is a super simplified example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// import on your app.js file</span>\r\n<span class=\"token keyword\">import</span> utils <span class=\"token keyword\">from</span> <span class=\"token string\">'./helpers/utils.js'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// import on the bundled file</span>\r\n<span class=\"token keyword\">import</span> utils <span class=\"token keyword\">from</span> <span class=\"token string\">'./build/09wdj0wjd.bundle.0.js'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"what-is-a-dynamic-import\" style=\"position:relative;\"><a href=\"#what-is-a-dynamic-import\" aria-label=\"what is a dynamic import permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is a dynamic import?</h2>\n<p>Sometimes you don’t want the browser to download the file immediately, you want to load it only when it’s needed, and for that, you can use a dynamic import.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nbutton<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'Click me'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// when the button is clicked, a dynamic import will happen</span>\r\nbutton<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./helpers/utils.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Dynamic import'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>It’s possible to use dynamic imports with pretty much any type of file, so it’s quite useful for large images or audio files, for example.</p>\n<p>But what happens when you want to import a file with a variable path?</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fileName <span class=\"token operator\">=</span> <span class=\"token string\">'image.jpg'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nbutton<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'Click me'</span><span class=\"token punctuation\">;</span>\r\nbutton<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./assets/images/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fileName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>How does Webpack know which file to copy to the <code class=\"language-text\">build</code> folder? Well, there is a way to tell Webpack to ignore the import, and let the browser resolve it as it wants with the comment <code class=\"language-text\">/* webpackIgnore: true */</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token string\">'assets/images/image.jpg'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// the browser will resolve this import and fail if the file doesn't exist</span>\r\n<span class=\"token keyword\">const</span> module <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/*webpackIgnore: true*/</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s nice, but somehow it’s also possible to not do that and let Webpack figure out the path to the file. But how?</p>\n<p><img src=\"/6061b99ae0d312b222b91b3f265dbe9e/magic.gif\" alt=\"Magic\"></p>\n<h2 id=\"the-magic-trick\" style=\"position:relative;\"><a href=\"#the-magic-trick\" aria-label=\"the magic trick permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The magic trick</h2>\n<p>It’s really not that complicated, but it comes with some caveats. For example, if you import a file with a variable path, at least some part of that path needs to be explicit in the string, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// this works</span>\r\n<span class=\"token keyword\">const</span> fileName <span class=\"token operator\">=</span> <span class=\"token string\">'image.jpg'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">let</span> module <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./assets/images/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fileName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// this doesn't work</span>\r\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token string\">'./assets/images/image.jpg'</span><span class=\"token punctuation\">;</span>\r\nmodule <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Why is that? The way Webpack does it is by analyzing the interpolated string path during the build process, then getting the explicit path part from the string, in this example <code class=\"language-text\">assets/images/</code>, and then copy all the files from that folder to the <code class=\"language-text\">build</code> folder.</p>\n<p>Webpack does it in a very smart way too, if the <code class=\"language-text\">import</code> statement includes the file extension, it will only copy the files with that extension, for example <code class=\"language-text\">import(`./assets/images/${fileName}.png`)</code> will only copy <code class=\"language-text\">PNG</code> files.</p>\n<p>Since Webpack does that by analyzing string in the <code class=\"language-text\">import</code> statement, it’s not able to know which files to copy when the whole path is a variable without an explicit string part.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Webpack might have a cumbersome configuration, and sometimes it might seem like dark sorcery, but it’s a very powerful tool with lots of features, and if you dig deep enough, you’ll find that its implementation is really not that complicated.</p>\n<p>If you want to know more about Webpack, you can check out the <a href=\"https://webpack.js.org/\" target=\"_blank\" rel=\"noreferrer\">official <strong>Webpack documentation</strong></a>, and you can read more about <a href=\"https://webpack.js.org/api/module-methods/\" target=\"_blank\" rel=\"noreferrer\"><strong>Module Methods</strong> here</a> and <a href=\"https://webpack.js.org/guides/code-splitting/#dynamic-imports\" target=\"_blank\" rel=\"noreferrer\"><strong>Dynamic Imports</strong> here</a>.</p>","fields":{"slug":"/2022/2022-04-11-how-webpack-handles-dynamic-imports-with-variable-paths.en/","path":"/blog/coding/how-webpack-handles-dynamic-imports-with-variable-paths/","locale":"en"},"readingTime":{"minutes":3.025},"frontmatter":{"date":"2022-04-11T00:00:00.000Z","title":"How Webpack handles dynamic imports with variable paths","categories":["coding"]}}},{"node":{"excerpt":"If you want to rent or buy a house in the Netherlands, you…","html":"<p>If you want to rent or buy a house in the Netherlands, you better brace yourself because it is no easy task, especially if you’re looking in Amsterdam.</p>\n<p>Applying for rent or bidding on a house is like a job interview, or getting a visa for another country. You need to provide your payment slips, work contract, previous landlords’ recommendations, and more.</p>\n<p>Not only that but many times you don’t even have a chance to apply, because they already have so many people applying that they don’t take applications anymore. Sometimes within 2 days after the house is listed on <a href=\"https://funda.nl/\" target=\"_blank\" rel=\"noreferrer\">Funda.nl</a>, they are already not booking viewings.</p>\n<p>If you at least then manage to book a viewing, you will see the house with many other people and <a href=\"https://dutchreview.com/traveling/cities/amsterdam/an-amsterdam-apartment-with-fair-rent-queue-stretches-around-the-block/\" target=\"_blank\" rel=\"noreferrer\">sometimes even queue for it</a>.</p>\n<p>Because of that, I had to constantly open Funda.nl and check for new houses, so as soon as a new house was available I could book a viewing.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 857px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSUlEQVQoz2WQ60tTYQDG91f0B4i57Vze97xnO26zmwSGIllqNGGrkPBajlnWpg6ZWE4r0lo3IlIqocgv9VVEKFSUcLqFY+u4tjw7Z5d2ds42bxUZXoLMH8/XH8/Do5BWN6TVDUHOCXIums7IPzefvXiJaKTT6TSIYGigQYBCCEBII5JGJAVJDMN3UPBSjpdygrwWk9ejUi6+su4P8xcbWquqqo8a6MN6pNXSDKPV0oiCJNoOBOSuLMhyPPs7IIzNhRyJ7K+EvBbm2OdDttMV5UUM0iNQqKGL9LQWgS2ZAjS15f9tlteT2c3JYP/4vHpZ3vRLgocfCmbcF1rPH2SOw+JSHCJMrcIw/J/s7lZE4qOplYmpkGns04Hx8FSd60HnLddlR1d9W4epyXbuUnu59QbUHcJUSpwg8L0oQtHr79+Y3o7UeOZrveKTM+Zm56myvlqzvbzkXkvDU2tdk7m2qKZJnZ9HEOT/cjjRPVCv7a3MD0Y6uWTXq5kRa/8d50N3W5/L4b7f0NFrbOkuaekBOAYA3CfHeyZmrvp8jf6A08/aZ1njPN/n5Qe9/CAruXvcjUqmuPDIMUhBktzXnFnLXPOkLZO+pe+iIImBGMunhIScionJVFb8FuPLTlSolQUQAmKbPXLaM3xy9GPz9OLch9eRlDchfY6KXk5c4MSFSNIj/fjyeNiuKsgzMJRGg2hag+Nbb+8crigduG171H7FZbnbX/lu8eZc2PaVs7CcdWk77LJlevFstdGgVBKAIklAAEBCAAGABEH8AX6ULwUbFNkZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"funda scraper\"\n        title=\"funda scraper\"\n        src=\"/static/82fc245c2e60c74dd352f6bb36dfa4f4/87817/funda-scraper.png\"\n        srcset=\"/static/82fc245c2e60c74dd352f6bb36dfa4f4/e3135/funda-scraper.png 256w,\n/static/82fc245c2e60c74dd352f6bb36dfa4f4/06341/funda-scraper.png 512w,\n/static/82fc245c2e60c74dd352f6bb36dfa4f4/87817/funda-scraper.png 857w\"\n        sizes=\"(max-width: 857px) 100vw, 857px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"lets-automate-it\" style=\"position:relative;\"><a href=\"#lets-automate-it\" aria-label=\"lets automate it permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’s automate it</h2>\n<p>The good thing about Funda.nl is that they have a vast variety of filters for your search, and those filters are saved in the URL. Hooray!</p>\n<p>For example, <a href=\"https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/\" target=\"_blank\" rel=\"noreferrer\">this link</a> will list all houses that are listed since 1 day ago, with 2 bedrooms, at least 40m², and a maximum of €2000.</p>\n<p>The results on this page are listed in an HTML <code class=\"language-text\">li</code> element with a class <code class=\"language-text\">search-result</code>, so I can get all elements with the query <code class=\"language-text\">document.querySelectorAll('.search-result')</code>, and inside each of these elements, I can get the link for the house with <code class=\"language-text\">element.querySelectorAll('a').[0].href</code>.</p>\n<p>With <code class=\"language-text\">puppeteer.js</code> I can automate the process of going to that URL and checking if any new house showed up and save it to a file. Since this is a Node.js script, I will use <code class=\"language-text\">jsdom</code> to work with the DOM elements.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> writeFileSync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> puppeteer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'puppeteer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> jsdom <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">runTask</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.funda.nl/en/huur/amsterdam/beschikbaar/0-2000/40+woonopp/2+slaapkamers/1-dag/'</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">headless</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">goto</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">waitUntil</span><span class=\"token operator\">:</span> <span class=\"token string\">'domcontentloaded'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> htmlString <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">content</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> dom <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">jsdom<span class=\"token punctuation\">.</span>JSDOM</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.search-result'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">const</span> urls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    urls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>element<span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span>href<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'urls.json'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">runTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I can simply run <code class=\"language-text\">node script.js</code> and I will have all URLs on a <code class=\"language-text\">urls.json</code> file.</p>\n<h2 id=\"sending-new-urls-to-telegram\" style=\"position:relative;\"><a href=\"#sending-new-urls-to-telegram\" aria-label=\"sending new urls to telegram permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sending new URLs to Telegram</h2>\n<p>Instead of saving the URLs to a <code class=\"language-text\">urls.json</code> file, I want to have these URLs sent to a Telegram group using a Telegram bot, for that, I will need to use <code class=\"language-text\">node-fetch</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> nodeFetch <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'node-fetch'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">runTask</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.telegram.org/bot</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">BOT_API</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/sendMessage</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> element<span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span>href<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">chat_id</span> <span class=\"token operator\">:</span> <span class=\"token constant\">CHAT_ID</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">parse_mode</span> <span class=\"token operator\">:</span> <span class=\"token string\">'markdown'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">runTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s great, but not very useful because I don’t want to have to manually run the script, I will fix that in the next step.</p>\n<h2 id=\"using-github-actions\" style=\"position:relative;\"><a href=\"#using-github-actions\" aria-label=\"using github actions permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using GitHub Actions</h2>\n<p>GitHub Actions is great, I use it all the time for tasks like tests and building my blog, but you can also have <a href=\"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule\" target=\"_blank\" rel=\"noreferrer\">scripts running on a schedule</a> using <code class=\"language-text\">cron</code>.</p>\n<p>For this script, I need to use <a href=\"https://github.com/actions/checkout\" target=\"_blank\" rel=\"noreferrer\">actions/checkout</a> to checkout to my code, and <a href=\"https://github.com/stefanzweifel/git-auto-commit-action\" target=\"_blank\" rel=\"noreferrer\">stefanzweifel/git-auto-commit-action</a> to persist a list of the URLs that were already sent to Telegram.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run Task\r\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">cron</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*/30 * * * *\"</span>\r\n\r\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">build-and-deploy</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\r\n\r\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\r\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2.4.0\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">ref</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.head_ref <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Running\r\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\r\n          npm cache clean --force\r\n          npm install\r\n          npm run task</span>\r\n        <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">CHAT_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.CHAT_ID <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token key atrule\">BOT_API</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.BOT_API <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> stefanzweifel/git<span class=\"token punctuation\">-</span>auto<span class=\"token punctuation\">-</span>commit<span class=\"token punctuation\">-</span>action@v4\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">commit_message</span><span class=\"token punctuation\">:</span> Update db.json\r\n          <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> main</code></pre></div>\n<p>And that’s it! Now whenever a new house is listed in my URL, I will get a message on Telegram 🎉.</p>\n<h2 id=\"bonus\" style=\"position:relative;\"><a href=\"#bonus\" aria-label=\"bonus permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bonus</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 547px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.03125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEEElEQVQ4y23USWwbVRgH8AjEqXZsOV4SK4snY88be2Y89sy82Tz2jGefccZ2SJyQRApr2SGiRJVoVKgqLkSQYlrRqi1BiAviwAEEHMsBQZWITeWGRBOpwIkThRa4gONEpRV/vcO7/PTpPX3fNxCJRsOhULZQgHW9rNRKkgwAwACGYRgAIJvNopM5dBJDEHTi9gwNDQ1EIpFwOJzNZgVBYPcCIeR6gRBCnueJPEMWIA7oDJJB/pN4PL6PURQVRXHPcDRNQwgFQehXyGT65za5j6PRaCgUomm60+k0Gg3f91utpmVZrutpqkaS5MTEnexOTBCE73me6/qeZ9u2bdm1mqppGsdxCIKgKDp5kP/BFEU2pgLdsEzLUdV6TVWJQiGXzcZisXh8KJlMjIyMjI6OptPpg//K3MIFnJqf9h5a9JYXnMMPdlafX9k41T177kL39Jlu9/T6+qsrK886ltKZneZYii3TZZpMJBI9fCgUIvOlh+ftw4vGXIt5YEl56YVHL54/s7219edff1/d2f32uyvn3nzt6SeWj6w8aZl1RRYUGaZSqf3KeUBN6cJCu+aoZGATjyxWH7vf7W6cvP77Hzdu3Pzx6u7bm28FvtEMfMvUaxUo8n0ciYbCoTwoyixlVai5QJ0N5IZNtqfY+XvFrcuXfvn5p7WjzyzM+romqKrqeoFcUauVWiqZPHhzvlSFRQ3iywvtwK52Wna9VtQq2Im1x4+vHRXYHM8CSRJtr+147VKZF6Xq8PBwHx8qFLiaooiw6Nqmo2vTrXZdN+RqfWZm5r6FJQbKgqKzUFZ13/Q7DFRYTkwmkwORSK8yDkocJ1AUSTM8y3GQF3TTKRbJbvf1Cxc3dct1/GlRMYLZ5YrmjyGgxErJROKgt1ECxzCQQwiSwHCixMm2487OLXx+ZeeTS5clkcdxkpDbgIIIiqfSYwgKEn08OBjOThaKNC1WFNO0JZ73DM2x7dXj61/+8Ov2zm9n3v3QdIJINJYF1CSKxqLhzPj4LYxkcIbhqppp6npNgmpFMAzj5VOb31y7+fXu9Q8++/65FzeaM0tQrALOl402lOuxWOzgw/JlkijQBOboNR5yZYZRasaxV85/+tW1j7d33vnoi9WTbzy1ekLRp8ZzJWX6SEZaHorvdVgkGsmhJGT0IlkCIJfDsFwOA3ieKpY5QS5zAsMJRZohKJousxiWG0MwBAW93h4cHLzn7rvygG4GbdO0TNM0TMOyTMMwTNNwHUfTNFVVe4NmW5qm0jQ9PjaayUz0cCqdZqrVQp4JgsD1eiMZBFO2bXue12w2W62W04vr+w1d10VRhBBKksSybA9jDHvsvfdxoiSJkiiKgiBUKhVBEPfuPM/3br1lRBD9wc71noUBgP+7w/4B5DorbrXMqwIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Now run to book your viewing!\"\n        title=\"Now run to book your viewing!\"\n        src=\"/static/b167f6a479ff3551a706ec1719572d7d/25257/telegram-funda-message-with-stats.png\"\n        srcset=\"/static/b167f6a479ff3551a706ec1719572d7d/e3135/telegram-funda-message-with-stats.png 256w,\n/static/b167f6a479ff3551a706ec1719572d7d/06341/telegram-funda-message-with-stats.png 512w,\n/static/b167f6a479ff3551a706ec1719572d7d/25257/telegram-funda-message-with-stats.png 547w\"\n        sizes=\"(max-width: 547px) 100vw, 547px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Now run to book your viewing!</figcaption>\n  </figure></p>\n<p>There is a very nice <a href=\"https://github.com/nikitaindik/funda-neighbourhoods\" target=\"_blank\" rel=\"noreferrer\">open-source Chrome extension</a> that adds a lot of new data into Funda.nl about the house, so I copied some of its code to add extra info to the houses send to Telegram.</p>\n<p>You can <a href=\"https://github.com/blopa/funda-scraper\" target=\"_blank\" rel=\"noreferrer\">clone this project on GitHub</a>, add your own list of Funda.nl URLs, and the script will automatically run every 30 minutes to check for new houses and send them to Telegram.</p>\n<p>See you in the next one!</p>","fields":{"slug":"/2022/2022-03-12-using-nodejs-and-github-action-to-find-a-house-on-fundanl.en/","path":"/blog/coding/using-nodejs-and-github-action-to-find-a-house-on-fundanl/","locale":"en"},"readingTime":{"minutes":3.645},"frontmatter":{"date":"2022-03-12T00:00:00.000Z","title":"Using Node.js and GitHub Action to find a house on Funda.nl","categories":["coding"]}}},{"node":{"excerpt":"EDIT: This only works for React 17 or lower, for React 1…","html":"<p><em><strong>EDIT: This only works for React 17 or lower, <a href=\"/en/blog/coding/how-to-get-the-redux-state-from-a-react-18-production-build-via-the-browsers-console/\">for React 18 check this blog post</a>.</strong></em></p>\n<p>Sometimes you want to debug the Redux State from your application on production, but you don’t have <a href=\"https://github.com/zalmoxisus/redux-devtools-extension\" target=\"_blank\" rel=\"noreferrer\">redux-devtools</a> enabled for production, so what can you do?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1012px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC90lEQVQozx2S22tcVRyFz//iq+CTPhT0RR/ESKEq1kSDCSQYlWpjTMZLTbTGIQmReGkSU0GiJrbgWKitaBpKffHSUJRKOzXBmtiZM+fs62/fzz77zJmR6eN6+BYL1hdhjPf29owxnU4HAFSzSRFinGmtpZR3mnGzheMEHTQRYYKBwCm+00hjxOJWEsVxnCRpnocQCu99yIP3ufd5URQcoBWjOKGEcpBaSA1CUAaEcaW11DriAJRSEAKkYpxzDgCCcwihEEIqEEkr+a/RQAhxDkJIY611znuvtY6uXL509dof31/88ezm+vbWxVv1m51O17msKNoAglGWYsKlIIQKIXQPzLLMh6Kw1kT1+o0Ukf2Dg+t/XmM4NgqKoh1CURRt65zWWnCppTHWamO5tJnPTC85rU3UKUsphfd5WXZASmttCIVSSgjp8zyzWVKP092EpBhhRpkC0VtgjDHaRDZ0lS+73W5RtPMQMu/LsgyhMMa0yzIzjtzGNCGMMsaZEEJKrbQ21mbeR+curFXnp5cW319ZXanVvt3Z+bVWO3P1lytb25e3Lm0H79N6klyP8b8YtzAlhHOhlXJKeueiUx9VXhk5OjoyPDg4MDc9sf7Z0oczr5147sGpkSfO1zbzLMe7KdpHnAGlTEmplJJSSsatNtHq6S9PfjD/xfpXb4yPvXlsaGlxfudM9efKfZXH71mrTnQ7neRGTBqYckYZp1wAKMaAcWlcFq1Upz599/jyyYnjY8/3H3nkheH+9068vvn2kbnhQ2vV8dzn+O8UNxCljDJAmBFKWc8FcM5Fny/NLi9Mz89Mnju7fvTJvrfGR2cmXxp66tFvFis/fL1sjMO3UvRPSjDFhGMMGGNyt6AHL8xMvDj8zMdz71z4bmN2cnSkv6/y8rOHH37gk6mh+vnTWZajmy1yG3MKd+1TjDHo3SV78MbqwuDTh6enjv31+0+/bW28Otg3Pjbw0P33Djx2qHZq1jm/v9tMWghTyrngAEJKDsJlXhvzP7EptDiqnUkUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux state on instagram\"\n        title=\"redux state on instagram\"\n        src=\"/static/7063c62ea526ac52ef9bd28c860aecb6/9d874/redux-state-on-instagram.png\"\n        srcset=\"/static/7063c62ea526ac52ef9bd28c860aecb6/e3135/redux-state-on-instagram.png 256w,\n/static/7063c62ea526ac52ef9bd28c860aecb6/06341/redux-state-on-instagram.png 512w,\n/static/7063c62ea526ac52ef9bd28c860aecb6/9d874/redux-state-on-instagram.png 1012w\"\n        sizes=\"(max-width: 1012px) 100vw, 1012px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"tldr\" style=\"position:relative;\"><a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR</h2>\n<p>Run this on the browser’s console.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> internalRoot <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*[id]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> el<span class=\"token operator\">?.</span>_reactRootContainer<span class=\"token operator\">?.</span>_internalRoot<span class=\"token operator\">?.</span>current<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>_reactRootContainer<span class=\"token operator\">?.</span>_internalRoot<span class=\"token operator\">?.</span>current<span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>internalRoot<span class=\"token operator\">?.</span>pendingProps<span class=\"token operator\">?.</span>store <span class=\"token operator\">||</span> internalRoot<span class=\"token operator\">?.</span>stateNode<span class=\"token operator\">?.</span>store <span class=\"token operator\">||</span> internalRoot<span class=\"token operator\">?.</span>memoizedState<span class=\"token operator\">?.</span>element<span class=\"token operator\">?.</span>props<span class=\"token operator\">?.</span>store<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>getState<span class=\"token operator\">?.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"the-long-version\" style=\"position:relative;\"><a href=\"#the-long-version\" aria-label=\"the long version permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The long version</h2>\n<p>Recently I had to debug a problem in production which I needed to access the Redux State, so I came across <a href=\"https://til-engineering.nulogy.com/Accessing-Redux-Store-Without-Redux-DevTools/\" target=\"_blank\" rel=\"noreferrer\">this solution</a>, which needed <a href=\"https://github.com/facebook/react-devtools\" target=\"_blank\" rel=\"noreferrer\">React DevTools</a> to be installed in the browser, and that worked for me, but then I wondered how that could be done without the use of any extensions.</p>\n<p>After a bit of researching I found <a href=\"https://stackoverflow.com/a/57909332/4307769\" target=\"_blank\" rel=\"noreferrer\">this solution</a> on Stack Overflow, which lead me to create the following script:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Traverse a dom element</span>\r\n<span class=\"token keyword\">const</span> stores <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">traverse</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">let</span> store <span class=\"token operator\">=</span>\r\n    element<span class=\"token operator\">?.</span>memoizedState<span class=\"token operator\">?.</span>element<span class=\"token operator\">?.</span>props<span class=\"token operator\">?.</span>store\r\n    <span class=\"token operator\">||</span> element<span class=\"token operator\">?.</span>pendingProps<span class=\"token operator\">?.</span>store\r\n    <span class=\"token operator\">||</span> element<span class=\"token operator\">?.</span>stateNode<span class=\"token operator\">?.</span>store<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    stores<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Find the root element for React</span>\r\n<span class=\"token keyword\">const</span> reactRoot <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*[id]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> el<span class=\"token operator\">?.</span>_reactRootContainer<span class=\"token operator\">?.</span>_internalRoot<span class=\"token operator\">?.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> internalRoot <span class=\"token operator\">=</span> reactRoot<span class=\"token punctuation\">.</span>_reactRootContainer<span class=\"token punctuation\">.</span>_internalRoot<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Traverse the root react element to find all Redux States in the app</span>\r\n<span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>internalRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After running this script, all Redux States will be available inside the variable <code class=\"language-text\">stores</code>, and you can access them via <code class=\"language-text\">[...stores].map((store) => store.getState())</code>.</p>\n<p>See you in the next one!</p>","fields":{"slug":"/2022/2022-02-20-how-to-get-the-redux-state-from-a-production-build-via-the-browsers-console.en/","path":"/blog/coding/how-to-get-the-redux-state-from-a-production-build-via-the-browsers-console/","locale":"en"},"readingTime":{"minutes":1.21},"frontmatter":{"date":"2022-02-20T00:00:00.000Z","title":"How to get the Redux State in production via the browser's console","categories":["coding"]}}},{"node":{"excerpt":"When I was working on my Game Devlog videos, I wondered if…","html":"<p>When I was working on my Game Devlog videos, I wondered if there was any way to automatically transform my code snippets into a video, so I could add them to my Devlog, but I couldn’t find any solution for it, so I gave up on this idea.</p>\n<p>Then a couple of weeks ago I was playing around with <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" target=\"_blank\" rel=\"noreferrer\">AST</a> and rendering <code class=\"language-text\">React</code> via <code class=\"language-text\">Node.js</code> with <code class=\"language-text\">Babel</code> when I had the idea to use Puppeteer to open a headless browser and record a page with my code snippet.</p>\n<p>The goal is for the result to be like the following GIF.</p>\n<p><img src=\"/63cbac7ef35f31c0b11e205782860106/code-to-video-v1.gif\" alt=\"\"></p>\n<h2 id=\"lets-get-coding\" style=\"position:relative;\"><a href=\"#lets-get-coding\" aria-label=\"lets get coding permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’s get coding</h2>\n<p>I will start by creating a <code class=\"language-text\">script.js</code> to be run via terminal using <code class=\"language-text\">node</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@babel/register'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> readFileSync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> puppeteer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'puppeteer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> PuppeteerScreenRecorder <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'puppeteer-screen-recorder'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Utils</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> generateHtml <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./utils'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Constants</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">SCALE</span> <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateVideo</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">filePath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// TODO</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// get node script param</span>\r\n<span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span>\r\n    process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token string\">'./examples/Test.jsx'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token function\">generateVideo</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>My code will use <code class=\"language-text\">ES Modules</code>, so I will install <a href=\"https://www.npmjs.com/package/esm\" target=\"_blank\" rel=\"noreferrer\">esm</a> so I can run my script like <code class=\"language-text\">node -r esm src/script.js my_file.js</code>.</p>\n<p>For the <code class=\"language-text\">generateVideo</code> function, I will follow the <a href=\"https://github.com/puppeteer/puppeteer/blob/v13.0.1/docs/api.md#class-puppeteer\" target=\"_blank\" rel=\"noreferrer\">Puppeteer’s quick-start example</a> to open a headless browser and then start recording it with <a href=\"https://github.com/prasanaworld/puppeteer-screen-recorder#example\" target=\"_blank\" rel=\"noreferrer\">puppeteer-screen-recorder</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateVideo</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">filePath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// load file content</span>\r\n    <span class=\"token keyword\">const</span> code <span class=\"token operator\">=</span> <span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">encoding</span><span class=\"token operator\">:</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> lines <span class=\"token operator\">=</span> code<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// Puppeteer config</span>\r\n    <span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">headless</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">args</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'--window-size=1920,1080'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">defaultViewport</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">1920</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">1080</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// open a new empty page</span>\r\n    <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">followNewTab</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">fps</span><span class=\"token operator\">:</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">ffmpeg_Path</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">videoFrame</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">1920</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">1080</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">aspectRatio</span><span class=\"token operator\">:</span> <span class=\"token string\">'16:9'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> recorder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PuppeteerScreenRecorder</span><span class=\"token punctuation\">(</span>\r\n        page<span class=\"token punctuation\">,</span>\r\n        config\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// start recording</span>\r\n    <span class=\"token keyword\">await</span> recorder<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./output.mp4'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;p>Hello World&lt;/p>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">waitForTimeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">await</span> recorder<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This will open a headless browser tab, set the HTML to <code class=\"language-text\">&lt;p>Hello World&lt;/p></code> and make a 1-second video of it. That’s not what I want, but I will get there.</p>\n<h2 id=\"rendering-a-react-component\" style=\"position:relative;\"><a href=\"#rendering-a-react-component\" aria-label=\"rendering a react component permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rendering a React component</h2>\n<p>Now I will create a function that receives the code snippet as a parameter and then render a beautiful syntax highlighted code in HTML format using <a href=\"https://prismjs.com/\" target=\"_blank\" rel=\"noreferrer\">Prism.js</a>.</p>\n<p>With <code class=\"language-text\">Prism.highlight</code> I can pass a code string and get an HTML with the syntax-highlighted code and <code class=\"language-text\">renderToStaticMarkup</code> to render the <code class=\"language-text\">React</code> component to an HTML string. I don’t need <code class=\"language-text\">React</code> here, but since the whole idea started with <code class=\"language-text\">React</code> and <code class=\"language-text\">Babel</code>, I kept it.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> renderToStaticMarkup <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/server'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">JSDOM</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> readFileSync <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fs'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Prism.js</span>\r\n<span class=\"token keyword\">import</span> Prism <span class=\"token keyword\">from</span> <span class=\"token string\">'prismjs'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> loadLanguages <span class=\"token keyword\">from</span> <span class=\"token string\">'prismjs/components/'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// My custom React component</span>\r\n<span class=\"token keyword\">import</span> CodeHighlighter <span class=\"token keyword\">from</span> <span class=\"token string\">'./CodeHighlighter.jsx'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> styling <span class=\"token operator\">=</span> <span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">'./node_modules/prism-themes/themes/prism-material-dark.css'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">encoding</span><span class=\"token operator\">:</span> <span class=\"token string\">'utf8'</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateHtml</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token parameter\">code<span class=\"token punctuation\">,</span>\r\n    currentLine<span class=\"token punctuation\">,</span>\r\n    totalLines<span class=\"token punctuation\">,</span>\r\n    language</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">loadLanguages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>language<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> codeHtml <span class=\"token operator\">=</span> Prism<span class=\"token punctuation\">.</span><span class=\"token function\">highlight</span><span class=\"token punctuation\">(</span>\r\n        code<span class=\"token punctuation\">,</span>\r\n        Prism<span class=\"token punctuation\">.</span>languages<span class=\"token punctuation\">[</span>language<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        language\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// get HTML string</span>\r\n    <span class=\"token keyword\">const</span> html <span class=\"token operator\">=</span> <span class=\"token function\">renderToStaticMarkup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>CodeHighlighter\r\n            codeHtml<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>codeHtml<span class=\"token punctuation\">}</span>\r\n            totalLines<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>totalLines<span class=\"token punctuation\">}</span>\r\n            currentLine<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentLine<span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> window <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JSDOM</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> document <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> window<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// Add Prism.js styling to the HTML document</span>\r\n    <span class=\"token keyword\">const</span> style <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'style'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    style<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> styling<span class=\"token punctuation\">;</span>\r\n    document<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>style<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>outerHTML<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Other than <code class=\"language-text\">code</code>, the <code class=\"language-text\">generateHtml</code> function also receives <code class=\"language-text\">currentLine</code> and <code class=\"language-text\">totalLines</code> as parameters. <code class=\"language-text\">currentLine</code> will be used to highlight the current line of code, and <code class=\"language-text\">totalLines</code> to show the line numbers on the left.</p>\n<h2 id=\"the-react-component\" style=\"position:relative;\"><a href=\"#the-react-component\" aria-label=\"the react component permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The React component</h2>\n<p>The basic implementation of the <code class=\"language-text\">CodeHighlighter</code> I will simply return a <code class=\"language-text\">code</code> tag with the <code class=\"language-text\">dangerouslySetInnerHTML</code> set to the Prism.js HTML.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">SCALE</span> <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">CodeHighlighter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\r\n    codeHtml<span class=\"token punctuation\">,</span>\r\n    totalLines<span class=\"token punctuation\">,</span>\r\n    currentLine<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>html lang<span class=\"token operator\">=</span><span class=\"token string\">\"en\"</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>body\r\n                style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">1920</span> <span class=\"token operator\">/</span> <span class=\"token constant\">SCALE</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">1080</span> <span class=\"token operator\">/</span> <span class=\"token constant\">SCALE</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'#272822'</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">scale(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">SCALE</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">transformOrigin</span><span class=\"token operator\">:</span> <span class=\"token string\">'0% 0% 0px'</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">></span>\r\n                <span class=\"token operator\">&lt;</span>div\r\n                    style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                        <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token string\">'20px 0 0 2px'</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span>pre\r\n                        style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                            <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                    <span class=\"token operator\">></span>\r\n                        <span class=\"token operator\">&lt;</span>code\r\n                            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                                <span class=\"token literal-property property\">fontFamily</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace\"</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                            dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                                <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> codeHtml<span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>pre<span class=\"token operator\">></span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> CodeHighlighter<span class=\"token punctuation\">;</span></code></pre></div>\n<p>The code above is still missing the line highlighter and the line numbers, for that I will use the <code class=\"language-text\">totalLines</code> variable to create the line numbers, and <code class=\"language-text\">currentLine</code> to create a <code class=\"language-text\">div</code> with full width and move it with the <code class=\"language-text\">margin-top</code> CSS property. Check the full code for this <code class=\"language-text\">React</code> component <a href=\"https://github.com/blopa/code-video-creator/blob/fc6836c497d5dd0a13a00f1f779fd2d482ebc611/src/CodeHighlighter.jsx\" target=\"_blank\" rel=\"noreferrer\">on GitHub</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">SCALE</span> <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">CodeHighlighter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\r\n    codeHtml<span class=\"token punctuation\">,</span>\r\n    totalLines<span class=\"token punctuation\">,</span>\r\n    currentLine<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// add the line numbers</span>\r\n    <span class=\"token keyword\">const</span> lines <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>totalLines<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>span\r\n            key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span>\r\n            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">8</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>totalLines<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>html lang<span class=\"token operator\">=</span><span class=\"token string\">\"en\"</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>style\r\n                dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                    <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n                    body { color: white; }\r\n                </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>body\r\n                style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">1920</span> <span class=\"token operator\">/</span> <span class=\"token constant\">SCALE</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">1080</span> <span class=\"token operator\">/</span> <span class=\"token constant\">SCALE</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'#272822'</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">scale(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">SCALE</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">transformOrigin</span><span class=\"token operator\">:</span> <span class=\"token string\">'0% 0% 0px'</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">></span>\r\n                <span class=\"token operator\">&lt;</span>div\r\n                    style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                        <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token string\">'20px 0 0 2px'</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span>div\r\n                        style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                            <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">4</span> <span class=\"token operator\">*</span> <span class=\"token constant\">SCALE</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#44463a'</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">zIndex</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">marginTop</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">16</span> <span class=\"token operator\">*</span> currentLine<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span>div\r\n                        style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                            <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'grid'</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token string\">'0 5px 0 2px'</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#DD6'</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                    <span class=\"token operator\">></span>\r\n                        <span class=\"token punctuation\">{</span>lines<span class=\"token punctuation\">}</span>\r\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span>pre\r\n                        style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                            <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                    <span class=\"token operator\">></span>\r\n                        <span class=\"token operator\">&lt;</span>code\r\n                            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                                <span class=\"token literal-property property\">fontFamily</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace\"</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                            dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                                <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> codeHtml<span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>pre<span class=\"token operator\">></span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> CodeHighlighter<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now in the script, I can get the syntax highlighted HTML string and set it as the headless browser HTML.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> html <span class=\"token operator\">=</span> <span class=\"token function\">generateHtml</span><span class=\"token punctuation\">(</span>\r\n    code<span class=\"token punctuation\">,</span>\r\n    <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    lines<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'javascript'</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"showing-code-line-by-line\" style=\"position:relative;\"><a href=\"#showing-code-line-by-line\" aria-label=\"showing code line by line permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Showing code line by line</h2>\n<p>For now, I’m dumping all the code into the <code class=\"language-text\">React</code> component, but ideally, the code should be shown line by line, for that, I will loop through the <code class=\"language-text\">lines</code> array and then add line by line to a new array and pass it to the <code class=\"language-text\">generateHtml</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">let</span> codeToParse <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> scrollThreshold <span class=\"token operator\">=</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> line <span class=\"token keyword\">of</span> lines<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    codeToParse<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> html <span class=\"token operator\">=</span> <span class=\"token function\">generateHtml</span><span class=\"token punctuation\">(</span>\r\n        codeToParse<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        index<span class=\"token punctuation\">,</span>\r\n        lines<span class=\"token punctuation\">.</span>length <span class=\"token operator\">+</span> scrollThreshold<span class=\"token punctuation\">,</span>\r\n        language\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">waitForTimeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    index <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This works but the problem is that if the code is too long, then the browser needs to scroll down to follow the new lines, for that I need to use the loop <code class=\"language-text\">index</code> variable to keep track of the current line and use the Puppeteer’s <code class=\"language-text\">page.evaluate()</code> to scroll the page down using the page’s <code class=\"language-text\">window</code> object.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">let</span> prevPosY <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> basePosY <span class=\"token operator\">=</span> <span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">let</span> codeToParse <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> scrollThreshold <span class=\"token operator\">=</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> line <span class=\"token keyword\">of</span> lines<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    codeToParse<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// get full page HTML</span>\r\n    <span class=\"token keyword\">const</span> html <span class=\"token operator\">=</span> <span class=\"token function\">generateHtml</span><span class=\"token punctuation\">(</span>\r\n        codeToParse<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        index<span class=\"token punctuation\">,</span>\r\n        lines<span class=\"token punctuation\">.</span>length <span class=\"token operator\">+</span> scrollThreshold<span class=\"token punctuation\">,</span>\r\n        language\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// set page HTML</span>\r\n    <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> diff <span class=\"token operator\">=</span> index <span class=\"token operator\">-</span> scrollThreshold<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> posY <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token punctuation\">(</span>basePosY <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token number\">16</span> <span class=\"token operator\">*</span> diff<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token constant\">SCALE</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token number\">0</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// scroll down or up if needed</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevPosY <span class=\"token operator\">!==</span> posY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">posY</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> posY<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">behavior</span><span class=\"token operator\">:</span> <span class=\"token string\">'smooth'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> posY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">waitForTimeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    prevPosY <span class=\"token operator\">=</span> posY<span class=\"token punctuation\">;</span>\r\n    index <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>You can access the full code from this blog post in my GitHub repo in the git hash <a href=\"https://github.com/blopa/code-video-creator/tree/d595cf30cec13021fb857f9acb83a853e26610d7\" target=\"_blank\" rel=\"noreferrer\">d595cf30cec13021fb857f9acb83a853e26610d7</a>.</p>\n<p>The project started with this code, but it has now grown a little, and the current code in the <code class=\"language-text\">main</code> branch of the repo has a typing effect for each letter, which makes it way nicer. Feel free to dive into the code on the <a href=\"https://github.com/blopa/code-video-creator/\" target=\"_blank\" rel=\"noreferrer\">code-video-creator</a> project page.</p>\n<p><img src=\"/7b9e49e1375d50b5c5e0ca29e78a0a62/code-to-video-v2.gif\" alt=\"\"></p>\n<p>I hope this was somehow insightful for you, please leave a comment if you have any questions. See you in the next one!</p>","fields":{"slug":"/2022/2022-01-04-create-videos-from-code-snippets-with-this-nodejs-script.en/","path":"/blog/coding/create-videos-from-code-snippets-with-this-nodejs-script/","locale":"en"},"readingTime":{"minutes":6.475},"frontmatter":{"date":"2022-01-04T00:00:00.000Z","title":"Create videos from code snippets with this Node.js script","categories":["coding"]}}},{"node":{"excerpt":"On Phaser 3 you can pre-load your assets in a function…","html":"<p>On Phaser 3 you can pre-load your assets in a function called <code class=\"language-text\">preload</code> so they are ready to use when the function <code class=\"language-text\">create</code> starts. But what if you need to wait for an API request before loading an asset?</p>\n<p>Unfortunately, you can’t simply make the <code class=\"language-text\">preload</code> function an <code class=\"language-text\">async</code> function and force it to wait for your API calls, but there are ways around it.</p>\n<h2 id=\"using-the-rex-await-loader-plugin\" style=\"position:relative;\"><a href=\"#using-the-rex-await-loader-plugin\" aria-label=\"using the rex await loader plugin permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the Rex Await Loader Plugin</h2>\n<p><a href=\"https://github.com/rexrainbow\" target=\"_blank\" rel=\"noreferrer\">rexrainbow</a> is a great developer that brings a lot to the Phaser community, with a <a href=\"https://rexrainbow.github.io/phaser3-rex-notes/docs/site/\" target=\"_blank\" rel=\"noreferrer\">documentation website full of Phaser examples</a> and a bunch of great <a href=\"https://github.com/rexrainbow/phaser4-rex-plugins\" target=\"_blank\" rel=\"noreferrer\">Phaser plugins</a>.</p>\n<p>The <a href=\"https://rexrainbow.github.io/phaser3-rex-notes/docs/site/awaitloader/\" target=\"_blank\" rel=\"noreferrer\">Rex Await Loader Plugin</a> can be loaded in the global game context by adding it to the <code class=\"language-text\">plugins</code> attribute in the Phaser config.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> AwaitLoaderPlugin <span class=\"token keyword\">from</span> <span class=\"token string\">'phaser3-rex-plugins/plugins/awaitloader-plugin.js'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token operator\">...</span>config<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">global</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n            <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'rexAwaitLoader'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">plugin</span><span class=\"token operator\">:</span> AwaitLoaderPlugin<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">start</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Then in the <code class=\"language-text\">preload</code> scene:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'image'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path/to/image.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">rexAwait</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">successCallback<span class=\"token punctuation\">,</span> failureCallback</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// do stuff then call the success callback</span>\r\n            <span class=\"token function\">successCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'image2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path/to/image2.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"using-the-native-phaser-loader\" style=\"position:relative;\"><a href=\"#using-the-native-phaser-loader\" aria-label=\"using the native phaser loader permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the native Phaser Loader</h2>\n<p>To avoid loading external plugins, there is also an option to use the native Phaser Loader, as <a href=\"https://phaser.discourse.group/t/loading-audio/1306/4\" target=\"_blank\" rel=\"noreferrer\">described by yannick</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">asyncLoader</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">loaderPlugin</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        loaderPlugin<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'filecomplete'</span><span class=\"token punctuation\">,</span> resolve<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'loaderror'</span><span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        loaderPlugin<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">doStuff</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">await</span> <span class=\"token function\">asyncLoader</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'image2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path/to/image2.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'image'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path/to/image.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token function\">doStuff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'image3'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path/to/image3.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>I don’t know how to conclude this post so there you go, I hope this will be useful for someone out there in the internet. If this helped you in any way, don’t forget to leave a comment.</p>","fields":{"slug":"/2021/2021-11-18-how-to-load-assets-asynchronously-with-phaser-3.en/","path":"/blog/games/how-to-load-assets-asynchronously-with-phaser-3/","locale":"en"},"readingTime":{"minutes":1.435},"frontmatter":{"date":"2021-11-18T00:00:00.000Z","title":"How to load assets asynchronously with Phaser 3","categories":["games"]}}},{"node":{"excerpt":"After all these years of anticipation, rumors, and even some…","html":"<p>After all these years of anticipation, rumors, and even some conspiracy theories, Metroid F** Dread has finally arrived! It’s been over 10 years since I’ve written a game review, but the last one I wrote was for Metroid: Other M (which you can find <a href=\"https://www.nintendoblast.com.br/2010/09/analise-metroid-other-m-wii.html\" target=\"_blank\" rel=\"noreferrer\">here</a> in Portuguese). As such, I’m excited to return to the task and share my thoughts on this highly-anticipated game.</p>\n<p>Please note that <strong>this post will contain major spoilers</strong>, so read at your own risk!</p>\n<h2 id=\"backstory\" style=\"position:relative;\"><a href=\"#backstory\" aria-label=\"backstory permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Backstory</h2>\n<p>In 2002, Nintendo released Metroid Fusion, a direct sequel to the beloved Super Metroid. As a Game Boy Advance owner with a few games, I eagerly awaited the release of Metroid Fusion, which fell between my birthday and Christmas.</p>\n<p>Unable to wait any longer, I decided to purchase a copy of the Nintendo World magazine, which featured a complete walkthrough of the game, when I saw it on the newsstand. My excitement for the game was palpable, and I couldn’t resist the temptation to get my hands on the magazine right away.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 130.078125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGMklEQVQ4ywXBfVBThwEA8Hdnr9NWqaUgpFAQJOTDF8j310te8nh5LwnJe8nLJwlJ+AhJ+E74SMI3CkhtinwlASMVxU25obYi9G56Va+OcaNbt10ZznZQ1+22urrb7dae3Z/7/YDrowWT3afSkTevDBzZ1DvXGUub3NQmY2G9fH6Dlfq4PLXJTq8z5++Up9fB5Dpj7i6YulOxuC5a3ixPA6dAtq+QNiUUJKWCy4jikgBKgqKLfOUiT7HEkS5xxAtswTxLkGLJ0wI4VSFOswUpJr+RzfJYEcD/DuN3odZn88l/frxxMDvzfPvB//797Idvdl882Pz++Z9/fHHw8ruD7//65MeXz1/cvv6vX97/79/+9PXdD7/y2XvRSiDDE3/7q+0difwLrf43VZo/drZ/NdK/H+n4AwTttbY8Gxv7+uyZ/dGBv0yf3yXJPZfzabT7yc0bL3c/T3PKgNES+neXr+zNJQ/ef383HH7a1v7sYnJ/bGT/zOhva21b9cgX4cb9yfNPg61fDg496e3f7Wz/dvvhD9cuXsAJQMBSzTJ5j+oaft/ZsR2L3k9PH8wknoabd7o6/IR4ynk405b/Ysewuzi0NRL6+0rXl7HYXmtLkqcMDi8BVWSzVGVcjvnMfHAmRiy15sUjPZmxcYTJEjNpTTp6g6L415mjK/HXktjxrabXr+oZtRpHmdqvt/sBpaYBJ3yB1loeLCWNIAGf4pmoyNXLwfMJyk21WVjhoKhN+/ZW6tClJPbzQV4ffHyht7DejWgpPyBQelx1fVyJms7lVjibTwjhk1Kpe2hYiBNlqM5RzY3X59SI3xkxZ6lUkpACGkUKHwy88niKZmmKA6DEwoPsMrla0HupfvExhXhKixn5FfxiDjeLzj2HZG+5f1LA4tpPF0+cLlgFi6dFOY96Du3MFTYOfwCAYkulxKrEzMdMA71g06eK86uyDkKs4+hMJQIZWsEICU6wRWBXCe0ffa/+xw6sWnLD+LG1hbbEo28AudJY5+6E9CRDDM/nVn1+uHEj31jNLqeqvKTWSZr9EKqwU2+zQY6VKJ/Q0hpEzGKQE6kT3siEABodhLRGrgrVIwaK51wYvTWOu+BTTHFkEY9mLNYQRdqs1QXtjXlWvLRSgrDFGpEclgnoPn0pkFsuyGbLJRDhsta7HD7UHRaeFh1lm9npvZrrnzZiym6y6MZU9tpC/spMtsNmlCtJDNNWoUpcrwLsVkmDO99BFTV1EMsX5EFnntdBC/pZ6OiopaUhzj/kgPI/mC44+Czn5mzW3Uu416ZCNXochygTDHS32Cb6Nc1+SSw5ERgKWAx5lLkoFoXqm9AWFT3qKQ21e5wW2nCsyG5ibn9Y9VFGbTNbXA59Q60BiLT3R3rOBVrikf6z3vBZvJpUWDu8k3OJOta47ZWdB6pQkOSKJAiK2QnmcPDI3kPuewN6ksQ9LhyIdkVj8aHunmg42u8JduqsbqG9y3dm8FY3/dEdYX8PCCmUGG5AMVKP415D7k8TbzxeI2sILkXJAZPVNz72Xld3X6C53RNo19aEVDoFKBT2NssHliYYmBeSSWAEgREM0RAaGGojX7ca2Fq1UKfnACimV2vwKhRmy6pysRaGgL/clk2gzILSEll9L0qq9TgPgpUYplKocTPCGTFmyUVMk5zjNoCAnZLWufgiCd3g0oprGkwEa66zMGCjeWoq6mL+1qAo2squdVS6HWITIcKEFY3KQkRU5mIfcSNFQG9L2XCE0x0suTAGTg+VLQwWrCZomTM5qbGyC+dEV6ZOzwwWzwyeXEmcDHlZBh7ThpRL1dKB8b6hs/3AYMfJa4lj1xPHbs8eXku8uRI73ON/Kz34xuq7R6+OvTYbf+tn72YtTxy/OJafCudM2vOkcIVGh33yycPPdnYAwkwEAm5bDdUZ0F0bkXmdOo/PUeslHU5tvQ+Jd5OBgL2r0xnvsdqqlZM1JxRwJYwit259dO/efQBSIWZbLYRR46GquFWi1plgDWJ1OpyeOlRPwJjRSDmNlNNAeaVqjMkVgzyuGlOlFzJrN28DQrlCU01yZXDYISYxESiGmJWgGJIr1CpIrZSrlHI1IlOp1JiOL4NAPp/N4ypR9cbG5v1f3Ps/0xBG1rtkkhMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nintendo world 52\"\n        title=\"nintendo world 52\"\n        src=\"/static/69f337d7ba7ebab784eac20fbd7e431c/42a19/nintendo_world_52.png\"\n        srcset=\"/static/69f337d7ba7ebab784eac20fbd7e431c/e3135/nintendo_world_52.png 256w,\n/static/69f337d7ba7ebab784eac20fbd7e431c/06341/nintendo_world_52.png 512w,\n/static/69f337d7ba7ebab784eac20fbd7e431c/42a19/nintendo_world_52.png 1024w,\n/static/69f337d7ba7ebab784eac20fbd7e431c/e8464/nintendo_world_52.png 1536w,\n/static/69f337d7ba7ebab784eac20fbd7e431c/41183/nintendo_world_52.png 1603w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>As a result of my good behavior throughout the year, Santa gifted me with a copy of Metroid Fusion for Christmas. I was able to complete the game before New Year’s Eve, and I am proud to say that I did so without resorting to using the walkthrough.</p>\n<p>Despite its more linear nature compared to other games in the franchise, Metroid Fusion still managed to deliver an engaging story and challenging shinespark puzzles.</p>\n<p>Two years after the release of Metroid Fusion, Nintendo surprised fans with the release of Metroid: Zero Mission, a remake of the original Metroid game. While it was certainly a good time to be a Metroid fan, many were eagerly anticipating a sequel to Fusion.</p>\n<p>Little did we know that we would have to wait nineteen long years to find out what happened to Samus and get a new canonical Metroid game in the timeline.</p>\n<h2 id=\"intro\" style=\"position:relative;\"><a href=\"#intro\" aria-label=\"intro permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intro</h2>\n<p>This year’s E3 event was marked by Nintendo’s surprise announcement of Metroid Dread, which immediately generated widespread excitement and buzz on social media, and the best part was that the game would even release in the same year! WHAT!?</p>\n<p>The game, developed by Spanish company MercurySteam (known for their work on the Metroid: Samus Returns remake of Metroid II: Return of Samus), was slated for release later in the year, much to the delight of fans.</p>\n<p>While Metroid: Samus Returns received mixed reviews from critics, I personally found the game to be enjoyable, though not particularly groundbreaking. Some of the level design choices didn’t quite appeal to me, but I was still thrilled to see the return of 2D Metroid gameplay.</p>\n<p>When the package for Metroid Dread arrived at my house, I was so excited to play the game that I even forgot to film an unboxing video for <a href=\"https://playreplay.com.br/\" target=\"_blank\" rel=\"noreferrer\">PlayReplay</a> 😅!</p>\n<p>After a satisfying weekend of gameplay, I completed Metroid Dread with a total of 11 hours and 30 minutes played and 87% of items collected. While it may not be a world record, I’m proud of my progress and the amount of items I was able to collect.</p>\n<p>Now, let’s get started with my review of the game.</p>\n<h2 id=\"level-design\" style=\"position:relative;\"><a href=\"#level-design\" aria-label=\"level design permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Level Design</h2>\n<p>Metroid Dread features 8 interconnected areas, connected by tunnels, elevators, and teleports. These connections are seamlessly integrated, creating a believable alien world with both wild and technological elements, and ample opportunities for hidden secrets to be unveiled in every corner.</p>\n<p>MercurySteam managed to capture exactly what makes a Metroid game a Metroid game, and many times I thought I was taking a super secret path and going off the intended path, only to be pleasantly surprised when I ended up exactly where I was supposed to go and found some main power-up or boss. The game is outstanding at using level design to guide you to the right path.</p>\n<p>Metroid Dread is full of secrets and items that will keep players searching and challenged as they try to figure out how to obtain them. I personally encountered many items that initially seemed out of reach due to my lack of certain power-ups, only to later realize that I simply needed to <em><strong>git gud</strong></em> and use shinespark creatively to get them. MercurySteam deserves credit for this aspect of the game. 👏 MercurySteam 👏.</p>\n<p>Overall, the balance of item and boss acquisition is well-paced and keeps players engaged with the game for the most part. However, there are some E.M.M.I areas that can break the rhythm and be frustrating.</p>\n<p>In addition to these challenges, MercurySteam has also included the possibility of <em>sequence breaks</em> in the game, allowing players to acquire power-ups or face bosses earlier than planned. For instance, with the right combination of Speed Boost and shinespark skill, it’s possible to obtain the Gravity Suit earlier than intended, as demonstrated in the video below.</p>\n<p>\n      <div class=\"gatsby-remark-local-videos\">\n        <video controlsList=\"nodownload\" controls loop preload style=\"width: 100%\" >\n          <source src=\"/be78cceb0948b37238278db5893ca310/sequence-break.mp4\" type=\"video/mp4\">\n        </video>\n    </div>\n    </p>\n<p>One aspect of the game that didn’t quite meet my expectations was the variety and style of the areas. Even after playing the game multiple times, I found it difficult to identify which area of the game I was in just by looking at a random room.</p>\n<p>This is in contrast to my experience with Super Metroid, which has such distinctive and memorable room designs that it’s easy to identify which area you’re in. However, I understand that this comparison isn’t entirely fair, as Super Metroid is one of my all-time favorite games and I have spent countless hours playing it at various points in my life.</p>\n<p>It would be great to see more variety and memorable locations in the game. Perhaps we will see this in a future DLC? I certainly hope so.</p>\n<h2 id=\"power-ups\" style=\"position:relative;\"><a href=\"#power-ups\" aria-label=\"power ups permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Power-Ups</h2>\n<p>Metroid Dread brings back several classic power-ups from the franchise, such as the Grapple Beam and Screw Attack, as well as introduces new power-ups that I hope will become staples of the franchise, such as the Diffusion Beam and the innovative Flash Shift.</p>\n<p>However, the game also includes some less useful items, such as Spin Boost and Pulse Radar. While the Pulse Radar has some utility, the Spin Boost feels like a unnecessary addition.</p>\n<p><img src=\"/e46bfcf917c7367ea5cfc97c2cdb70a6/please-god-no.gif\" alt=\"\"></p>\n<p>Now let’s focus on the positive aspects of the game. The Flash Shift, a new power-up that allows Samus to perform a horizontal dash, is particularly useful for evading E.M.M.Is and dodging challenging boss attacks.</p>\n<p>Additionally, when combined with shinespark, Flash Shift enables players to move swiftly through the level and solve intricate puzzles that MercurySteam has included in the game. It’s a power-up that truly lets players feel <em>like pros</em> as they navigate through the game.</p>\n<p><img src=\"/1d32f69e8946db8a9af7230c736f15c7/flash-shift.gif\" alt=\"\"></p>\n<h2 id=\"bosses\" style=\"position:relative;\"><a href=\"#bosses\" aria-label=\"bosses permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bosses</h2>\n<p>Metroid Dread features a high number of boss encounters and is considered to be one of the hardest games in the franchise. However, many of these encounters involve repeated bosses with minimal variations.</p>\n<p>According to reports, the game was originally intended to have a wider variety of bosses, but due to the need to meet a specific release date, these had to be cut and replaced with repeated bosses.</p>\n<p>Despite this limitation, the boss battles in Metroid Dread are still epic and showcase Samus’s badassery. It’s a shame that there wasn’t more variety in the bosses, but the battles themselves are still exciting.</p>\n<p>The first boss in Metroid Dread serves as a tutorial and sets the stage for the rest of the game with a thrilling battle and impressive cutscenes.</p>\n<p>As players progress through the game, they have the opportunity to engage in <em>sequence breaks</em>, which allow them to acquire certain power-ups and face bosses in different ways. Using these power-ups in these boss encounters can lead to unique interactions that feel like secret discoveries – a classic element of the Metroid series.</p>\n<p>Most bosses have an intended way to defeat them, as well as a secret method that can be unlocked through <em>sequence breaks</em>, shinesparking, or advanced skill.</p>\n<p>The final boss of the game is among the hardest in the franchise and will likely take multiple attempts to defeat. It reminded me of the challenging yet rewarding experience of playing Megaman on my Game Boy Classic, where dying repeatedly was necessary to learn all the patterns.</p>\n<h2 id=\"music\" style=\"position:relative;\"><a href=\"#music\" aria-label=\"music permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Music</h2>\n<p>The soundtrack of Metroid Dread is generally good, but some of the tracks feel like they are borrowing heavily from Super Metroid 🤷.</p>\n<p>As a fan of Super Metroid, I have a deep appreciation for its epic music and can recite many of the tracks by heart. Despite playing Metroid Dread multiple times, I still struggle to fully remember any music that isn’t reminiscent of Super Metroid.</p>\n<p>I wish that playing a new Metroid game was like playing a new Zelda game, where the soundtrack is consistently epic and memorable. While some songs in the Zelda series are the same from the first game, the newer tracks are just as good, if not better, than the classic ones. For example, the Spirit Tracks soundtrack gives me chills every time I hear it – it’s truly excellent. 👌👌👌</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/1-tJnmNP5ow?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<h2 id=\"difficulty-level\" style=\"position:relative;\"><a href=\"#difficulty-level\" aria-label=\"difficulty level permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Difficulty Level</h2>\n<p>Metroid Dread is known for its challenging gameplay, but personally, I didn’t find it as difficult as I had read on social media. While I consider myself a big fan of the franchise, I have never been particularly skilled at playing the games.</p>\n<p>Many players have compared the game’s difficulty to that of titles from developer FromSoftware, specifically the Souls series. As someone who has not played Dark Souls, I can’t say for certain, but in my imagination, those games seem significantly harder.</p>\n<p>Despite the game’s overall challenge, it is quite generous with save rooms and even includes auto-saving for the first time in the franchise. If you die during a boss battle, the game automatically saves and you can immediately return to the boss room to try again.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEElEQVQozx2NSW/UQBSE/Q8QGbv7dffr3W672xNnkknsbCSQTBhCgtgjcUdInNklbiiMhDjkCvxZ5Eh1qaqvVBlBX6BvZDkIb4WnoG2OYSJaqqfoIzNT0C0YTyVlRoHexbKRZYGeoM8oN4TbAOpe7E6PF2dHJ1fLy+eLR48vnk277a3t/dPF+dBsvDh5uHxw9uTi6a6PgWnCDeUmo4CMSbMG949OVterm+vVza/fr6/e/Pvz9+L88tXLq48fPr199/77568/vnxbXf/s2pnPOQNJAbMJ4ZKIkoiC6+PhYL2KpatZwbpu7nzjfJPSRlM2KXY7G/NoyjXAiggkIic8qwiPVNQUy4L3dyZhQknOaM6U8mXZeF8zrvK7dLIG1d3iYAIVEYFiJKIqRFYTkShGioHiDpMNSA4IOQuhPVssh35PKseJ4DBW2zBikWJLsSYiY1QqKluQhEpHRaSoqdQUeSEg55BzQVCNiUwULUVyCysqGcHMgragNplumC6p2hz/tQHtQXtmPNMORtuD3gIsQTbMzJixoCzoLHBXcrcn/BL9unCJ257bfeE64Ro+qhN+X7ie28jtunBLLPeE99wF7rIo6yjDXNXHuhlUPZVhhlWP1aEKR7c6VGHAaobVVIbhFpurcRJlyFqbkk29SQubBtceuBRtmpum102vY6/jjo5zM4aHNvW2PbVp16Zk0tSm/+DiZ3EIEiwOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"metroid dread game over\"\n        title=\"metroid dread game over\"\n        src=\"/static/141104f962f62dbda2c37d2c6e8fec68/42a19/metroid-dread-game-over.png\"\n        srcset=\"/static/141104f962f62dbda2c37d2c6e8fec68/e3135/metroid-dread-game-over.png 256w,\n/static/141104f962f62dbda2c37d2c6e8fec68/06341/metroid-dread-game-over.png 512w,\n/static/141104f962f62dbda2c37d2c6e8fec68/42a19/metroid-dread-game-over.png 1024w,\n/static/141104f962f62dbda2c37d2c6e8fec68/bbbf7/metroid-dread-game-over.png 1280w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"why-should-you-buy-it\" style=\"position:relative;\"><a href=\"#why-should-you-buy-it\" aria-label=\"why should you buy it permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why should you buy it?</h2>\n<p>The Metroid franchise has struggled to find success in the past decade, leading to the emergence of many indie Metroidvania games that pay tribute to the genre-defining original.</p>\n<p>Despite its flaws, Metroid Dread is a great game and represents a step in the right direction for the franchise. With the success of the Nintendo Switch, there is a strong possibility that it will become the best-selling Metroid game ever.</p>\n<p>Why should you purchase it? To show Nintendo that there is still a dedicated fan base for the Metroid franchise and to demonstrate that we want more games like Metroid Dread.</p>\n<p>The more successful these games are, the more resources Nintendo will allocate to their development and the more polished they will become. It is possible that one day, MercurySteam will give us a masterpiece like Super Metroid (although some may already consider Metroid Dread to be superior).</p>\n<p>While it may be tempting to hack your Nintendo Switch or download and play the game on an emulator, it is important to resist the urge to pirate games.</p>\n<p>Not only because it’s illegal, and <a href=\"https://knowyourmeme.com/memes/piracy-its-a-crime\" target=\"_blank\" rel=\"noreferrer\">you wouldn’t steal a car</a>, but doing so leads to fewer sales and fewer opportunities for more games like this to be made. For the price of about $60, you can have hours of entertainment – a relatively small investment compared to the cost of ordering Uber Eats three times. Instead of ordering food this week, consider cooking a healthy meal and using the saved money to purchase Metroid Dread.</p>","fields":{"slug":"/2021/2021-11-07-buy-metroid-dread.en/","path":"/blog/games/buy-metroid-dread/","locale":"en"},"readingTime":{"minutes":9.45},"frontmatter":{"date":"2021-11-07T00:00:00.000Z","title":"Buy Metroid Dread","categories":["games"]}}},{"node":{"excerpt":"Medium is a great platform to share your blog posts with a…","html":"<p>Medium is a great platform to share your blog posts with a wider audience, but it is a bit annoying that to have code snippets you need to create a GitHub Gist (<a href=\"https://medium.com/pythoneers/9-different-ways-to-embedded-code-in-medium-9213cb4c0a2e\" target=\"_blank\" rel=\"noreferrer\">or others</a>) and embed it into the post.</p>\n<p>As I write a lot of tutorials in my blog, adding all my code snippets one by one to GitHub Gist takes a lot of time, and I’m very lazy, so let’s automate that.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 574px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.453125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVQoz42Q3U7bMBiGfcRVcCHcELfAdUxQaB0gTqo0U7eAaM45adayE1oJDpg07WhKSjb7i6vEJOTHhiRb1Y3fR59sf6/9yLLRfD7/+Gl4MnJOzpyz0chtGL2K67qO48xmMzSZTPZ6+7tHhx+0w56GNYwx1gghxsuYpqlpmud56OLrhUGIZnzeOxp2u739g66uE8uyBoOB1e9b/f7gCbZtE0Km0ynyvC+dA2wahBCdtBh1Q3TdHA5N2yb635ys9g2M8Xg8Rpxz3/cXawRBsAiCW8auj49vTk9DgEUQLP7F933OOVLPIctSKXW5tfVte3vVPuUZWVaVUuq3655vbHibm/HV1Sp8W1ZStvP3nZ2fnc568r9clmWW5zQGEFGSCSll1SBr5Q3QfZ5LWS1F+iMUfsianwnF3Z1SqiqK+rVr1660do2KopBKllLF90qkuUiSvCjUO6hlIZLb8BcDAKAAEEVROzLGKK2TpuVtMUZ5xOM4ppRmWYbSNG0PUcYaq5Gbaj0A4H9YAjC+5EkSMwaP8gMi+Zs9KpVdrQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"code snippet to gist\"\n        title=\"code snippet to gist\"\n        src=\"/static/202c3fa6b99920b5d413ee8045e8c575/312c2/code-snippet-to-gist.png\"\n        srcset=\"/static/202c3fa6b99920b5d413ee8045e8c575/e3135/code-snippet-to-gist.png 256w,\n/static/202c3fa6b99920b5d413ee8045e8c575/06341/code-snippet-to-gist.png 512w,\n/static/202c3fa6b99920b5d413ee8045e8c575/312c2/code-snippet-to-gist.png 574w\"\n        sizes=\"(max-width: 574px) 100vw, 574px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"code-snippets-on-gatsby\" style=\"position:relative;\"><a href=\"#code-snippets-on-gatsby\" aria-label=\"code snippets on gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code snippets on Gatsby</h2>\n<p>To add code snippets in Gatsby, you only need to use the markdown triple backtick and the language that you’re using, like the example below.</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\">javascript</span>\r\n<span class=\"token code-block language-javascript\">    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello world!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\r\n<span class=\"token punctuation\">```</span></span></code></pre></div>\n<p>With that, Gatsby will generate an HTML like the one below. This will be important for later.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gatsby-highlight<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-language</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pre</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>language-javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>code</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>language-javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n            <span class=\"token comment\">&lt;!-- the span element is not exactly like this, this is just an example --></span>\r\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>console.log('hello world!');<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\r\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>code</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pre</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"the-problem\" style=\"position:relative;\"><a href=\"#the-problem\" aria-label=\"the problem permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The problem</h2>\n<p>Medium has a super useful <a href=\"https://medium.com/p/import\" target=\"_blank\" rel=\"noreferrer\">tool to import any post from anywhere into a Medium story</a>, but sadly every code snippet will be ignored by it.</p>\n<p>Ideally, I could have a special URL for my blog posts where all my code snippets would be replaced by a GitHub Gist URL with that code, and this is exactly what I’m going to do next 😎.</p>\n<h2 id=\"creating-a-special-url-for-medium\" style=\"position:relative;\"><a href=\"#creating-a-special-url-for-medium\" aria-label=\"creating a special url for medium permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating a special URL for Medium</h2>\n<p>I want to be able to add <code class=\"language-text\">/medium-import</code> to the end of my blog posts’ URL and load a special post page with all code snippets replaced by GitHub Gists.</p>\n<p>On the <code class=\"language-text\">gatsby-node.js</code> file, in the <code class=\"language-text\">createPages</code> function, I will create an extra page with the <code class=\"language-text\">/medium-import</code> path in the end.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> postsResult<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> post <span class=\"token keyword\">of</span> posts<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/medium-import</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/templates/MediumPost.jsx'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">mediumHTML</span><span class=\"token operator\">:</span> <span class=\"token keyword\">await</span> <span class=\"token function\">generateMediumHTML</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>All my blog posts can be accessed via <code class=\"language-text\">/blog-post-url</code> and also <code class=\"language-text\">/blog-post-url/medium-import</code> now.</p>\n<h2 id=\"generating-a-different-html-for-medium\" style=\"position:relative;\"><a href=\"#generating-a-different-html-for-medium\" aria-label=\"generating a different html for medium permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Generating a different HTML for Medium</h2>\n<p>For the <code class=\"language-text\">generateMediumHTML</code> function, I will use the <code class=\"language-text\">querySelectorAll</code> to find all the HTML nodes with code snippets and replace them with GitHub Gists URLs.</p>\n<p>Since all of this code will be executed on Node, I will need <a href=\"https://github.com/jsdom/jsdom\" target=\"_blank\" rel=\"noreferrer\">jsdom</a> to be able to manipulate the <code class=\"language-text\">HTML DOM</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> jsdom <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateMediumHTML</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">htmlString<span class=\"token punctuation\">,</span> postTitle</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> gistUrls <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">generateGistUrlsForPost</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">,</span> postTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> dom <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">jsdom<span class=\"token punctuation\">.</span>JSDOM</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.gatsby-highlight'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        element<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> gistUrls<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>All code snippets will be replaced by <code class=\"language-text\">&lt;div class=\"gatsby-highlight\" data-language=\"javascript\">https://gist.github.com/some-gist-id&lt;/div></code>.</p>\n<h2 id=\"using-the-github-gist-api\" style=\"position:relative;\"><a href=\"#using-the-github-gist-api\" aria-label=\"using the github gist api permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the GitHub Gist API</h2>\n<p>I will use the <a href=\"https://docs.github.com/en/rest/reference/gists#create-a-gist\" target=\"_blank\" rel=\"noreferrer\">GitHub Gist API</a> for two things, to get all my existing Gists to avoid creating the same Gist twice with a <code class=\"language-text\">GET</code> request, and to create a new Gist with a <code class=\"language-text\">POST</code> request.</p>\n<p>Since the code will be executed in Node, I will use <a href=\"https://github.com/node-fetch/node-fetch\" target=\"_blank\" rel=\"noreferrer\">node-fetch</a> for the API requests.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> gistAccessToken <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GITHUB_ACCESS_TOKEN</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Get all existing gists under my github username</span>\r\n<span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/gists'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">token </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>gistAccessToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token string-property property\">'Content-type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> gistAccessToken <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GITHUB_ACCESS_TOKEN</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// create a new gist</span>\r\n<span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/gists'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">token </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>gistAccessToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token string-property property\">'Content-type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'Code for blog post'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">public</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token punctuation\">[</span><span class=\"token string\">'file-name.js'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">'console.log(\"hello world!\");'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the <code class=\"language-text\">generateGistUrlsForPost</code> function, I will again use the <code class=\"language-text\">querySelectorAll</code> function to get the code via the <code class=\"language-text\">textContent</code> property and then send it to GitHub via the Gist API, for that I will need a <a href=\"https://github.com/settings/tokens\" target=\"_blank\" rel=\"noreferrer\">GitHub Personal Access Token</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateGistUrlsForPost</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">htmlString<span class=\"token punctuation\">,</span> postTitle</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> gistAccessToken <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GITHUB_ACCESS_TOKEN</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> dom <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">jsdom<span class=\"token punctuation\">.</span>JSDOM</span><span class=\"token punctuation\">(</span>htmlString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.gatsby-highlight > pre > code'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> slug <span class=\"token operator\">=</span> <span class=\"token function\">convertToKebabCase</span><span class=\"token punctuation\">(</span>postTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// Get all existing gists under my github username</span>\r\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/gists'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">token </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>gistAccessToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string-property property\">'Content-type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> responseData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> responseData<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> fileNames <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> gistUrls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> element <span class=\"token keyword\">of</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> code <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> extension <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-language'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> fileName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>slug<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-script-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>extension<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// if the gist for the file already exists, then don't create a new one</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fileNames<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> existingGist <span class=\"token operator\">=</span> responseData<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            gistUrls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>existingGist<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">nodeFetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/gists'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">token </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>gistAccessToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token string-property property\">'Content-type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                    <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Code for post \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>postTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token keyword\">public</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token punctuation\">[</span>fileName<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                            <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> code<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            gistUrls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        index <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> gistUrls<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"rendering-the-new-html\" style=\"position:relative;\"><a href=\"#rendering-the-new-html\" aria-label=\"rendering the new html permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rendering the new HTML</h2>\n<p>In the React component template, I have access to a new attribute called <code class=\"language-text\">mediumHTML</code> inside the <code class=\"language-text\">pageContext</code>, and that is the new HTML with all code snippets replaced with GitHub Gists.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MediumPostTemplate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> pageContext <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> markdownRemark <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> markdownRemark<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> mediumHTML <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> pageContext<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>article<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>header<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>section\r\n                dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> mediumHTML <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MediumPostTemplate<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query MediumPostBySlug($slug: String!, $categoryImage: String) {\r\n        markdownRemark(fields: { slug: { eq: $slug } }) {\r\n            frontmatter {\r\n                title\r\n            }\r\n        }\r\n    }\r\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I can go into the <a href=\"https://medium.com/p/import\" target=\"_blank\" rel=\"noreferrer\">Medium import tool</a> and import any post via the <code class=\"language-text\">/blog-post-url/medium-import</code>.</p>\n<p>With all this automation in place, expect to see a lot more <a href=\"https://pablopirata.medium.com/\" target=\"_blank\" rel=\"noreferrer\">Medium posts from me</a> 😊.</p>","fields":{"slug":"/2021/2021-10-24-how-to-import-gatsby-posts-into-medium-with-gist-code-snippets.en/","path":"/blog/coding/how-to-import-gatsby-posts-into-medium-with-gist-code-snippets/","locale":"en"},"readingTime":{"minutes":4.65},"frontmatter":{"date":"2021-10-24T00:00:00.000Z","title":"How to import Gatsby posts into Medium with Gist code snippets","categories":["coding"]}}},{"node":{"excerpt":"Yes, that’s right, there is now a game version of this…","html":"<p>Yes, that’s right, there is now a game version of this website. Tired of clicking around boring pages and reading stuff? What about dive into a journey of a top-down RPG-like game and find the blog posts and read them in-game?</p>\n<p><img src=\"/d50653e4a6a6053367c816a50f543af8/pablo-gg-the-game.gif\" alt=\"pablo.gg - The Game\"></p>\n<h4 id=\"play-it-here\" style=\"position:relative;\"><a href=\"#play-it-here\" aria-label=\"play it here permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"/en/game\">Play it here!</a></h4>\n<p>You can also check the source-code for on my <a href=\"https://github.com/blopa/top-down-react-phaser-game\" target=\"_blank\" rel=\"noreferrer\">GitHub repository for this project</a>.</p>\n<h2 id=\"ok-but-why\" style=\"position:relative;\"><a href=\"#ok-but-why\" aria-label=\"ok but why permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ok, but why?</h2>\n<p><img src=\"/f1547924a1c5e48fc3d7132349267d59/but-why.gif\" alt=\"But why tho?\"></p>\n<p>The idea was born when I added Konami Code to my website, which makes the Matrix source-code show up in the background of the website (try it now), which although is super cool, I was thinking it would be even cooler to make the Konami Code open a game or something, and since I already have 2 years of experience in Phaser, I decided to make a silly game just as an MVP.</p>\n<p>Around the same days, I found out about the <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">grid-engine Phaser plugin</a> that makes it SO much easier to create a top-down RPG-like game, that I decided to make a game with it, and also because my first “programming” experience date backs to 2002 when I was creating games exactly like this with RPG Maker.</p>\n<p>From then on the project started to get a little more ambitious, and I thought “what if I show the blog posts in-game?”, all the blog data is available in React via <code class=\"language-text\">GraphQL</code> anyway, so it shouldn’t be too difficult.</p>\n<h2 id=\"using-react-as-ui-for-phaser\" style=\"position:relative;\"><a href=\"#using-react-as-ui-for-phaser\" aria-label=\"using react as ui for phaser permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using React as UI for Phaser</h2>\n<p>Phaser works by rendering pixels inside a <code class=\"language-text\">canvas</code> element in the DOM, and it’s great, but one of the great features of web development is the power of the DOM and CSS to create great UI elements, and you can’t do that with Phaser alone.</p>\n<p>The simplest way to use Phaser with React is with a functional component like the one below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> Phaser <span class=\"token keyword\">from</span> <span class=\"token string\">'phaser'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GameComponent<span class=\"token punctuation\">;</span></code></pre></div>\n<p>And that works fine for most cases, but to make Phaser be able to communicate back and forth with React, like to show a menu item or a dialog box, I will dispatch JavaScript events between Phaser and React.</p>\n<p>The best way to do it would be with some sort of state management tool like <a href=\"https://facebook.github.io/flux/\" target=\"_blank\" rel=\"noreferrer\">Flux</a>, but since this is just a very small project, dispatching JavaScript events will work for now. Check the example below how to do it:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// React component</span>\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>DialogBox\r\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\r\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Phaser scene</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxFinishedEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token comment\">// Do whatever is needed when the dialog is over</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"/18452438d2251249518c712d8873e89a/react-dialog-box.gif\" alt=\"Dialog box\"></p>\n<p>If you want more details on how to create a React dialog box for your Phaser game, <a href=\"/en/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/\">check my blog post on it</a>.</p>\n<h2 id=\"integrating-phaser-with-gatsby\" style=\"position:relative;\"><a href=\"#integrating-phaser-with-gatsby\" aria-label=\"integrating phaser with gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integrating Phaser with Gatsby</h2>\n<p>Gatsby is a static site generator powered by React, but Phaser is a client only package (I mean of course, why would you need Phaser in the backend?), so whenever Gatsby was building my game page I’d get SSR errors because Phaser was trying to access client-side only APIs.</p>\n<p>To solve this, I used the React hook <code class=\"language-text\">useEffect</code> to dynamically import all my Phaser-related modules, as <code class=\"language-text\">useEffect</code> is only executed on the client-side.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// to use async/await inside a useEffect we need to create an async function and call it</span>\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// Need to initialize Phaser here otherwise Gatsby will try to SSR it</span>\r\n            <span class=\"token keyword\">const</span> Phaser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phaser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GameScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../game/scenes/GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GridEngine <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'grid-engine'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>GameScene<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"creating-the-map\" style=\"position:relative;\"><a href=\"#creating-the-map\" aria-label=\"creating the map permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating the map</h2>\n<p>To create the map I will again use Tiled, which is a FOSS in which you can create maps and use them in almost any game engine.</p>\n<p>The <code class=\"language-text\">tileset</code> I’m using for my map is the <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">Zelda-like tileset</a> created by <a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, which includes indoor and outdoor tilesets.</p>\n<p>First I will create the <code class=\"language-text\">tileset</code> on Tiled and set a property called <code class=\"language-text\">ge_collide</code> to <code class=\"language-text\">true</code> on all tiles I want to have a collision with the hero</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.234375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADCklEQVQoz1XQ7U8SAQDH8ftHetHWqq21arW2SmsrKzezLCxrWhoCqSkgGA9nkgy544DjZIrDEgh5LAS8B0Hz6ugQtOfZs5sZhT0YMsAebLW2pr3q8+L77vfmB7AsS9O3o9HR6KpYLJZMJlmWTSRXTE5OMgxD0/Td/yUSibFbt4B0On3nDu33uwhyCB8OkSQZjYyG8NCA83o31jPocN7w38RxPBwOD/0TDA4FAm6n0+t2A4VCYZymQ6EwQRCRSISiRqhINOjznDpYunHttvVrNh85XMbj1jQKuCiKIgiCoigMSjav3VJ7uhbIZDJzb2ZTc7Ppd6lP8+mP8+8zXz6/fPKAf6ysZEdRyZ6DVZxT56urhMJmE2ZCUeNKOy9WFO0R8XhANrvI3ntM0PFRdmos8Whs4iE9NR2K0OKz1aLyQ9JWWbNYCfLq5Hwul1NZfqDscHFp2zmOsfkkpmoFsouZ2OPXI/dfUVPPhyaeBuPTweSLwHhCq2xrqqsXX2oX8Jvqq2sbKjkVe0v2bS8u2rpbeqG+S9YCd6qAhYWFXHZx+fu3H9++/lztn9+/5mZmirmq/YIrO/jaDefhdTyD4IJQ23EZ0em61BqDVdNulMpErSvjTCaztPQ1XyjkC4VcPv99eXnm5bPTAhGnAaxo1bVp0CaFVgaqIR2CIIgeQQxXO9Wo+IpcvnrYXOrt29S7ValUav7Dp+mHk/2SExaFABI29Cn4Rkio1nbo1aBcIoVhpMvSqdW3X+vrAbLZbDw+QRAUwzCxWIxhmLvxOBkM6OoqhEdLa45WmhtPmNqqUcwIq5SQCoRUyl6LxYBiFksfkMvlSIKwWq02u91ms9kGBuwOh72/v5FzfNemnQqxVAcqISVo1ENKSUOHvAWUCCxmoxk19Pf1APl83uVyqdVqGIahf7QQ1otJFKKWs2c6ulQ6DIW1Gr1eY+4xdWNwby+iMZtk+m6TdQAgSYqiqOHhYZ/P5/F4/H4/gRP4CO4Le71er93ndnk9gw6Hx+0hcCIUCERHIuQ467xBDt4M/wXnMNqSjYFawgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Collision property on Tiled\"\n        title=\"Collision property on Tiled\"\n        src=\"/static/efa06188b879de0f05ddbcaf752eebf0/42a19/collision-property-on-tiled.png\"\n        srcset=\"/static/efa06188b879de0f05ddbcaf752eebf0/e3135/collision-property-on-tiled.png 256w,\n/static/efa06188b879de0f05ddbcaf752eebf0/06341/collision-property-on-tiled.png 512w,\n/static/efa06188b879de0f05ddbcaf752eebf0/42a19/collision-property-on-tiled.png 1024w,\n/static/efa06188b879de0f05ddbcaf752eebf0/f7f62/collision-property-on-tiled.png 1096w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Collision property on Tiled</figcaption>\n  </figure></p>\n<p>It’s important to create your map with multiple layers, so some parts can be below and some parts above the hero.</p>\n<p><img src=\"/641730c3226f9772bd3bf993dad3d5a2/tiled-map-with-layers.gif\" alt=\"Map with layers\"></p>\n<p>After the map is done, <a href=\"/en/blog/games/automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script/\">I will embed the tileset into the map</a>, and then I can simply import the map and <code class=\"language-text\">tileset</code> file into my game and load them in Phaser.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> mainMapaJson <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/main-map.json'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> tilesetImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/tileset.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">tilemapTiledJSON</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main-map'</span><span class=\"token punctuation\">,</span> mainMapaJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> tilesetImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"using-the-grid-engine-phaser-plugin\" style=\"position:relative;\"><a href=\"#using-the-grid-engine-phaser-plugin\" aria-label=\"using the grid engine phaser plugin permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the grid-engine Phaser plugin</h2>\n<p>As I mentioned at the beginning of the post, creating a top-down RPG Maker style game using the grid-engine plugin is easy-peasy, just configure your game to use arcade physics and add grid-engine as a plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">physics</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'arcade'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">plugin</span><span class=\"token operator\">:</span> GridEngine<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">mapping</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I can access the plugin via <code class=\"language-text\">this.gridEngine</code> inside any Phaser game scene. The next step is to create a sprite and move it with the grid-engine plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'main-map'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> gridEngineConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">characters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> heroSprite<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> cursors <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">createCursorKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>up<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>down<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This code was pretty much copied and pasted from <a href=\"https://annoraaq.github.io/grid-engine/examples/basic-movement.html\" target=\"_blank\" rel=\"noreferrer\">their official documentation page</a>.</p>\n<p>As I mentioned before, to make collisions work automatically with a map created on Tiled, just add the property <code class=\"language-text\">ge_collide</code> set to <code class=\"language-text\">true</code> for the tiles the hero is supposed to collide with.</p>\n<p>Notice that this will make the hero move and collide with objects, but there is no walking animation. To create new sprite animations I will use the <code class=\"language-text\">this.anims.create()</code> function, and then play that animation every time the grid-engine tells me that the player moved, with the <code class=\"language-text\">movementStarted</code>, <code class=\"language-text\">movementStopped</code> and <code class=\"language-text\">directionChanged</code> events dispatched by the grid-engine.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStarted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span>direction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStopped</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">directionChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">direction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> direction<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frames</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_01</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_02</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frameRate</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">repeat</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">yoyo</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>I go into more detail on how the game mechanics were made <a href=\"/en/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/\">in this post</a>.</p>\n<h2 id=\"getting-posts-data-from-gatsby\" style=\"position:relative;\"><a href=\"#getting-posts-data-from-gatsby\" aria-label=\"getting posts data from gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting posts data from Gatsby</h2>\n<p>Gatsby makes all your static data available via <code class=\"language-text\">GraphQL</code>, on my blog I use <a href=\"https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/\" target=\"_blank\" rel=\"noreferrer\">the markdown plugin</a> for my posts, so I access my data as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GamePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> allPosts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>allPosts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n                    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n                        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n                        <span class=\"token operator\">&lt;</span>section\r\n                            key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span>\r\n                            dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GamePage<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query GamePage() {\r\n        allMarkdownRemark(\r\n            sort: { fields: [frontmatter___date], order: DESC }\r\n        ) {\r\n            edges {\r\n                node {\r\n                    html\r\n                    frontmatter {\r\n                        date\r\n                        title\r\n                        category\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After adding the <code class=\"language-text\">GraphQL</code> query, all my posts data are available via the <code class=\"language-text\">data.allMarkdownRemark.edges</code> props.</p>\n<p>Now in the game, I can dispatch a JavaScript event asking React to show all my blog posts in a list or something, and then when a blog post is chosen, show it in a Material UI Modal.</p>\n<h2 id=\"adding-it-all-together\" style=\"position:relative;\"><a href=\"#adding-it-all-together\" aria-label=\"adding it all together permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding it all together</h2>\n<p>This is what my <code class=\"language-text\">GamePage</code> final code looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GamePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> allPosts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showBlogPost<span class=\"token punctuation\">,</span> setShowBlogPost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showBlogPostList<span class=\"token punctuation\">,</span> setShowBlogPostList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>post<span class=\"token punctuation\">,</span> setPost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showPostListEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setShowBlogPostList</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> showPostListEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showPostEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setPost</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowBlogPost</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> showPostEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show-post-list'</span><span class=\"token punctuation\">,</span> showPostListEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show-post'</span><span class=\"token punctuation\">,</span> showPostEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> Phaser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phaser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GameScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../game/scenes/GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> GridEngine <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'grid-engine'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>GameScene<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token function\">initPhaser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>DialogBox\r\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\r\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">{</span>showBlogPost <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>BlogPost\r\n                    post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">{</span>showBlogPostList <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>BlogPostList\r\n                    posts<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>allPosts<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GamePage<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query GamePage() {\r\n        allMarkdownRemark(\r\n            sort: { fields: [frontmatter___date], order: DESC }\r\n        ) {\r\n            edges {\r\n                node {\r\n                    html\r\n                    frontmatter {\r\n                        date\r\n                        title\r\n                        category\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If you want to know more details about what happens inside the <code class=\"language-text\">GameScene</code>, check <a href=\"/en/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/\">this blog post</a>.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>I had a lot of fun creating this game for my blog, and besides that, I learned a lot of new things in Phaser and React. Maybe I can even use part of this code to make a real top-down game :eyes:.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACG0lEQVQoz0WQW08TQRhA+2NEFEQq3Z2Z7sw3t6WivhAeDMZnWkNISUx80aihpZUSb4HQYCQGYVsaelmkpeW23d1S5AH/lAESTc7ryUlOZDRzPP66Qt67tzIX+NuaDGzLl6yj+bEmJ5wccrIvcV1YVYkbitQFbgFuctNltCsjqtCeW6lNrwZDS/3RpV6imaS/Oa/qqZe21RZj+zRR0vauNnowUeeoRdAhw01ADUZ9GVG1t8bX7tBSf3DRv7voJ/bmIRCT72z1XWGfm3sMahIcaZSotQHmJjUchlxA7rUszhHZWh7OXo4U/Hv5vigXIABdkKqh1b4kx9x0waxwVOJmmSOHxw/E/zI7i7PKwlD2YjDnDWR60eWO7EyTP1ScjifW5QOXobIwtiC2DWaJx3cFdjmqA2rAlUxDKbqP8Zo7nDsfKfj3c5d8e1n7ip/op5uP7BLYO1zv8IcVIas87km0A8QVqHU9LP7LhjMQtTe3F88HcuFALryT7459aajW84mqbZWE5YDlAHM4ccC46oPpgLHJqKcitKnpGdiHk/RjOZY5imUPYtl2bOEUPv2cKKdoW8c76garo+g/jhTzVYQFivT1k7JKp58lU+lkajb5Ym4mNZucmZ99NSU9Dj0BoeChgFDSUNNQsVDRUNFARainwRf2wRT5XInmg2j+NJr3onnvwYcTa2UDF4u4uI6La3j1B6+meUCpp1lX3fAXiHP5L0RVS7QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pablo gg the game 1\"\n        title=\"pablo gg the game 1\"\n        src=\"/static/6921c5602e9e2c1171362b406e2c817c/42a19/pablo-gg-the-game-1.png\"\n        srcset=\"/static/6921c5602e9e2c1171362b406e2c817c/e3135/pablo-gg-the-game-1.png 256w,\n/static/6921c5602e9e2c1171362b406e2c817c/06341/pablo-gg-the-game-1.png 512w,\n/static/6921c5602e9e2c1171362b406e2c817c/42a19/pablo-gg-the-game-1.png 1024w,\n/static/6921c5602e9e2c1171362b406e2c817c/e8464/pablo-gg-the-game-1.png 1536w,\n/static/6921c5602e9e2c1171362b406e2c817c/ac7a9/pablo-gg-the-game-1.png 1920w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"special-thanks\" style=\"position:relative;\"><a href=\"#special-thanks\" aria-label=\"special thanks permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Special thanks</h2>\n<p>This game would not be possible without the help of some amazing people and their work, so here is my list of special thanks.</p>\n<ul>\n<li><a href=\"https://github.com/photonstorm\" target=\"_blank\" rel=\"noreferrer\">photonstorm</a>, for creating <a href=\"https://github.com/photonstorm/phaser\" target=\"_blank\" rel=\"noreferrer\">Phaser.io</a>.</li>\n<li><a href=\"https://github.com/Annoraaq\" target=\"_blank\" rel=\"noreferrer\">Annoraaq</a>, for creating the <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">grid-engine</a> plugin.</li>\n<li><a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, for the <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">characters sprites and tilesets</a>.</li>\n<li><a href=\"https://elthen.itch.io/\" target=\"_blank\" rel=\"noreferrer\">PixElthen</a>, for the <a href=\"https://elthen.itch.io/2d-pixel-art-small-slime-sprites\" target=\"_blank\" rel=\"noreferrer\">slime sprites</a>.</li>\n<li><a href=\"https://itch.io/profile/pixelartm\" target=\"_blank\" rel=\"noreferrer\">pixelartm</a>, for the <a href=\"https://opengameart.org/content/pirate-1\" target=\"_blank\" rel=\"noreferrer\">pirate hat sprites</a>.</li>\n<li><a href=\"https://opengameart.org/users/jkjkke\" target=\"_blank\" rel=\"noreferrer\">jkjkke</a>, for the <a href=\"https://opengameart.org/content/background-6\" target=\"_blank\" rel=\"noreferrer\">Game Over screen background</a>.</li>\n<li><a href=\"https://opengameart.org/users/knoblepersona\" target=\"_blank\" rel=\"noreferrer\">KnoblePersona</a>, for the <a href=\"https://opengameart.org/content/ocean-background\" target=\"_blank\" rel=\"noreferrer\">Main Menu screen background</a>.</li>\n<li><a href=\"https://opengameart.org/users/min\" target=\"_blank\" rel=\"noreferrer\">Min</a>, for the <a href=\"https://opengameart.org/content/open-book-0\" target=\"_blank\" rel=\"noreferrer\">open book sprite</a>.</li>\n</ul>","fields":{"slug":"/2021/2021-10-12-i-made-a-top-down-game-version-of-my-blog-with-phaser-and-react.en/","path":"/blog/coding/i-made-a-top-down-game-version-of-my-blog-with-phaser-and-react/","locale":"en"},"readingTime":{"minutes":8.995},"frontmatter":{"date":"2021-10-12T00:00:00.000Z","title":"I made a top-down game version of my blog with Phaser and React","categories":["coding"]}}},{"node":{"excerpt":"My first experience in “programming” started in 2002, when I…","html":"<p>My first experience in “programming” started in 2002, when I was making games with RPG Maker, when I learned what a variable, data persistence, and loops were.</p>\n<p>I never got to publish any of the games I made, but it was kind of always my dream so now that I have about 2 years of Phaser experience, I decided to make a small game in the same style as the RPG Makers I used to make. in 2002.</p>\n<h2 id=\"integrating-react-with-phaser\" style=\"position:relative;\"><a href=\"#integrating-react-with-phaser\" aria-label=\"integrating react with phaser permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integrating React with Phaser</h2>\n<p>Phaser works by rendering pixels inside a <code class=\"language-text\">canvas</code> element in the DOM, and it’s great, but one of the great features of web development is the power of the DOM and CSS to create great UI elements, and you can’t do that with Phaser alone.</p>\n<p>The simplest way to use Phaser with React is with a functional component like the one below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> Phaser <span class=\"token keyword\">from</span> <span class=\"token string\">'phaser'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GameComponent<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"using-react-for-the-game-ui\" style=\"position:relative;\"><a href=\"#using-react-for-the-game-ui\" aria-label=\"using react for the game ui permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using React for the game UI</h2>\n<p>To make Phaser communicate back and forth with React, like to show a menu item or a dialog box, I will dispatch JavaScript events between Phaser and React.</p>\n<p>The best way to do it would be with some sort of state management tool like <a href=\"https://facebook.github.io/flux/\" target=\"_blank\" rel=\"noreferrer\">Flux</a>, but since this is just a very small project, dispatching JavaScript events will work for now.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// React component</span>\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showDialogBox<span class=\"token punctuation\">,</span> setShowDialogBox<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleMessageIsDone <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">setShowDialogBox</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>characterName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>showDialogBox <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>DialogBox\r\n                    message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\r\n                    onDone<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleMessageIsDone<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Phaser scene</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dialogBoxFinishedEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token comment\">// Do whatever is needed when the dialog is over</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end-dialog'</span><span class=\"token punctuation\">,</span> dialogBoxFinishedEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"/18452438d2251249518c712d8873e89a/react-dialog-box.gif\" alt=\"Dialog box\"></p>\n<p>If you want more details on how to create a React dialog box for your Phaser game, <a href=\"/en/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/\">check my blog post on it</a>.</p>\n<h2 id=\"using-grid-engine-and-loading-tiled-map\" style=\"position:relative;\"><a href=\"#using-grid-engine-and-loading-tiled-map\" aria-label=\"using grid engine and loading tiled map permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using grid-engine and loading Tiled map</h2>\n<p>To create the map I will again use Tiled, which is a FOSS in which you can create maps and use them in almost any game engine.</p>\n<p>The <code class=\"language-text\">tileset</code> I’m using for my map is the <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">Zelda-like tileset</a> created by <a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, which includes indoor and outdoor tilesets.</p>\n<p>After the map is done, <a href=\"/en/blog/games/automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script/\">I will embed the tileset into the map</a>, and then I can simply import the map and <code class=\"language-text\">tileset</code> file into my game and load them in Phaser.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> mainMapaJson <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/main-map.json'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> tilesetImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../../../content/assets/game/maps/tileset.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">tilemapTiledJSON</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main-map'</span><span class=\"token punctuation\">,</span> mainMapaJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> tilesetImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now to add the grid-engine into Phaser, just configure your game to use arcade physics and add grid-engine as a plugin, like shown below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token operator\">...</span>configs<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token string\">'game-content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">physics</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'arcade'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">plugin</span><span class=\"token operator\">:</span> GridEngine<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">mapping</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridEngine'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I can access the plugin via <code class=\"language-text\">this.gridEngine</code> inside any Phaser game scene. The next step is to create a sprite and move it with the grid-engine plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth <span class=\"token operator\">=</span> <span class=\"token number\">16</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight <span class=\"token operator\">=</span> <span class=\"token number\">16</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'main-map'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> gridEngineConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">characters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> heroSprite<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> cursors <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">createCursorKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>up<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span>down<span class=\"token punctuation\">.</span>isDown<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This code was pretty much copied and pasted from <a href=\"https://annoraaq.github.io/grid-engine/examples/basic-movement.html\" target=\"_blank\" rel=\"noreferrer\">their official documentation page</a>.</p>\n<p>To make collisions work automatically with a map created on Tiled, just add the property <code class=\"language-text\">ge_collide</code> set to <code class=\"language-text\">true</code> for the tiles the hero is supposed to collide with.</p>\n<p>Notice that this will make the hero move and collide with objects, but there is no walking animation. To create new sprite animations I will use the <code class=\"language-text\">this.anims.create()</code> function, and then play that animation every time the grid-engine tells me that the player moved, with the <code class=\"language-text\">movementStarted</code>, <code class=\"language-text\">movementStopped</code> and <code class=\"language-text\">directionChanged</code> events dispatched by the grid-engine.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStarted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span>direction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">movementStopped</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">directionChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">setFrame</span><span class=\"token punctuation\">(</span><span class=\"token string\">'down_01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">createHeroWalkingAnimation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">direction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>anims<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> direction<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frames</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_01</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">frame</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_02</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">frameRate</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">repeat</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">yoyo</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"creating-hero-interactions\" style=\"position:relative;\"><a href=\"#creating-hero-interactions\" aria-label=\"creating hero interactions permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating hero interactions</h2>\n<p>The hero must be able to interact with the world, for example going into an NPC and talking to them.</p>\n<p>That sounds simple, but how to achieve that with Phaser? There are many ways to do it, but the easiest is to create a custom collider that will always be in front of the hero, and that custom collider will interact with all objects in the game.</p>\n<p>First I’m going to create an object using the <code class=\"language-text\">Phaser.GameObjects.Rectangle</code> class:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider <span class=\"token operator\">=</span>\r\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Rectangle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setImmovable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I need to make this custom collider always stay in front of the hero, for that I’m going to use the <code class=\"language-text\">update</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> facingDirection <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">getFacingDirection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>facingDirection<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'down'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'up'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'left'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'right'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">24</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// will never happen</span>\r\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"adding-interactive-tiles\" style=\"position:relative;\"><a href=\"#adding-interactive-tiles\" aria-label=\"adding interactive tiles permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding interactive tiles</h2>\n<p>Now that I have the <code class=\"language-text\">this.heroActionCollider</code> variable, let’s make the world a bit more interactive. I want the hero to be able to cut grass and the push boxes, so first I will create a layer called <code class=\"language-text\">test</code> in my map and add the grass and box tiles.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        layer<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tile</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In my case, my grass tile index is <code class=\"language-text\">428</code>, and my box tile index is <code class=\"language-text\">427</code>, and with this information, I can start coding my interactions.</p>\n<p>First I will create a <code class=\"language-text\">GameGroup</code> with <code class=\"language-text\">this.add.group()</code> and add my interactive layers to it, and then create an overlap between <code class=\"language-text\">this.heroActionCollider</code> and <code class=\"language-text\">interactiveLayers</code> with the <code class=\"language-text\">this.physics.add.overlap()</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> interactiveLayers <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nmap<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'interactions'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        interactiveLayers<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">GRASS_INDEX</span> <span class=\"token operator\">=</span> <span class=\"token number\">428</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">BOX_INDEX</span> <span class=\"token operator\">=</span> <span class=\"token number\">427</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">,</span> interactiveLayers<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">objA<span class=\"token punctuation\">,</span> objB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>objA<span class=\"token punctuation\">,</span> objB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token operator\">?.</span>index <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>tile<span class=\"token punctuation\">.</span>wasHandled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">GRASS_INDEX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                tile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">BOX_INDEX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                tile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the cutting grass action, I will check if the <code class=\"language-text\">SPACE</code> key is down with <code class=\"language-text\">Input.Keyboard.JustDown()</code>, and if it is, destroy that tile.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>spaceKey <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">addKey</span><span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span>KeyCodes<span class=\"token punctuation\">.</span><span class=\"token constant\">SPACE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">,</span> interactiveLayers<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">objA<span class=\"token punctuation\">,</span> objB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>objA<span class=\"token punctuation\">,</span> objB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token operator\">?.</span>index <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>tile<span class=\"token punctuation\">.</span>wasHandled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">GRASS_INDEX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">JustDown</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>spaceKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    tile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token comment\">// Wait a little bit for the attack animation to be over</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span>\r\n                        <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                            tile<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                            tile<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token punctuation\">}</span>\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the pushing box action, I will also check if the <code class=\"language-text\">SPACE</code> key is down, and then move the tile with <code class=\"language-text\">this.tweens.add()</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>spaceKey <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">addKey</span><span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span>KeyCodes<span class=\"token punctuation\">.</span><span class=\"token constant\">SPACE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">,</span> interactiveLayers<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">objA<span class=\"token punctuation\">,</span> objB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>objA<span class=\"token punctuation\">,</span> objB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroActionCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token operator\">?.</span>index <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>tile<span class=\"token punctuation\">.</span>wasHandled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">BOX_INDEX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">JustDown</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>spaceKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    tile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">const</span> newPosition <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">calculatePushedTilePosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tweens<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                        <span class=\"token literal-property property\">targets</span><span class=\"token operator\">:</span> tile<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">pixelX</span><span class=\"token operator\">:</span> newPosition<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">pixelY</span><span class=\"token operator\">:</span> newPosition<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">ease</span><span class=\"token operator\">:</span> <span class=\"token string\">'Power2'</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">700</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">onComplete</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handlePushedTileCompleted</span><span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code contains 2 mysterious 🕵️ functions, <code class=\"language-text\">calculatePushedTilePosition</code> and <code class=\"language-text\">handlePushedTileCompleted</code>. The first one will calculate the new tile position after being pushed based on the hero position.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">calculatePushedTilePosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> facingDirection <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">getFacingDirection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> position <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">getPosition</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>facingDirection<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'up'</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'right'</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'down'</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'left'</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">handlePushedTileCompleted</code> function will remove the pushed tile and create a new one in the new position. This needs to be done because even though the tile position changed, the collision stays in the original position, I don’t know if this is by design or a bug on Phaser or in the grid-engine plugin.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">handlePushedTileCompleted</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tile</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> newTile <span class=\"token operator\">=</span> tile<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>tilemapLayer<span class=\"token punctuation\">.</span><span class=\"token function\">putTileAt</span><span class=\"token punctuation\">(</span>\r\n        tile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span>\r\n        newPosition<span class=\"token punctuation\">.</span>x <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span>\r\n        newPosition<span class=\"token punctuation\">.</span>y <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">,</span>\r\n        <span class=\"token boolean\">true</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    newTile<span class=\"token punctuation\">.</span>properties <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token operator\">...</span>tile<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    newTile<span class=\"token punctuation\">.</span>wasHandled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n\r\n    tile<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    tile<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"/51cd88a1136dee62f6bb01810de39339/cutting-grass.gif\" alt=\"Cutting grass\"></p>\n<h2 id=\"adding-enemies\" style=\"position:relative;\"><a href=\"#adding-enemies\" aria-label=\"adding enemies permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding enemies</h2>\n<p>To add enemies to the map, I will use Tiled objects layer, which I can access via the function <code class=\"language-text\">map.getObjectLayer()</code>. First I will create an object layer called <code class=\"language-text\">elements</code> and add some tiles with the “Insert Tile” button.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1010px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.359375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVQoz3XO708ScQDHcf6pas2tWj2pmSPkZ6YogigIij8QTbgDDu/ue8cdnGbLuVSUUDQR7o7U0iBQeCTOxdRHjjbUBwjinDxza2oun/je5+lr+whWlqPhcCgajXAcy3FcMBgMhUJsJMxzHM+xbIRdWgovRthwOLLsm1z1TX2fmuLmF7joN5aPClaWuZVVPhZbWV/7sb6+zrKs3+/3B2a/zAb9s3OB6cD45PTHmbmJ8Yk5yh1dmonPfg6MjM7ML/gCQUEotMRx/MLXxXAkwvP8jN/vdDhcZh1iUrs6m/u7WxzdGrRLjffoGH2j12IatQ1STieKYzg6JNjf3/tz3eHh4UmhEIvHIBtEtgk92mpSX2sxqJwGOdEuZSxGTFOLWDpxyoMDAAABACHY3d3N5/O5XC6fzxeLxXg8DkNQ71uhRVENaSSIRoy0SGyqWsrcyvuoYTeGYlfuJsHe3t7R0dHOzs7BwUGpWPwZizlgiDbKR0xSxiTH28SgU+HSSui+pjXeNso4UJQgbrUgm83mrjs+Pj4/P/+VSNhhCFO9HtO/9LS+GWoWug1y0ijH26WwqgYZ6AGkG+D4P5xKpRKJRDqd3tzczGZ/sxyHOOyYsQ5uFCJqkQdW03SH16mhu5VecxNq7QEkBcAt3tra2t7ezmQy6XQ6k8lwPI847KSp3m1SUAYZTRl7p+3EJzPWWYdoZbitFyfd/3G5XK5UKhfXXV5eptJpO2QjuxoIowzopYxLC8bMw5j+g0qCGmqHIDMg7uBCoVAul09PT0ul0sXFRTKZtMMQ0tKAt8lH+uopg4zSiUdNyiltqw0WD6I9JLhz++Tk5Ozs7MZXKpWNjQ2b1VpT9az64WNRVdV7ndTjVMtePBU/f/Lq0YMOvY6mPTh+P4ZhuLFBo5AppaL6fquZGEHqFU1yiVIqemfpG3BT7ntxMplEEIRhPF4v7WVokiBxDHi8tPd6JEnewiv8F8sW+HURs/pCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Insert a tile\"\n        title=\"Insert a tile\"\n        src=\"/static/0c6ede12e2b26092f9f120e5834da7f3/08990/tiled-insert-tile.png\"\n        srcset=\"/static/0c6ede12e2b26092f9f120e5834da7f3/e3135/tiled-insert-tile.png 256w,\n/static/0c6ede12e2b26092f9f120e5834da7f3/06341/tiled-insert-tile.png 512w,\n/static/0c6ede12e2b26092f9f120e5834da7f3/08990/tiled-insert-tile.png 1010w\"\n        sizes=\"(max-width: 1010px) 100vw, 1010px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Insert a tile</figcaption>\n  </figure></p>\n<p>I will also add a custom property <code class=\"language-text\">enemyData</code> to this added tile with the value <code class=\"language-text\">slime_red:follow:1:100</code>, which will be all the properties of my enemy, this values separated by <strong>“:</strong>” are <code class=\"language-text\">enemyType:AIType:speed:health</code>. To get this values I will split the string and store all these data into an array to use later.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> enemiesData <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getObjectLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'elements'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ndataLayer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> properties<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n\r\n    properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> property<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'enemyData'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>enemyType<span class=\"token punctuation\">,</span> enemyAI<span class=\"token punctuation\">,</span> speed<span class=\"token punctuation\">,</span> health<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">':'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                enemiesData<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                    x<span class=\"token punctuation\">,</span>\r\n                    y<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">speed</span><span class=\"token operator\">:</span> Number<span class=\"token punctuation\">.</span><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>speed<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                    enemyType<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">enemySpecies</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getEnemySpecies</span><span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                    enemyAI<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">enemyName</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>enemyType<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>enemiesData<span class=\"token punctuation\">.</span>length<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">health</span><span class=\"token operator\">:</span> Number<span class=\"token punctuation\">.</span><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>health<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now the <code class=\"language-text\">enemiesData</code> variable contains all the data for all the enemies on the map, so all that is left is to create enemy sprites with <code class=\"language-text\">this.physics.add.sprite()</code> and add them to the <code class=\"language-text\">gridEngineConfig.characters</code> array.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>enemiesSprites <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nenemiesData<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">enemyData<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> enemySpecies<span class=\"token punctuation\">,</span> enemyType<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> enemyName<span class=\"token punctuation\">,</span> speed<span class=\"token punctuation\">,</span> enemyAI<span class=\"token punctuation\">,</span> health <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> enemyData<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> enemy <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> enemyType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        enemy<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xF1374B</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'green'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        enemy<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x2BBD6E</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'yellow'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        enemy<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xFFFF4F</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>enemyType<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        enemy<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x00A0DC</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    enemy<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> enemyName<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>enemyType <span class=\"token operator\">=</span> enemyType<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>enemySpecies <span class=\"token operator\">=</span> enemySpecies<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>enemyAI <span class=\"token operator\">=</span> enemyAI<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>speed <span class=\"token operator\">=</span> speed<span class=\"token punctuation\">;</span>\r\n    enemy<span class=\"token punctuation\">.</span>health <span class=\"token operator\">=</span> health<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>enemiesSprites<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>enemy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    gridEngineConfig<span class=\"token punctuation\">.</span>characters<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> enemyName<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> enemy<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> x <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileWidth<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tileHeight<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        speed<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>To make the enemy follow the hero, I will simply use the <a href=\"https://annoraaq.github.io/grid-engine/api/methods.html#follow\" target=\"_blank\" rel=\"noreferrer\">this.gridEngine.follow() function</a>.</p>\n<p><img src=\"/3a4df19cbb0e4834a0aa0b26bb702dce/slime-enemy.gif\" alt=\"\"></p>\n<h2 id=\"adding-items\" style=\"position:relative;\"><a href=\"#adding-items\" aria-label=\"adding items permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding items</h2>\n<p>For the items I will again use the Tiled objects layer I already created, called <code class=\"language-text\">elements</code>. For now, I’m going to add two different items to the game, coins, and hearts, with a custom property called <code class=\"language-text\">itemData</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getObjectLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'elements'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ndataLayer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> properties<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n\r\n    properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> property<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'itemData'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// it's only one value... for now.</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>itemType<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">':'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>itemType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">case</span> <span class=\"token string\">'coin'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token string\">'coin'</span><span class=\"token punctuation\">)</span>\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                        item<span class=\"token punctuation\">.</span>itemType <span class=\"token operator\">=</span> <span class=\"token string\">'coin'</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n\r\n                    <span class=\"token keyword\">case</span> <span class=\"token string\">'heart'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token string\">'heart'</span><span class=\"token punctuation\">)</span>\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                        item<span class=\"token punctuation\">.</span>itemType <span class=\"token operator\">=</span> <span class=\"token string\">'heart'</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n\r\n                    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now I just need to overlap the hero and the item group in the <code class=\"language-text\">this.itemsSprites</code> variable.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">objA<span class=\"token punctuation\">,</span> objB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>objA<span class=\"token punctuation\">,</span> objB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>itemType <span class=\"token operator\">===</span> <span class=\"token string\">'heart'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">restoreHealth</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        item<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        item<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>itemType <span class=\"token operator\">===</span> <span class=\"token string\">'coin'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span><span class=\"token function\">collectCoin</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        item<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        item<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"using-react-for-the-hud\" style=\"position:relative;\"><a href=\"#using-react-for-the-hud\" aria-label=\"using react for the hud permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using React for the HUD</h2>\n<p>In the overlap code with the items, I didn’t explain how the <code class=\"language-text\">restoreHealth</code> and <code class=\"language-text\">collectCoin</code> functions work, as they communicate directly with React, so first let’s see what this component looks like.</p>\n<p>The HUD component in React is quite simple and contains 3 props, an integer <code class=\"language-text\">screenWidth</code>, for the placement of the HUD on the screen, an integer <code class=\"language-text\">coins</code>, to show the amount of collected coins, and a <code class=\"language-text\">healthState</code> array, with the amount of hearts and whether they are empty, full or half.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> coinImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../images/coin.png'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> healthImage <span class=\"token keyword\">from</span> <span class=\"token string\">'../images/health.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token function-variable function\">hudContainer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> screenWidth <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> left <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>innerWidth <span class=\"token operator\">-</span> screenWidth<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">fontFamily</span><span class=\"token operator\">:</span> <span class=\"token string\">'\"Press Start 2P\"'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">imageRendering</span><span class=\"token operator\">:</span> <span class=\"token string\">'pixelated'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">16</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>left <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">userSelect</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">health</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">healthStateFull</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">backgroundSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'48px 16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>healthImage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") no-repeat 0 0</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">healthStateHalf</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> healthState <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">backgroundSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'48px 16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>healthImage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") no-repeat -16px 0</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">healthStateEmpty</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> healthState <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">backgroundSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'48px 16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>healthImage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") no-repeat -32px 0</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">coin</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">backgroundSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px 16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coinImage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") no-repeat 0 0</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">coinFull</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'11px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">textShadow</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">-1px 0 #FFFFFF, 0 1px #FFFFFF, 1px 0 #FFFFFF, 0 -1px #FFFFFF</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#119923'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">GameHeadsUpDisplay</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> screenWidth<span class=\"token punctuation\">,</span> coins<span class=\"token punctuation\">,</span> healthState <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        screenWidth<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>hudContainer<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>healthContainer<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span>healthStates<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">healthState<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n                    <span class=\"token operator\">&lt;</span>div\r\n                        key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span>\r\n                        className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">classNames</span><span class=\"token punctuation\">(</span>classes<span class=\"token punctuation\">.</span>health<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n                            <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>healthStateFull<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> healthState <span class=\"token operator\">===</span> <span class=\"token string\">'full'</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>healthStateHalf<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> healthState <span class=\"token operator\">===</span> <span class=\"token string\">'half'</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>healthStateEmpty<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> healthState <span class=\"token operator\">===</span> <span class=\"token string\">'empty'</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>coinContainer<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>coin<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                <span class=\"token operator\">&lt;</span>span\r\n                    className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">classNames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                        <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>coinFull<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> coins <span class=\"token operator\">>=</span> <span class=\"token number\">999</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">></span>\r\n                    <span class=\"token punctuation\">{</span>coins<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">padStart</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GameHeadsUpDisplay<span class=\"token punctuation\">;</span></code></pre></div>\n<p>The code of the <code class=\"language-text\">collectCoin</code> function just sends a JavaScript event with the number of coins the hero has.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">collectCoin</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">heroCoins</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-coin'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">detail</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            heroCoins<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">restoreHealth</code> function is a bit more complex, as it has to deal with the possibility of empty, full, and half hearts.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">restoreHealth</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">healthToRestore</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> healthStates <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">length</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>maxHealth <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> health <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>health <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>health <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">return</span> <span class=\"token string\">'full'</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>health <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">return</span> <span class=\"token string\">'half'</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">return</span> <span class=\"token string\">'empty'</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> customEvent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-health'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">detail</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            healthStates<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>customEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Well now that I’m looking at it again, it’s not that complex, but it took me a while to make everything work well.</p>\n<p>So now my main <code class=\"language-text\">GameComponent</code> looks like the following with the HUD:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">GameComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>heroCoins<span class=\"token punctuation\">,</span> setHeroCoins<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>heroHealthStates<span class=\"token punctuation\">,</span> setHeroHealthStates<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">heroCoinEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setHeroCoins</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>heroCoins<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-coin'</span><span class=\"token punctuation\">,</span> heroCoinEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">heroHealthEventListener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> detail <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setHeroHealthStates</span><span class=\"token punctuation\">(</span>detail<span class=\"token punctuation\">.</span>healthStates<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-health'</span><span class=\"token punctuation\">,</span> heroHealthEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-coin'</span><span class=\"token punctuation\">,</span> heroCoinEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero-health'</span><span class=\"token punctuation\">,</span> heroHealthEventListener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>GameHeadsUpDisplay\r\n                coins<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>heroCoins<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"game-content\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/baaecacf779b133465977eb2a3eaeb10/collecting-items.gif\" alt=\"\"></p>\n<h2 id=\"teleporting-to-another-map\" style=\"position:relative;\"><a href=\"#teleporting-to-another-map\" aria-label=\"teleporting to another map permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Teleporting to another map</h2>\n<p>All the code done so far only works for one map, the <code class=\"language-text\">main-map</code>, however, my game has several maps, like houses, cities, and the overworld. Imagine having to copy all this code to other game scenes 😵.</p>\n<p>Instead of doing that, I’m going to use the <a href=\"https://photonstorm.github.io/phaser3-docs/Phaser.Types.Scenes.html#.SceneInitCallback\" target=\"_blank\" rel=\"noreferrer\">init() function of the Phaser.Scene class</a> to pass information about the hero and which map to load in <code class=\"language-text\">GameScene</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>initData <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> heroStatus<span class=\"token punctuation\">,</span> mapKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>initData<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> mapKey <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    map<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">createLayer</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token string\">'tileset'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> initialPosition<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">health</span><span class=\"token operator\">:</span> heroHealth<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">coin</span><span class=\"token operator\">:</span> heroCoin<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> heroStatus<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> heroSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateHeroHealthUi</span><span class=\"token punctuation\">(</span>heroHealth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateHeroCoinUi</span><span class=\"token punctuation\">(</span>heroCoin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> gridEngineConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">characters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'hero'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> heroSprite<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> initialPosition<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now I can start my <code class=\"language-text\">GameScene</code> with the code <code class=\"language-text\">this.scene.start('GameScene', { heroStatus: { ...heroStatus }, mapKey: 'main-map' });</code>, and now I can start working on the code to teleport the hero between maps, and again I’m going to use Tiled’s object layer with a custom property named <code class=\"language-text\">teleportTo</code> with the value <code class=\"language-text\">mapKey:positionX:positionY</code>.</p>\n<p>But what about starting the same game scene that you’re already in? For that there is the <code class=\"language-text\">this.scene.restart()</code> function. So I’m going to create a custom collider to collide with the hero and teleport, add a fade-out, and pass all the hero and new map data to <code class=\"language-text\">this.scene.restart()</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>itemsSprites <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getObjectLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'elements'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ndataLayer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> properties<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n\r\n    properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> property<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'teleportTo'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>mapKey<span class=\"token punctuation\">,</span> teleportToX<span class=\"token punctuation\">,</span> teleportToY<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">':'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">const</span> customCollider <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Rectangle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token constant\">SCENE_FADE_TIME</span> <span class=\"token operator\">=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">const</span> overlapCollider <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">,</span> customCollider<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>world<span class=\"token punctuation\">.</span><span class=\"token function\">removeCollider</span><span class=\"token punctuation\">(</span>overlapCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">const</span> facingDirection <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gridEngine<span class=\"token punctuation\">.</span><span class=\"token function\">getFacingDirection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    camera<span class=\"token punctuation\">.</span><span class=\"token function\">fadeOut</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SCENE_FADE_TIME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SCENE_FADE_TIME</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">restart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                            <span class=\"token literal-property property\">heroStatus</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                                <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> teleportToX<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> teleportToY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                                <span class=\"token literal-property property\">health</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>health<span class=\"token punctuation\">,</span>\r\n                                <span class=\"token literal-property property\">coin</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heroSprite<span class=\"token punctuation\">.</span>coin<span class=\"token punctuation\">,</span>\r\n                            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">mapKey</span><span class=\"token operator\">:</span> teleportToMapKey<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/639b8857e51b89d20ad24475f5c818f7/teleporting.gif\" alt=\"\"></p>\n<h2 id=\"special-thanks\" style=\"position:relative;\"><a href=\"#special-thanks\" aria-label=\"special thanks permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Special thanks</h2>\n<p>This game would not be possible without the help of some amazing people and their work, so here is my list of special thanks.</p>\n<ul>\n<li><a href=\"https://github.com/photonstorm\" target=\"_blank\" rel=\"noreferrer\">photonstorm</a>, for creating <a href=\"https://github.com/photonstorm/phaser\" target=\"_blank\" rel=\"noreferrer\">Phaser.io</a>.</li>\n<li><a href=\"https://github.com/Annoraaq\" target=\"_blank\" rel=\"noreferrer\">Annoraaq</a>, for creating the <a href=\"https://github.com/Annoraaq/grid-engine\" target=\"_blank\" rel=\"noreferrer\">grid-engine</a> plugin.</li>\n<li><a href=\"https://itch.io/profile/armm1998\" target=\"_blank\" rel=\"noreferrer\">ArMM1998</a>, for the <a href=\"https://opengameart.org/content/zelda-like-tilesets-and-sprites\" target=\"_blank\" rel=\"noreferrer\">characters sprites and tilesets</a>.</li>\n<li><a href=\"https://elthen.itch.io/\" target=\"_blank\" rel=\"noreferrer\">PixElthen</a>, for the <a href=\"https://elthen.itch.io/2d-pixel-art-small-slime-sprites\" target=\"_blank\" rel=\"noreferrer\">slime sprites</a>.</li>\n<li><a href=\"https://itch.io/profile/pixelartm\" target=\"_blank\" rel=\"noreferrer\">pixelartm</a>, for the <a href=\"https://opengameart.org/content/pirate-1\" target=\"_blank\" rel=\"noreferrer\">pirate hat sprites</a>.</li>\n<li><a href=\"https://opengameart.org/users/jkjkke\" target=\"_blank\" rel=\"noreferrer\">jkjkke</a>, for the <a href=\"https://opengameart.org/content/background-6\" target=\"_blank\" rel=\"noreferrer\">Game Over screen background</a>.</li>\n<li><a href=\"https://opengameart.org/users/knoblepersona\" target=\"_blank\" rel=\"noreferrer\">KnoblePersona</a>, for the <a href=\"https://opengameart.org/content/ocean-background\" target=\"_blank\" rel=\"noreferrer\">Main Menu screen background</a>.</li>\n<li><a href=\"https://opengameart.org/users/min\" target=\"_blank\" rel=\"noreferrer\">Min</a>, for the <a href=\"https://opengameart.org/content/open-book-0\" target=\"_blank\" rel=\"noreferrer\">open book sprite</a>.</li>\n</ul>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>It was a lot of fun creating this small project. I actually made this game as a new way to access my blog, but with all this boilerplate code done, I might end up making a new game out of it, let’s see 👀.</p>\n<p>There is more code into the “real” game than shown here in this blog post, so go check out <a href=\"https://github.com/blopa/top-down-react-phaser-game\" target=\"_blank\" rel=\"noreferrer\">the GitHub repo for this project</a>.</p>\n<p>See you in the next one!</p>","fields":{"slug":"/2021/2021-10-08-how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react.en/","path":"/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/","locale":"en"},"readingTime":{"minutes":15.69},"frontmatter":{"date":"2021-10-08T00:00:00.000Z","title":"How to create a top-down RPG Maker like game with Phaser JS and React","categories":["coding"]}}},{"node":{"excerpt":"Phaser works by rendering pixels inside a  element in the…","html":"<p>Phaser works by rendering pixels inside a <code class=\"language-text\">canvas</code> element in the DOM, and it’s great, but one of the great features of web development is the power of the DOM and CSS to create great UI elements, and you can’t do that with Phaser alone.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 831px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.71875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACp0lEQVQozyXSaU8TURTG8fk6vibRsnTm3nOnha7QGaCtQsuqiaIQIksLUtrSaZliWEKCYasYxCWR1GFoBUqnQxclQX0jCokQMFqiCd/BFJLf+/95kkM5V/R9MWv3SoNuV3crT3csWPomeU2OYbLYvMb62zlfG9/TaKRfMtqPmEljpGDmClIwJdzjel843V87jWpNRZ7pWLIOTPOVeURyxLhCuszWrlpbp8XEh3Xu52asAmQIUQnsgbaAKQ9fb3yo1XyqgjRU5FHHorV/mi/PI5wjKAnOdkOtlnHcN3ARXWvYSKsYK4BUYLdI13Qd9cDA2R/prbKeqFBZQKXyFF++j8wJYtkAlISgz042Ma1ibQaBCkQFyAKR8Z1gNeX01FTPAbdagzNQkb0qT/KaA2yc05qC5XpFL/gc+m0WZwAUgjJQKl/FKwuYcr+pLftGV+wjbR6XHdAtMfPjGa7sC12VQZo0jRQI+e36bRaV1pbgHEAOQCmhugL1rmWTa6HEGTP0i5w/2OiIGV2LpqaYse2ZOTJiJymg9xBSEa0idh0TGeMc4AxQnpnGQbE+HHRNjLVEAy5xrDkiNEcDrmtPA+5xwd0gWbmEhUtaWuZt3l57d4/NsFw6gaILhNnVF9TZf59f/UxFT3bGT1Li6W70NCWepMSTnchpMnS+KZzL4TM5fP5e+KuI6aUnuj7E7GOK3YPqNDmQxy63JopysLgZKm4KF8lIMRG+SISLsv9PfOi3NHztlzR8mRhR5vvxY8xmWQp2eDQvKOsDp5L3cGPkWBo6ljzHkvdY8vyIe4/io4cbo0dx/7Xv676zbVF6FyBTrDlhonCi6YYvfVN4rQstD/bdNYQWaWGNCa/iyHrb28XbMieOtzpknv9ga0jY6lK1/ll350p96X8z8B80oVdUwzbQoQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dialog Box\"\n        title=\"Dialog Box\"\n        src=\"/static/1d7bab5112f76c938742845465f8f5c1/1aa23/dialog-box.png\"\n        srcset=\"/static/1d7bab5112f76c938742845465f8f5c1/e3135/dialog-box.png 256w,\n/static/1d7bab5112f76c938742845465f8f5c1/06341/dialog-box.png 512w,\n/static/1d7bab5112f76c938742845465f8f5c1/1aa23/dialog-box.png 831w\"\n        sizes=\"(max-width: 831px) 100vw, 831px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Dialog Box</figcaption>\n  </figure></p>\n<p>I recently needed a dialog box for my game, and by Googling <a href=\"https://www.google.com/search?q=rpg+dialog+box+react\" target=\"_blank\" rel=\"noreferrer\">“rpg dialog box react”</a> I found a great tutorial by <a href=\"https://twitter.com/CamTatz\" target=\"_blank\" rel=\"noreferrer\">Cameron Tatz</a> on <a href=\"https://codeworkshop.dev/blog/2020-03-01-creating-an-rpg-dialog-effect-with-react-and-react-spring/\" target=\"_blank\" rel=\"noreferrer\">how to create a dialog box using React</a> and <a href=\"https://github.com/pmndrs/react-spring\" target=\"_blank\" rel=\"noreferrer\">react-spring</a>, and that’s exactly what I was looking for.</p>\n<p>The original tutorial was using an old version of react-spring, so I updated it and added some other features, which I will show in this tutorial.</p>\n<h2 id=\"the-code\" style=\"position:relative;\"><a href=\"#the-code\" aria-label=\"the code permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The code</h2>\n<p>This dialog box will use react-spring to show the message letter by letter. If you press <code class=\"language-text\">ENTER</code>, it will finish the current message animation and show it in full and if you press <code class=\"language-text\">ENTER</code> again it will move to the next message if there is one.</p>\n<p>The two main changes in the code for the <code class=\"language-text\">Message.jsx</code> component are that the <code class=\"language-text\">useTransition</code> API changed to receive just the items and the config object, instead of the items, a mapping function, and the config object.</p>\n<p>I also added the <code class=\"language-text\">onRest</code> property to the <code class=\"language-text\">useTransition</code> config object to check if the message animation is over. <code class=\"language-text\">onRest</code> is called after every letter animation, so I need to check for the current letter index.</p>\n<p>If the prop <code class=\"language-text\">forceShowFullMessage</code> is sent, then I will simply show the full message, without any animation.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> animated<span class=\"token punctuation\">,</span> useTransition <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-spring'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeStyles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@material-ui/core/styles'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token function-variable function\">dialogMessage</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Message</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    message <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    trail <span class=\"token operator\">=</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">onMessageEnded</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    forceShowFullMessage <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> message<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">letter<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">item</span><span class=\"token operator\">:</span> letter<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> index<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> transitions <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        trail<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">enter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token function-variable function\">onRest</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status<span class=\"token punctuation\">,</span> controller<span class=\"token punctuation\">,</span> item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>key <span class=\"token operator\">===</span> items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">onMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogMessage<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>forceShowFullMessage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>forceShowFullMessage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">transitions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">styles<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">,</span> key <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>animated<span class=\"token punctuation\">.</span>span key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                    <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>animated<span class=\"token punctuation\">.</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Message<span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the <code class=\"language-text\">DialogBox.jsx</code> component, I’m using a background image very similar to the one in the original tutorial.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 100px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAABm0lEQVQ4y92UvWrCUBTH8wougjdRcLIQB5Ub6KKDjbcmuV5sHsMHCCZ+1NIqtDGItG+hg/oMDq4BN7UxCS52UvxYi7YIFbs0W+HHXc758+ece86h/Ne+gAAAZoDEBEQaSAz9C6cEgJmAAPzXPgqINP8soReCdCK07pBB+Ca+CDKOCTpBL4R/loBIU3QuiHQSFkPxAhTfZFbjWBVGNe4MVoWsxolvcrwAw2II6YTOBSmAGaSTRAGmyjfZdj6ixIrdysOgcd9/OvEwaBS7lYgSy7bzqfJNogCRTgBmKCAx2VZeeJWFtpw2pGQ9Yy7H1saerGbT9ft0/T5ZzayNbS7HyXombUhCWxZe5WwrDyTm6GwQVoVXSizVuB06I3e/mO8ce+eemO8cd78YOqNU4/ZKibEqRMbRmcZBvolZFSqdsvkxPii3zkXc/cL8GCudMqtCvolpHPwWR0tcrV+3NvZ863y9Z5xCtX49WuJ+ijWu2nucri1751qXbK3toZDp2qr2HqPa/xB7adgfv8rTkHgezz8vhreV9HIMvJyhTyWzYCcD+O+cAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dialog Box background\"\n        title=\"Dialog Box background\"\n        src=\"/static/6dbe9ca6f21beb5fae99a1d5dc543f19/effb6/dialog-borderbox.png\"\n        srcset=\"/static/6dbe9ca6f21beb5fae99a1d5dc543f19/effb6/dialog-borderbox.png 100w\"\n        sizes=\"(max-width: 100px) 100vw, 100px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Dialog Box background</figcaption>\n  </figure></p>\n<p>This file handles the keyboard interactions for the dialog, so if the player presses <code class=\"language-text\">ENTER</code> and the message animation is still playing, then it finishes the current animation by setting <code class=\"language-text\">forceShowFullMessage</code> to true. If the player presses <code class=\"language-text\">ENTER</code> and the message animation is already finished, then it goes to the next message.</p>\n<p>Besides <code class=\"language-text\">forceShowFullMessage</code>,  I also get <code class=\"language-text\">screenWidth</code> and <code class=\"language-text\">screenHeight</code> as props, so I can scale up or down the size of the box depending on the size of the Phaser game.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useCallback<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeStyles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@material-ui/core/styles'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Images</span>\r\n<span class=\"token keyword\">import</span> dialogBorderBox <span class=\"token keyword\">from</span> <span class=\"token string\">'../images/dialog_borderbox.png'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Components</span>\r\n<span class=\"token keyword\">import</span> Message <span class=\"token keyword\">from</span> <span class=\"token string\">'./Message'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> useStyles <span class=\"token operator\">=</span> <span class=\"token function\">makeStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token function-variable function\">dialogWindow</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> screenWidth<span class=\"token punctuation\">,</span> screenHeight <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> messageBoxHeight <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenHeight <span class=\"token operator\">/</span> <span class=\"token number\">3.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">imageRendering</span><span class=\"token operator\">:</span> <span class=\"token string\">'pixelated'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#e2b27e'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'solid'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">borderImage</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dialogBorderBox<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\") 6 / 12px 12px 12px 12px stretch</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenHeight <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>messageBoxHeight <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>messageBoxHeight <span class=\"token operator\">*</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>screenWidth <span class=\"token operator\">*</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'translate(-50%, 0%)'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">minHeight</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>messageBoxHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">dialogTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">marginBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token function-variable function\">dialogFooter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">textAlign</span><span class=\"token operator\">:</span> <span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">bottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">DialogBox</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\r\n    messages<span class=\"token punctuation\">,</span>\r\n    characterName<span class=\"token punctuation\">,</span>\r\n    onDialogEnded<span class=\"token punctuation\">,</span>\r\n    screenWidth<span class=\"token punctuation\">,</span>\r\n    screenHeight<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">,</span> setCurrentMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messageEnded<span class=\"token punctuation\">,</span> setMessageEnded<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>forceShowFullMessage<span class=\"token punctuation\">,</span> setForceShowFullMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> classes <span class=\"token operator\">=</span> <span class=\"token function\">useStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        screenWidth<span class=\"token punctuation\">,</span>\r\n        screenHeight<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> handleClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>messageEnded<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setForceShowFullMessage</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">&lt;</span> messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">setCurrentMessage</span><span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">setCurrentMessage</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token function\">onDialogEnded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setForceShowFullMessage</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">,</span> messageEnded<span class=\"token punctuation\">,</span> messages<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span> onDialogEnded<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleKeyPressed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Enter'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Space'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Escape'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keydown'</span><span class=\"token punctuation\">,</span> handleKeyPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>handleClick<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogWindow<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span>characterName<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>Message\r\n                action<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>action<span class=\"token punctuation\">}</span>\r\n                message<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">[</span>currentMessage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span>\r\n                key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentMessage<span class=\"token punctuation\">}</span>\r\n                forceShowFullMessage<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>forceShowFullMessage<span class=\"token punctuation\">}</span>\r\n                onMessageEnded<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token function\">setMessageEnded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>div\r\n                onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span>\r\n                className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>dialogFooter<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>currentMessage <span class=\"token operator\">===</span> messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> messageEnded<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string\">'Ok'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Next'</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> DialogBox<span class=\"token punctuation\">;</span></code></pre></div>\n<p>And this will be the end result</p>\n<p><img src=\"/bd9346cd2b3aaee4dafa10d49a9b182c/dialog-box-animation.gif\" alt=\"Dialog Box animation\"></p>\n<p>If you want to know more details about how to integrate <code class=\"language-text\">Phaser</code> and <code class=\"language-text\">React</code>, check <a href=\"/en/blog/coding/how-to-create-a-top-down-rpg-maker-like-game-with-phaser-js-and-react/\">this blog post</a>.</p>","fields":{"slug":"/2021/2021-10-06-creating-a-dialog-box-with-react-for-a-phaser-game.en/","path":"/blog/coding/creating-a-dialog-box-with-react-for-a-phaser-game/","locale":"en"},"readingTime":{"minutes":3.945},"frontmatter":{"date":"2021-10-06T00:00:00.000Z","title":"Creating a dialog box with React for a Phaser game","categories":["coding"]}}},{"node":{"excerpt":"Creating maps with Tiled is great, and you can use them in…","html":"<p>Creating maps with Tiled is great, and you can use them in pretty much any game engine today, including Phaser JS.</p>\n<p>To load a map with Phaser JS is simple, first, you load all the assets in the <code class=\"language-text\">preload</code> function on your game scene, then you create a new map with <code class=\"language-text\">this.make.tilemap()</code> and voilà it is done. Check the following <a href=\"https://blog.ourcade.co/posts/2020/phaser-3-noob-guide-loading-tiled-tilemaps/\" target=\"_blank\" rel=\"noreferrer\">code snippet from Ourcade</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// load the PNG file</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'base_tiles'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'assets/base_tiles.png'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token comment\">// load the JSON file</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">tilemapTiledJSON</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tilemap'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'assets/base_tiles.json'</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// create the Tilemap</span>\r\n    <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'tilemap'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token comment\">// add the tileset image we are using</span>\r\n    <span class=\"token keyword\">const</span> tileset <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'standard_tiles'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'base_tiles'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token comment\">// create the layers we want in the right order</span>\r\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">createStaticLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Background'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>But sadly it is not all sunshine and rainbows, in order for that to work, you need your Tiled <code class=\"language-text\">tileset</code> to be embedded into the map.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 518px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACV0lEQVQoz3XRy1LTUBgH8Ox9CDc+gT6AOo6Wneg449ChilZALr2ALRSQS9PQc07SJg0pEQqdkgOlleKQQG6YtqFNW+oiFRe8j1NW4uhv5vt2/5nvQmCMFUWWZdmyLMM0DU3XdePcsgzDMHRdPTszTUNVNcuy6jdqtZpt247jmKZJbOd2kiRcXFhhWEYQhASXTiOQZRlxUxS3tnlBzO3s8jy/J0mlUunw8LBYLH49OjpVFFVVCSG5NjjgffbkxcCAJzwbvf/Wu7C8NDUxuRQJJj9H1hdnUGIVIRqCWyiKSqVSxBcazHmHJsfCXp/fM/bhzt17nvHRBw+fvvYO5Tf59aVPDLmAEE336xYIIZETC8vv38Wia2yS+TgfGfGN+AMB//hEKBzOCxkGMggk0b/0w3t5PDw8PujxHucPspkM4rM0l43GSAhRAsANkU0C8N+whA98I1Oh4DyJUiwDDRA4oabJNy+5lYgQC+apEMfSN1P/DQBA7ONiKrErcVyZIemZ6bNZT4MabkK/nIqmqVW4GJsbCwEqyTDMnwsjhDiO64fng+z6WjqT5Z8/eux7NVQCscrqqA4CACFIM3OTsxSZgPDWvePxeC6XIyqVb7tbhdzOsWnVEKAFNlMpSvuF/MFeHmOp/9lyCWMs3cAYFwoFjHG5XFYUhahWq67r9Ez1Z02/apx3tRNbOW12Oo7TdlpO02m1Wu1Op9Ptdi/7+r3nutfX167rEhe2XbWb7Q3+RxZeinSDjrdK5brj2PV648I2rMap9t3QtWbTabf6rn5d9Xo9TVNlWf4Nd4mgdymyqM4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Embed Tileset\"\n        title=\"Embedding a tileset on Tiled\"\n        src=\"/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png\"\n        srcset=\"/static/51df513f0b0acbe195eb3327398273b4/e3135/tiled-embed-tileset.png 256w,\n/static/51df513f0b0acbe195eb3327398273b4/06341/tiled-embed-tileset.png 512w,\n/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png 518w\"\n        sizes=\"(max-width: 518px) 100vw, 518px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Embedding a tileset on Tiled</figcaption>\n  </figure></p>\n<p>The problem with that is when you have many maps, they will each have their own version of the <code class=\"language-text\">tileset</code>, so you make any changes to one of these, all other maps won’t be aware of it.</p>\n<p>I actually already talked about this one this blog <a href=\"/en/blog/games/loading-external-tileset-file-on-phaser-js-using-webpack-skate-platformer-game-devlog-7/\">one year ago, in my Game Devlog #7</a>, but that solution was to programmatically embed an external <code class=\"language-text\">tileset</code> into a map, today I will get a <code class=\"language-text\">tileset</code> that is already embedded in one map and copy it to all my other maps, let’s see how.</p>\n<h2 id=\"the-code\" style=\"position:relative;\"><a href=\"#the-code\" aria-label=\"the code permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The code</h2>\n<p>My script will receive a parameter, which is going to be the name of the map where the <code class=\"language-text\">tileset</code> needs to be copied from, so the goal is to run the script as <code class=\"language-text\">node copy-tileset-data.js nameOfTheMapFile</code>.</p>\n<p>First I will import all the needed utils from <code class=\"language-text\">fs</code> and declare my maps directory with <code class=\"language-text\">path.resolve</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> readdirSync<span class=\"token punctuation\">,</span> readFileSync<span class=\"token punctuation\">,</span> writeFileSync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TILESETS_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>\r\n    __dirname<span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'..'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'content'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'assets'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'sprites'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'maps'</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Call the function with the script parameter</span>\r\n<span class=\"token function\">copyTilesetData</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">copyTilesetData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tilesetName <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// TODO</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now for the <code class=\"language-text\">copyTilesetData</code> function, I will loop through all my maps folders (<code class=\"language-text\">maps_dir_1</code>, <code class=\"language-text\">maps_dir_2</code>) and search for the map with the target <code class=\"language-text\">tileset</code>, when I found it, I will read the file with <code class=\"language-text\">readFileSync</code> and save it’s <code class=\"language-text\">tilesets</code> attribute to a local variable to use later.</p>\n<p>Then I will make another loop to go to each of the other maps and load the <code class=\"language-text\">tileset</code> into them and saving it to the same path using <code class=\"language-text\">writeFileSync</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">copyTilesetData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tilesetName <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tilesetName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'No Tileset passed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">const</span> allFiles <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">let</span> sourceTilesetData <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\">// eslint-disable-next-line no-restricted-syntax</span>\r\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> tilesetPath <span class=\"token keyword\">of</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'maps_dir_1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'maps_dir_2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token punctuation\">,</span> tilesetPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// eslint-disable-next-line no-await-in-loop</span>\r\n        <span class=\"token keyword\">const</span> spritesFiles <span class=\"token operator\">=</span> <span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// eslint-disable-next-line no-restricted-syntax</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> spritesFile <span class=\"token keyword\">of</span> spritesFiles<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>spritesFile <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tilesetName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// eslint-disable-next-line no-await-in-loop</span>\r\n                <span class=\"token keyword\">const</span> jsonData <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">,</span> spritesFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                sourceTilesetData <span class=\"token operator\">=</span> jsonData<span class=\"token punctuation\">.</span>tilesets<span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                allFiles<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">,</span> spritesFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// eslint-disable-next-line no-restricted-syntax</span>\r\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> jsonFile <span class=\"token keyword\">of</span> allFiles<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// eslint-disable-next-line no-await-in-loop</span>\r\n        <span class=\"token keyword\">const</span> jsonData <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>\r\n            jsonFile\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        jsonData<span class=\"token punctuation\">.</span>tilesets <span class=\"token operator\">=</span> sourceTilesetData<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// eslint-disable-next-line no-await-in-loop</span>\r\n        <span class=\"token keyword\">await</span> <span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>\r\n            jsonFile<span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And that’s it! I hope this script helps you the same way it helps me. See you in the next one!</p>","fields":{"slug":"/2021/2021-10-02-automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script.en/","path":"/blog/games/automatically-update-the-embedded-tileset-for-all-your-tiled-game-with-a-nodejs-script/","locale":"en"},"readingTime":{"minutes":2.78},"frontmatter":{"date":"2021-10-02T00:00:00.000Z","title":"Automatically update the embedded Tileset for all your Tiled maps a Node.js script","categories":["games"]}}},{"node":{"excerpt":"To celebrate the release of the Matrix 4 trailer, I want to…","html":"<p>To celebrate the release of the <a href=\"https://www.youtube.com/watch?v=9ix7TUGVYIo\" target=\"_blank\" rel=\"noreferrer\">Matrix 4 trailer</a>, I want to add a Matrix Source-Code effect background to this website, which is already deployed, and you can test it by using the Konami Code 👀</p>\n<p><img src=\"/220e1bfcd62b78de2b2c54284481f483/the-matrix-source-code-effect.gif\" alt=\"The Matrix Source-Code effect\"></p>\n<h2 id=\"how-to-do-it-with-javascript\" style=\"position:relative;\"><a href=\"#how-to-do-it-with-javascript\" aria-label=\"how to do it with javascript permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to do it with JavaScript?</h2>\n<p>The best way to do this sort of effect is using the HTML <code class=\"language-text\">canvas</code> element. Most of the 3D and gaming stuff you see using JavaScript will be rendered in the <code class=\"language-text\">canvas</code>.</p>\n<p>Since I was sure someone already had an article on how to do it, I researched a bit and found <a href=\"https://dev.to/gnsp/making-the-matrix-effect-in-javascript-din\" target=\"_blank\" rel=\"noreferrer\">this article that shows how to do it with vanilla JavaScript</a>, so let’s adapt Ganesh’s code to a React functional component.</p>\n<h2 id=\"the-code\" style=\"position:relative;\"><a href=\"#the-code\" aria-label=\"the code permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The code</h2>\n<p>The React functional component is just a wrapper for the code, which will be set up in the <code class=\"language-text\">useEffect</code> hook. I’ve also added some styles to the <code class=\"language-text\">canvas</code> element to make it the background of my blog.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useRef <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">MatrixBackground</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> timeout <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> canvas <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// Ganesh's code go here</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>canvas<span class=\"token punctuation\">,</span> timeout<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div\r\n            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// custom styles to make it show up in the background</span>\r\n                <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000000'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">overflow</span><span class=\"token operator\">:</span> <span class=\"token string\">'hidden'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'fixed'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">zIndex</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>canvas\r\n                ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>canvas<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MatrixBackground<span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the <code class=\"language-text\">useEffect</code> with the code, it is simply a copy and paste of the original code, with an additional <code class=\"language-text\">return</code> statement to clear the <code class=\"language-text\">setInterval</code> loop being called.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> width <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>offsetWidth<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> height <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>offsetHeight<span class=\"token punctuation\">;</span>\r\n    canvas<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> width<span class=\"token punctuation\">;</span>\r\n    canvas<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> height<span class=\"token punctuation\">;</span>\r\n\r\n    context<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#000'</span><span class=\"token punctuation\">;</span>\r\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// calculate how many 'lines' to show and animate</span>\r\n    <span class=\"token keyword\">const</span> columns <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">/</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> yPositions <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">length</span><span class=\"token operator\">:</span> columns <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    context<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#000'</span><span class=\"token punctuation\">;</span>\r\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">matrixEffect</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        context<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#0001'</span><span class=\"token punctuation\">;</span>\r\n        context<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        context<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'#0f0'</span><span class=\"token punctuation\">;</span>\r\n        context<span class=\"token punctuation\">.</span>font <span class=\"token operator\">=</span> <span class=\"token string\">'15pt monospace'</span><span class=\"token punctuation\">;</span>\r\n\r\n        yPositions<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">y<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> String<span class=\"token punctuation\">.</span><span class=\"token function\">fromCharCode</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">128</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> index <span class=\"token operator\">*</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\r\n            context<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">></span> <span class=\"token number\">100</span> <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                yPositions<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                yPositions<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> y <span class=\"token operator\">+</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> interval <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>matrixEffect<span class=\"token punctuation\">,</span> timeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>interval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>canvas<span class=\"token punctuation\">,</span> timeout<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can find the full code in <a href=\"https://gist.github.com/blopa/7ba2d74c9405ead1ac9875dbd8a2302d\" target=\"_blank\" rel=\"noreferrer\">this GitHub Gist</a>. Don’t forget to star ✨ 😃</p>","fields":{"slug":"/2021/2021-09-16-creating-a-matrix-source-code-effect-background-for-my-website-with-react.en/","path":"/blog/coding/creating-a-matrix-source-code-effect-background-for-my-website-with-react/","locale":"en"},"readingTime":{"minutes":2.07},"frontmatter":{"date":"2021-09-16T00:00:00.000Z","title":"Creating a Matrix Source-Code effect background for my website with React","categories":["coding"]}}},{"node":{"excerpt":"Hey everyone, here we are again with another game devlog for…","html":"<p>Hey everyone, here we are again with another game devlog for <a href=\"/en/blog/tags/super-ollie-vs-pebble-corp/\">Super Ollie</a>, and since the game is being built with JavaScript, I can easily export it to pretty much any gaming platform, and today I’m to create a mobile build for my game.</p>\n<h2 id=\"mobile-controls\" style=\"position:relative;\"><a href=\"#mobile-controls\" aria-label=\"mobile controls permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mobile controls</h2>\n<p>The character in my game is controlled via a gamepad or keyboard, so the easiest way to port that into a mobile version is to add virtual controller keys to the game.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1019px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUklEQVQoz43M2U/aABzA8f47PiiXxMgpCcvGUYWpIIMCEo20CsJw02yobOVaW4orVVRGqRRo8eJSYWaJvm3JXnzbkiX7M/ayZC6y63XJ5+n7OwCWZnYDT9t881honfKdJt/7D92WcCmwDeC6nLkqrDEHxS2uxlSO2sLbltD7pcl3T7jzZq33t/zRbdcv6wcNoJzh63h17807jOrm8xdCqcMzHZ5pC6VOjemUCm2u2OZ/x38E9ozdPQQSm+Ut4pDC6zhaxuMchlbweIVI8ViimktWeiTPvaql+hFDK/0p11dNvigCQYRe8ucWF3JLfjqAbAcRGvbnECjumyU3Qru3lZNrrDw3Ty0jdADuQ7YDMB1EdgJIFvC4CMiBw/DOcqjgdRL2Gex1KP8lsfMBLXzEyt9Kh61YcdqOeV2E20l4XITHifvcmMeJe6E0ADlSHhf+ZJVF0415HwW5KTKcvEmnbo8vvtcaP9iTs1jJ5iB8btJhz0bDic9XG1dMeHWZhFw4oB+1ra7trW+yaPIogTURmEa860QE/YTv36TzX8n90mPSatlwTsemLC/RZ8T708gpV8hSZ3OzaUAnt9gtwcAi/jxadDwMGccgrdh8b2RSJQGVYpNKMq6WgFqpWSUyOqdCGNl8ZIvOTEZCwYxBawcUQw9GBvSTZr9/IaEUGfsMaimolphUIoNGYlaLTUqRQTlkNOs9KyuUDYRHBnSKQYNODgIqkUErGx8bturkVo0U1A5PqMRGrWyif2bUyECNxHy3Ix1XDN6/+yg2qaUmjRTUj1p/Ag4AR3L2JCtBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Mobile controls\"\n        title=\"Mobile controls\"\n        src=\"/static/b4e06a90f8970637c139d8869cd2925b/f5df9/skate-platformer-mobile-controls.png\"\n        srcset=\"/static/b4e06a90f8970637c139d8869cd2925b/e3135/skate-platformer-mobile-controls.png 256w,\n/static/b4e06a90f8970637c139d8869cd2925b/06341/skate-platformer-mobile-controls.png 512w,\n/static/b4e06a90f8970637c139d8869cd2925b/f5df9/skate-platformer-mobile-controls.png 1019w\"\n        sizes=\"(max-width: 1019px) 100vw, 1019px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Mobile controls</figcaption>\n  </figure></p>\n<p>To make this I will need 3 sprites for buttons, one for the <code class=\"language-text\">A button</code>, one for the <code class=\"language-text\">B button</code>, and another one for the <code class=\"language-text\">D-buttons</code>, like the sprite image below:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 125px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.800000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVQoz12RQWtUMRCAI1jsxav4PwT/h/0THjx58KaCeBTpWagHQcRafCpvecn2vcy83U12e1DY4m7yTLbVUkER0aM+9rUjs0QoPYTM8E2GLzNCgb8mtTNSO5La/ZTa3VfgLyrwQoG/LrUbJfZbgb+X9fYF0YnYeTu6VA39Gtq4Biaso4kCTBRCatcq8KSw6RQ0tIrBP1TgL0vtlpz38VNiq8YP6nF8NJgcfkMbZ2DCHG38DCaUaOM6W3BRu50NKMv3OoUN5z+kdrvMinLWvsqG9E5+6FLtLzDxe5ZPqBx4QhsJTCA0kWMj+tgs8/6UXmyXpy9fI9t16Yu0YmpKz573TnfejJidsKnUH+nx5tM/u/W8rceLFkxo0UY+tDIsqvnfoppTUc2W3EiBP5TaPfnPsnyP8v50mQyP0C6+FOWUqmFz3vAuz/Aoza1LNz+6VU+OmX09O8NkfhNtvD2YHBi0sQcm9NDGGk24gzYKNrwitdtKxUFqtyG1E2nLV8+wAwX+htReoA1i/P5Y1OOFABMEN+Ito40X/gG43aZxI/AvBAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Button sprites\"\n        title=\"Button sprites\"\n        src=\"/static/42b88d2f41be772c5fba6b594eeabf81/c59a0/button-sprites.png\"\n        srcset=\"/static/42b88d2f41be772c5fba6b594eeabf81/c59a0/button-sprites.png 125w\"\n        sizes=\"(max-width: 125px) 100vw, 125px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Button sprites</figcaption>\n  </figure></p>\n<p>For the code, I will do pretty much <a href=\"/en/blog/games/creating-hero-hud-on-phaser-js-skate-platformer-game-devlog-10/\">the same as I did for the HUD</a>, which is create a class and set its scroll factor to <code class=\"language-text\">0</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">TouchScreenControls</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GameGroup</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        scene<span class=\"token punctuation\">,</span>\r\n        x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n        y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n        name<span class=\"token punctuation\">,</span>\r\n        dPadAsset <span class=\"token operator\">=</span> <span class=\"token string\">'d_pad'</span><span class=\"token punctuation\">,</span>\r\n        buttonAAsset <span class=\"token operator\">=</span> <span class=\"token string\">'button_a'</span><span class=\"token punctuation\">,</span>\r\n        buttonBAsset <span class=\"token operator\">=</span> <span class=\"token string\">'button_b'</span><span class=\"token punctuation\">,</span>\r\n        controlKeys <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token constant\">LEFT</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">RIGHT</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">UP</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">DOWN</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">SPACE</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">NUMPAD_ZERO</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span>KeyCodes<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> baseKeys <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">d_pad_left</span><span class=\"token operator\">:</span> <span class=\"token constant\">LEFT</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">d_pad_right</span><span class=\"token operator\">:</span> <span class=\"token constant\">RIGHT</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">d_pad_up</span><span class=\"token operator\">:</span> <span class=\"token constant\">UP</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">d_pad_down</span><span class=\"token operator\">:</span> <span class=\"token constant\">DOWN</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">button_a</span><span class=\"token operator\">:</span> <span class=\"token constant\">SPACE</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">button_b</span><span class=\"token operator\">:</span> <span class=\"token constant\">NUMPAD_ZERO</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> keys <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token operator\">...</span>baseKeys<span class=\"token punctuation\">,</span>\r\n            <span class=\"token operator\">...</span>controlKeys<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> children <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">[</span>\r\n            dPadAsset<span class=\"token punctuation\">,</span>\r\n            buttonAAsset<span class=\"token punctuation\">,</span>\r\n            buttonBAsset<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>assignButtonActions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            scene<span class=\"token punctuation\">,</span>\r\n            children<span class=\"token punctuation\">,</span>\r\n            name<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token constant\">TOUCH_CONTROLS_DEPTH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setControlsPositions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TouchScreenControls<span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the <code class=\"language-text\">assignButtonActions</code> function, I need to write a code that will be triggered when the player presses one of the on-screen buttons in the game, and the easiest way to do this is by simulating existing mapped keyboard keys.</p>\n<p>For example, I already coded that when the space bar is pressed, the hero needs to jump, so all I need to do now is to create a code for when the player presses the in-screen <code class=\"language-text\">A button</code>, that will simulate that the space bar was pressed, and I found a really nice <a href=\"https://gist.github.com/GlauberF/d8278ce3aa592389e6e3d4e758e6a0c2\" target=\"_blank\" rel=\"noreferrer\">GitHub Gist with a function that does just that</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/**\r\n * source https://gist.github.com/GlauberF/d8278ce3aa592389e6e3d4e758e6a0c2\r\n * Simulate a key event.\r\n * @param {Number} keyCode The keyCode of the key to simulate\r\n * @param {String} type (optional) The type of event : down, up or press. The default is down\r\n */</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">simulateKeyEvent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">keyCode<span class=\"token punctuation\">,</span> type</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> evtName <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">key</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token string\">'keydown'</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> event <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HTMLEvents'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">initEvent</span><span class=\"token punctuation\">(</span>evtName<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    event<span class=\"token punctuation\">.</span>keyCode <span class=\"token operator\">=</span> keyCode<span class=\"token punctuation\">;</span>\r\n\r\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now for the actual <code class=\"language-text\">assignButtonActions</code> function code, the key here is to trigger an event for <code class=\"language-text\">pointerdown</code>, <code class=\"language-text\">pointerup</code>, and <code class=\"language-text\">pointerout</code>, otherwise, it will not work properly on the touchscreen.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">assignButtonActions</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">asset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>asset <span class=\"token operator\">===</span> buttonPrefix <span class=\"token operator\">+</span> dPadAsset<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">let</span> angle <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">[</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'right'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dPadDirection</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> assetName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>asset<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dPadDirection<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Image</span><span class=\"token punctuation\">(</span>\r\n                scene<span class=\"token punctuation\">,</span>\r\n                x<span class=\"token punctuation\">,</span>\r\n                y<span class=\"token punctuation\">,</span>\r\n                asset\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>assetName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setAngle</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setInteractive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerdown'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x90989e</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>assetName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerup'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">clearTint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>assetName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerout'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">clearTint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>assetName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            angle <span class=\"token operator\">+=</span> <span class=\"token number\">90</span><span class=\"token punctuation\">;</span>\r\n            children<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Image</span><span class=\"token punctuation\">(</span>\r\n            scene<span class=\"token punctuation\">,</span>\r\n            x<span class=\"token punctuation\">,</span>\r\n            y<span class=\"token punctuation\">,</span>\r\n            asset\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>asset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setInteractive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerdown'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setTint</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x90989e</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>asset<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'down'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerup'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">clearTint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>asset<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pointerout'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">clearTint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">simulateKeyEvent</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">[</span>asset<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">setControlsPositions</code> function is quite boring, it simply sets the position of each control button:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">setControlsPositions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> paddingX <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> paddingY <span class=\"token operator\">=</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> child<span class=\"token punctuation\">;</span>\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>paddingX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>height <span class=\"token operator\">-</span> paddingY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setScrollFactor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_d_pad_left'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_d_pad_up'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">58</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">49</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_d_pad_right'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">88</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_d_pad_down'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">37</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_button_a'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">-</span> paddingX <span class=\"token operator\">-</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'big_button_b'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">-</span> paddingX <span class=\"token operator\">-</span> <span class=\"token number\">85</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'d_pad_left'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'d_pad_up'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'d_pad_right'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'d_pad_down'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'button_a'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">-</span> paddingX <span class=\"token operator\">-</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'button_b'</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">-</span> paddingX <span class=\"token operator\">-</span> <span class=\"token number\">75</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"mobile-build\" style=\"position:relative;\"><a href=\"#mobile-build\" aria-label=\"mobile build permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mobile build</h2>\n<p>I don’t want to load extra assets if I’m not using them, so I will create a separate build for mobile and check in my code if I should or should not load the button assets:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">getGlobal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'IS_MOBILE_BUILD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'big_d_pad'</span><span class=\"token punctuation\">,</span> bigDPad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'big_button_a'</span><span class=\"token punctuation\">,</span> bigButtonA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'big_button_b'</span><span class=\"token punctuation\">,</span> bigButtonB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'big_button_Y'</span><span class=\"token punctuation\">,</span> bigButtonY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d_pad'</span><span class=\"token punctuation\">,</span> dPad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button_a'</span><span class=\"token punctuation\">,</span> buttonA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button_b'</span><span class=\"token punctuation\">,</span> buttonB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button_Y'</span><span class=\"token punctuation\">,</span> buttonY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">getGlobal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'IS_MOBILE_BUILD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchScreenControls <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TouchScreenControls</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'touchScreenControls'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">dPadAsset</span><span class=\"token operator\">:</span> <span class=\"token string\">'d_pad'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">buttonAAsset</span><span class=\"token operator\">:</span> <span class=\"token string\">'button_a'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">buttonBAsset</span><span class=\"token operator\">:</span> <span class=\"token string\">'button_b'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">useBigButtons</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchScreenControls<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then in my <code class=\"language-text\">package.json</code> I will create a build script with <code class=\"language-text\">\"build-mobile\": \"webpack --mode production --config webpack.config.prod.js --env=mobile\"</code>, and on my Webpack settings by exporting a function instead of an object:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// webpack.config.js</span>\r\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">env <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> isMobileBuild <span class=\"token operator\">=</span> env <span class=\"token operator\">===</span> <span class=\"token string\">'mobile'</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isMobileBuild<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token constant\">BUILD_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'www/build'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token constant\">DIST_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'www'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Also, I will define the <code class=\"language-text\">IS_MOBILE_BUILD</code> variable with the <a href=\"https://webpack.js.org/plugins/define-plugin/\" target=\"_blank\" rel=\"noreferrer\">Webpack Define Plugin</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>DefinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token constant\">IS_MOBILE_BUILD</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>isMobileBuild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"building-an-apk-bundle\" style=\"position:relative;\"><a href=\"#building-an-apk-bundle\" aria-label=\"building an apk bundle permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building an APK Bundle</h2>\n<p>I want my game to run on Android for now, and for that, I will use <a href=\"https://cordova.apache.org/\" target=\"_blank\" rel=\"noreferrer\">Cordova</a>. First I need to install Cordova with <code class=\"language-text\">npm install -g cordova</code>, then <a href=\"https://cordova.apache.org/docs/en/10.x/guide/platforms/android/index.html\" target=\"_blank\" rel=\"noreferrer\">install Android Studio and yada yada</a> and then finally create my project with <code class=\"language-text\">cordova create skate</code>.</p>\n<p>Cordova will expect the build files to be in a <code class=\"language-text\">www/</code> folder, that’s why I had to change my Webpack script before. Now I can simply run <code class=\"language-text\">cordova build --release android</code> and an unsigned APK file will be generated for me.</p>\n<p>That’s it! Easy peasy lemon squeezy!</p>\n<p>See you in the next one!</p>","fields":{"slug":"/2021/2021-09-09-creating-a-mobile-build-of-my-phaser-js-game-game-devlog-23.en/","path":"/blog/games/creating-a-mobile-build-of-my-phaser-js-game-game-devlog-23/","locale":"en"},"readingTime":{"minutes":5.05},"frontmatter":{"date":"2021-09-09T00:00:00.000Z","title":"Creating a mobile build of my Phaser JS game - Game Devlog #23","categories":["games"]}}},{"node":{"excerpt":"Last month I traveled to the region of Algarve in Portugal…","html":"<p>Last month I traveled to the region of Algarve in Portugal, and for my luck, there were some awesome beaches for hiking, stone climbing, and cliff diving, and since my home city is full of beaches like these, it instantaneously felt like home for me.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABX3bAijha/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAERAgMQEiL/2gAIAQEAAQUCi4Lc7IxU3P8A/8QAFhEBAQEAAAAAAAAAAAAAAAAAABIT/9oACAEDAQE/AYZv/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAESE//aAAgBAgEBPwG2aM//xAAXEAADAQAAAAAAAAAAAAAAAAABECAy/9oACAEBAAY/AlkR/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAERQVEhYf/aAAgBAQABPyFXMSXYYvYJMIWIvaP/2gAMAwEAAgADAAAAEN8//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAR8P/aAAgBAwEBPxDHEBv/xAAWEQEBAQAAAAAAAAAAAAAAAAABEPH/2gAIAQIBAT8QC2f/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMWGRQXGB/9oACAEBAAE/EDUrXogwgPJQXAbvKd3jiUTDqV66J8gdcT//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Ferradurinha beach, Brazil\"\n        title=\"Ferradurinha beach, Brazil\"\n        src=\"/static/a88f45b650bce341acd5d1de09ac823b/63217/ferradurinha-beach.jpg\"\n        srcset=\"/static/a88f45b650bce341acd5d1de09ac823b/db830/ferradurinha-beach.jpg 256w,\n/static/a88f45b650bce341acd5d1de09ac823b/8102f/ferradurinha-beach.jpg 512w,\n/static/a88f45b650bce341acd5d1de09ac823b/63217/ferradurinha-beach.jpg 1024w,\n/static/a88f45b650bce341acd5d1de09ac823b/d58d1/ferradurinha-beach.jpg 1536w,\n/static/a88f45b650bce341acd5d1de09ac823b/aaf92/ferradurinha-beach.jpg 1920w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Ferradurinha beach, Brazil</figcaption>\n  </figure></p>\n<h2 id=\"carvalho-beach-in-benagil\" style=\"position:relative;\"><a href=\"#carvalho-beach-in-benagil\" aria-label=\"carvalho beach in benagil permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Carvalho Beach in Benagil</h2>\n<p>We went to a couple of places in Algarve, but the one I had the most fun with was Benagil, more specifically the Carvalho Beach, which is full of cliff diving spots.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.9375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHYlEpcWD//xAAaEAEAAgMBAAAAAAAAAAAAAAABAgMAERIE/9oACAEBAAEFAn0HBdZLG2Q1G84Op6Jf/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAECEv/aAAgBAwEBPwGKsv/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/Aar/xAAbEAADAAIDAAAAAAAAAAAAAAAAARECECGB4f/aAAgBAQAGPwJ5JU8Oc50TUSR//8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFRYXGR/9oACAEBAAE/IdCSaQ+TXAfDN/NC3Uwxt9WDCDsuf//aAAwDAQACAAMAAAAQgx//xAAWEQEBAQAAAAAAAAAAAAAAAAAAETH/2gAIAQMBAT8QhqH/xAAXEQEAAwAAAAAAAAAAAAAAAAAAARFR/9oACAECAQE/EJyu/8QAHRAAAgIBBQAAAAAAAAAAAAAAAREAITFBYYGRsf/aAAgBAQABPxBAgUCZuWCwRTT7Ko1jOCMVeOsKFEDBXC3lSIBqOzP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Carvalho beach\"\n        title=\"Carvalho beach\"\n        src=\"/static/92bd60372258781282cc5e96a44ab84f/63217/carvalho-beach-benagil.jpg\"\n        srcset=\"/static/92bd60372258781282cc5e96a44ab84f/db830/carvalho-beach-benagil.jpg 256w,\n/static/92bd60372258781282cc5e96a44ab84f/8102f/carvalho-beach-benagil.jpg 512w,\n/static/92bd60372258781282cc5e96a44ab84f/63217/carvalho-beach-benagil.jpg 1024w,\n/static/92bd60372258781282cc5e96a44ab84f/d58d1/carvalho-beach-benagil.jpg 1536w,\n/static/92bd60372258781282cc5e96a44ab84f/09658/carvalho-beach-benagil.jpg 2048w,\n/static/92bd60372258781282cc5e96a44ab84f/120d2/carvalho-beach-benagil.jpg 4000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Carvalho beach</figcaption>\n  </figure></p>\n<p>The Carvalho Beach has its name because it was a private beach for a captain called Carvalho, and it was only accessible by boat, but then some years later the government decreed that all beaches must be public, so captain Carvalho dug an entrance to the beach in the rocks so anyone could easily enter it.</p>\n<p>I was a bit rusted with my cliff diving skills, but in the end, I was able to jump off almost all of them, and here are my tips on how to have a great time there.</p>\n<p>Before following any of these tips please remember to respect your physical limit and be safe. You can get really injured if you don’t know what you’re doing.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABZK72JMwf/8QAGBABAQEBAQAAAAAAAAAAAAAAAgEDACH/2gAIAQEAAQUCPoMK5aE2aSQ6ydoZX//EABYRAAMAAAAAAAAAAAAAAAAAAAABEv/aAAgBAwEBPwGUSj//xAAWEQADAAAAAAAAAAAAAAAAAAAAARL/2gAIAQIBAT8Btls//8QAGxAAAwACAwAAAAAAAAAAAAAAAAEREiEiYaH/2gAIAQEABj8CyaOLI34TZcein//EABsQAQADAQADAAAAAAAAAAAAAAEAITERQVFx/9oACAEBAAE/IR0VXklCi/JRAwjv4pvuM2bpiIm3P//aAAwDAQACAAMAAAAQqD//xAAVEQEBAAAAAAAAAAAAAAAAAAAAYf/aAAgBAwEBPxCKb//EABgRAAIDAAAAAAAAAAAAAAAAAAABETFh/9oACAECAQE/EFDZqf/EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQWFRkfD/2gAIAQEAAT8QMoDc5VHW4hyJWePZFZR2Ksg+RVCl7eOpSDcgtHLqCop/Mz//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Danger sign\"\n        title=\"Danger sign\"\n        src=\"/static/a5407d530669e2d5ac387ab70728a062/63217/danger-sign.jpg\"\n        srcset=\"/static/a5407d530669e2d5ac387ab70728a062/db830/danger-sign.jpg 256w,\n/static/a5407d530669e2d5ac387ab70728a062/8102f/danger-sign.jpg 512w,\n/static/a5407d530669e2d5ac387ab70728a062/63217/danger-sign.jpg 1024w,\n/static/a5407d530669e2d5ac387ab70728a062/d58d1/danger-sign.jpg 1536w,\n/static/a5407d530669e2d5ac387ab70728a062/09658/danger-sign.jpg 2048w,\n/static/a5407d530669e2d5ac387ab70728a062/fdb5a/danger-sign.jpg 2400w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Danger sign</figcaption>\n  </figure></p>\n<h3 id=\"look-at-the-tides\" style=\"position:relative;\"><a href=\"#look-at-the-tides\" aria-label=\"look at the tides permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Look at the tides</h3>\n<p>Some cliff diving spots are only safe to jump when the tides are high, so <a href=\"https://www.tideking.com/Portugal/Faro/Lagoa/Praia-do-Carvalho/\" target=\"_blank\" rel=\"noreferrer\">keep an eye on the tides in sites like tideking.com</a>.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 671px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.6875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmklEQVQoz12QDW+CMBCG+f//bbrNTSZfIqVlRWjpXb8oigtoXLbLk6bJvc/10ohzTgjhnFcVKctTTempInVNGWsYY6eybJpvQmrWNJTSqiKUsePxqI293W6Rc16BRm2t9eFZ4ximYIxToAGNAn3PTNMUQvDeX6/XRR6UFlILiX4Mt7+ljRdSy2FBSAR0/wIRou0F9AKcH//1ULtegJAoJPYCAJdV53nhIStlFrkH51Z5XnnKcpXFKoN9zr37kbZODCiHZe1LuF7C9Zkw1vWdEhIH0L0A1Haeb1qN3k6Pl88c+Ldq2ECKgRZY5yBbf5nmyzTT05C9N8murY6iF9idsSl1dVBVonBYPigqE7Hf8P2G5x+CFbrOgSRAc6AFJG9dvG3jbbt/4Yf3Ntl1dYqs0DTH6gBnaqIql58vPN62x1iyAmmOrMA6Wy7ZZx9v26/XhXjTprvuHrhTpxCRfNhv+NdrW+xFnQFJVzKoM0g/unjLD28PP911v4E1ExnjnB29C94H74Jzwdng7OjsaM1otAcwS/eOnx6t9fwBDqJonZY7YnAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Tides\"\n        title=\"Tides\"\n        src=\"/static/c9775f74a4eeeae083abf97d82ede34e/b5f03/tides-carvalho-beach.png\"\n        srcset=\"/static/c9775f74a4eeeae083abf97d82ede34e/e3135/tides-carvalho-beach.png 256w,\n/static/c9775f74a4eeeae083abf97d82ede34e/06341/tides-carvalho-beach.png 512w,\n/static/c9775f74a4eeeae083abf97d82ede34e/b5f03/tides-carvalho-beach.png 671w\"\n        sizes=\"(max-width: 671px) 100vw, 671px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Tides</figcaption>\n  </figure></p>\n<p>Another way to know if the tide is high, is by looking at the smaller rocks near the big rock in the middle of the beach, if you can’t see them, like in the photo below, it means that the tide is good for jumping.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.328125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUDBAb/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABbVYFqaMXkf/EABoQAAMBAAMAAAAAAAAAAAAAAAABEgIDBBH/2gAIAQEAAQUCsx2K3Q2JTy+n/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAABARAf/aAAgBAQAGPwIjyL//xAAaEAADAAMBAAAAAAAAAAAAAAAAASEQETFB/9oACAEBAAE/IdEcHHzFtXgpqKbn/9oADAMBAAIAAwAAABBDH//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxAS2//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EGf/xAAcEAEBAQABBQAAAAAAAAAAAAABEQAhMUFRcbH/2gAIAQEAAT8QQKvAVyKgWrpJ93vkiNQiecCNEmn33//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Submerged stones\"\n        title=\"Submerged stones\"\n        src=\"/static/7bdd361af40fab4f68ddd0b063d54009/63217/carvalho-beach-submerged-stones.jpg\"\n        srcset=\"/static/7bdd361af40fab4f68ddd0b063d54009/db830/carvalho-beach-submerged-stones.jpg 256w,\n/static/7bdd361af40fab4f68ddd0b063d54009/8102f/carvalho-beach-submerged-stones.jpg 512w,\n/static/7bdd361af40fab4f68ddd0b063d54009/63217/carvalho-beach-submerged-stones.jpg 1024w,\n/static/7bdd361af40fab4f68ddd0b063d54009/d58d1/carvalho-beach-submerged-stones.jpg 1536w,\n/static/7bdd361af40fab4f68ddd0b063d54009/09658/carvalho-beach-submerged-stones.jpg 2048w,\n/static/7bdd361af40fab4f68ddd0b063d54009/fdb5a/carvalho-beach-submerged-stones.jpg 2400w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Submerged stones</figcaption>\n  </figure></p>\n<h3 id=\"get-a-pair-of-water-shoes\" style=\"position:relative;\"><a href=\"#get-a-pair-of-water-shoes\" aria-label=\"get a pair of water shoes permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Get a pair of water shoes</h3>\n<p>I was there with either my bare foot or my pair of Havaianas and neither was a good choice, I could injure my foot while barefoot or have an awful fall with my Havaianas due it becoming slippery when wet.</p>\n<p>I saw many people with water shoes walking freely on the cliffs, and I highly recommend you get some, they are quite cheap at Decathlon.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.578125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwACBP/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAT0bIG67O//EABkQAQACAwAAAAAAAAAAAAAAAAECAwASIv/aAAgBAQABBQImSt61shZsVqowzrP/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAIR/9oACAECAQE/Aaa//8QAHBAAAgEFAQAAAAAAAAAAAAAAAAExEiEiUXGB/9oACAEBAAY/AvBUkHDF2WyT/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAEhETFBcf/aAAgBAQABPyH4mN9Ep3o7LcEJ70M8e4Y5rWT/2gAMAwEAAgADAAAAEPzP/8QAFREBAQAAAAAAAAAAAAAAAAAAEQD/2gAIAQMBAT8QZF//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EGVhg//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESFBMVFxkaH/2gAIAQEAAT8QLYRYA9j7GdIu9l1WZbhADBUqdEdu8cztH1A8RriiuKn/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Diving spots\"\n        title=\"Diving spots\"\n        src=\"/static/7fa6dfbdcaf470b84daa7a9f791373cb/a24e6/water-shoes.jpg\"\n        srcset=\"/static/7fa6dfbdcaf470b84daa7a9f791373cb/db830/water-shoes.jpg 256w,\n/static/7fa6dfbdcaf470b84daa7a9f791373cb/8102f/water-shoes.jpg 512w,\n/static/7fa6dfbdcaf470b84daa7a9f791373cb/a24e6/water-shoes.jpg 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Diving spots</figcaption>\n  </figure></p>\n<p>Another use for the water shoes is that they will protect you from the pain when diving from heights greater than 7 meters.</p>\n<h3 id=\"finding-the-best-spot\" style=\"position:relative;\"><a href=\"#finding-the-best-spot\" aria-label=\"finding the best spot permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Finding the best spot</h3>\n<p>In my stay in Benagil I was able to see almost every possible cliff diving spot there, and with the <a href=\"https://goo.gl/maps/1NEJxQWvWobMf2tu7\" target=\"_blank\" rel=\"noreferrer\">help of Google Maps</a> I have them highlighted for you.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8AKGIcY6BbqyRfYuDbnBtVW5kSG5kR2hfP1VPLk5JKXxvUW9mS2BXOpOCZnhtVUtGKF1UOIF2Xm1iTUpFMACvnop9clyMgW9+d1dQSCdtZEp8b1WEeV+bj3ZpYUaXh2ujk3mfi3LFrJVuYktTTTBfVz+Ic1qQgG1wZk0AkI+AjoV7lYFrhnpNYFgvgHNVv62T1b6j4cux1L+nrJ2DhnZabmJFoo54aWNMTkwyal9ElHxgk4Fpt6OLAJSKeKOUhaickJWOZHxpPYBvVcy3neXKraWehNa7nc+ylK6VemxdPG5iQpxwXIBgTnBmRW9jSHttVZN+YQCVe2mbjnq1raGWjG14YDZzW0G2oYbkyqy3pYfBmnqmj3B+kHSgfma1emSogGd9ZEttX0F3Zkl8bVCXf2IAnY9/gXBakYJsc2pAX1QqbFg1pY5tz66MwJt5mY9vYotwLXJvkX114recp5V2eGREa2BCemlKdmVEoIZpAG9qPKyLcr2lk31yOV1VKnZhPbmjhciVe66CaIGFbm9vbSNxdERtbsGhidSsk5J5XoBiSZaIaMyujaiMagBsYymaiVuVlWx+dDZtYzGAa0e1popogGdHcF05bmMxYGUmZXEhZ3J5aGqlhICng2uVaU+1o4iDj4eBiXwAY1spc2suf3MzcmQ2hHBHsI1oioNzHUNPFE5UFWVeHFxeIk5iImVzKGNvQG91rp6Em4VhdoJ4AUNSDEhVAF5SKV1TKVpTJ4dxSXJsVpWKdbCZildOXUdXY2RbXCZKVCNHWy5UZypjcjFaaLCgjOXPs0FjahJQYRlQXgC8ooKbjWuCdk5YYU8NPj42Sk9xcmskSlglTVwvQFBWW14vTFtlWmpIYXFfWmpoZ21JYmgTSFsYUmUVTV8Ar66ikJKLfoB4N1leH0xRFjhEFjdGE0NUEkRUCzZKUWBkLVBfHkRcGFBkFlVsEEliEURcGUphGEtjFk9jAE5mcFJtfFh2gIGdoTpjbQ9CThdEVBZDVBZHVxRKWBRDURZKWBc/UxlIXBpOZBtOZhpLZB1NZxxOaBhMYxr2Rr7g3z37AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Diving spots\"\n        title=\"Diving spots\"\n        src=\"/static/a8c0c79fdea530062931714acb223800/42a19/carvalho-beach-benagil-diving-spots.png\"\n        srcset=\"/static/a8c0c79fdea530062931714acb223800/e3135/carvalho-beach-benagil-diving-spots.png 256w,\n/static/a8c0c79fdea530062931714acb223800/06341/carvalho-beach-benagil-diving-spots.png 512w,\n/static/a8c0c79fdea530062931714acb223800/42a19/carvalho-beach-benagil-diving-spots.png 1024w,\n/static/a8c0c79fdea530062931714acb223800/b1a45/carvalho-beach-benagil-diving-spots.png 1293w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Diving spots</figcaption>\n  </figure></p>\n<h4 id=\"spot-a\" style=\"position:relative;\"><a href=\"#spot-a\" aria-label=\"spot a permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spot A</h4>\n<p>This is probably the first spot you should try to jump from, and there are 2 different heights to jump from, one is 6 meters (1.1 seconds of fall) and the other one is 4 meters (0.9 second of fall).</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.515625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAWFSc1xnh//EABgQAAMBAQAAAAAAAAAAAAAAAAABAhES/9oACAEBAAEFAuZMiV1BrNecM//EABURAQEAAAAAAAAAAAAAAAAAAAAh/9oACAEDAQE/AYj/xAAVEQEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAgEBPwFX/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERIQKRIjFB/9oACAEBAAY/Avdky4Kyezo5KSmf/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARUSH/2gAIAQEAAT8hXdhbRg3xurK8cvjFOz4HL//aAAwDAQACAAMAAAAQZ+//xAAYEQACAwAAAAAAAAAAAAAAAAAAEQFRYf/aAAgBAwEBPxB4HSD/xAAYEQADAQEAAAAAAAAAAAAAAAAAARFBUf/aAAgBAgEBPxCvC9M//8QAHhABAQACAgIDAAAAAAAAAAAAAREAMSFBYYGh0fH/2gAIAQEAAT8QSGG7F95c9ArT1kJ2C/rARLhxzZmj5nRfnKp3VEa8bz//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Diving spot A\"\n        title=\"Diving spot A\"\n        src=\"/static/274ab3d8f28ab70d85044c9b3be461db/63217/diving-spot-a.jpg\"\n        srcset=\"/static/274ab3d8f28ab70d85044c9b3be461db/db830/diving-spot-a.jpg 256w,\n/static/274ab3d8f28ab70d85044c9b3be461db/8102f/diving-spot-a.jpg 512w,\n/static/274ab3d8f28ab70d85044c9b3be461db/63217/diving-spot-a.jpg 1024w,\n/static/274ab3d8f28ab70d85044c9b3be461db/f2a33/diving-spot-a.jpg 1216w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Diving spot A</figcaption>\n  </figure></p>\n<p>Both spots are deep enough to jump safely depending on how you jump. If you simply jump forward you should be fine, I haven’t tried other variations like headfirst.</p>\n<h4 id=\"spot-b\" style=\"position:relative;\"><a href=\"#spot-b\" aria-label=\"spot b permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spot B</h4>\n<p>This spot is 6 meters high (1.1 seconds of fall) and can only be jumped from on high tides, but also you shouldn’t even try this one because there is a barrier blocking the entrance due to high risks of rockfall or injure when diving on low tides.</p>\n<h4 id=\"spot-c\" style=\"position:relative;\"><a href=\"#spot-c\" aria-label=\"spot c permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spot C</h4>\n<p>This is the highest spot on the beach, at 12 meters high (1.5 seconds of fall), and I still can’t believe I actually jumped from there.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQACBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAETXY5A0nD/AP/EABsQAAEEAwAAAAAAAAAAAAAAAAABAgMRBCEx/9oACAEBAAEFAilGxaxokecSj//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AYj/xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8Bta//xAAaEAEAAQUAAAAAAAAAAAAAAAAAEQECECEx/9oACAEBAAY/AnG03Ipj/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAERITFhUf/aAAgBAQABPyEpTlD4Pc2vhJWJPB+clg8RUn//2gAMAwEAAgADAAAAEPwf/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAEDAQE/EMpD/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8Qgt//xAAaEAEBAQEBAQEAAAAAAAAAAAABEQAhUXGB/9oACAEBAAE/ECrArgvDjXcZiXZDN08QeX7piAIA4fmDrgBh7v/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"View from spot C\"\n        title=\"View from spot C\"\n        src=\"/static/a3e1200d9fb9e68d00045bf3fed7bbe0/63217/diving-spot-c.jpg\"\n        srcset=\"/static/a3e1200d9fb9e68d00045bf3fed7bbe0/db830/diving-spot-c.jpg 256w,\n/static/a3e1200d9fb9e68d00045bf3fed7bbe0/8102f/diving-spot-c.jpg 512w,\n/static/a3e1200d9fb9e68d00045bf3fed7bbe0/63217/diving-spot-c.jpg 1024w,\n/static/a3e1200d9fb9e68d00045bf3fed7bbe0/d58d1/diving-spot-c.jpg 1536w,\n/static/a3e1200d9fb9e68d00045bf3fed7bbe0/09658/diving-spot-c.jpg 2048w,\n/static/a3e1200d9fb9e68d00045bf3fed7bbe0/fdb5a/diving-spot-c.jpg 2400w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">View from spot C</figcaption>\n  </figure></p>\n<p>For this one, you will need to have your arms close to your body and your legs closed together, and wearing water shoes will highly decrease the impact pain you’ll get on your feet.</p>\n<p>I recommend you practice tucking in your arms and legs together on spot A before trying this one.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.609375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAAB0ZQupFkWEf/EABsQAAIBBQAAAAAAAAAAAAAAAAABAgMQEhMh/9oACAEBAAEFArwqNGzmbP/EABgRAAIDAAAAAAAAAAAAAAAAAAABAhEh/9oACAEDAQE/AZPSz//EABcRAQADAAAAAAAAAAAAAAAAAAACETH/2gAIAQIBAT8Bjin/xAAYEAACAwAAAAAAAAAAAAAAAAAAMQIQEf/aAAgBAQAGPwK8kIR//8QAHhAAAQIHAQAAAAAAAAAAAAAAABExARAhQVFhcZH/2gAIAQEAAT8hu01upgihTemp6f/aAAwDAQACAAMAAAAQOP8A/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAB/9oACAEDAQE/EMEQv//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxAKNj//xAAaEAEBAQEBAQEAAAAAAAAAAAABEQAhYTFB/9oACAEBAAE/EBV0Ae27m5oxC/Q9vudLR+uchlc//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Jumping from spot C\"\n        title=\"Jumping from spot C\"\n        src=\"/static/fc21af4f379806e981bc0a90d9aaeec4/63217/jumping-from-spot-c.jpg\"\n        srcset=\"/static/fc21af4f379806e981bc0a90d9aaeec4/db830/jumping-from-spot-c.jpg 256w,\n/static/fc21af4f379806e981bc0a90d9aaeec4/8102f/jumping-from-spot-c.jpg 512w,\n/static/fc21af4f379806e981bc0a90d9aaeec4/63217/jumping-from-spot-c.jpg 1024w,\n/static/fc21af4f379806e981bc0a90d9aaeec4/5814a/jumping-from-spot-c.jpg 1400w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Jumping from spot C</figcaption>\n  </figure></p>\n<h4 id=\"spot-d\" style=\"position:relative;\"><a href=\"#spot-d\" aria-label=\"spot d permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spot D</h4>\n<p>This spot is 10 meters high (1.4 seconds of fall) and even with the high tide the water is not very deep, so it’s highly dangerous, and you should avoid it unless you really know what you’re doing, like the guy in the picture.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 134.765625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQT/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABtTEpoMJzIJCpon//xAAdEAACAQQDAAAAAAAAAAAAAAABAgADEBESEzFB/9oACAEBAAEFAhUU31UzQKcTlm5jGoT4nTHB/8QAGBEBAAMBAAAAAAAAAAAAAAAAAAEREiH/2gAIAQMBAT8BwzK3X//EABgRAAIDAAAAAAAAAAAAAAAAAAASARAh/9oACAECAQE/AXHisP/EABoQAAIDAQEAAAAAAAAAAAAAABAhAAExEXH/2gAIAQEABj8C05EpsVBXwV4P/8QAHhABAAIABwEAAAAAAAAAAAAAAQARECExQVFhcYH/2gAIAQEAAT8h0I/cXaGGWnxAOmGXq0nUs1ThJu8ma7hGpJ//2gAMAwEAAgADAAAAEEMo/wD/xAAYEQEBAAMAAAAAAAAAAAAAAAARAAEQUf/aAAgBAwEBPxDPGpDM/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQAQEVH/2gAIAQIBAT8QOigNmR//xAAeEAEAAgMAAgMAAAAAAAAAAAABABEhMVEQQWFxkf/aAAgBAQABPxCroLowYUliJ08bTgv1Ag3lbrZ9QLC1i0qWEy9+ZnfOgXKbmNJbiApsSfka1KrNu2Xxork//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Diving spot D\"\n        title=\"Diving spot D\"\n        src=\"/static/75c60ce7e3ef483f91ed31d1c3d83cc1/63217/diving-spot-d.jpg\"\n        srcset=\"/static/75c60ce7e3ef483f91ed31d1c3d83cc1/db830/diving-spot-d.jpg 256w,\n/static/75c60ce7e3ef483f91ed31d1c3d83cc1/8102f/diving-spot-d.jpg 512w,\n/static/75c60ce7e3ef483f91ed31d1c3d83cc1/63217/diving-spot-d.jpg 1024w,\n/static/75c60ce7e3ef483f91ed31d1c3d83cc1/b37e7/diving-spot-d.jpg 1080w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Diving spot D</figcaption>\n  </figure></p>\n<h4 id=\"spot-e\" style=\"position:relative;\"><a href=\"#spot-e\" aria-label=\"spot e permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spot E</h4>\n<p>This one I had no idea it was even possible, to be honest. I only found out about it on my last day there, and only because I tried to find videos about it on YouTube. This one will require insane climbing abilities.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/0UiYjYqCK5E?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>It looks to be around 8~10 meters high (around 1.3 seconds of fall) and from swimming near that rock I can say there are a bunch of rocks underwater, which makes this jump super dangerous. Avoid it like the plague.</p>\n<h2 id=\"final-thoughts\" style=\"position:relative;\"><a href=\"#final-thoughts\" aria-label=\"final thoughts permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Final thoughts</h2>\n<p>I had a blast in Benagil and was able to break my own record of cliff jumping from years ago when I jumped off the Bufador in Cabo Frio.</p>\n<p>If you are in Algarve for your next trip you should definitely give Benagil a try.</p>","fields":{"slug":"/2021/2021-09-02-a-guide-to-cliff-diving-in-benagil.en/","path":"/blog/general/a-guide-to-cliff-diving-in-benagil/","locale":"en"},"readingTime":{"minutes":4.115},"frontmatter":{"date":"2021-09-02T00:00:00.000Z","title":"A guide to cliff diving in Benagil","categories":["general"]}}},{"node":{"excerpt":"Hello everyone, welcome to another game devlog for my game…","html":"<p>Hello everyone, welcome to another game devlog for my game <a href=\"/en/blog/tags/super-ollie-vs-pebble-corp/\">Super Ollie</a>, and after almost a whole year of development I’m finally tackling something that every platformer must have: Moving platforms.</p>\n<blockquote>\n<p>A platformer needs platforms.</p>\n<p>— Sherlock Holmes, 600 BC</p>\n</blockquote>\n<h2 id=\"defining-platforms-types\" style=\"position:relative;\"><a href=\"#defining-platforms-types\" aria-label=\"defining platforms types permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining platforms types</h2>\n<p>There are many types of moving platforms, but for my game, I decided to stick to 6 different types for now. I hope you’re ready because this is going to be a big devlog 😬.</p>\n<h3 id=\"platforms-that-follow-a-path\" style=\"position:relative;\"><a href=\"#platforms-that-follow-a-path\" aria-label=\"platforms that follow a path permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Platforms that follow a path</h3>\n<p><img src=\"/a88d748f2631b39eb30f0d9a71c15bd0/follow-path-platforms.gif\" alt=\"Follow path platform\"></p>\n<p>Platforms that will follow a certain path drawn on Tiled.</p>\n<h3 id=\"platforms-that-move-in-a-circular-path\" style=\"position:relative;\"><a href=\"#platforms-that-move-in-a-circular-path\" aria-label=\"platforms that move in a circular path permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Platforms that move in a circular path</h3>\n<p><img src=\"/d33ebf38eb85bc1b909bce1a9d738d25/circular-moving-platforms.gif\" alt=\"Circular movement platforms\"></p>\n<p>Platforms that follow a circular movement based on a circle drawn on Tiled.</p>\n<h3 id=\"platforms-that-vanish\" style=\"position:relative;\"><a href=\"#platforms-that-vanish\" aria-label=\"platforms that vanish permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Platforms that vanish</h3>\n<p><img src=\"/d17bbf2a646e7454c244b81a3ff99a2b/vanishing-platforms.gif\" alt=\"Vanishing platform\"></p>\n<p>Platforms that will fall/vanish after a couple of seconds of the hero getting on top of them.</p>\n<h3 id=\"platforms-that-fall\" style=\"position:relative;\"><a href=\"#platforms-that-fall\" aria-label=\"platforms that fall permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Platforms that fall</h3>\n<p><img src=\"/b11eeca824a2777a98d3cd0af5fbd61e/falling-platforms.gif\" alt=\"Falling platform\"></p>\n<p>Platforms that will start to slowly fall when the hero is on top of them.</p>\n<h3 id=\"elevator-platforms\" style=\"position:relative;\"><a href=\"#elevator-platforms\" aria-label=\"elevator platforms permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Elevator platforms</h3>\n<p><img src=\"/162baeeff3a562abdd131484843f6629/elevator-platform.gif\" alt=\"Elevator platform\"></p>\n<p>Platforms that will move up and down like an elevator, and will only trigger the movement once the hero is on top of them.</p>\n<h3 id=\"looping-platforms\" style=\"position:relative;\"><a href=\"#looping-platforms\" aria-label=\"looping platforms permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Looping platforms</h3>\n<p><img src=\"/2fb103477a8bdbb48189b8c070b8b541/looping-platforms.gif\" alt=\"Looping platforms\"></p>\n<p>Platforms that will constantly move vertically until it reaches the end of the stage and then loops back to the top.</p>\n<h2 id=\"the-code\" style=\"position:relative;\"><a href=\"#the-code\" aria-label=\"the code permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The code</h2>\n<p>I will start by adding a new if condition to my data layer objects loop, and an attribute called <code class=\"language-text\">platformAI</code> on the platform object on Tiled, so I can create different AIs/Types of platforms.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// in the scene create function</span>\r\n<span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getObjectLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ndataLayer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> width <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'platform'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> platformAI <span class=\"token operator\">=</span> properties<span class=\"token operator\">?.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> property<span class=\"token operator\">?.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'platformAI'</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>value<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> velocity <span class=\"token operator\">=</span> properties<span class=\"token operator\">?.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> property<span class=\"token operator\">?.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'velocity'</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>value <span class=\"token operator\">||</span> <span class=\"token constant\">DEFAULT_PLATFORM_VELOCITY</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> platform <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Platform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n            velocity<span class=\"token punctuation\">,</span>\r\n            x<span class=\"token punctuation\">,</span>\r\n            y<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>platforms<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>platformAI<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">LOOP_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// TODO</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">FALLING_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// TODO</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">ELEVATOR_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// TODO</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">VANISHING_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// TODO</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">CIRCULAR_PATH_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// TODO</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">PATH_PLATFORM</span><span class=\"token operator\">:</span>\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// TODO</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With this base code in place, I can now start coding each of the different behaviors for the platforms.</p>\n<h2 id=\"path-follower\" style=\"position:relative;\"><a href=\"#path-follower\" aria-label=\"path follower permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Path follower</h2>\n<p>For this platform I will need to draw a path on Tiled and then make the platform follow it, and when I do that it comes as an array of positions like <code class=\"language-text\">[{ x: 1, y: 2 }, { x: 3, y: 6 }]</code>, and the idea is to get each of these positions and create a custom collider that when in contact with the platform will set its speed and direction.</p>\n<p>For that I’m going to need the <code class=\"language-text\">createInteractiveGameObject</code> function, that I showed on the <a href=\"/en/blog/games/creating-a-smarter-and-more-performing-ai-on-phaser-js-skate-platformer-game-devlog-15/\">devlog 15</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>platformAI<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">PATH_PLATFORM</span><span class=\"token operator\">:</span>\r\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// Get path from Tiled</span>\r\n        <span class=\"token keyword\">const</span> platformPath <span class=\"token operator\">=</span> dataLayer<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token parameter\">object</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> pathType <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>properties<span class=\"token operator\">?.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n                    <span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> property<span class=\"token operator\">?.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'type'</span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>value<span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">return</span> object<span class=\"token punctuation\">.</span>polyline<span class=\"token operator\">?.</span>length\r\n                    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span>pathName <span class=\"token operator\">||</span> objectId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token operator\">&amp;&amp;</span> pathType <span class=\"token operator\">===</span> <span class=\"token constant\">PATH_TYPE_PLATFORM</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        platformPath<span class=\"token punctuation\">.</span>polyline<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">path<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> polylines</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// create a custom interactive object for each of the polyline points</span>\r\n            <span class=\"token keyword\">const</span> platformCollider <span class=\"token operator\">=</span> <span class=\"token function\">createInteractiveGameObject</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n                platformPath<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> path<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\r\n                platformPath<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> path<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span>\r\n                <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token string\">'platform_collider'</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// set custom properties for the collider</span>\r\n        platformCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        platformCollider<span class=\"token punctuation\">.</span>nextPoint <span class=\"token operator\">=</span> polylines<span class=\"token punctuation\">[</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        platformCollider<span class=\"token punctuation\">.</span>currentPoint <span class=\"token operator\">=</span> polylines<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        platformCollider<span class=\"token punctuation\">.</span>previousPoint <span class=\"token operator\">=</span> polylines<span class=\"token punctuation\">[</span>index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        platform<span class=\"token punctuation\">.</span>direction <span class=\"token operator\">=</span> <span class=\"token string\">'forward'</span><span class=\"token punctuation\">;</span>\r\n        \r\n        <span class=\"token comment\">// now create a collider for it</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">,</span> platformCollider<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>platformCollider<span class=\"token punctuation\">.</span>nextPoint<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                platform<span class=\"token punctuation\">.</span>direction <span class=\"token operator\">=</span> <span class=\"token string\">'backward'</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>platformCollider<span class=\"token punctuation\">.</span>previousPoint<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                platform<span class=\"token punctuation\">.</span>direction <span class=\"token operator\">=</span> <span class=\"token string\">'forward'</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n                nextPoint<span class=\"token punctuation\">,</span>\r\n                currentPoint<span class=\"token punctuation\">,</span>\r\n                previousPoint<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> platformCollider<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> direction <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> platform<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> nextPos <span class=\"token operator\">=</span> direction <span class=\"token operator\">===</span> <span class=\"token string\">'forward'</span> <span class=\"token operator\">?</span> nextPoint <span class=\"token operator\">:</span> previousPoint<span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> newVelocity <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> nextPos<span class=\"token punctuation\">.</span>x <span class=\"token operator\">!==</span> currentPoint<span class=\"token punctuation\">.</span>x <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>velocity <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>nextPos<span class=\"token punctuation\">.</span>x <span class=\"token operator\">></span> currentPoint<span class=\"token punctuation\">.</span>x <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> nextPos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">!==</span> currentPoint<span class=\"token punctuation\">.</span>y <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>velocity <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>nextPos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">></span> currentPoint<span class=\"token punctuation\">.</span>y <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n            platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocity</span><span class=\"token punctuation\">(</span>\r\n                newVelocity<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\r\n                newVelocity<span class=\"token punctuation\">.</span>y\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        \r\n        <span class=\"token comment\">// Create collider for player and platform</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"circular-path\" style=\"position:relative;\"><a href=\"#circular-path\" aria-label=\"circular path permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Circular path</h2>\n<p>This one was the toughest to create, because I needed some knowledge on basic circular motion physics, in which I had none 😅 and I wanted to be able to choose the speed and direction of the spin on Tiled.</p>\n<p>So I asked my girlfriend for help since she has a degree in engineer, but she knew so much, and I knew so little, that it was a hard conversation but in the end, I managed to do it with her help.</p>\n<p>The base rotation formulas are the following:</p>\n<blockquote>\n<p>radius = circleDiameter / 2</p>\n<p>secondsPerRotation = gravity / velocity</p>\n<p>angularSpeed = 360 / secondsPerRotation</p>\n<p>speed = (radius * (π * 2)) / secondsPerRotation</p>\n</blockquote>\n<p>The trick is to create a dummy object and set a spin on it with the <code class=\"language-text\">setAngularVelocity</code> function, then copy the velocity from the dummy object to the platform using the <code class=\"language-text\">velocityFromRotation</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>platformAI<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">CIRCULAR_PATH_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> direction <span class=\"token operator\">=</span> properties<span class=\"token operator\">?.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> property<span class=\"token operator\">?.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'direction'</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>value <span class=\"token operator\">||</span> <span class=\"token constant\">DIRECTION_RIGHT</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> platformCircularPath <span class=\"token operator\">=</span> dataLayers<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token parameter\">object</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> pathType <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>properties<span class=\"token operator\">?.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n                    <span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> property<span class=\"token operator\">?.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'type'</span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>value<span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">return</span> object<span class=\"token punctuation\">.</span>ellipse\r\n                    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span>pathName <span class=\"token operator\">||</span> objectId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token operator\">&amp;&amp;</span> pathType <span class=\"token operator\">===</span> <span class=\"token constant\">PATH_TYPE_PLATFORM</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> radius <span class=\"token operator\">=</span> platformCircularPath<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// set platform position to the top of the circle to start the rotation</span>\r\n        platform<span class=\"token punctuation\">.</span><span class=\"token function\">setPosition</span><span class=\"token punctuation\">(</span>\r\n            platformCircularPath<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> radius <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            platformCircularPath<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>height <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// This is where the magic happens</span>\r\n        <span class=\"token comment\">// I honestly have no idea why this works, but it works</span>\r\n        <span class=\"token keyword\">const</span> secondsPerRotation <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>world<span class=\"token punctuation\">.</span>gravity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">/</span> velocity<span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// increase angular speed, decreases radius</span>\r\n        <span class=\"token keyword\">const</span> angularSpeed <span class=\"token operator\">=</span> <span class=\"token number\">360</span> <span class=\"token operator\">/</span> secondsPerRotation<span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// increase speed, increase radius</span>\r\n        <span class=\"token keyword\">const</span> speed <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>radius <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> secondsPerRotation<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// create a dummy object to create the base rotation physics</span>\r\n        <span class=\"token keyword\">const</span> dummyRotation <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Rectangle</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n            platformCircularPath<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> radius<span class=\"token punctuation\">,</span>\r\n            platformCircularPath<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> radius<span class=\"token punctuation\">,</span>\r\n            <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token number\">1</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span>dummyRotation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        dummyRotation<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        dummyRotation<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setImmovable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        dummyRotation<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setMaxVelocity</span><span class=\"token punctuation\">(</span>speed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>direction <span class=\"token operator\">===</span> <span class=\"token constant\">DIRECTION_LEFT</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            platform<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>radius <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            dummyRotation<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAngularVelocity</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>angularSpeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            dummyRotation<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAngularVelocity</span><span class=\"token punctuation\">(</span>angularSpeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token comment\">// set the platform velocity to be equal to the one from the dummy object</span>\r\n        platform<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">update</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">time<span class=\"token punctuation\">,</span> delta</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span><span class=\"token function\">velocityFromRotation</span><span class=\"token punctuation\">(</span>\r\n                PhaserMath<span class=\"token punctuation\">.</span><span class=\"token function\">DegToRad</span><span class=\"token punctuation\">(</span>dummyRotation<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                speed<span class=\"token punctuation\">,</span>\r\n                platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Create collider for player and platform</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"vanishing\" style=\"position:relative;\"><a href=\"#vanishing\" aria-label=\"vanishing permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vanishing</h2>\n<p>This one is simple, I will just create a collider that when the player touches the upper part of the platform, I will set a timer for the platform to vanish and a timer for the platform to show up again.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>platformAI<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">VANISHING_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        platform<span class=\"token punctuation\">.</span>isTriggered <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> originalCheckCollision <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token operator\">...</span>platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>checkCollision<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">platformReapearingCallback</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            platform<span class=\"token punctuation\">.</span>isTriggered <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n            platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>checkCollision <span class=\"token operator\">=</span> originalCheckCollision<span class=\"token punctuation\">;</span>\r\n\r\n            platform<span class=\"token punctuation\">.</span><span class=\"token function\">setPosition</span><span class=\"token punctuation\">(</span>\r\n                platformX<span class=\"token punctuation\">,</span>\r\n                platformY\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        \r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">platformVanishingCallback</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>\r\n                platformReapearingCallback\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">colliderCallback</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>isTriggered<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            platform<span class=\"token punctuation\">.</span>isTriggered <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> platformX<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> platformY<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> platform<span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\r\n                platformVanishingCallback\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>\r\n            platform<span class=\"token punctuation\">,</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n            colliderCallback\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        \r\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"falling\" style=\"position:relative;\"><a href=\"#falling\" aria-label=\"falling permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Falling</h2>\n<p>For this one, I will need an <code class=\"language-text\">update</code> function for my platform to make it slowly come back up after the player is no longer on top of it. As for the rest, it is pretty much the same as the vanishing platforms.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>platformAI<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">FALLING_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// get initial position of the platform</span>\r\n        <span class=\"token comment\">// to reset it to</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> platformY<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> platform<span class=\"token punctuation\">;</span>\r\n\r\n        platform<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">update</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">time<span class=\"token punctuation\">,</span> delta</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>platform<span class=\"token punctuation\">.</span>touchingUpObject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">></span> platformY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span>\r\n                        <span class=\"token operator\">-</span>platform<span class=\"token punctuation\">.</span>velocity\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token comment\">// reset platform to original position</span>\r\n                    platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    platform<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>platformY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>\r\n            platform<span class=\"token punctuation\">,</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>touchingUpObject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"elevator\" style=\"position:relative;\"><a href=\"#elevator\" aria-label=\"elevator permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Elevator</h2>\n<p>The elevator platform needs a lot of code to create all the features that I wanted. Those are:</p>\n<ul>\n<li>When the player steps on the platform, it will move up/down and then stop.</li>\n<li>If the player jumps and steps back into the platform, it will trigger the move again.</li>\n<li>If the platform is not at the same level as the player when the player approaches the platform, it should move to the player.</li>\n</ul>\n<p>For that, I need one custom collider in the ground, that will trigger the platform to come down when it is up, a custom collider in the upper level to trigger the platform to go up when it is down, and an <code class=\"language-text\">update</code> function to determine if the platform should be triggered or not when the player is on top of it.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>platformAI<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">ELEVATOR_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// get path from Tiled</span>\r\n        <span class=\"token keyword\">const</span> platformPath <span class=\"token operator\">=</span> combinedDataLayers<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token parameter\">object</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> pathType <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>properties<span class=\"token operator\">?.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n                    <span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> property<span class=\"token operator\">?.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'type'</span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>value<span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">return</span> object<span class=\"token punctuation\">.</span>polyline<span class=\"token operator\">?.</span>length\r\n                    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span>pathName <span class=\"token operator\">||</span> objectId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token operator\">&amp;&amp;</span> pathType <span class=\"token operator\">===</span> <span class=\"token constant\">PATH_TYPE_PLATFORM</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> platformY<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> platform<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// get base positions</span>\r\n        <span class=\"token keyword\">const</span> groundFloorPosY <span class=\"token operator\">=</span> platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>height <span class=\"token operator\">-</span> platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> secondFloorPosY <span class=\"token operator\">=</span> platformY <span class=\"token operator\">+</span> platformPath<span class=\"token punctuation\">.</span>polyline<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\r\n        \r\n        <span class=\"token comment\">// create ground object custom collider</span>\r\n        <span class=\"token keyword\">const</span> elevatorGroundCollider <span class=\"token operator\">=</span> <span class=\"token function\">createInteractiveGameObject</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n            platformPath<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> platform<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span>\r\n            platformPath<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> platform<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">,</span>\r\n            platform<span class=\"token punctuation\">.</span>width <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">TILE_WIDTH</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            platform<span class=\"token punctuation\">.</span>height <span class=\"token operator\">+</span> <span class=\"token constant\">TILE_HEIGHT</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'ground-collider'</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">elevatorGroundColliderCallback</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;=</span> secondFloorPosY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span>\r\n            elevatorGroundCollider<span class=\"token punctuation\">,</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n            elevatorGroundColliderCallback\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// create floor object custom collider</span>\r\n        <span class=\"token keyword\">const</span> elevatorFloorCollider <span class=\"token operator\">=</span> <span class=\"token function\">createInteractiveGameObject</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n            platformPath<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> platform<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span>\r\n            secondFloorPosY <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>height <span class=\"token operator\">+</span> <span class=\"token constant\">TILE_HEIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            platform<span class=\"token punctuation\">.</span>width <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">TILE_WIDTH</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            platform<span class=\"token punctuation\">.</span>height <span class=\"token operator\">+</span> <span class=\"token constant\">TILE_HEIGHT</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'floor-collider'</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">elevatorFloorColliderCallback</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">>=</span> groundFloorPosY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span>\r\n            elevatorFloorCollider<span class=\"token punctuation\">,</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n            elevatorFloorColliderCallback\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// create the platform update function</span>\r\n        platform<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">update</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">time<span class=\"token punctuation\">,</span> delta</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>platform<span class=\"token punctuation\">.</span>touchingUpObject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                platform<span class=\"token punctuation\">.</span>wasTriggered <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n                platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">===</span> <span class=\"token number\">0</span>\r\n                <span class=\"token operator\">&amp;&amp;</span> platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;</span> groundFloorPosY\r\n                <span class=\"token operator\">&amp;&amp;</span> platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">></span> secondFloorPosY\r\n            <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">>=</span> groundFloorPosY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                platform<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>groundFloorPosY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;=</span> secondFloorPosY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>platform<span class=\"token punctuation\">.</span>touchingUpObject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    platform<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>secondFloorPosY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">colliderCallback</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>touching<span class=\"token punctuation\">.</span>up<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>wasTriggered<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">>=</span> groundFloorPosY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;=</span> secondFloorPosY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            platform<span class=\"token punctuation\">.</span>wasTriggered <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>\r\n            platform<span class=\"token punctuation\">,</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n            colliderCallback\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"looping\" style=\"position:relative;\"><a href=\"#looping\" aria-label=\"looping permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Looping</h2>\n<p>Another easy one, I will just set the <code class=\"language-text\">y</code> velocity for it, and when it’s off the map, I will reset it to the top of the map.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>platformAI<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">LOOP_PLATFORM</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        platform<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        platform<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">update</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">time<span class=\"token punctuation\">,</span> delta</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> platform<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> mapSize<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                platform<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>platform<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And that’s it… or is it…?</p>\n<h2 id=\"the-problem\" style=\"position:relative;\"><a href=\"#the-problem\" aria-label=\"the problem permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The problem</h2>\n<p>If you just copied all this code into your own game and went ahead to test it, you will notice that the player is in a constant falling state when the platform is moving downwards.</p>\n<p><img src=\"/7626d6ac4f2d1e65f22f9d2d613332c1/player-glitching-platforms.gif\" alt=\"Jump jump jump ju-ju-jump ♫\"></p>\n<p>This happens because the acceleration of the player is slower than the platform’s, to fix this I will make a very hacky solution, make the player’s gravity around 10 times stronger when they are on top of a platform 😬.</p>\n<h2 id=\"the-solution\" style=\"position:relative;\"><a href=\"#the-solution\" aria-label=\"the solution permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The solution</h2>\n<p>First I will add a new property to the platforms called <code class=\"language-text\">changeHeroPhysics</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> platform <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Platform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">changeHeroPhysics</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n    velocity<span class=\"token punctuation\">,</span>\r\n    x<span class=\"token punctuation\">,</span>\r\n    y<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Then in the player <code class=\"language-text\">update</code> function, I will add a check to see if the player is touching an object with the property <code class=\"language-text\">changeHeroPhysics</code> set to true and if so, increase the player’s gravity.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchingDownObject<span class=\"token operator\">?.</span>changeHeroPhysics<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> platformVelocityY <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchingDownObject<span class=\"token operator\">?.</span>body<span class=\"token operator\">?.</span>velocity<span class=\"token operator\">?.</span>y<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> gravity <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>world<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>platformVelocityY <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setGravity</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n            gravity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>platformVelocityY <span class=\"token operator\">/</span> <span class=\"token number\">12</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setGravity</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// eslint-disable-next-line no-lonely-if</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>gravity<span class=\"token punctuation\">.</span>y <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// set back original gravity to the hero</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setGravity</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"wrap-up\" style=\"position:relative;\"><a href=\"#wrap-up\" aria-label=\"wrap up permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wrap up</h2>\n<p>There you go, a huge list of super useful platforms for your Phaser platformer game. Please let me know if I missed any types of platforms and I might add them to the list in the future.</p>\n<p>Have a good one and happy coding!</p>","fields":{"slug":"/2021/2021-08-28-creating-moving-platforms-for-my-phaser-js-game-game-devlog-22.en/","path":"/blog/games/creating-moving-platforms-for-my-phaser-js-game-game-devlog-22/","locale":"en"},"readingTime":{"minutes":10.3},"frontmatter":{"date":"2021-08-28T00:00:00.000Z","title":"Creating moving platforms for my Phaser JS game - Game Devlog #22","categories":["games"]}}},{"node":{"excerpt":"This year marks the 35th anniversary of The Legend of Zelda…","html":"<p>This year marks the 35th anniversary of The Legend of Zelda (and Metroid) and Nintendo tends to celebrate its franchises anniversary every 5 years.</p>\n<p>On its 30th anniversary, we got Twilight Princess HD for the Wii U (and nothing for Metroid), and this year we’re getting Skyward Sword HD (and Metroid Dread 😁), a game that started many mechanics that we see on Breath of the wild, like paragliding, stamina meter and breakable weapons.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABw2XgUDCj/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAECEhEx/9oACAEBAAEFAsilD9daTlwa4f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAQEBAQEAAAAAAAAAAAAAAAAhATJR/9oACAEBAAY/AlRnqucf/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFRYXH/2gAIAQEAAT8hEody23bCU8IWR1VrBOOjKZt+k//aAAwDAQACAAMAAAAQL/8A/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAERITH/2gAIAQMBAT8QajCz/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQBR/9oACAECAQE/EB2Av//EABkQAQADAQEAAAAAAAAAAAAAAAEAETEhQf/aAAgBAQABPxA+IOL5CCZDQbWzsqnm9jWE13CvCo86gBG/IAMEbvcn/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Happy Pablo\"\n        title=\"Happy Pablo\"\n        src=\"/static/6950bdc0cf887095fcf872f8e7ecbfb6/63217/me-with-camy-hero-pack-2011.jpg\"\n        srcset=\"/static/6950bdc0cf887095fcf872f8e7ecbfb6/db830/me-with-camy-hero-pack-2011.jpg 256w,\n/static/6950bdc0cf887095fcf872f8e7ecbfb6/8102f/me-with-camy-hero-pack-2011.jpg 512w,\n/static/6950bdc0cf887095fcf872f8e7ecbfb6/63217/me-with-camy-hero-pack-2011.jpg 1024w,\n/static/6950bdc0cf887095fcf872f8e7ecbfb6/d58d1/me-with-camy-hero-pack-2011.jpg 1536w,\n/static/6950bdc0cf887095fcf872f8e7ecbfb6/09658/me-with-camy-hero-pack-2011.jpg 2048w,\n/static/6950bdc0cf887095fcf872f8e7ecbfb6/fdb5a/me-with-camy-hero-pack-2011.jpg 2400w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Happy Pablo</figcaption>\n  </figure></p>\n<p>This is a picture of me 10 years ago, which looks like I’m on cocaine or something, but I was just super excited to play Skyward Sword with my Wii accessories. Those were good days.</p>\n<p>When the game first came out in 2011 I was so excited to get it that <a href=\"/en/blog/games/camy-hero-pack-for-those-who-cannot-wait-for-the-new-zelda/\">I bought a Wii Accessories Kit from Italy to play it</a> (see the photo below), and with that in mind, I can’t imagine a different way to play Skyward Sword other than with my Master Sword and Hylian Shield accessories, so that’s why I decided to make one for the Nintendo Switch.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEC/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABxckIH//EABkQAQACAwAAAAAAAAAAAAAAAAEAESEyQv/aAAgBAQABBQIwWUTk0n//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAgEBPwGH/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITFB/9oACAEBAAE/IVo2kEvy9CaLqdq+kxXwiT//2gAMAwEAAgADAAAAEIsP/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARQf/aAAgBAwEBPxA3F//EABYRAAMAAAAAAAAAAAAAAAAAAAEQUf/aAAgBAgEBPxAUv//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExQVFh0f/aAAgBAQABPxACMCKHUDlVdHIX8lBCRyWxAwsUYRCaA8HeYA4J/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Hero Pack 3\"\n        title=\"Hero Pack 3\"\n        src=\"/static/95644164b63501b61ea4ff7c116793d8/63217/hero_pack_3.jpg\"\n        srcset=\"/static/95644164b63501b61ea4ff7c116793d8/db830/hero_pack_3.jpg 256w,\n/static/95644164b63501b61ea4ff7c116793d8/8102f/hero_pack_3.jpg 512w,\n/static/95644164b63501b61ea4ff7c116793d8/63217/hero_pack_3.jpg 1024w,\n/static/95644164b63501b61ea4ff7c116793d8/62aaf/hero_pack_3.jpg 1280w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Hero Pack 3</figcaption>\n  </figure></p>\n<h1 id=\"the-idea\" style=\"position:relative;\"><a href=\"#the-idea\" aria-label=\"the idea permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Idea</h1>\n<p>Since Skyward Sword HD is coming out this week, I decided to create a similar accessory for the Nintendo Switch, so I went on <a href=\"https://www.thingiverse.com/\" target=\"_blank\" rel=\"noreferrer\">Thingiverse</a> to see if anyone has already done it, and to my surprise, I didn’t find anything, but I found <a href=\"https://www.thingiverse.com/thing:3959727\" target=\"_blank\" rel=\"noreferrer\">these</a> <a href=\"https://www.thingiverse.com/thing:3935757\" target=\"_blank\" rel=\"noreferrer\">two</a> models from Wind Waker by <a href=\"https://www.thingiverse.com/zoltanki/designs\" target=\"_blank\" rel=\"noreferrer\">ZoltanKi</a>, and even though they’re not from Skyward Sword, I think they would look perfect for what I’m looking for, a cartoonish styled Master Sword and Hylian Shield.</p>\n<p>Another great thing is that those models are separated by parts, so I can get different colored PLA to print them. Awesome.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAD/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3YFaLs4f/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAECERIDIv/aAAgBAQABBQJ9MKE9KiPoos//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAABEQACECH/2gAIAQEABj8CEBeIyq4s/8QAGxAAAgMAAwAAAAAAAAAAAAAAAREAITEQQZH/2gAIAQEAAT8hym9wCoL94AASxKgajajz/9oADAMBAAIAAwAAABAEz//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxANn//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPxCIf//EABoQAQEBAAMBAAAAAAAAAAAAAAERABAhMdH/2gAIAQEAAT8QRgIoos0PGxLIn1yV0MEwYaOB715wf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Skyward Sword Accessory for Nintendo Switch\"\n        title=\"Skyward Sword Accessory for Nintendo Switch\"\n        src=\"/static/c53684227ef92764db0d43696040c12c/63217/skyward-sword-switch-accessories-01.jpg\"\n        srcset=\"/static/c53684227ef92764db0d43696040c12c/db830/skyward-sword-switch-accessories-01.jpg 256w,\n/static/c53684227ef92764db0d43696040c12c/8102f/skyward-sword-switch-accessories-01.jpg 512w,\n/static/c53684227ef92764db0d43696040c12c/63217/skyward-sword-switch-accessories-01.jpg 1024w,\n/static/c53684227ef92764db0d43696040c12c/d58d1/skyward-sword-switch-accessories-01.jpg 1536w,\n/static/c53684227ef92764db0d43696040c12c/09658/skyward-sword-switch-accessories-01.jpg 2048w,\n/static/c53684227ef92764db0d43696040c12c/fdb5a/skyward-sword-switch-accessories-01.jpg 2400w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Skyward Sword Accessory for Nintendo Switch</figcaption>\n  </figure></p>\n<h1 id=\"the-problem\" style=\"position:relative;\"><a href=\"#the-problem\" aria-label=\"the problem permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Problem</h1>\n<p>Although those models look incredible, they’re not an accessory for the Nintendo Switch, so some 3D modeling will be required, and the problem is that I have zero 3D design skills, so I hired someone on <a href=\"https://www.fiverr.com/\" target=\"_blank\" rel=\"noreferrer\">Fiverr</a> to do it for me, and boy I’m happy with the results.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 150%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBBAUC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAdCaDkvnYOCu81tAWF//xAAbEAADAQEAAwAAAAAAAAAAAAABAhEAAxIhIv/aAAgBAQABBQIbnTpm6mo7RT5L0SlKxX5Ue8ixrv/EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAEDAQE/AWP/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGFP//EABkQAAMBAQEAAAAAAAAAAAAAAAABEBEhMf/aAAgBAQAGPwIcxcPROYJTdn//xAAcEAEAAwACAwAAAAAAAAAAAAABABEhEDFBUWH/2gAIAQEAAT8hFTQerzht0CLTJ9BlwnfZCXesB6EqUFMa3Y8HD//aAAwDAQACAAMAAAAQW8dA/8QAFhEBAQEAAAAAAAAAAAAAAAAAARBR/9oACAEDAQE/EEDBdn//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QGkME/8QAHhABAAIDAAIDAAAAAAAAAAAAAQARITFREEFhcaH/2gAIAQEAAT8QIDMG5W+J4uJ8qv25rbBhcOYfvsIQqt1yIwT0Tb7Py5qnAKNwzOqDQbI/olhFUPesHP/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Skyward Sword Accessory for Nintendo Switch\"\n        title=\"Skyward Sword Accessory for Nintendo Switch\"\n        src=\"/static/36fa4868538bb72b31e1bd21a0d055c5/63217/skyward-sword-switch-accessories-02.jpg\"\n        srcset=\"/static/36fa4868538bb72b31e1bd21a0d055c5/db830/skyward-sword-switch-accessories-02.jpg 256w,\n/static/36fa4868538bb72b31e1bd21a0d055c5/8102f/skyward-sword-switch-accessories-02.jpg 512w,\n/static/36fa4868538bb72b31e1bd21a0d055c5/63217/skyward-sword-switch-accessories-02.jpg 1024w,\n/static/36fa4868538bb72b31e1bd21a0d055c5/d58d1/skyward-sword-switch-accessories-02.jpg 1536w,\n/static/36fa4868538bb72b31e1bd21a0d055c5/04bec/skyward-sword-switch-accessories-02.jpg 1600w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Skyward Sword Accessory for Nintendo Switch</figcaption>\n  </figure></p>\n<h1 id=\"how-to-print\" style=\"position:relative;\"><a href=\"#how-to-print\" aria-label=\"how to print permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to print</h1>\n<p>I’ve used my Flsun QQ S Pro to print these models, using the <a href=\"https://ultimaker.com/software/ultimaker-cura\" target=\"_blank\" rel=\"noreferrer\">Cura slicer</a> with a 0.6mm nozzle. But of course, you can probably print those with all types of printers or even use one of the various online 3D printing services available, like <a href=\"https://shapeways.com\" target=\"_blank\" rel=\"noreferrer\">shapeways</a>.</p>\n<p>I advise you to use different colored PLA for maximum awesomeness, but you can also print in one color and then paint it (or not). There are 20 files in total, and some of them you’ll need to print more than once, like <code class=\"language-text\">shield_triforce.stl</code>, <code class=\"language-text\">upper-handle.stl</code> and <code class=\"language-text\">sword_triforce.stl</code>. The <code class=\"language-text\">outer-shield.stl</code> and <code class=\"language-text\">inner-shield.stl</code> are the longest files to printing, taking me around 18 hours each.</p>\n<p>To glue everything together I used the Pattex Repair eXtreme, but any gel-like glue will do the job, just try to avoid super-glues because they leave a nasty white blur near the glued parts.</p>\n<p>You can get the models <strong><a href=\"https://www.thingiverse.com/thing:4902406\" target=\"_blank\" rel=\"noreferrer\">on Thingiverse</a></strong>, and of course they’re free, as everything is property of Nintendo and I’m only creating this as a fun personal project under the <a href=\"https://wetten.overheid.nl/BWBR0001886/2021-01-01\" target=\"_blank\" rel=\"noreferrer\">fair use of copyrighted material</a>.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAgP/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFrrMojxkP/xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIDERL/2gAIAQEAAQUCUuY026YJuRTDl6f/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwFJ/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BGf/EABkQAAIDAQAAAAAAAAAAAAAAAAABAhARMf/aAAgBAQAGPwLRQpDl11//xAAYEAEBAQEBAAAAAAAAAAAAAAARAQAhMf/aAAgBAQABPyGdA6F0nT1dcBJNJDD3/9oADAMBAAIAAwAAABDkD//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxBhNn//xAAVEQEBAAAAAAAAAAAAAAAAAAAREP/aAAgBAgEBPxBGf//EABsQAQEBAAIDAAAAAAAAAAAAAAERACFBMWHB/9oACAEBAAE/EFCEdLLksqsfJhXxlUqUA6n3MxowUk3q3//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Skyward Sword Accessory for Nintendo Switch\"\n        title=\"Skyward Sword Accessory for Nintendo Switch\"\n        src=\"/static/a3438c28915909cce143c8abeaa650fb/63217/skyward-sword-switch-accessories-03.jpg\"\n        srcset=\"/static/a3438c28915909cce143c8abeaa650fb/db830/skyward-sword-switch-accessories-03.jpg 256w,\n/static/a3438c28915909cce143c8abeaa650fb/8102f/skyward-sword-switch-accessories-03.jpg 512w,\n/static/a3438c28915909cce143c8abeaa650fb/63217/skyward-sword-switch-accessories-03.jpg 1024w,\n/static/a3438c28915909cce143c8abeaa650fb/d58d1/skyward-sword-switch-accessories-03.jpg 1536w,\n/static/a3438c28915909cce143c8abeaa650fb/09658/skyward-sword-switch-accessories-03.jpg 2048w,\n/static/a3438c28915909cce143c8abeaa650fb/fdb5a/skyward-sword-switch-accessories-03.jpg 2400w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Skyward Sword Accessory for Nintendo Switch</figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 150%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBAwQC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAWlcDOgtBVblLIrYcjP/xAAbEAACAgMBAAAAAAAAAAAAAAAAAgMyAREhEP/aAAgBAQABBQLGBraJW0qc8lchoTdIan//xAAWEQEBAQAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8BpkP/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGFP//EABsQAAEEAwAAAAAAAAAAAAAAABAAAQIRIUFh/9oACAEBAAY/Ak0WGFHZ6LP/xAAdEAACAwACAwAAAAAAAAAAAAABEQAhQRAxUWFx/9oACAEBAAE/IYGTq2eJl62X6dGKCp5cRCvbij6AhpfEc//aAAwDAQACAAMAAAAQIAeA/8QAGBEBAAMBAAAAAAAAAAAAAAAAARARIUH/2gAIAQMBAT8QQNRWvY//xAAXEQADAQAAAAAAAAAAAAAAAAABEBEx/9oACAECAQE/EAUq1F//xAAeEAEAAgICAwEAAAAAAAAAAAABABEhMVFxEEFh4f/aAAgBAQABPxAwtmKdYp6Ii9TD0SmWoVJago3RUYKgc3X7L0Dk31GZAxk/SEg0gOq8f//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Skyward Sword Accessory for Nintendo Switch\"\n        title=\"Skyward Sword Accessory for Nintendo Switch\"\n        src=\"/static/3eb2010c1ecaf4c1c049209ef5302db0/63217/skyward-sword-switch-accessories-04.jpg\"\n        srcset=\"/static/3eb2010c1ecaf4c1c049209ef5302db0/db830/skyward-sword-switch-accessories-04.jpg 256w,\n/static/3eb2010c1ecaf4c1c049209ef5302db0/8102f/skyward-sword-switch-accessories-04.jpg 512w,\n/static/3eb2010c1ecaf4c1c049209ef5302db0/63217/skyward-sword-switch-accessories-04.jpg 1024w,\n/static/3eb2010c1ecaf4c1c049209ef5302db0/d58d1/skyward-sword-switch-accessories-04.jpg 1536w,\n/static/3eb2010c1ecaf4c1c049209ef5302db0/09658/skyward-sword-switch-accessories-04.jpg 2048w,\n/static/3eb2010c1ecaf4c1c049209ef5302db0/fdb5a/skyward-sword-switch-accessories-04.jpg 2400w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Skyward Sword Accessory for Nintendo Switch</figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAGVHWjId4Wf/8QAGhABAAIDAQAAAAAAAAAAAAAAAgABERMUEv/aAAgBAQABBQLWRCa98audDUJy9dT/xAAYEQADAQEAAAAAAAAAAAAAAAAAAQIRA//aAAgBAwEBPwGedUtNZ//EABYRAQEBAAAAAAAAAAAAAAAAAAAxIf/aAAgBAgEBPwGVj//EABwQAAICAgMAAAAAAAAAAAAAAAABAhEhURIi4f/aAAgBAQAGPwLjJ52KUaT2WpxKWDs7s8P/xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhQVFxgf/aAAgBAQABPyG3RIBVLg0ltRL5qWWgnsplLN6geMPYn//aAAwDAQACAAMAAAAQZM//xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQMBAT8QRjCX/8QAFhEBAQEAAAAAAAAAAAAAAAAAACER/9oACAECAQE/EJBh/8QAHRABAAICAwEBAAAAAAAAAAAAAQARITFBYXFRsf/aAAgBAQABPxABRtgW+uo6OnQ0rIbIrEFlXLyZP4lhbHsx2JXL69hdjtsfk//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Skyward Sword Accessory for Nintendo Switch\"\n        title=\"Skyward Sword Accessory for Nintendo Switch\"\n        src=\"/static/2ba45cffed33975dc0e00073fa7de2eb/63217/skyward-sword-switch-accessories-05.jpg\"\n        srcset=\"/static/2ba45cffed33975dc0e00073fa7de2eb/db830/skyward-sword-switch-accessories-05.jpg 256w,\n/static/2ba45cffed33975dc0e00073fa7de2eb/8102f/skyward-sword-switch-accessories-05.jpg 512w,\n/static/2ba45cffed33975dc0e00073fa7de2eb/63217/skyward-sword-switch-accessories-05.jpg 1024w,\n/static/2ba45cffed33975dc0e00073fa7de2eb/d58d1/skyward-sword-switch-accessories-05.jpg 1536w,\n/static/2ba45cffed33975dc0e00073fa7de2eb/09658/skyward-sword-switch-accessories-05.jpg 2048w,\n/static/2ba45cffed33975dc0e00073fa7de2eb/fdb5a/skyward-sword-switch-accessories-05.jpg 2400w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Skyward Sword Accessory for Nintendo Switch</figcaption>\n  </figure></p>\n<p>Those are going to look even nicer with the <a href=\"https://www.eurogamer.net/articles/2021-03-26-legend-of-zelda-skyward-sword-joy-cons-nintendo-switch-available-to-order\" target=\"_blank\" rel=\"noreferrer\">Skyward Sword Joy-Cons</a>. I already booked my day off on Friday to play Skyward Sword, what about you? Excited?</p>\n<p>Happy printing and let me know what you think of the models.</p>","fields":{"slug":"/2021/2021-07-14-creating-my-dream-skyward-sword-hd-switch-accessories.en/","path":"/blog/games/creating-my-dream-skyward-sword-hd-switch-accessories/","locale":"en"},"readingTime":{"minutes":2.95},"frontmatter":{"date":"2021-07-14T00:00:00.000Z","title":"Creating my dream Skyward Sword HD Switch accessories","categories":["games"]}}},{"node":{"excerpt":"For those of you that don’t know, Metroidvania is probably…","html":"<p>For those of you that don’t know, Metroidvania is probably my favorite game genre, so I decided to add a feature from Metroidvania games to <a href=\"/en/blog/tags/super-ollie-vs-pebble-corp/\">Super Ollie</a>, hidden stage parts that show up when you get close to them. Check the gif below.</p>\n<p><img src=\"/9f0bb01c8db7b56a5c0b198ad1c724a2/hidden-wall.gif\" alt=\"Hidden wall\"></p>\n<p>For this, I will need 2 new layer properties on <code class=\"language-text\">Tiled</code>, one called <code class=\"language-text\">hideOrShowOnContact</code> to flag if that layer should be hidden/displayed when the player interacts with it, and one called <code class=\"language-text\">isHidden</code> to flag if that layer should start hidden or not.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 359px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.046875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuklEQVQY03XNMaqEMBSF4ex/BxoEG59oZSUoGWwSEkWDCDY2SuQKV7hPB1zAwFjKfMXP6Q7jnCdJkqZpFEV/X3Ech2Ho+z7nPAgC/oPneUwIked5URRKKWNM0zTGGCllVVVlWWZZJoR4/cCIqK7rvu/XdQWAuwCw7zsijuN4HMf74TzP67rYsixKKSnl/ay17rrOGGOtnabJWuucWx+ccwDAtm1r21ZrPQzD/xcR3QMA5nlGxP0BEYnoA5NS8DcUzluAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Show or hide layer on Tiled\"\n        title=\"Show or hide layer on Tiled\"\n        src=\"/static/b38a2c84793b20494c1fbd2afb94b251/16540/show-or-hide-layer-tiled.png\"\n        srcset=\"/static/b38a2c84793b20494c1fbd2afb94b251/e3135/show-or-hide-layer-tiled.png 256w,\n/static/b38a2c84793b20494c1fbd2afb94b251/16540/show-or-hide-layer-tiled.png 359w\"\n        sizes=\"(max-width: 359px) 100vw, 359px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Show or hide layer on Tiled</figcaption>\n  </figure></p>\n<p>Now I need to loop through all my map layers to check if any of them contains these properties, something like:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// dynamicLayers is an array of Phaser.GameObjects.Group</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> dynamicLayers <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">;</span>\r\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>dynamicLayers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dynamicLayerGroup</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> layers <span class=\"token operator\">=</span> dynamicLayerGroup<span class=\"token punctuation\">.</span><span class=\"token function\">getChildren</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// Check layers that should be hidden/shown on contact</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">.</span>hideOrShowOnContact<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// TODO</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With that in place, I need to create a trigger to hide/show that layer, and the best way to do it is when creating the map and the custom colliders, <a href=\"/en/blog/games/third-game-devlog-of-skate-platformer/\">which I explained in my devlog #3</a>, and since I want to create the stages on <code class=\"language-text\">Tiled</code> and let the code figure out where these colliders need to be, I will create a loop that goes through all tiles to create colliders for the entire area of the layer, like the image below.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 754px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.6875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACYElEQVQozx2QSU8TYQBA538UZr515ussnc7SztrSBeNGW2wxQIdpkUoChiJFStm0BxI9kZgQf4FxxWhUwIjReIAYE3+Ugcs7vMtLHqdhxyS2jk0NGWma0aCuE0undgqbKWzqxNagbog2E+yDtvRtSE+2heb6xmj3g7T6kguouwKn1oV2DzQ3QGuNn9kQ4k3QfiTM9UDUvzID2OomFn62it934PEOiPp9vveRrb/ifOAsgenbMChAfxznC4JbRuE4zpdhUIJBGeWKglsmYTVRvpif/LGFjndBNOjzm5/Y5muuIBV7JA4kT2KBlszJoqeyUE3mFRYqLFCTOUX0ZDkso9KfVuNsC12Wdwb87me2+5bzobcMpnxoMZTRiCMDS8VZjbgqyigoo2JHAaZCs8WR8KJdORugr9vC3OMBP/zChu+4APnL8K4PbYayGnVlaKvE0ain4qyCsipxFWDJ1CmO5M7blV978HRPiIbb/P4x2z/ixmh+FUU56imib7CxFPXTUt5gBV0MU6KvS2GKuBoLxkHpb9w4mpffr5B4f4t/dsKeHnE5HD5A0x42JGIq1GJQl4kpU+uKtiJmkiidlOyC4P7rNLrXg4Oms/j8SeLwt3R4ygXI6YLZ+3y1zd9aALXW6M0FvtoRavf4iXlhoiPUWiM3OqC6mGi8qUbtUmVQLzdWlujaC/XhAZcVvRl6LcL1Jq7FpD6LKnP4TkwaEZ68NLg+CysxqcekUQEFFzkK8hWQNbCbAjbHoE2RRWAaA50iEwkagQZFJoZpDNMEGYhXKTYpMiVkJS8v2jKyFTFIYuc/QQGtk6a6KAUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Layer area colliders\"\n        title=\"Layer area colliders\"\n        src=\"/static/8910a0dd98458e186da35267618eb9fe/a0d62/layer-area-colliders.png\"\n        srcset=\"/static/8910a0dd98458e186da35267618eb9fe/e3135/layer-area-colliders.png 256w,\n/static/8910a0dd98458e186da35267618eb9fe/06341/layer-area-colliders.png 512w,\n/static/8910a0dd98458e186da35267618eb9fe/a0d62/layer-area-colliders.png 754w\"\n        sizes=\"(max-width: 754px) 100vw, 754px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Layer area colliders</figcaption>\n  </figure></p>\n<p>There are many tutorials on how to do this, just search for <a href=\"https://www.google.com/search?q=javascript+get+area+2d+array\" target=\"_blank\" rel=\"noreferrer\">JavaScript get area 2d array</a> and you will see some results. After creating these custom colliders, I will save them into a new property in the layer called <code class=\"language-text\">hideOrShowOnContactTriggers</code> so I can use them later in the game scene.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">dynamicLayer<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> property<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> customColliders <span class=\"token operator\">=</span> <span class=\"token function\">generateCustomCollidersForAreaOf2DLayer</span><span class=\"token punctuation\">(</span>dynamicLayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    dynamicLayer<span class=\"token punctuation\">.</span>hideOrShowOnContactTriggers <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        scene<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> customColliders<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> dynamicLayer<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// if the layer is supposed to start the game hidden, then set it's alpha to 0</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'isHidden'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setAlpha</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With that logic in place, I can go back to my main loop and start the logic of the collision with the hero. First I will get all the tiles from the layer that is in the same position as the hero, if the hero is actually in contact with any of these tiles, it means that I need to trigger the layer to be hidden if the hero isn’t in contact with any of the layer’s tile, then the layer will be displayed.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// dynamicLayers is an array of Phaser.GameObjects.Group</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> dynamicLayers <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">;</span>\r\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>dynamicLayers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dynamicLayerGroup</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> layers <span class=\"token operator\">=</span> dynamicLayerGroup<span class=\"token punctuation\">.</span><span class=\"token function\">getChildren</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// Check layers that should be hidden/shown on contact</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">.</span>hideOrShowOnContact<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">.</span>hideOrShowOnContactTriggers<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> tiles <span class=\"token operator\">=</span> layer<span class=\"token punctuation\">.</span><span class=\"token function\">getTilesWithinWorldXY</span><span class=\"token punctuation\">(</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>height\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> tiles<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n                    t<span class=\"token operator\">?.</span>index <span class=\"token operator\">>=</span> <span class=\"token number\">0</span>\r\n                    <span class=\"token operator\">&amp;&amp;</span> t<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> layer<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tweens<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                        <span class=\"token literal-property property\">targets</span><span class=\"token operator\">:</span> layer<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">alpha</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">ease</span><span class=\"token operator\">:</span> <span class=\"token string\">'Power2'</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tweens<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                        <span class=\"token literal-property property\">targets</span><span class=\"token operator\">:</span> layer<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">alpha</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token literal-property property\">ease</span><span class=\"token operator\">:</span> <span class=\"token string\">'Power2'</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s pretty much it. You can tweak the tween numbers to your liking, but the result with these numbers is quite good I think.</p>\n<p>I’m on a perfect development spree lately, full of good ideas for game features, but I’m struggling big time into making a nice level design, please let me know if you have resources on how to get good at level design because damn, it’s hard.</p>\n<p>See you in the next one.</p>","fields":{"slug":"/2021/2021-07-06-hiding-parts-of-the-map-on-phaser-js-game-devlog-21.en/","path":"/blog/games/hiding-parts-of-the-map-on-phaser-js-game-devlog-21/","locale":"en"},"readingTime":{"minutes":2.985},"frontmatter":{"date":"2021-07-06T00:00:00.000Z","title":"Hiding parts of the map on Phaser JS - Game Devlog #21","categories":["games"]}}},{"node":{"excerpt":"Hey everyone! Today I’m finally back with another game…","html":"<p>Hey everyone! Today I’m finally back with another game devlog for <a href=\"/en/blog/tags/super-ollie-vs-pebble-corp/\">Super Ollie</a>, and I’m going to implement a classic element of a 2D platformer, a falling spike.</p>\n<p><img src=\"/afce07b6a2fa5819c3b4faba127b9292/falling-spikes.gif\" alt=\"Falling spikes\"></p>\n<p>First I will create the <code class=\"language-text\">spike</code> class, nothing crazy:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Spike</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Sprite</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        scene<span class=\"token punctuation\">,</span>\r\n        x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n        y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n        asset <span class=\"token operator\">=</span> <span class=\"token string\">'spike'</span><span class=\"token punctuation\">,</span>\r\n        enablePhysics <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n        addToScene <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n        frame<span class=\"token punctuation\">,</span>\r\n        name<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> asset<span class=\"token punctuation\">,</span> frame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">||</span> asset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>addToScene<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            scene<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>enablePhysics<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            scene<span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setImmovable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now in my <code class=\"language-text\">dataLayer</code> loop (which I explained on the <a href=\"/en/blog/games/creating-enemies-and-collectable-items-on-phaser-js-skate-platformer-game-devlog-8/\">devlog 8</a>) I will add a case for the spikes to be added.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// in the scene create function</span>\r\n<span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getObjectLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ndataLayer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> width <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'spike'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// TODO add spike logic here</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Before going into the logic, my goal is to be able to add a spike wherever I want on <code class=\"language-text\">Tiled</code>, and the code will parse it and <em>magically</em> make it work.</p>\n<p>How does a falling spike works on platformer games? Well, when the player walks under one, it will fall on them, either right away or a couple of milliseconds later, and have that we need a custom collider object, that when the player interacts with it, it will trigger the spike to fall.</p>\n<p>This is exactly what I want to automate, create a logic so that the spike will automatically decide where the custom collider object will be in the map.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'spike'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> spike <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Spike</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n        x<span class=\"token punctuation\">,</span>\r\n        y<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> customCollider <span class=\"token operator\">=</span> <span class=\"token function\">createColliderFromGameObjectToGround</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n        spike<span class=\"token punctuation\">,</span>\r\n        mapSize<span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">.</span>dynamicLayers<span class=\"token punctuation\">.</span>ground\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> spikeY <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> spike<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> collider <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span>\r\n        customCollider<span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// TODO handle spike falling</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span>\r\n        spike<span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// TODO handle spike hitting the player</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">createColliderFromGameObjectToGround</code> function will have all the logic to get the spike position, find the nearest ground tile from that position, and place a custom collider there.</p>\n<p>Inside this new function, I’m going to need 2 other functions, <code class=\"language-text\">createInteractiveGameObject</code>, that I showed on the <a href=\"/en/blog/games/creating-a-smarter-and-more-performing-ai-on-phaser-js-skate-platformer-game-devlog-15/\">devlog 15</a>, and a new function called <code class=\"language-text\">isBelowTileCollidable</code>, that will receive a game object and check if the tile below that object is collidable or not.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> isBelowTileCollidable <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\r\n    gameObject<span class=\"token punctuation\">,</span>\r\n    dynamicLayer <span class=\"token comment\">// single layer or GameObject Group</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> layers <span class=\"token operator\">=</span> dynamicLayer<span class=\"token operator\">?.</span>getChildren<span class=\"token operator\">?.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span>dynamicLayer<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">let</span> tile <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n    layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        tile <span class=\"token operator\">=</span> layer<span class=\"token punctuation\">.</span><span class=\"token function\">getTileAtWorldXY</span><span class=\"token punctuation\">(</span>\r\n            x <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span>\r\n            y <span class=\"token operator\">+</span> height <span class=\"token operator\">+</span> <span class=\"token number\">0.5</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            result <span class=\"token operator\">=</span> tile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>collideUp<span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the <code class=\"language-text\">createColliderFromGameObjectToGround</code> function, I will create a loop of the size of the map height, and from the spike, position start looking at the nearest ground tile, I will use the <code class=\"language-text\">some</code> function, so I can early return from the loop when a ground tile is found.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createColliderFromGameObjectToGround</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token parameter\">scene<span class=\"token punctuation\">,</span>\r\n    gameobject<span class=\"token punctuation\">,</span>\r\n    mapSize<span class=\"token punctuation\">,</span>\r\n    mapLayer</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> customCollider<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// TODO improve the size of this array</span>\r\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>mapSize<span class=\"token punctuation\">.</span>height <span class=\"token operator\">/</span> gameobject<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> posY <span class=\"token operator\">=</span> gameobject<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">TILE_HEIGHT</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            result <span class=\"token operator\">=</span> <span class=\"token function\">isBelowTileCollidable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                    <span class=\"token operator\">...</span>gameobject<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> posY<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                mapLayer\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> spikeHeight <span class=\"token operator\">=</span> gameobject<span class=\"token punctuation\">.</span>height <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>posY <span class=\"token operator\">-</span> gameobject<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                customCollider <span class=\"token operator\">=</span> <span class=\"token function\">createInteractiveGameObject</span><span class=\"token punctuation\">(</span>\r\n                    scene<span class=\"token punctuation\">,</span>\r\n                    gameobject<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token comment\">// posY,</span>\r\n                    posY <span class=\"token operator\">-</span> spikeHeight <span class=\"token operator\">+</span> gameobject<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">,</span>\r\n                    gameobject<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token comment\">// spike.height,</span>\r\n                    spikeHeight<span class=\"token punctuation\">,</span>\r\n                    gameobject<span class=\"token punctuation\">.</span>name\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> customCollider<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With these 2 functions in place, I can come back to my <code class=\"language-text\">dataLayer</code> loop and work on the spike logic, for now, I want the spike to fall when the player interacts with the trigger, and then make the spike reappear in the ceiling after 2 seconds.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'spike'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> spike <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Spike</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n        x<span class=\"token punctuation\">,</span>\r\n        y<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">const</span> customCollider <span class=\"token operator\">=</span> <span class=\"token function\">createColliderFromGameObjectToGround</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n        spike<span class=\"token punctuation\">,</span>\r\n        mapSize<span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">.</span>dynamicLayers<span class=\"token punctuation\">.</span>ground\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// if for some reason the collider was not created, do nothing.</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>customCollider<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> spikeY <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> spike<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> collider <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span>\r\n            customCollider<span class=\"token punctuation\">,</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>spike<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>allowGravity<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    spike<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                        spike<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                        spike<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAcceleration</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        spike<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocity</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        spike<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>spikeY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        spike<span class=\"token punctuation\">.</span><span class=\"token function\">setActive</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        spike<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span>\r\n            spike<span class=\"token punctuation\">,</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>spike<span class=\"token operator\">?.</span>visible<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gameHud<span class=\"token punctuation\">.</span><span class=\"token function\">decreasePlayerLife</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    spike<span class=\"token punctuation\">.</span><span class=\"token function\">setActive</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    spike<span class=\"token punctuation\">.</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        spike<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>With debug mode on, this is what the collider looks like in the game:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.28125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACnklEQVQoz4XO3U9SARjH8fOvCG6VcXg5r4gczgsgyAHUOa/qotZyc7V8LXKxyrU2bTOnXUTCwTeEc4gU8WXV1lVra7XWRdFyOWekq7yB8wIllqehaV3V9r14bj77PQA8uAYPrhkHPmanfWUBlHhYEaB/JPPwYQB6a3UPrx9gXOZxKWFWBFz665B5XBEwRcBlHvmDzcNZ6HbOOJR7O+1TH+gvttpJxNdMexwYy1o9XqvHgXn9No+njnVgPifqfj1SW05BYmJ/eWQdvpMzjm5mY/4fSfDxTWyghW2t8Sd7mC6abbeyqV7mBOi/0eiZCViiHZYch5aSsPQb383BoQ1j6HM27t9OgLtLpvxow9PzrJqmVvpdb4IuNUM972C3htzqI8PuPFyRh28j4U8It2mKfn0Xbyzz+jwPySHnd85ZCFNFjilFmXyY+hZxyvec+YSpEEf2NyUeLsRhALsvo7Et4+RWNu4tx4+KAqSE7TJHKhwlTxDyOKFwlBQl5bBdFkz7gxIPFwV4N40C1q4pNPLBnCqsZs7sLHullFkZY5QopXCUMm6rxO3dB3hPQl8msVgvBRBHbNjoC3ypuJo+vTPvE/+HxQS8nTKthCy4zg0QRhYPvcIeFicvtD1rc5SmCDHMyBFajNBSlJSiNjFCyxFKGnOIPCQmkHwcKSXhlZDFiboAAnTBsfeOl2qgPXD93EmVr1djNnXGps6QKm+tFCPVOKFO02pGr6ZNP9MmddGwMWFmoHqAMHiIy1P08JPg2f4rp/qSfS0LPd7lzua5S97FHv9it38u4F3qbFrobpq9ap8LOmaD9sw1ZrzXTUENAF5jR6vrEE0torXgWotOYwO1jKGKBrWUvqoSWE1XDi0NammdhtJpyONVpL6aRo/RvwD/rpYh2gmyswAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Spike colliders\"\n        title=\"Spike colliders\"\n        src=\"/static/683c6513701eb047f8fd1c483559b20d/663f3/spike-colliders.png\"\n        srcset=\"/static/683c6513701eb047f8fd1c483559b20d/e3135/spike-colliders.png 256w,\n/static/683c6513701eb047f8fd1c483559b20d/06341/spike-colliders.png 512w,\n/static/683c6513701eb047f8fd1c483559b20d/663f3/spike-colliders.png 650w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Spike colliders</figcaption>\n  </figure></p>\n<p>That’s all for today, see you in the next devlog!</p>","fields":{"slug":"/2021/2021-06-28-creating-falling-spikes-with-phaser-js-game-devlog-20.en/","path":"/blog/games/creating-falling-spikes-with-phaser-js-game-devlog-20/","locale":"en"},"readingTime":{"minutes":3.895},"frontmatter":{"date":"2021-06-28T00:00:00.000Z","title":"Creating falling spikes with Phaser JS - Game Devlog #20","categories":["games"]}}},{"node":{"excerpt":"In one of my first game devlogs, I explained how to automate…","html":"<p><a href=\"/en/blog/games/second-game-devlog-of-skate-platformer/\">In one of my first game devlogs</a>, I explained how to automate the sprite sheet generation for Phaser 3 using Webpack, but I think it would be more helpful if I had an external script to do that, so anyone can use it.</p>\n<p>But why not simply use those websites that mesh together <code class=\"language-text\">PNG</code> files into a sprite sheet? Well because Phaser not only needs the <code class=\"language-text\">PNG</code> sprite sheet, but also an atlas <code class=\"language-text\">JSON</code> file with all the sprite sheet details like frame name and dimensions.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 658px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABZElEQVQY011RS0/qUBD2p7sxcePKhQv/ghoFvNH4SIyJIkrKJfcqURQoWEopfdD2nJ5zOvOZWkzUbzUzyffKrAHIjFrIFIAiUw7M+Ab+XPnnscIagJY72O1eAXgMnB3rkogKKsCYZvHJ8F+YZ2f2YyxKdf5SUUoRUUlue8O9/gOI32L/oN/WxlTClmdv3h1bnr1+c/i2cAEYU5iiMMasyMw8n8+d8XuapFEQ2oORlLLZvN3f258bcT55GqdBfdidRAsAuVJPvV4mhNZ65RzI9O90BCBR0nIGAJrN29pRLSZde+2Mk+Dgpb3MythCyHq9sUyWxpiiIt97o+3OBRjP8WyrfZobXcX+v3A2W3+up/2NVmMYzAAQ0+/OPf+98WJpradJeNzvyDwnIjDcNDoZdJ9952rc85MIxEopledaayHEqnMUhO7EkTJP4qVjT6QQ1Y8AyEyEnk9FacjMUsiZOxNCVv4fvWi9umk4FTEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Assets by kenney.nl\"\n        title=\"Assets by kenney.nl\"\n        src=\"/static/8a32f26bd9206da785dc3795034528f5/e7930/hero-sprite-sheet.png\"\n        srcset=\"/static/8a32f26bd9206da785dc3795034528f5/e3135/hero-sprite-sheet.png 256w,\n/static/8a32f26bd9206da785dc3795034528f5/06341/hero-sprite-sheet.png 512w,\n/static/8a32f26bd9206da785dc3795034528f5/e7930/hero-sprite-sheet.png 658w\"\n        sizes=\"(max-width: 658px) 100vw, 658px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Assets by kenney.nl</figcaption>\n  </figure></p>\n<p>For this I’m going to use the <a href=\"https://www.npmjs.com/package/free-tex-packer-core\" target=\"_blank\" rel=\"noreferrer\">free-tex-packer-core</a> package made by <a href=\"https://github.com/odrick\" target=\"_blank\" rel=\"noreferrer\">odrick</a>. The basic usage in its documentation looks like the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> packAsync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'free-tex-packer-core'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> images <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"img1.png\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">contents</span><span class=\"token operator\">:</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./img1.png\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"img2.png\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">contents</span><span class=\"token operator\">:</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./img2.png\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"img3.png\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">contents</span><span class=\"token operator\">:</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./img3.png\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">allowRotation</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">packImages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">packAsync</span><span class=\"token punctuation\">(</span>images<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> item <span class=\"token keyword\">of</span> files<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">.</span>buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>That by itself is already super helpful, but I want to take the extra step and be able to generate sprite sheets for all my sprites, and the way I have my files and folder is:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">- original-files\r\n  - sprites\r\n    - hero\r\n      - hero_walking_1.png\r\n      - hero_walking_2.png\r\n      - hero_walking_3.png\r\n      - hero_jumping_1.png\r\n      - hero_jumping_2.png\r\n    - enemy\r\n      - enemy_walking_1.png\r\n      - enemy_walking_2.png</code></pre></div>\n<p>With a directories structure like the one above, I can have the following script that will loop through all directories in my sprite directory and get all the images inside each one of them:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> packAsync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'free-tex-packer-core'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> readFileSync<span class=\"token punctuation\">,</span> readdirSync<span class=\"token punctuation\">,</span> writeFileSync <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">SOURCE_SPRITES_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'original-files'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sprites'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">SPRITES_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'assets'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sprites'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">generateAtlasFiles</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">assetName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> spritesFolders<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// use the parameter or get all folders from a directory</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>assetName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        spritesFolders <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>assetName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        spritesFolders <span class=\"token operator\">=</span> <span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SOURCE_SPRITES_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> spritesFolder <span class=\"token keyword\">of</span> spritesFolders<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> spritesFiles <span class=\"token operator\">=</span> <span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token constant\">SOURCE_SPRITES_PATH</span><span class=\"token punctuation\">,</span> spritesFolder<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> images <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        spritesFiles<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">spritesFile</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            images<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> spritesFile<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">contents</span><span class=\"token operator\">:</span> <span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>\r\n                    path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token constant\">SOURCE_SPRITES_PATH</span><span class=\"token punctuation\">,</span> spritesFolder<span class=\"token punctuation\">,</span> spritesFile<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">await</span> <span class=\"token function\">packImages</span><span class=\"token punctuation\">(</span>images<span class=\"token punctuation\">,</span> spritesFolder<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">packImages</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">images<span class=\"token punctuation\">,</span> spriteName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">packAsync</span><span class=\"token punctuation\">(</span>images<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">allowRotation</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// let's save the png and json files</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> item <span class=\"token keyword\">of</span> files<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// get the file extension</span>\r\n            <span class=\"token keyword\">const</span> fileExt <span class=\"token operator\">=</span> item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">at</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token comment\">// save the file in the sprites directory</span>\r\n            <span class=\"token keyword\">await</span> <span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>\r\n                path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token constant\">SPRITES_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>spriteName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fileExt<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                item<span class=\"token punctuation\">.</span>buffer\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token comment\">// process.argv[2] is the argument from the command when you run `node script.js arg`</span>\r\n<span class=\"token function\">generateAtlasFiles</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This script will create the files <code class=\"language-text\">my-sprite.png</code> and <code class=\"language-text\">my-sprite.json</code> for each of your sprites in your sprite folder when running <code class=\"language-text\">node generate-sprites.js</code>, or <code class=\"language-text\">node generate-sprites.js hero</code> to generate sprites sheets for only one sprite, in this case, the <code class=\"language-text\">hero</code> sprite.</p>\n<p>I hope this blog post was useful for you, have a good one!</p>","fields":{"slug":"/2021/2021-06-22-automatically-generate-sprite-sheet-atlas-files-for-your-phaser-js-game-with-a-nodejs-script.en/","path":"/blog/games/automatically-generate-sprite-sheet-atlas-files-for-your-phaser-js-game-with-a-nodejs-script/","locale":"en"},"readingTime":{"minutes":2.495},"frontmatter":{"date":"2021-06-22T00:00:00.000Z","title":"Automatically generate sprite sheet atlas files for your Phaser JS game with a Node.js script","categories":["games"]}}},{"node":{"excerpt":"Hey everyone, today’s devlog will be very similar to the…","html":"<p>Hey everyone, today’s devlog will be very similar to <a href=\"/en/blog/games/creating-ladders-for-platformer-with-phaser-js-game-devlog-18/\">the previous one</a>, but instead of climbing a ladder I’m going to implement a monkey bar that the hero can hang on to.</p>\n<p><img src=\"/05b626e03a5aa8631fbde669d7cd9b42/monkey_bar.gif\" alt=\"Monkey bar\"></p>\n<p>As always, I created a new property for my tileset and called it <code class=\"language-text\">canHang</code>, and use the function <code class=\"language-text\">getOverlappingTileWithGameobjectDimensions</code> that I’ve implemented in the last devlog to look for a tile with that property.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Handle hero hanging</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isUpDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroHanging</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token function\">getOverlappingTileWithGameobjectDimensions</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">.</span>dynamicLayers<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">'canHang'</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>canHang<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">HANGING</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now that I have the code to set the hero state to the base <code class=\"language-text\">HANGING</code>, I need to add a handler for when moving left, right, or jumping.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroHanging</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// Handle hero jump when hanging</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isAButtonJustDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JUMPING_START</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token function\">getOverlappingTileWithGameobjectDimensions</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">.</span>dynamicLayers<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">'canHang'</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>canHang<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>customCollider<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> y<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> tile<span class=\"token punctuation\">.</span>customCollider<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> adjustedPosY <span class=\"token operator\">=</span>\r\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>height <span class=\"token operator\">+</span> y <span class=\"token operator\">+</span> height <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">!==</span> adjustedPosY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>adjustedPosY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isLeftDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">HANGING_LEFT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isRightDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">HANGING_RIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">HANGING</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">IDLE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The next step is to handle the physics movement for hanging:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> newAccelerationX <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">let</span> newAccelerationY <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Handle hanging movement</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">HANGING_RIGHT</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    newAccelerationX <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">HANGING_LEFT</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    newAccelerationX <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">HANGING</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    newAccelerationY <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityX</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAccelerationX</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAccelerationX</span><span class=\"token punctuation\">(</span>newAccelerationX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAccelerationY</span><span class=\"token punctuation\">(</span>newAccelerationY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Of course, I also need to reset the gravity when the hero is not hanging:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Reset gravity when is not climbing</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroClimbing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The only thing it’s missing now is the animations:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Handle hero hanging animation</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroHanging</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hang'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">HANGING</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">pauseAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hang'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">HANGING_RIGHT</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setFlipX</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">HANGING_LEFT</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setFlipX</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>That’s all for today, see you at the next one!</p>","fields":{"slug":"/2021/2021-06-19-hanging-on-a-monkey-bar-on-phaser-js-game-devlog-19.en/","path":"/blog/games/hanging-on-a-monkey-bar-on-phaser-js-game-devlog-19/","locale":"en"},"readingTime":{"minutes":1.71},"frontmatter":{"date":"2021-06-19T00:00:00.000Z","title":"Hanging on a monkey bar Phaser JS - Game Devlog #19","categories":["games"]}}},{"node":{"excerpt":"6785 days, that’s how long ago Metroid 4 (aka Metroid Fusion…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAACAP/aAAwDAQACEAMQAAAB5tErS1GCf//EABoQAAMAAwEAAAAAAAAAAAAAAAABAgMREhP/2gAIAQEAAQUChpnMaWQmuT2bR//EABkRAAIDAQAAAAAAAAAAAAAAAAACARITIf/aAAgBAwEBPwGzT03c/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEREv/aAAgBAgEBPwGIyj//xAAYEAEAAwEAAAAAAAAAAAAAAAARAAEQUf/aAAgBAQAGPwInMSoFZ//EABsQAQADAQADAAAAAAAAAAAAAAEAESFBUXGB/9oACAEBAAE/IUONNlVhQGq5coNH5LmjOksV76jXif/aAAwDAQACAAMAAAAQzM//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAh/9oACAEDAQE/EHmswBLv/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxCrEr//xAAeEAEBAAEDBQAAAAAAAAAAAAABEQAhMVFhcZGh0f/aAAgBAQABPxBHEIQ7Xd9YbMYIpahPmPOy9mO5SwlhwV2JK18ecdHRzn//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Metroid Dread\"\n        title=\"Metroid Dread\"\n        src=\"/static/779614672fa641c3196af685498d62c4/63217/metroid-dread.jpg\"\n        srcset=\"/static/779614672fa641c3196af685498d62c4/db830/metroid-dread.jpg 256w,\n/static/779614672fa641c3196af685498d62c4/8102f/metroid-dread.jpg 512w,\n/static/779614672fa641c3196af685498d62c4/63217/metroid-dread.jpg 1024w,\n/static/779614672fa641c3196af685498d62c4/62aaf/metroid-dread.jpg 1280w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Metroid Dread</figcaption>\n  </figure></p>\n<p>6785 days, that’s how long ago Metroid 4 (aka Metroid Fusion) was released. That was a long time ago, I was still learning to kickflip and didn’t even know how to use the internet properly. It was 2 years before I created my first blog, cerealswithlagsana.blogspot.com.</p>\n<p>And then, out of nowhere, in the middle of a global pandemic, in 2021, Nintendo not only finally announces Metroid 5, the sequel to Metroid Fusion 19 years later, but also announces that this is actually the legendary Metroid Dread, a game which has been rumored by the Metroid fans community since 2005. Not only that but the game will be released this year! Boom!</p>\n<p>Also, it seems that I have future sight:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.015625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClUlEQVQoz0WSbVOicBTFyadAq1VXS0ECQcVSw1R84BmBvwKCaGmlppnlNvv9P8CutjM785vz4szcOffeORBWrmdLbLZYIaotut6l2A7JdjutntnomE1ev+9oLNfhumRXwrluutZoiYIiiYLM49UGBKNUNFeAMQrO5OFs/ltZ9q7P9cT7jsrxUrPHyXzGG6R9K+mCK10lZYUEerRwAyEYBaNH6PJpoRymmCDFkG2uJYsNSWiIfEsSWNvEZz7xNEUfvHPHjPv2mW2eEkUIwWgYpc7yJWwgp3QeNUUUSJdASgIJktv/EDmIb35zInAnAhcQ2zDFQDG8CKPUBcXkHR33bcIf4uMB4Q8ThoSoPUTlo5qAaDyiCUhfgDUeVvmQ1A7JncMwkjskX+QZwu5j0xHm27mJQz56P209PlDjQE07RhyoyWE/dXQSQy0ktQMSh9Dl49rZfIwoXTlmeuKkvGHKs9Jj64dlwLqEGPK3RjQxoHQDSi+gdEMaH9L4WLFyeBiSpSJ4oTifNrerynJ2u5jV1wtu/17drRu/3uv7bfv3Z+H1OQTUyECLDLQw0MKm+u9mBC8mswSwgPb8IPiOOp/qnt0C/fiDm5m6V49e5tFLjK0wUP9jqqcUA0UxGsHoc5TkXcvYrvTXF2k5NxbzO88KDLSgIQcMOWgqIVMJHgkdCZvKYRhGqViODl8X8PmE+9pV3pb0csZ+bMpvK2b9cvO2LK1f6OW8sl1djEDMNmKOiVh62FC+S0LHMDpyXcCfJux+y2yXt++r2sem9rG53b2y+23ja1f73FR3Byf3PKVWT8Rihlg6TJcPyYdWXhdSwMDHI8xzcN/FXCc/HaOunRlZqGvjvktOvEtnEBC757qaskAC9P827A9wMZf/Lb4YtgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Whatsapp conversation\"\n        title=\"Whatsapp conversation\"\n        src=\"/static/471abacba79e6dee80307e0564f1a35c/42a19/metroid-dread-prediction.png\"\n        srcset=\"/static/471abacba79e6dee80307e0564f1a35c/e3135/metroid-dread-prediction.png 256w,\n/static/471abacba79e6dee80307e0564f1a35c/06341/metroid-dread-prediction.png 512w,\n/static/471abacba79e6dee80307e0564f1a35c/42a19/metroid-dread-prediction.png 1024w,\n/static/471abacba79e6dee80307e0564f1a35c/b4ad3/metroid-dread-prediction.png 1080w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Whatsapp conversation</figcaption>\n  </figure></p>\n<p>The presentation was amazing because first, they have simply shown “Metroid 5”, just like it shows “Metroid 3” in Super Metroid and “Metroid 4” in Metroid Fusion, which was already mind-blowing. After a little gameplay, they revealed the actual game title: “Metroid Dread”. Whaaaat?!?</p>\n<p>As this year there was no E3 in person, I watched Nintendo Direct with some friends via Google Meets, and recorded our reaction to the game’s reveal:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/U926deUqD4g?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>Then Yoshio Sakamoto talked a little about the game and how this game will conclude Samus’ story with the Metroids. I hope this doesn’t mean the end of the franchise, but we’ll see. Watch the video below:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/afUI8nIrGgI?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>This is basically the game I’ve been waiting for the most in my life, because I got into the world of Metroid on the SNES with Super Metroid, and a few years later we had Metroid Fusion and then Metroid: Zero Mission, so I had a feeling like “pretty soon, one of these E3, Metroid 5 will be revealed”. And well, it took 19 years but here we are!</p>\n<p>It’s weird to think that this is the <a href=\"/en/search/metroid\">first time I’m writing about Metroid in this blog</a>, and I’m actually a bigger fan of Metroid than Zelda, and I’ve had this blog <a href=\"/en/blog/general/first-post/\">for 13 years</a>.</p>\n<p><a href=\"https://twitter.com/twilisita/status/1404880135908691975\" target=\"_blank\" rel=\"noreferrer\">Thank you Nintendo</a> ❤</p>","fields":{"slug":"/2021/2021-06-16-metroid-5-is-finally-announced-19-years-later.en/","path":"/blog/games/metroid-5-is-finally-announced-19-years-later/","locale":"en"},"readingTime":{"minutes":1.715},"frontmatter":{"date":"2021-06-16T00:00:00.000Z","title":"Metroid 5 is finally announced, 19 years later","categories":["games"]}}},{"node":{"excerpt":"Hey everyone, I’m back with another devlog for Super Ollie…","html":"<p>Hey everyone, I’m back with another devlog for Super Ollie. Today I will explain how I added the ladder-climbing feature to the game.</p>\n<p><img src=\"/613bc60519218869db385344997f27fa/climbing_ladder.gif\" alt=\"Climbing\"></p>\n<p>To make this possible, I created a new property for my tileset called <code class=\"language-text\">canClimb</code>, and then I can set it on individual tiles. Now, whenever the player presses <code class=\"language-text\">up</code> I have a code that checks if the hero is in a tile where <code class=\"language-text\">canClimb</code> is true and then set the state to <code class=\"language-text\">CLIMBING</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Handle hero climbing</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isUpDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroClimbing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token function\">getOverlappingTileWithGameobjectDimensions</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">.</span>dynamicLayers<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">'canClimb'</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>canClimb<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CLIMBING_UP</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">getOverlappingTileWithGameobjectDimensions</code> function will check on all passed layers for tiles with the property send in the last parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getOverlappingTileWithGameobjectDimensions</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token parameter\">gameObject<span class=\"token punctuation\">,</span>\r\n    dynamicLayer<span class=\"token punctuation\">,</span>\r\n    property <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span></span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\">// get an array of layers</span>\r\n    <span class=\"token keyword\">const</span> layers <span class=\"token operator\">=</span> dynamicLayer<span class=\"token operator\">?.</span>getChildren<span class=\"token operator\">?.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span>dynamicLayer<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">let</span> tile <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n    layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> layer<span class=\"token punctuation\">.</span><span class=\"token function\">getTilesWithinWorldXY</span><span class=\"token punctuation\">(</span>\r\n            x<span class=\"token punctuation\">,</span>\r\n            y<span class=\"token punctuation\">,</span>\r\n            width<span class=\"token punctuation\">,</span>\r\n            height\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        result<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resultTile</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>property<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>resultTile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span>property<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    tile <span class=\"token operator\">=</span> resultTile<span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n                tile <span class=\"token operator\">=</span> resultTile<span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> tile<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This will properly set the state to <code class=\"language-text\">CLIMBING</code>, and now we need to change the hero’s physics to allow him to climb the ladder, for that, I will disable gravity for the hero’s body and slow down his <code class=\"language-text\">X</code> and <code class=\"language-text\">Y</code> velocities:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> newAccelerationX <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">let</span> newAccelerationY <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// Handle climbing movement</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">CLIMBING_RIGHT</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    newAccelerationX <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">CLIMBING_LEFT</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    newAccelerationX <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">CLIMBING_UP</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    newAccelerationY <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">CLIMBING_DOWN</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    newAccelerationY <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">CLIMBING</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    newAccelerationY <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n    newAccelerationX <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAccelerationX</span><span class=\"token punctuation\">(</span>newAccelerationX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAccelerationY</span><span class=\"token punctuation\">(</span>newAccelerationY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And of course, I also need to reset the gravity when the hero is not climbing:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Reset gravity when is not climbing</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroClimbing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Aaand the animations:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Handle hero climbing animation</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroClimbing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'climb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroState <span class=\"token operator\">===</span> <span class=\"token constant\">CLIMBING</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">pauseAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'climb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>That’s all for today, see you at the next one!</p>","fields":{"slug":"/2021/2021-06-05-creating-ladders-for-platformer-with-phaser-js-game-devlog-18.en/","path":"/blog/games/creating-ladders-for-platformer-with-phaser-js-game-devlog-18/","locale":"en"},"readingTime":{"minutes":1.9},"frontmatter":{"date":"2021-06-05T00:00:00.000Z","title":"Creating ladders for platformer with Phaser JS - Game Devlog #18","categories":["games"]}}},{"node":{"excerpt":"When making a JAMStack website, some compromises need to be…","html":"<p>When making a JAMStack website, some compromises need to be made, but searching is not one of them, thanks to JavaScript libraries like <a href=\"https://github.com/nextapps-de/flexsearch\" target=\"_blank\" rel=\"noreferrer\">flexsearch</a> and <a href=\"https://github.com/olivernn/lunr.js/\" target=\"_blank\" rel=\"noreferrer\">lunr.js</a>.</p>\n<p>After following <a href=\"https://labs.walltowall.com/easy-client-side-search-for-gatsby-sites/\" target=\"_blank\" rel=\"noreferrer\">this tutorial</a> and combining the code with the <a href=\"https://material-ui.com/components/autocomplete/\" target=\"_blank\" rel=\"noreferrer\">Material UI autocomplete component</a> I was able to create the search bar you see in this blog.</p>\n<p><img src=\"/fc4482c8ac57987aed00951b3a87145f/search-bar-results.gif\" alt=\"Search results\"></p>\n<p>That was already nice, but I’d like to also have a search page, where a query could be matched by the post’s tags, title, and content.</p>\n<h2 id=\"creating-a-new-search-index\" style=\"position:relative;\"><a href=\"#creating-a-new-search-index\" aria-label=\"creating a new search index permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating a new search index</h2>\n<p>First I will add the following code to my Gatsby config, this will create a new <code class=\"language-text\">localSearchPage</code> index to be queried via GraphQL.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token operator\">...</span>otherConfigs<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token string\">'gatsby-plugin-local-search'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'page'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n                {\r\n                    allMarkdownRemark(\r\n                        filter: {\r\n                            frontmatter:{ show: { eq: true } }\r\n                        }\r\n                        sort: { fields: [frontmatter___date], order: DESC }\r\n                        limit: 1000\r\n                    ) {\r\n                        edges {\r\n                            node {\r\n                                id\r\n                                fields {\r\n                                    locale\r\n                                    path\r\n                                }\r\n                                frontmatter {\r\n                                    date\r\n                                    title\r\n                                    show\r\n                                    tags\r\n                                }\r\n                                rawMarkdownBody\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">engine</span><span class=\"token operator\">:</span> <span class=\"token string\">'flexsearch'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">engineOptions</span><span class=\"token operator\">:</span> <span class=\"token string\">'speed'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">ref</span><span class=\"token operator\">:</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'body'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">store</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'path'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locale'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'body'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"the-search-page\" style=\"position:relative;\"><a href=\"#the-search-page\" aria-label=\"the search page permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The search page</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 959px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVQY02XP4W6DIBAAYB+k7dpVhiIccMrauakFFJj7t+z9n2XRNUu3frmQ48jljqzrusPhwBirqirP87quCSGUUkTc7/cAUJbl42q73e52u81mw2hplCDkITPGFEXBGOOcU0oBgFJaFAUAEEI454yxp1W+Oh6PrCilqCjNs3meh2HgnAshlFJSSrWSUmqtf65aa3VDSgmw1LOY0hRC3/fOOdRarABAAFyTa0WqO1mMMaU0f8wpReedtTbGYIfBXy7Oe2utc34cfdd1Qojfva7N7yl5vzw7Z62z3rs4jcMUus8v732YphDCOI7e+77vjTG3/dn5dMa6MeZkzLlZ4oSoddPIl1ZrjYgalxMRjTGI+Gdy274q3Zjndo23xrzIlQKQd/79+Rtxw18oUHOvIwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Search page\"\n        title=\"Search page\"\n        src=\"/static/dd40bbda0c272f4cda51e6846bd7bf54/c19a6/search-page.png\"\n        srcset=\"/static/dd40bbda0c272f4cda51e6846bd7bf54/e3135/search-page.png 256w,\n/static/dd40bbda0c272f4cda51e6846bd7bf54/06341/search-page.png 512w,\n/static/dd40bbda0c272f4cda51e6846bd7bf54/c19a6/search-page.png 959w\"\n        sizes=\"(max-width: 959px) 100vw, 959px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Search page</figcaption>\n  </figure></p>\n<p>As shown in the tutorial, the <code class=\"language-text\">useFlexSearch</code> hook can be used to get the search results, but there is no indication of where the query was matched within the blog post fields.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> urlParams <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URLSearchParams</span><span class=\"token punctuation\">(</span>location<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> urlParams<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token function\">useFlexSearch</span><span class=\"token punctuation\">(</span>\r\n    query<span class=\"token punctuation\">,</span>\r\n    data<span class=\"token punctuation\">.</span>localSearchPage<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span>\r\n    data<span class=\"token punctuation\">.</span>localSearchPage<span class=\"token punctuation\">.</span>store\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getExcerpt</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">post<span class=\"token punctuation\">,</span> length <span class=\"token operator\">=</span> <span class=\"token number\">60</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// magic happens here</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> results<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token operator\">...</span>post<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">excerpt</span><span class=\"token operator\">:</span> <span class=\"token function\">getExcerpt</span><span class=\"token punctuation\">(</span>\r\n                post<span class=\"token punctuation\">.</span>excerpt\r\n                    <span class=\"token comment\">// let's remove any line breaks</span>\r\n                    <span class=\"token comment\">// or URLS</span>\r\n                    <span class=\"token comment\">// or remove the markdown tags etc</span>\r\n                    <span class=\"token comment\">// it would be better to do this in the build process</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?:https?|ftp):\\/\\/[\\n\\S]+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\n</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">[</span>results<span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The function <code class=\"language-text\">getExcerpt</code> needs to somehow return the excerpt of the blog post with the query highlighted within it.</p>\n<p>So I need to find the exact position of the query in the blog post and replace it with an HTML <code class=\"language-text\">span</code> element like <code class=\"language-text\">&lt;span>query&lt;/span></code>, and for that, I’m going to use regular expressions.</p>\n<p>Also, I will need a function to trim the text and add an ellipsis if needed and <a href=\"https://stackoverflow.com/a/41267747/4307769\" target=\"_blank\" rel=\"noreferrer\">this one from StackOverflow</a> will do the job just fine.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">const</span> getExcerpt <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> length <span class=\"token operator\">=</span> <span class=\"token number\">60</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// makes it lowercase to be sure to find it</span>\r\n        <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\\\b(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)\\\\b</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> matchedRegex <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>matchedRegex<span class=\"token operator\">?.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// now let's create a regex using the actual word found, capital-sensitive</span>\r\n            <span class=\"token keyword\">const</span> actualQuery <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span>matchedRegex<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> actualRegex <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\\\b(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>actualQuery<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)\\\\b</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token comment\">// start of the excerpt</span>\r\n            <span class=\"token keyword\">const</span> excerptEnd <span class=\"token operator\">=</span> <span class=\"token function\">truncateStringToWord</span><span class=\"token punctuation\">(</span>\r\n                text<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span>matchedRegex<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                length<span class=\"token punctuation\">,</span>\r\n                <span class=\"token boolean\">true</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token comment\">// yolo let's reverse the string and use the same function for the</span>\r\n            <span class=\"token comment\">// beginning of the excerpt too</span>\r\n            <span class=\"token keyword\">const</span> excerptStart <span class=\"token operator\">=</span> <span class=\"token function\">truncateStringToWord</span><span class=\"token punctuation\">(</span>\r\n                text<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> matchedRegex<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                length<span class=\"token punctuation\">,</span>\r\n                <span class=\"token boolean\">true</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> excerpt <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>excerptStart<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>excerptEnd<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> highlightedQuery <span class=\"token operator\">=</span> <span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>span className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>highlightedQuery<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                    <span class=\"token punctuation\">{</span>actualQuery<span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token comment\">// if nothing was found it means that the query matched</span>\r\n            <span class=\"token comment\">// a tag or the post title</span>\r\n            <span class=\"token keyword\">return</span> excerpt<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>actualRegex<span class=\"token punctuation\">,</span> highlightedQuery<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token function\">truncateStringToWord</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>classes<span class=\"token punctuation\">.</span>highlightedQuery<span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code will transform a string like <code class=\"language-text\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed condimentum risus nec scelerisque auctor</code> into <code class=\"language-text\">Lorem ipsum dolor sit amet, consectetur &lt;span>adipiscing&lt;/span> elit. Sed condimentum risus nec scelerisque auctor</code> when the query is <code class=\"language-text\">adipiscing</code>, and since this string is in HTML, to display it I will use the <code class=\"language-text\">dangerouslySetInnerHTML</code> property in an <code class=\"language-text\">em</code> element.</p>\n<p>The reversed usage of <code class=\"language-text\">truncateStringToWord</code> is a bit hacky, but most of this code can be moved to the Gatsby building process, so the blog performance won’t be impacted.</p>\n<p>I hope this blog post was somehow useful for you, you can check how the page looks like by <a href=\"/en/search?q=javascript\">searching for something in this blog</a>. See you in the next one!</p>","fields":{"slug":"/2021/2021-05-29-how-to-create-an-offline-search-page-with-gatsby.en/","path":"/blog/coding/how-to-create-an-offline-search-page-with-gatsby/","locale":"en"},"readingTime":{"minutes":3.285},"frontmatter":{"date":"2021-05-29T00:00:00.000Z","title":"How to create an offline search page with Gatsby","categories":["coding"]}}},{"node":{"excerpt":"Around 2 months ago, Gatsby v3 was released, and I was…","html":"<p>Around 2 months ago, <a href=\"https://www.gatsbyjs.com/blog/gatsbyconf-product-announcements\" target=\"_blank\" rel=\"noreferrer\">Gatsby v3 was released</a>, and I was already super hyped to upgrade this blog to v3 and start using <a href=\"https://www.gatsbyjs.com/docs/reference/release-notes/v3.0/#incremental-builds-in-oss\" target=\"_blank\" rel=\"noreferrer\">incremental builds</a>, but “sadly” this blog has way too many customizations, so upgrading it to Gatsby v3 is not an easy feat.</p>\n<p>Luckily, my open source project, <a href=\"https://github.com/blopa/Resume-Builder\" target=\"_blank\" rel=\"noreferrer\">Resume Builder</a>, didn’t have many customizations, so I was able to upgrade it to Gatsby v3 by simply running <code class=\"language-text\">ncu -u</code>, a command by <a href=\"https://github.com/raineorshine/npm-check-updates\" target=\"_blank\" rel=\"noreferrer\">npm-check-updates</a>. But then after upgrading it to Gatsby v3 I kind of got carried away and decided to implement some new features, like the <a href=\"https://github.com/blopa/Resume-Builder#cover-letter-editor\" target=\"_blank\" rel=\"noreferrer\">cover letter editor</a> that was on my backlog since 2018.</p>\n<h2 id=\"what-is-resume-builder\" style=\"position:relative;\"><a href=\"#what-is-resume-builder\" aria-label=\"what is resume builder permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Resume Builder?</h2>\n<p>Resume Builder is a free open-source project that allows anyone to easily maintain and build any kind of resume using a spreadsheet or a JSON file as a data source. Thanks to this project I was hired to live abroad, as I already explained <a href=\"/en/blog/coding/how-an-open-source-project-landed-me-a-job-abroad/\">in another blog post</a>.</p>\n<p>One of the biggest flaws of this project was that you must already have a data source for your resume, there was no way to create your own resume from scratch.</p>\n<h2 id=\"formik\" style=\"position:relative;\"><a href=\"#formik\" aria-label=\"formik permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Formik</h2>\n<p>A couple of days ago I was watching <a href=\"https://www.youtube.com/watch?v=uyLrwn8FdmM\" target=\"_blank\" rel=\"noreferrer\">a talk</a> by <a href=\"https://github.com/jaredpalmer\" target=\"_blank\" rel=\"noreferrer\">Jared Palmer</a> and I was convinced I should try <a href=\"https://github.com/formium/formik\" target=\"_blank\" rel=\"noreferrer\">Formik</a>, and I have the perfect feature for it.</p>\n<h2 id=\"json-schema\" style=\"position:relative;\"><a href=\"#json-schema\" aria-label=\"json schema permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON schema</h2>\n<p>I needed the form to be dynamic, so users could add as much work experience as they wanted it to, and since I’m already using the <a href=\"https://github.com/jsonresume/resume-schema/blob/81d9e75a3d7b599e202e7c3e31c55e634c7f1e39/schema.json\" target=\"_blank\" rel=\"noreferrer\">JSON schema from the json-resume project</a>, why not use it to build the form programmatically for me?</p>\n<p>Before coding I decided to use my UML knowledge to make a diagram of how this is going to work:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFElEQVQY002PzaqCUACEeztfoheRMAg3Cm0kwZ2gJEp1wp0oCIa2CcOflUiEtAyqs7CVHefCNbx3VjMD38BMAJxOp6Zp8jxPkgTA5/MBcD6fF4uF67oA+r4H8H6/gyC4XC66rtd1DWACYLPZrNfr4/FICMGvHo/HcrlUFEXTNMdxhjlK6eFwqOvaMAzP876w67qEEFmWd7vd8/m83+++74uiKEnSarVSFCXLstfrlef5fD7neX673VZV9YX3+73neaqqWpYFgDHW971t24IgzGYz0zS7rgOQpinHcdPplBBSluUXvt1u1+uVUto0zfiwbdsoisIwpJQOXxhjZVkWRRHH8R88aGBGP8b/hjHWdR1jbGh+AML6LI6VT8DuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JSON schema to HTML form\"\n        title=\"JSON schema to HTML form\"\n        src=\"/static/5bb124471650354914396e3c83c9a1f3/42a19/diagram.png\"\n        srcset=\"/static/5bb124471650354914396e3c83c9a1f3/e3135/diagram.png 256w,\n/static/5bb124471650354914396e3c83c9a1f3/06341/diagram.png 512w,\n/static/5bb124471650354914396e3c83c9a1f3/42a19/diagram.png 1024w,\n/static/5bb124471650354914396e3c83c9a1f3/e8464/diagram.png 1536w,\n/static/5bb124471650354914396e3c83c9a1f3/2eb59/diagram.png 2048w,\n/static/5bb124471650354914396e3c83c9a1f3/1ce76/diagram.png 4000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">JSON schema to HTML form</figcaption>\n  </figure></p>\n<p>For this blog post let’s use a simpler version of the JSON schema from the json-resume project.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">\"work\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"array\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"additionalItems\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"additionalProperties\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Facebook\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Menlo Park, CA\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Social Media Company\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Software Engineer\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. http://facebook.example.com\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"format\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uri\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"startDate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"$ref\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#/definitions/iso8601\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"endDate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"$ref\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#/definitions/iso8601\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Give an overview of your responsibilities at the company\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"highlights\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"array\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Specify multiple accomplishments\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"additionalItems\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e.g. Increased profits by 20% from 2011-2012 through viral advertising\"</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"traversing-the-json\" style=\"position:relative;\"><a href=\"#traversing-the-json\" aria-label=\"traversing the json permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Traversing the JSON</h2>\n<p>There are 3 different data types in the JSON schema that I’m using, <code class=\"language-text\">object</code>, <code class=\"language-text\">array</code>, and <code class=\"language-text\">string</code>, so it should be fairly simple to traverse.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> formik <span class=\"token operator\">=</span> <span class=\"token function\">useFormik</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">jsonSchema</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n              <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span> \r\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>TextField\r\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              fullWidth\r\n              id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> form <span class=\"token operator\">=</span> <span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That should be enough for most cases when there are not repeating keys in the JSON neither the need for the user to input unlimited data.</p>\n<h2 id=\"using-unique-keys\" style=\"position:relative;\"><a href=\"#using-unique-keys\" aria-label=\"using unique keys permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using unique keys</h2>\n<p>Now things start to get a bit hacky, to make sure every field has a unique key, I will accumulate the keys in the node, for example for the object <code class=\"language-text\">{ foo: { bar: '' } }</code>, the key for the <code class=\"language-text\">bar</code> node would be <code class=\"language-text\">foo-bar</code>. I’m not super proud of this, but I can always refactor it later.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> getForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">,</span> accKey <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> newAccKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>accKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span> newAccKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n              <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> newAccKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span> \r\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>TextField\r\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newAccKey<span class=\"token punctuation\">}</span>\r\n              fullWidth\r\n              id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newAccKey<span class=\"token punctuation\">}</span>\r\n              name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"adding-more-fields-dynamically\" style=\"position:relative;\"><a href=\"#adding-more-fields-dynamically\" aria-label=\"adding more fields dynamically permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding more fields dynamically</h2>\n<p>To add fields dynamically I decided to create a local variable that would hold how many times an input should be displayed based on the input unique key.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>quantitiesObject<span class=\"token punctuation\">,</span> setQuantitiesObject<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> getForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">,</span> accKey <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> quantity <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>jsonSchema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> newAccKey <span class=\"token operator\">=</span> key<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>accKey<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      newAccKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>accKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'object'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                  <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'array'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> currQuantity <span class=\"token operator\">=</span> quantitiesObject<span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n              <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span><span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                  <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> currQuantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n              <span class=\"token operator\">&lt;</span>Button\r\n                onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                  <span class=\"token function\">setQuantitiesObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                    <span class=\"token operator\">...</span>quantitiesObject<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> currQuantity <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                color<span class=\"token operator\">=</span><span class=\"token string\">\"primary\"</span>\r\n                variant<span class=\"token operator\">=</span><span class=\"token string\">\"contained\"</span>\r\n              <span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">+ </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\r\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">{</span>currQuantity <span class=\"token operator\">></span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n                <span class=\"token operator\">&lt;</span>Button\r\n                  onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token function\">setQuantitiesObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                      <span class=\"token operator\">...</span>quantitiesObject<span class=\"token punctuation\">,</span>\r\n                      <span class=\"token punctuation\">[</span>newAccKey<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> currQuantity <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n                  color<span class=\"token operator\">=</span><span class=\"token string\">\"secondary\"</span>\r\n                  variant<span class=\"token operator\">=</span><span class=\"token string\">\"contained\"</span>\r\n                <span class=\"token operator\">></span>\r\n                  <span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">- </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\r\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'string'</span><span class=\"token operator\">:</span>\r\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> newKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newAccKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n\r\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n                  <span class=\"token operator\">&lt;</span>TextField\r\n                    key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\r\n                    fullWidth\r\n                    id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\r\n                    name<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>newKey<span class=\"token punctuation\">}</span>\r\n                    label<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span>\r\n                    value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span>newKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\r\n                    onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span>\r\n                  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After wrapping this code into a React component, I can use it like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>DynamicForm\r\n    schema<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>jsonSchema<span class=\"token punctuation\">}</span>\r\n    formik<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>formik<span class=\"token punctuation\">}</span>\r\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>The result of this messy code looks like the following:</p>\n<p><img src=\"/49d9138f925cb97546d36f00f37d091a/dynamic-formik.gif\" alt=\"Dynamic form with Formik\"></p>\n<p>You can check the <a href=\"https://github.com/blopa/Resume-Builder/blob/4.0.7/src/components/DynamicForm.jsx#L48\" target=\"_blank\" rel=\"noreferrer\">actual code for the form on GitHub</a>, and the nice thing is that next time the json-resume schema changes, I don’t have to do anything.</p>\n<p>Try the form yourself on the <a href=\"https://resume-builder.js.org/en/build\" target=\"_blank\" rel=\"noreferrer\">Resume Builder website</a>.</p>","fields":{"slug":"/2021/2021-05-21-building-a-dynamic-form-from-a-json-schema.en/","path":"/blog/coding/building-a-dynamic-form-from-a-json-schema/","locale":"en"},"readingTime":{"minutes":4.84},"frontmatter":{"date":"2021-05-21T00:00:00.000Z","title":"Building a dynamic form from a JSON schema","categories":["coding"]}}},{"node":{"excerpt":"Today I decided to deploy my blog to my GitHub Pages address…","html":"<p>Today I decided to deploy my blog to my GitHub Pages address, <a href=\"https://blopa.github.io/\" target=\"_blank\" rel=\"noreferrer\">blopa.github.io</a>, in addition to my normal <a href=\"https://pablo.gg/\" target=\"_blank\" rel=\"noreferrer\">pablo.gg</a> deploy, but how can I do that?</p>\n<p>First I created a repo called <code class=\"language-text\">username.github.io</code>, where <code class=\"language-text\">username</code> is your GitHub username:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 872px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3KmwD//EABUQAQEAAAAAAAAAAAAAAAAAABBB/9oACAEBAAEFAmn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAQIUH/2gAIAQEAAT8hW8m02Yv/2gAMAwEAAgADAAAAEMPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAICAwAAAAAAAAAAAAAAARExABAhQZH/2gAIAQEAAT8QUqCU24IsPdEBETviMBC9f//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Photo from the GitHu Pages website\"\n        title=\"Photo from the GitHu Pages website\"\n        src=\"/static/d564a27692cc9b7425ac9fd8bdbcf339/ffc01/username-github-io.jpg\"\n        srcset=\"/static/d564a27692cc9b7425ac9fd8bdbcf339/db830/username-github-io.jpg 256w,\n/static/d564a27692cc9b7425ac9fd8bdbcf339/8102f/username-github-io.jpg 512w,\n/static/d564a27692cc9b7425ac9fd8bdbcf339/ffc01/username-github-io.jpg 872w\"\n        sizes=\"(max-width: 872px) 100vw, 872px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Photo from the GitHu Pages website</figcaption>\n  </figure></p>\n<p>Now on the repo where my source files are I need to add a new GitHub Actions file, let’s call it <code class=\"language-text\">deploy-to-github.io.yml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> deploy<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>github.io.yml\r\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token punctuation\">-</span> main\r\n\r\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">build-and-deploy</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\r\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\r\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2.3.4\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">persist-credentials</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install and Build 🚧\r\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\r\n          npm cache clean --force\r\n          npm install\r\n          npm run clean\r\n          npm run build\r\n          rm -rf CNAME</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy 🚀\r\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> JamesIves/github<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>deploy<span class=\"token punctuation\">-</span>action@4.1.3\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token key atrule\">repository-name</span><span class=\"token punctuation\">:</span> blopa/blopa.github.io\r\n          <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages\r\n          <span class=\"token key atrule\">folder</span><span class=\"token punctuation\">:</span> public\r\n          <span class=\"token key atrule\">clean</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\r\n          <span class=\"token key atrule\">single-commit</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p>This will build and deploy my code into another GitHub repo called <code class=\"language-text\">blopa/pablo.gg</code>. For this to work I needed to <a href=\"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token\" target=\"_blank\" rel=\"noreferrer\">create a personal access token</a> and then <a href=\"https://docs.github.com/en/actions/reference/encrypted-secrets\" target=\"_blank\" rel=\"noreferrer\">add it to my repo secrets</a> as <code class=\"language-text\">ACCESS_TOKEN</code>.</p>\n<p>Since I also deploy my regular build to another GitHub repo, this is my GitHub Action file for that:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> deploy<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>gg.yml\r\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token punctuation\">-</span> main\r\n\r\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">build-and-deploy</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\r\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\r\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2.3.4\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">persist-credentials</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install and Build 🚧\r\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\r\n          npm cache clean --force\r\n          npm install\r\n          npm run clean\r\n          npm run build</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy 🚀\r\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> JamesIves/github<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>deploy<span class=\"token punctuation\">-</span>action@4.1.3\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token key atrule\">repository-name</span><span class=\"token punctuation\">:</span> blopa/pablo.gg\r\n          <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages\r\n          <span class=\"token key atrule\">folder</span><span class=\"token punctuation\">:</span> public\r\n          <span class=\"token key atrule\">clean</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\r\n          <span class=\"token key atrule\">single-commit</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p>That’s it! Now whenever I push to the <code class=\"language-text\">main</code> branch in my source repo, it will deploy my website to <a href=\"https://github.com/blopa/pablo.gg\" target=\"_blank\" rel=\"noreferrer\">github.com/blopa/pablo.gg</a> and <a href=\"https://github.com/blopa/blopa.github.io\" target=\"_blank\" rel=\"noreferrer\">github.com/blopa/blopa.github.io</a> in the <code class=\"language-text\">gh-pages</code> branch.</p>","fields":{"slug":"/2021/2021-05-15-using-github-actions-to-deploy-my-blog-into-different-domains.en/","path":"/blog/coding/using-github-actions-to-deploy-my-blog-into-different-domains/","locale":"en"},"readingTime":{"minutes":1.395},"frontmatter":{"date":"2021-05-15T00:00:00.000Z","title":"Using GitHub Actions to deploy my blog into different domains","categories":["coding"]}}},{"node":{"excerpt":"Today I needed to know the accumulated inflation of the last…","html":"<p>Today I needed to know the accumulated inflation of the last year for Brazil for a project I am working on, information that can be easily accessed on the <a href=\"https://www.ibge.gov.br/explica/inflacao.php\" target=\"_blank\" rel=\"noreferrer\">IBGE website</a>, however, I needed this data in <code class=\"language-text\">JSON</code> or at least <code class=\"language-text\">XML</code> format.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 635px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.70312499999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQCA//EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABt13XE6gf/8QAGRAAAQUAAAAAAAAAAAAAAAAAIwADERIg/9oACAEBAAEFAizZ5Fx//8QAFREBAQAAAAAAAAAAAAAAAAAAABL/2gAIAQMBAT8BlL//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGq/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAIxESD/2gAIAQEABj8Cq6VSrx//xAAaEAABBQEAAAAAAAAAAAAAAAAhABEgMWGR/9oACAEBAAE/IRfxJyhYjNuQ/9oADAMBAAIAAwAAABAMP//EABkRAAIDAQAAAAAAAAAAAAAAAAABEVFxkf/aAAgBAwEBPxDT6Qtn/8QAFhEBAQEAAAAAAAAAAAAAAAAAAHEB/9oACAECAQE/EJTj/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAIRAxQcH/2gAIAQEAAT8QFHR28IBobNvIC8exteBj/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Inflation\"\n        title=\"Inflation\"\n        src=\"/static/5ce7f9eb74f084154a6a87817127ccc8/22ee5/inflation-en.jpg\"\n        srcset=\"/static/5ce7f9eb74f084154a6a87817127ccc8/db830/inflation-en.jpg 256w,\n/static/5ce7f9eb74f084154a6a87817127ccc8/8102f/inflation-en.jpg 512w,\n/static/5ce7f9eb74f084154a6a87817127ccc8/22ee5/inflation-en.jpg 635w\"\n        sizes=\"(max-width: 635px) 100vw, 635px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Inflation</figcaption>\n  </figure></p>\n<p>Incredibly, just searching for ”<a href=\"https://www.google.com/search?q=API+accumulated+inflation+2021+brazil\" target=\"_blank\" rel=\"noreferrer\">API accumulated inflation 2021 brazil</a>” did not return any useful results. I even tried ”<a href=\"https://www.google.com/search?q=how+to+calculate+the+accumulated+inflation+%22javascript%22\" target=\"_blank\" rel=\"noreferrer\">how to calculate the accumulated inflation “javascript”</a>” and nothing, which is why I’m writing this post.</p>\n<p>The Central Bank of Brazil provides several end-points with data related to the Brazilian economy, but for a person who does not understand economics like myself, it is difficult to know which is the correct endpoint to get the correct data.</p>\n<p>The Central Bank of Brazil has end-points in the format <code class=\"language-text\">https://api.bcb.gov.br/dados/serie/bcdata.sgs.XXX/dados</code>, in which <code class=\"language-text\">XXX</code> is the data reference code. First I found <a href=\"https://api.bcb.gov.br/dados/serie/bcdata.sgs.10844/dados?formato=json\" target=\"_blank\" rel=\"noreferrer\">this end-point</a>, which seemed to be correct, but the value of April 2021 is <code class=\"language-text\">0.05</code> and on the <a href=\"https://www.ibge.gov.br/explica/inflacao.php\" target=\"_blank\" rel=\"noreferrer\">IBGE website</a> the value is <code class=\"language-text\">0.31</code>, which is not what I need.</p>\n<p>After trying a few different codes that I found searching on Google, I found <a href=\"https://api.bcb.gov.br/dados/serie/bcdata.sgs.433/dados?formato=json\" target=\"_blank\" rel=\"noreferrer\">this end-point</a>, in which the April 2021 value is <code class=\"language-text\">0.31</code>. Yay!</p>\n<p>It is possible to filter the results of this end-point using <code class=\"language-text\">https://api.bcb.gov.br/dados/serie/bcdata.sgs.433/dados/ultimos/12?formato=json</code>, which returns the values of the last 12 months.</p>\n<p>Now we can use this data to calculate the accumulated inflation for the last year:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchBacenData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'https://api.bcb.gov.br/dados/serie/bcdata.sgs.433/dados/ultimos/12?formato=json'</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchBacenData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>To calculate the annual inflation we use the following formula: <code class=\"language-text\">accumulated inflation = ((1 + previous monthly inflation) * (1 + current monthly inflation)) - 1</code> (provided by my great mathematician friend Leandro). And how do we accumulate data using JavaScript? By using <code class=\"language-text\">reduce</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> inflation <span class=\"token operator\">=</span>\r\n    data<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">acc<span class=\"token punctuation\">,</span> curr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token function\">parseFloat</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token function\">parseFloat</span><span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">.</span>valor<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This will give us <code class=\"language-text\">0.06759188526903293</code>, which by rounding we get to the amount of 6,76%, just like it is on the IBGE website. Noice!</p>\n<p>I hope the next person who Googles “API accumulated inflation 2021 brazil” find this post 😊</p>\n<p>That’s all for today, cheers!</p>","fields":{"slug":"/2021/2021-05-13-how-to-calculate-brazils-annual-inflation-using-javascript.en/","path":"/blog/coding/how-to-calculate-brazils-annual-inflation-using-javascript/","locale":"en"},"readingTime":{"minutes":1.875},"frontmatter":{"date":"2021-05-13T00:00:00.000Z","title":"How to calculate the annual inflation in Brazil using JavaScript","categories":["coding"]}}},{"node":{"excerpt":"This week I was working on my project Resume Builder and I…","html":"<p>This week I was working on my project <a href=\"https://github.com/blopa/Resume-Builder\" target=\"_blank\" rel=\"noreferrer\">Resume Builder</a> and I wanted to be able to create a button that downloads a JSON without using JavaScript.</p>\n<p>The only way I knew how to do that was by using <code class=\"language-text\">URL.createObjectURL</code> in a <code class=\"language-text\">blob</code> file, but that wouldn’t work for me, because this link would be inside a PDF file.</p>\n<p>Then I did the first thing any millennial would do, I searched on Stack Overflow, but I couldn’t find anything… how is that even possible? Well anyway, with some trial and error I was able to do it by using Base 64.</p>\n<p>Let’s say I want to create a download button that will download a JSON like <code class=\"language-text\">{ foo: 'bar' }</code>, first we need to convert it to a Base 64 string, we can do that with the native <code class=\"language-text\">btoa</code> JavaScript function:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">foo</span><span class=\"token operator\">:</span> <span class=\"token string\">'bar'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> jsonString <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> base64Json <span class=\"token operator\">=</span> <span class=\"token function\">btoa</span><span class=\"token punctuation\">(</span>jsonString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// eyJmb28iOiJiYXIifQ==</span></code></pre></div>\n<p>Ok now that I know what is the Base 64 value for the <code class=\"language-text\">{ foo: 'bar' }</code> object, I can create an <code class=\"language-text\">anchor</code> element like the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data:application/json;base64,eyJmb28iOiJiYXIifQ==<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">download</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>object.json<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>download<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>And that’s all. In my case, I just needed the code to be served as HTML, and since I’m using Gatsby, my actual code is a React element that will be SSR for my PDF file:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> DownloadJsonLink <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    children<span class=\"token punctuation\">,</span>\r\n    json <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    name <span class=\"token operator\">=</span> <span class=\"token string\">'object.json'</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> href <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> base64Data <span class=\"token operator\">=</span> <span class=\"token function\">btoa</span><span class=\"token punctuation\">(</span><span class=\"token function\">unescape</span><span class=\"token punctuation\">(</span><span class=\"token function\">encodeURIComponent</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">data:application/json;base64,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>base64Data<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">return</span> <span class=\"token string\">'#'</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">[</span>json<span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>a\r\n            href<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>href<span class=\"token punctuation\">}</span>\r\n            download<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span>\r\n            target<span class=\"token operator\">=</span><span class=\"token string\">\"_blank\"</span>\r\n        <span class=\"token operator\">></span>\r\n            <span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> DownloadJsonLink<span class=\"token punctuation\">;</span></code></pre></div>\n<p>I knew it was possible to do this to download an image, but I had never tried for other types of files.</p>\n<p>It is amazing to still learn HTML things even after many years of experience, and I hope that someone else learns something new with this post. See you next time.</p>","fields":{"slug":"/2021/2021-05-09-how-to-create-a-json-download-link-using-html-only.en/","path":"/blog/coding/how-to-create-a-json-download-link-using-html-only/","locale":"en"},"readingTime":{"minutes":1.675},"frontmatter":{"date":"2021-05-09T00:00:00.000Z","title":"How to create a JSON download link using HTML only","categories":["coding"]}}},{"node":{"excerpt":"Get in contact with your local nutritionist. GG EZ.","html":"<p>Get in contact with your local nutritionist. GG EZ.</p>","fields":{"slug":"/2021/2021-05-02-i-lost-14kg-this-year-here-is-how-you-can-too.en/","path":"/blog/general/i-lost-14kg-this-year-here-is-how-you-can-too/","locale":"en"},"readingTime":{"minutes":0.045},"frontmatter":{"date":"2021-05-02T00:00:00.000Z","title":"I lost 14kg this year, here is how you can too","categories":["general"]}}},{"node":{"excerpt":"Well, this is awkward… It’s been four months since my last…","html":"<p>Well, this is awkward… It’s been four months since my last devlog on the skate platformer game, but you know life is complicated sometimes.</p>\n<p>Today I want to show how I created the pogo-attack with Phaser for my game.</p>\n<p><img src=\"/d9e1edab738bb1d7378e2f71f4b2b23d/pogo-attack.gif\" alt=\"pogo-attack\"></p>\n<p>First we need to check if the hero can perform the attack, and since we’re planning in having some stages where you can’t use your skate, this is the check for the pogo-attack:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Handle hero using down attack</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroOnGround</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isDownJustDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>canUseSkate\r\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ATTACKING_DOWN_START</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Don't handle any other state</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>After setting the proper attacking state, I need to handle the hero moving sideways while performing the attack:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroAttackingDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroOnGround</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isRightDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ATTACKING_DOWN_RIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isLeftDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ATTACKING_DOWN_LEFT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ATTACKING_DOWN_START</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then, inside the enemy collider callback function, simply add:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>player<span class=\"token punctuation\">.</span><span class=\"token function\">isHeroAttackingDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>touching<span class=\"token punctuation\">.</span>down<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And there you have it, really simple to do and adds a lot of possibilities to the game. See you in the next one!</p>","fields":{"slug":"/2021/2021-04-24-creating-a-pogo-attack-with-phaser-js-game-devlog-17.en/","path":"/blog/games/creating-a-pogo-attack-with-phaser-js-game-devlog-17/","locale":"en"},"readingTime":{"minutes":0.925},"frontmatter":{"date":"2021-04-24T00:00:00.000Z","title":"Creating a pogo-attack with Phaser JS - Game Devlog #17","categories":["games"]}}},{"node":{"excerpt":"When I was in college, web development wasn’t a major part…","html":"<p>When I was in college, web development wasn’t a major part of programming as it is these days, I didn’t have a single class on the web, and now I work with it every day. Pretty crazy.</p>\n<p>I remember learning some basic HTML back in school, around 1999, and making awesome looking websites like:</p>\n<p><img src=\"/e896371a7e308e9c9abee35bb587b61d/my-website.gif\" alt=\"My website\"></p>\n<h2 id=\"the-old-ways\" style=\"position:relative;\"><a href=\"#the-old-ways\" aria-label=\"the old ways permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The old ways</h2>\n<p>Back in the old (Dreamweaver) days if I wanted to make a website, I would have something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">- website\r\n  - index.html\r\n  - about.html\r\n  - contact.html</code></pre></div>\n<p>Then for each of those files, I would have to write the full HTML for that page, even if all of them had the same header or logo, etc. In this example, there is no database, no dynamic data, no compilation, the website is 100% static, I can simply open these files in my browser locally and everything will work without the need of servers because HTML is pretty much just a plain text with steroids.</p>\n<p>Of course, this is far from ideal, so other solutions like PHP came in to allow us to make things a bit more dynamic.</p>\n<h2 id=\"not-that-old-ways\" style=\"position:relative;\"><a href=\"#not-that-old-ways\" aria-label=\"not that old ways permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Not that old ways</h2>\n<p>With PHP, I can split my HTML template into re-usable chunks, so I could easily boot up a WordPress website and set up the whole header layout, and then focus only on creating the content for the website.</p>\n<p>The problem is that my browser doesn’t understand PHP, so I need a server to convert all the PHP logic into static HTML, so every time someone requested to see a page on my website, the request would go to my server, which will process the PHP code and serve an HTML page and of course, this costs way more than simply serving static HTML files.</p>\n<p>A PHP website file structure would have something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">- website\r\n      - index.php\r\n      - header.php\r\n      - footer.php\r\n  - content\r\n      - home.php\r\n      - about.php\r\n      - contact.php</code></pre></div>\n<p>This is where most of the websites are now, and with a good reason, Web 2.0 is complex and dynamics is needed… for most cases at least, but what about sites that barely change like blogs or portfolios?</p>\n<h2 id=\"the-new-way---jamstack\" style=\"position:relative;\"><a href=\"#the-new-way---jamstack\" aria-label=\"the new way   jamstack permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The new way - JAMStack</h2>\n<p>JAMStack stands for <code class=\"language-text\">JavaScript, API &amp; Markup - Stack</code> and it’s here to bring the best of the old ways into our lives. With JAMStack I can create my website the same way I’d do it using PHP, but instead of having the data processed on every request, I can code my whole website, pre-compile it once, and then serve it as static HTML + JavaScript files. This is super useful for websites like this one, and this technique is nothing new, all our desktop apps are pre-compiled and served “statically” - let’s forget about SaaS for a second ok?</p>\n<p>For example on this website, I have a template for a blog post page, and then I fill this template with data from a Markdown file. This file structure is something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">- website\r\n      - index.html\r\n  - pages\r\n      - home.html\r\n      - contact.html\r\n  - templates\r\n      - blog-posts.html\r\n  - content\r\n      - my-first-post.md\r\n      - my-second-post.md</code></pre></div>\n<p>I’m using Gatsby to make <a href=\"https://pablo.gg/\" target=\"_blank\" rel=\"noreferrer\">this</a> website, so I can write everything using React components, and the Gatsby framework compiles everything into a bunch of HTML files that are served to the browser.</p>\n<h2 id=\"where-to-start\" style=\"position:relative;\"><a href=\"#where-to-start\" aria-label=\"where to start permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Where to start?</h2>\n<p>Before trying Gatsby, I started with <a href=\"https://jekyllrb.com/\" target=\"_blank\" rel=\"noreferrer\">Jekyll</a>, which was a way to create a <a href=\"https://jekyllrb.com/docs/github-pages/\" target=\"_blank\" rel=\"noreferrer\">JAMStack blog and deploy it for free on GitHub Pages</a>, that’s all I needed, but first I had to convert all my posts from my 12 years old WordPress blog into Markdown files with <a href=\"https://hexo.io/docs/front-matter.html\" target=\"_blank\" rel=\"noreferrer\">frontmatter</a> variables.</p>\n<p>WordPress posts are (generally) stored in a database, so I need a way to pull these data and save it as a Markdown file, and the easiest way is to simply use a WordPress plugin, like <a href=\"https://github.com/benbalter/wordpress-to-jekyll-exporter\" target=\"_blank\" rel=\"noreferrer\">wordpress-to-jekyll-exporter</a>. If you don’t have access to your blog anymore, but still have your <code class=\"language-text\">database.sql</code> file (like me 😅) just <a href=\"https://wordpress.org/support/article/installing-wordpress-on-your-own-computer/\" target=\"_blank\" rel=\"noreferrer\">boot up a local version of WordPress</a> to exports your posts.</p>\n<p>I also created a <a href=\"https://gist.github.com/blopa/a6e49c798cf0fd5c875025c6ae282064\" target=\"_blank\" rel=\"noreferrer\">Python script</a> to change some data from the generated Markdown files to fit some of my needs.</p>\n<p>I had over 100 posts in my old blog, so it was a big surprise to me to know that there was <a href=\"https://pages.github.com/versions/\" target=\"_blank\" rel=\"noreferrer\">no way to use a Jekyll pagination plugin v2</a> and automatically deploy it to GitHub Pages, so I decided to look for other solutions.</p>\n<h2 id=\"the-great-gatsby\" style=\"position:relative;\"><a href=\"#the-great-gatsby\" aria-label=\"the great gatsby permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Great Gatsby</h2>\n<p>Since I already know React, going with Gatsby was a no-brainer, and they have excellent documentation and lots of plugins and tutorials and with the release of <a href=\"https://github.com/features/actions\" target=\"_blank\" rel=\"noreferrer\">GitHub Actions</a>, it was possible to build and deploy Gatsby within the GitHub environment without having to use an external service like <a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"noreferrer\">travis-ci.org</a>. Not only that, but I could even have my source-code in a private repo and deploy it to a public repo, this way I can have draft posts without them being public in the codebase.</p>\n<p>First I made <a href=\"https://github.com/blopa/gatsby-material-ui-starter\" target=\"_blank\" rel=\"noreferrer\">this</a> repo based on the instructions from <a href=\"https://github.com/mui-org/material-ui/tree/master/examples/gatsby\" target=\"_blank\" rel=\"noreferrer\">this</a> MUI repo. All it does is link together the Material UI React library into Gatsby.</p>\n<p>The next step was getting the <a href=\"https://github.com/blopa/gatsby-material-ui-starter\" target=\"_blank\" rel=\"noreferrer\">gatsby-material-ui-starter</a> as a template to add all my blog logic, but first I needed a list of all the features I wanted in my blog, and those were:</p>\n<ul>\n<li>Home page with posts listing</li>\n<li>Blog page with posts listing</li>\n<li>Blog post page with related posts</li>\n<li>Archive page with pagination</li>\n<li>Comments section</li>\n<li>Contact page</li>\n<li>Albums page with photos from Google Photos</li>\n<li>Search</li>\n<li>NO SERVERS</li>\n</ul>\n<p>Everything sounds pretty reasonable until you remember this all needs to be done with JAMStack and no servers. Is this even possible? Yes, it is. Gatsby and React are really powerful tools.</p>\n<h2 id=\"posts-listing-and-related-posts\" style=\"position:relative;\"><a href=\"#posts-listing-and-related-posts\" aria-label=\"posts listing and related posts permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Posts listing and related posts</h2>\n<p>Gatsby gives me a simple GraphQL API to get data from my Markdown files, and this can be done easily using the <a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-remark\" target=\"_blank\" rel=\"noreferrer\">gatsby-transformer-remark</a> plugin, so then I can query my posts with:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n    query Posts($locale: String) {\r\n        allMarkdownRemark(\r\n            filter: {\r\n                fields: { locale: { eq: $locale } }\r\n                frontmatter: { show: { eq: true } }\r\n            }\r\n            sort: { fields: [frontmatter___date], order: DESC }\r\n        ) {\r\n            edges {\r\n                node {\r\n                    excerpt\r\n                    fields {\r\n                        slug\r\n                        path\r\n                        locale\r\n                    }\r\n                    frontmatter {\r\n                        date\r\n                        title\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If you want to know more on how to create your own Gatsby blog from scratch, please follow <a href=\"https://www.gatsbyjs.com/blog/2017-07-19-creating-a-blog-with-gatsby/\" target=\"_blank\" rel=\"noreferrer\">their official tutorial</a> on it.</p>\n<p>For the related posts, I decided to get all my posts and check on each one of them which other posts had the most common tags with it, and then add the top 3 related posts to that post related posts, this might not be the most efficient way to do this, but remember that I’m only compiling the website once, so that’s ok 😊</p>\n<h2 id=\"pagination\" style=\"position:relative;\"><a href=\"#pagination\" aria-label=\"pagination permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pagination</h2>\n<p>Material UI already has a <a href=\"https://material-ui.com/components/pagination/\" target=\"_blank\" rel=\"noreferrer\">pagination component</a>, so I created an <code class=\"language-text\">Archive.jsx</code> template that takes a list of posts, a total pages number and the number of the current page, and then during the <a href=\"https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/\" target=\"_blank\" rel=\"noreferrer\">Gatsby compilation process</a> I create a bunch of archive pages using my template and that’s it, easy!</p>\n<h2 id=\"search\" style=\"position:relative;\"><a href=\"#search\" aria-label=\"search permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Search</h2>\n<p>Since Gatsby uses super modern JavaScript technologies, creating a local search should be pretty easy, right? YES! There is even <a href=\"https://github.com/angeloashmore/gatsby-plugin-local-search\" target=\"_blank\" rel=\"noreferrer\">a plugin</a> for it already! Noice!</p>\n<p>Just follow <a href=\"https://labs.walltowall.com/easy-client-side-search-for-gatsby-sites/\" target=\"_blank\" rel=\"noreferrer\">this tutorial</a> and combine the code with the <a href=\"https://material-ui.com/components/autocomplete/\" target=\"_blank\" rel=\"noreferrer\">Material UI autocomplete component</a> to create a <code class=\"language-text\">SearchBar</code> component like the one in this blog.</p>\n<h2 id=\"google-photos-integration\" style=\"position:relative;\"><a href=\"#google-photos-integration\" aria-label=\"google photos integration permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Google Photos integration</h2>\n<p>The bad part about JAMStack is that my git repo will contain not only all my codebase, but also all my content data, including photos, etc, and this can get real big real fast.</p>\n<p>Of course, I could consume my data from an external API instead of from Markdown files and this will already help a bit, but being able to not store photos in the repo will save a lot of space.</p>\n<p>Thanks to <a href=\"https://medium.com/@ValentinHervieu/how-i-used-google-photos-to-host-my-website-pictures-gallery-d49f037c8e3c\" target=\"_blank\" rel=\"noreferrer\">this nice post</a> by <a href=\"https://medium.com/@ValentinHervieu\" target=\"_blank\" rel=\"noreferrer\">@ValentinHervieu</a> we can get an idea on how to get the images URL from a Google Photos album URL, I can simply follow that post and add the code to my Gatsby building process.</p>\n<h2 id=\"multi-languages\" style=\"position:relative;\"><a href=\"#multi-languages\" aria-label=\"multi languages permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multi-languages</h2>\n<p>As Portuguese is my native language, and I live outside Brazil, it is useful to be able to write posts in multiple languages, to be able to share them with my friends here and in Brazil, and for that, I need to add functionality to be able to create posts in different languages, and obviously <a href=\"https://github.com/wiziple/gatsby-plugin-intl\" target=\"_blank\" rel=\"noreferrer\">there is a Gatsby plugin for that</a>.</p>\n<p>This plugin is based on the famous <a href=\"https://formatjs.io/docs/react-intl/\" target=\"_blank\" rel=\"noreferrer\">React Intl</a>, and is very simple to use, just add a new object in the Gatsby plugin settings to pass an array with the codes of the languages you want to add and a path to where the translations for those languages will be. See below how this object looks like for this blog:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token operator\">...</span>config<span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token string\">'gatsby-plugin-intl'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/intl</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">languages</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pt-br'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">defaultLanguage</span><span class=\"token operator\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">redirect</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">redirectComponent</span><span class=\"token operator\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/utils/redirect.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>What this will do is whenever you create a page like <code class=\"language-text\">/contact/</code>, it will create a new page for each of the languages that you configured it for, like <code class=\"language-text\">/en/contact/</code> and <code class=\"language-text\">/pt-br/contact/</code>. Awesome. But what about blog posts? I don’t want to have paths like <code class=\"language-text\">/en/hello-world/</code> and <code class=\"language-text\">/pt-br/hello-world/</code>, I want <code class=\"language-text\">/en/hello-world/</code> and <code class=\"language-text\">/pt-br/ola-mundo/</code>.</p>\n<p>To have the same blog post in different languages, I create markdown files like <code class=\"language-text\">hello-world.en.md</code> and <code class=\"language-text\">hello-world.pt-br.md</code> and then I link them by the post title and post date, this way I can switch the language in the blog post page, and then see that same post in another language.</p>\n<p><img src=\"/2105ea55eebac25b4267be0420fbb6e5/language-switcher.gif\" alt=\"Language switcher\"></p>\n<h2 id=\"contact-page-and-comments-section\" style=\"position:relative;\"><a href=\"#contact-page-and-comments-section\" aria-label=\"contact page and comments section permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contact page and comments section</h2>\n<p>There are a couple of services that offer commenting systems to your website, like <a href=\"https://disqus.com/\" target=\"_blank\" rel=\"noreferrer\">disqus.com</a> and <a href=\"https://developers.facebook.com/docs/plugins/comments/\" target=\"_blank\" rel=\"noreferrer\">Facebook Comments</a>, but Disqus’ free plan will add ads to your site, and Facebook will require users to have a Facebook account to use it.</p>\n<p>After some research, I found out that it’s possible to use <a href=\"https://blog.webjeda.com/google-form-customize/\" target=\"_blank\" rel=\"noreferrer\">Google Forms as a commenting system</a> for my JAMStack blog.</p>\n<p>The comment data is stored in a Google Spreadsheet on your Google Drive, which can then be accessed in the Gatsby build process to pass all the comments to the appropriate blog posts.</p>\n<p>One caveat of using this system is that if I want the new comments to show up in my blog, I need to rebuild everything again, but let’s think of that as a process to approve/disapprove comments 😄, but also <a href=\"https://www.gatsbyjs.com/docs/reference/release-notes/v3.0/#incremental-builds-in-oss\" target=\"_blank\" rel=\"noreferrer\">if you configure everything properly, Gatsby rebuilds can be quite smart and cheap</a>.</p>\n<h2 id=\"github-actions\" style=\"position:relative;\"><a href=\"#github-actions\" aria-label=\"github actions permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHub Actions</h2>\n<p>After all the coding and hacking, all that is left is to use GitHub Actions to build and deploy my website, and for that I simply create a <code class=\"language-text\">.github/workflows/deploy.yml</code> file in my GitHub repo with the following settings:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy to GitHub Pages\r\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token punctuation\">-</span> main\r\n\r\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">build-and-deploy</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\r\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\r\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2.3.4\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">persist-credentials</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install and Build 🚧\r\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\r\n          npm cache clean --force\r\n          npm install\r\n          npm run clean\r\n          npm run build</span>\r\n\r\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy 🚀\r\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> JamesIves/github<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>deploy<span class=\"token punctuation\">-</span>action@4.1.1\r\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\r\n          <span class=\"token key atrule\">token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token key atrule\">repository-name</span><span class=\"token punctuation\">:</span> blopa/pablo.gg\r\n          <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages\r\n          <span class=\"token key atrule\">folder</span><span class=\"token punctuation\">:</span> public\r\n          <span class=\"token key atrule\">clean</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\r\n          <span class=\"token key atrule\">single-commit</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p>This will build the website every time I push to the <code class=\"language-text\">main</code> branch and then deploy it to <a href=\"https://github.com/blopa/pablo.gg\" target=\"_blank\" rel=\"noreferrer\">github.com/blopa/pablo.gg</a> so it can be accessed via <a href=\"https://pablo.gg/\" target=\"_blank\" rel=\"noreferrer\">https://pablo.gg/</a>.</p>\n<h2 id=\"why\" style=\"position:relative;\"><a href=\"#why\" aria-label=\"why permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why</h2>\n<p>You might be wonder “why don’t you simply spin a $1.00 server and run WordPress?”, and I tell you why, it’s not only a case of saving money, but it’s also one thing less to care about, and if I die or get into a coma I don’t know, my website will still be only - as long as GitHub Pages is available and free. And by using JAMStack you will automatically decrease de processing power used to serve your website, which then will also decrease CO2 emission and save the planet (or at least help a bit).</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Not only I learned a new React framework, but I also have a nice and light personal blog with $0.00 cost of hosting, and even if one day GitHub Actions and GitHub Pages go offline, I can still build my blog locally and deploy to any static hosting that would cost very little per year, so yay!</p>\n<p>Of course, I end up paying for the <a href=\"https://godaddy.com/tlds/gg-domain\" target=\"_blank\" rel=\"noreferrer\">.gg domain</a>, but if you want to go <em>full frugal</em> you can simply host your website using free domains like <a href=\"https://pages.github.com/\" target=\"_blank\" rel=\"noreferrer\">github.io</a> or <a href=\"https://freenom.com\" target=\"_blank\" rel=\"noreferrer\">freenom.com</a>.</p>","fields":{"slug":"/2021/2021-04-17-i-pay-0-in-hosting-for-this-website.en/","path":"/blog/coding/i-pay-0-in-hosting-for-this-website/","locale":"en"},"readingTime":{"minutes":10.57},"frontmatter":{"date":"2021-04-17T00:00:00.000Z","title":"I pay $0.00 in hosting for this website","categories":["coding"]}}},{"node":{"excerpt":"Happy #quarantineversary! Oh yeah, it’s been one year, one…","html":"<p>Happy <a href=\"https://twitter.com/hashtag/quarantineversary?f=live\" target=\"_blank\" rel=\"noreferrer\">#quarantineversary</a>! Oh yeah, it’s been one year, one year since I was told to work from home for the next two weeks, and apparently, this includes give or take ~50 extra weeks - and counting.</p>\n<p>Fortunately, I had the privilege of keeping my job and gained the free time to invest in some personal projects, like <a href=\"/en/blog/tags/skate-platformer\">working on the Skate Platformer game</a>, learning React Hooks, playing lots and lots of videogames - something that I was struggling to find time to do in the past.</p>\n<p>I actually don’t have anything to add in this blog post, it just felt like I needed to write something about 2020, so why not? So here is a picture of my last day in the office vs a picture of my lunch today (free pizza sponsored by the hackathon at work):</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEEAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB0XMY3kZL/8QAGhABAAMAAwAAAAAAAAAAAAAAAQIDEgAiI//aAAgBAQABBQKxwyQejyEZW2L5wa8//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAgMAAwAAAAAAAAAAAAAAAAECESESMTL/2gAIAQEABj8CSwxnslykX27Nxn//xAAbEAEAAwEAAwAAAAAAAAAAAAABABEhMVFxkf/aAAgBAQABPyEO2dd5OxB8NZMhB9mDCO0TS6gcfcqf/9oADAMBAAIAAwAAABBzH//EABURAQEAAAAAAAAAAAAAAAAAAAEA/9oACAEDAQE/ECAv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EJXb/8QAHBABAAICAwEAAAAAAAAAAAAAAREhADFBUWGR/9oACAEBAAE/EJoPa3E6ru7cLDoEI0vXecxBZwvWMby9iWYr5j74YU2WWZRk6AYfaM//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Last day in the office\"\n        title=\"Last day in the office\"\n        src=\"/static/841023e8bc81cea51096b4b07fa0ff89/63217/IMG_20200312.jpg\"\n        srcset=\"/static/841023e8bc81cea51096b4b07fa0ff89/db830/IMG_20200312.jpg 256w,\n/static/841023e8bc81cea51096b4b07fa0ff89/8102f/IMG_20200312.jpg 512w,\n/static/841023e8bc81cea51096b4b07fa0ff89/63217/IMG_20200312.jpg 1024w,\n/static/841023e8bc81cea51096b4b07fa0ff89/d58d1/IMG_20200312.jpg 1536w,\n/static/841023e8bc81cea51096b4b07fa0ff89/09658/IMG_20200312.jpg 2048w,\n/static/841023e8bc81cea51096b4b07fa0ff89/08826/IMG_20200312.jpg 3264w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Last day in the office</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFwEAAwEAAAAAAAAAAAAAAAAAAQIDBP/aAAwDAQACEAMQAAAB1xy9ILyRWSxtYtJQ0S//xAAcEAEAAgIDAQAAAAAAAAAAAAABAAIDERASISL/2gAIAQEAAQUCrZW5NsvnstL/AD3lgcgaiaeD2f/EABkRAQACAwAAAAAAAAAAAAAAAAABEQISIf/aAAgBAwEBPwGutGaof//EABgRAAMBAQAAAAAAAAAAAAAAAAABEQMS/9oACAECAQE/ATsxdZWf/8QAHRAAAgICAwEAAAAAAAAAAAAAABEBIUFRECAzcf/aAAgBAQAGPwKGrwPR5itmZ+8JXsURXSz/xAAcEAEAAgMBAQEAAAAAAAAAAAABABEhMUFRYYH/2gAIAQEAAT8hWKjwyfsKwJeh7LQuz9ZRKBijVTfHLUCeRiKot9SvSByFU77UN32G2YLVz//aAAwDAQACAAMAAAAQ3xk9/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAQIf/aAAgBAwEBPxACAzyRH//EABkRAQACAwAAAAAAAAAAAAAAAAEAEBEhUf/aAAgBAgEBPxBUMtNFwjD/xAAeEAEAAgMAAgMAAAAAAAAAAAABABEhMUFRYYGR8f/aAAgBAQABPxBsSDF5Ne31KlIKpm/CXAaM0SzszuDa9uHoyy11Xvx8S1zKa1B/mUNH8nJkFN+5UJQHgGA0GFX2oBB0xrIQpa8J/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Healthy lunch... not\"\n        title=\"Healthy lunch... not\"\n        src=\"/static/29060b3b6d7ca48c75fec59ae15c07f7/63217/IMG_20210312.jpg\"\n        srcset=\"/static/29060b3b6d7ca48c75fec59ae15c07f7/db830/IMG_20210312.jpg 256w,\n/static/29060b3b6d7ca48c75fec59ae15c07f7/8102f/IMG_20210312.jpg 512w,\n/static/29060b3b6d7ca48c75fec59ae15c07f7/63217/IMG_20210312.jpg 1024w,\n/static/29060b3b6d7ca48c75fec59ae15c07f7/5bcb7/IMG_20210312.jpg 1471w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Healthy lunch... not</figcaption>\n  </figure></p>\n<p>My beard got bigger 👀</p>","fields":{"slug":"/2021/2021-03-12-one-year-of-working-from-home.en/","path":"/blog/general/one-year-of-working-from-home/","locale":"en"},"readingTime":{"minutes":0.755},"frontmatter":{"date":"2021-03-12T00:00:00.000Z","title":"One year of working from home","categories":["general"]}}},{"node":{"excerpt":"Well isn’t that something? Less than 7 days after failing to…","html":"<p>Well isn’t that something? Less than 7 days after <a href=\"/en/blog/general/godammit-whatsapp/\">failing to restore my messages backup on Whatsapp</a>, Telegram announced that you can now <a href=\"https://telegram.org/blog/move-history/\" target=\"_blank\" rel=\"noreferrer\">import messages from other chat apps</a>. Like, godammit Telegram, how can it be so awesome? Since this last update, you can import your message history from WhatsApp, Line, and KakaoTalk, to do that you need to export your chat from, let’s say Whatsapp, and share it to your equivalent contact on Telegram.</p>\n<p><img src=\"/a1e04df6ad4fb7475359d1ae76aacc63/importing-to-telegram.gif\" alt=\"Importing to Telegram\"></p>\n<p>Telegram said they will eventually make an API available, so you can build your own scripts and import messages from any chat app. Awesome. But do we really need to wait? Uhmn not really. Let’s take a look at how the exported <code class=\"language-text\">.txt</code> file from Whatsapp looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">8/13/10, 12:11 - Scott Pilgrim: What is the website for Amazon.ca?\r\n8/13/10, 12:12 - Wallace Wells: Amazon.ca...</code></pre></div>\n<p>So let’s say that like me, you only have access to your Whatsapp <code class=\"language-text\">msgstore.db</code> file, then you can’t export your messages from the Whatsapp app, right? In this case, you can use the <a href=\"https://github.com/andreas-mausch/whatsapp-viewer\" target=\"_blank\" rel=\"noreferrer\">Whatsapp Viewer</a> tool to export your chat message as a <code class=\"language-text\">JSON</code> file that looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0000000000000@s.whatsapp.net\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"contactName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Wallace Wells\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"messages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token punctuation\">{</span>\r\n            <span class=\"token property\">\"timestamp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2010-08-13T12:11:00Z\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"fromMe\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"What is the website for Amazon.ca?\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span>\r\n            <span class=\"token property\">\"timestamp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2010-08-13T12:12:00Z\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"fromMe\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Amazon.ca..\"</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now all you have to do is load this <code class=\"language-text\">JSON</code> file with a simple <code class=\"language-text\">Node.js</code> (for example) script and save it as a <code class=\"language-text\">.txt</code> file using that pattern above.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n    readFileSync<span class=\"token punctuation\">,</span>\r\n    writeFileSync<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> yourName <span class=\"token operator\">=</span> <span class=\"token string\">'Scott Pilgrim'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// TODO put your name here</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">convertMessageObjToTxt</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">messageObj<span class=\"token punctuation\">,</span> sender</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// format \"2010-08-13T12:11:00Z\"</span>\r\n    <span class=\"token keyword\">const</span> dateObj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>messageObj<span class=\"token punctuation\">.</span>timestamp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> date <span class=\"token operator\">=</span> dateObj<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleDateString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'en-US'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> time <span class=\"token operator\">=</span> dateObj<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'en-US'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hour12</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// format is \"M/DD/YY, HH:MM - Sender's Name: Message\"</span>\r\n    <span class=\"token keyword\">return</span> date <span class=\"token operator\">+</span> <span class=\"token string\">', '</span> <span class=\"token operator\">+</span> time <span class=\"token operator\">+</span> <span class=\"token string\">' - '</span> <span class=\"token operator\">+</span> sender <span class=\"token operator\">+</span> <span class=\"token string\">': '</span> <span class=\"token operator\">+</span> messageObj<span class=\"token punctuation\">.</span>text <span class=\"token operator\">+</span> <span class=\"token string\">'\\n'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// read the JSON file</span>\r\n    <span class=\"token keyword\">const</span> chatJson <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">let</span> txtContent <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\r\n\r\n    chatJson<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">message</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        txtContent <span class=\"token operator\">+=</span> <span class=\"token function\">convertMessageObjToTxt</span><span class=\"token punctuation\">(</span>\r\n            message<span class=\"token punctuation\">,</span>\r\n            message<span class=\"token punctuation\">.</span>fromMe <span class=\"token operator\">?</span> yourName <span class=\"token operator\">:</span> chatJson<span class=\"token punctuation\">.</span>contactName\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// save is as a .txt</span>\r\n    <span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.txt</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> txtContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>You can run the script with <code class=\"language-text\">node script.js your-json-file.json</code> and the result will be a <code class=\"language-text\">.txt</code> file that you can import into Telegram. Awesome, right? The only caveat is that you need to import this <code class=\"language-text\">.txt</code> via the Telegram mobile app only.</p>\n<p>So that’s it! While WhatsApp asks you to give away your privacy for a super shitty app, Telegram continues to be free, open-source (the app, not their servers), and with an awesome API that lets, you do almost anything. Pretty crazy.</p>","fields":{"slug":"/2021/2021-01-31-godammit-telegram.en/","path":"/blog/general/godammit-telegram/","locale":"en"},"readingTime":{"minutes":2.305},"frontmatter":{"date":"2021-01-31T00:00:00.000Z","title":"Godammit Telegram!","categories":["general"]}}},{"node":{"excerpt":"Whatsapp was in all news outlets recently due to its new…","html":"<p>Whatsapp was in all news outlets recently due to its new privacy policies, but this post is not about that. Oh no no, this post is about my 28 hours battle to restore my Whatsapp messages backup that led to nothing, well, kind of.</p>\n<p>Whatsapp isn’t really a good app, I think we all kind of know that? Like really, I need to have my phone connected to the internet to use the web version of it? WTF! But fine, we all use it because it’s the app that everyone uses, right? I mean what can you do? I feel you.</p>\n<p>I’m an early adopter of Whatsapp, back when they had a Symbian version of the app I was using it in my Nokia phone, so I’m using it for many and many years, and I always backup my chat history, first with <a href=\"https://play.google.com/store/apps/details?id=com.keramidas.TitaniumBackup\" target=\"_blank\" rel=\"noreferrer\">Titanium Backup</a> and then with the Google Drive integration, which was convenient because I didn’t have to root my phone and void the warranty.</p>\n<h2 id=\"so-what-happened\" style=\"position:relative;\"><a href=\"#so-what-happened\" aria-label=\"so what happened permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>So what happened?</h2>\n<p>I got a new phone, a <a href=\"https://www.gsmarena.com/oneplus_nord_n10_5g-10556.php\" target=\"_blank\" rel=\"noreferrer\">OnePlus Nord N10</a>, I know it’s not top-notch but it’s a good upgrade from a <a href=\"https://www.gsmarena.com/motorola_moto_z3_play-9003.php\" target=\"_blank\" rel=\"noreferrer\">Motorola Moto Z3 Play</a> and it has 5G, so I’m happy to help Bill Gates bring the New World Order for us via coronavirus.</p>\n<p>The truth is Whatsapp pisses me off, it’s a super simple yet super buggy and slow messaging app, that I only use to be able to talk to some friends that still don’t use Telegram (noobs). So before moving everything to my new phone, I made a new Whatsapp backup and straight away uninstalled the app from my phone, after all, why would I keep it? I hate it. Silly me…</p>\n<p>I started the process of restoring my Whatsapp backup via Google Drive on my new phone, and then when it hit 24% I got an error: <strong>Couldn’t restore messages</strong>. It’s 10GB of backup data, so I didn’t worry too much and decided to try again, well the thing is that to try again, you need to uninstall Whatsapp and install it again… ok…</p>\n<p>So I did that, and to my surprise, same error, and there is no option to retry or change to restoring from the local storage no no no, if you want to retry, then uninstall and install it again. So I kept trying, different backup sources (local, cloud), different backup files, and then I wasn’t able to ask for an SMS for 2 hours?? lol ok. I waited, tried again, it didn’t work of course, and then I had to wait 7 hours. Awesome.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 222.265625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAsABQDASIAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAECBAMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAfCqAYhNDzsZIUc2tEB//8QAGxAAAQUBAQAAAAAAAAAAAAAAAQACESAhEBP/2gAIAQEAAQUCWVDAR5hOEHVJrPf/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AV//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AV//xAAXEAADAQAAAAAAAAAAAAAAAAAAIDEw/9oACAEBAAY/Ampc/wD/xAAdEAACAQQDAAAAAAAAAAAAAAAAAREQIVFhIDGB/9oACAEBAAE/IRYWex+cFltjaLUicmbGXfdZJZJZLP/aAAwDAQACAAMAAAAQe/KDIw//xAAWEQEBAQAAAAAAAAAAAAAAAAABESD/2gAIAQMBAT8QGa//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EF//xAAiEAEAAgEDAwUAAAAAAAAAAAABABExIVFhEIGhQXGx0fH/2gAIAQEAAT8QMVZUpzaMsT4ibyuQmkXoEQpdVEPX7Qb5Sr1gRQB7s/TYqXZeZ9Tv5iN/MNXVicziO9P/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Now let&#39;s wait 24h\"\n        title=\"Now let&#39;s wait 24h\"\n        src=\"/static/ac157d47debff09e795b787faedeee4d/17d4d/whatsapp-waiting-time.jpg\"\n        srcset=\"/static/ac157d47debff09e795b787faedeee4d/db830/whatsapp-waiting-time.jpg 256w,\n/static/ac157d47debff09e795b787faedeee4d/8102f/whatsapp-waiting-time.jpg 512w,\n/static/ac157d47debff09e795b787faedeee4d/17d4d/whatsapp-waiting-time.jpg 576w\"\n        sizes=\"(max-width: 576px) 100vw, 576px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Now let&#39;s wait 24h</figcaption>\n  </figure></p>\n<p>Then I started researching, <a href=\"https://www.google.com/search?q=whatsapp+restore+stuck+at+24&#x26;oq=whatsapp+restore+stuck+at+24%25\" target=\"_blank\" rel=\"noreferrer\">and many other people have the same problem</a>. I don’t understand how an app, from a billionaire company, can be so bad. I tried reaching out to customer support, and they said they couldn’t help me. It took me less than 5 minutes to restore my Signal backup to my new phone, and I was already 20 hours in trying to restore my Whatsapp backup.</p>\n<h2 id=\"ok-what-now\" style=\"position:relative;\"><a href=\"#ok-what-now\" aria-label=\"ok what now permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ok what now?</h2>\n<p>I gave up. Yeah, seriously, I gave up. All I want to do now is to be able to access my chat history in any form possible like I have the backup files, so it must have a way, right?</p>\n<h2 id=\"1---root-your-phone\" style=\"position:relative;\"><a href=\"#1---root-your-phone\" aria-label=\"1   root your phone permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 - Root your phone</h2>\n<p>That’s not super nice, but I had to do it, if you want to decrypt the <code class=\"language-text\">msgstore.db.crypt12</code> file from the Whatsapp backup, you’re going to need your Whatsapp encryption key, that is located on <code class=\"language-text\">/data/data/com.whatsapp/files/key</code>, and to be able to copy this file, you’re going to need root permissions.</p>\n<h2 id=\"2---decrypt-your-database-file\" style=\"position:relative;\"><a href=\"#2---decrypt-your-database-file\" aria-label=\"2   decrypt your database file permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2 - Decrypt your database file</h2>\n<p>Once you have the key, you can decrypt it via a <a href=\"https://github.com/CanciuCostin/crypt12-decrypt\" target=\"_blank\" rel=\"noreferrer\">Go script (or .exe)</a> or using the awesome <a href=\"https://github.com/andreas-mausch/whatsapp-viewer\" target=\"_blank\" rel=\"noreferrer\">Whatsapp Viewer</a> tool, that not only decrypts your backup file (which is an SQLite file) but also loads all your chats and allow you to export them to <code class=\"language-text\">HTML</code> or <code class=\"language-text\">JSON</code> one by one.</p>\n<h2 id=\"3---access-your-data\" style=\"position:relative;\"><a href=\"#3---access-your-data\" aria-label=\"3   access your data permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3 - Access your data</h2>\n<p>As I mentioned before, you can use the Whatsapp Viewer to view all your conversations, or you can even use an SQLite browser app and dive into the database yourself. I’ve found a <a href=\"https://github.com/KnugiHK/Whatsapp-Chat-Exporter\" target=\"_blank\" rel=\"noreferrer\">really nice Python script on GitHub</a> (that is only 6 days old - lucky me) that allowed me to export all my chats at once to a single <code class=\"language-text\">JSON</code> file, and with this <code class=\"language-text\">JSON</code> file I can do whatever I want with my Whatsapp history, I might even use <a href=\"https://github.com/detaysoft/react-chat-elements#readme\" target=\"_blank\" rel=\"noreferrer\">react-chat-elements</a> to create a small <a href=\"https://www.gatsbyjs.com/\" target=\"_blank\" rel=\"noreferrer\">Gatsby</a> project to load all my messages, who knows.</p>\n<h2 id=\"the-lesson\" style=\"position:relative;\"><a href=\"#the-lesson\" aria-label=\"the lesson permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The lesson</h2>\n<p>Whatsapp is bad, and you shouldn’t use it. Really. And I’m not even talking about the privacy thing, it’s just an awful app that lacks basic features that any messaging app nowadays should have, just use Telegram.</p>\n<p>With that said, I’m sadly still going to use it because I need to keep in touch with other people that only use Whatsapp, and even worse, I’m going to use it without my backup 😭. At least now I know I can’t trust it and that there are other (unofficial) solutions to the backup restoration problem.</p>","fields":{"slug":"/2021/2021-01-24-godammit-whatsapp.en/","path":"/blog/general/godammit-whatsapp/","locale":"en"},"readingTime":{"minutes":4.325},"frontmatter":{"date":"2021-01-24T00:00:00.000Z","title":"Godammit Whatsapp!","categories":["general"]}}},{"node":{"excerpt":"Wassup everyone, I’m once again late with my “weekly” devlog…","html":"<p>Wassup everyone, I’m once again late with my “weekly” devlog, due to the holidays and stuff. But let’s drop the small talk and cut to the chase.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/WKK5jc3rl1w?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>This is very simple to do, but it adds a nice polishing level to the game. First I created a new scene called <code class=\"language-text\">StagePresentationScene</code>. In it, I get the variable <code class=\"language-text\">stageName</code> and show it in the middle of the screen for 1.5 seconds.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Scene <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'phaser'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> handleSceneEnd <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../utils/scenes'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">StagePresentationScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'StagePresentationScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>initData <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>initData<span class=\"token punctuation\">.</span>stageName\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token number\">1500</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">handleSceneEnd</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>initData<span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> StagePresentationScene<span class=\"token punctuation\">;</span></code></pre></div>\n<p>I can access the <code class=\"language-text\">stageName</code> attribute from Tiled with a simple <code class=\"language-text\">filter</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// stageNameProperty will be an object with a property value in it</span>\r\n<span class=\"token keyword\">const</span> stageNameProperty <span class=\"token operator\">=</span> stageJson<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> property<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token constant\">STAGE_NAME</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This is very simple to do but makes the game way better looking.</p>\n<p><img src=\"/286f7df54e54aa88ad4967a1424de1c5/stage-presentation.gif\" alt=\"Stage transition\"></p>\n<p>And that’s it. Don’t forget to add the <code class=\"language-text\">stageName</code> property to your Tiled map properties. See you next week.</p>","fields":{"slug":"/2020/2020-29-12-adding-transition-when-entering-a-stage-on-phaser-js-skate-platformer-game-devlog-16.en/","path":"/blog/games/adding-transition-when-entering-a-stage-on-phaser-js-skate-platformer-game-devlog-16/","locale":"en"},"readingTime":{"minutes":0.975},"frontmatter":{"date":"2020-12-29T00:00:00.000Z","title":"Adding transition when entering a stage on Phaser JS - Game Devlog #16","categories":["games"]}}},{"node":{"excerpt":"Alright, get comfortable because today’s devlog is long, but…","html":"<p>Alright, get comfortable because today’s devlog is long, but it’s worth it. I’m really happy I managed to do this devlog, after all Cyberpunk 2077 was released this week, and I’m playing it on Stadia! Today’s devlog is long mostly because I want to explain the reason why I am doing things a certain way.</p>\n<p>Today I’m going to show you how I improved my enemy AI and why I handle so many edge cases in my code. Let’s dive into it.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/KoCubm17q8s?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>My first take on the AI algorithm was to calculate it on the go, so wherever I place an enemy, it would move around and calculate if it should turn or not on every frame, this was very costly, especially when I had many enemies on screen.</p>\n<p>There were two ways to approach this problem, one would be manually creating a static path on Tiled and make the enemy follow that path, but whenever I add a new enemy, I would have to add a path for it too, and this can get really annoying to do really fast.</p>\n<p>The second option is instead of calculating the enemy’s behavior on every frame, I could pre-calculate all of them as soon as the stage is loaded and then set that path statically, this way I would have the freedom to add enemies wherever I want on Tiled, without having to add extra paths for them to follow and also keep the framerate stable by not processing the enemy’s logic on every frame.</p>\n<p>So how did I do that? First, there are some edge cases that I needed to handle, like what if the enemy is not on a platform? Or what if the platform doesn’t have edges? I know I will be making the stages on Tiled, but it’s good to handle those anyway because we never know.</p>\n<p>Since I can’t know if the enemy is already on a platform or not, I need to wait for the game’s physics to kick in and calculate the enemy’s position, such as gravity and stuff, so instead of calculating the static AI in the <code class=\"language-text\">constructor</code>, I’m doing it in the <code class=\"language-text\">update</code> function, and after it’s calculated, I simply “remove” the <code class=\"language-text\">update</code> function by replacing it with a <code class=\"language-text\">no-op</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Enemy</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Sprite</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> scene<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> asset <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> asset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>staticAi <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">PLATFORM_WALKING</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>aiColliders <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">time<span class=\"token punctuation\">,</span> delta</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>aiColliders<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// we don't need the update function anymore</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">update</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>staticAi<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">aiStrategy</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>aiStrategy <span class=\"token operator\">===</span> <span class=\"token constant\">PLATFORM_WALKING</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// first check if the enemy is on a platform</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchingDownObject<span class=\"token operator\">?.</span>layer<span class=\"token operator\">?.</span>tilemapLayer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token comment\">// then calculate the colliders that will make the enemy change direction</span>\r\n                    <span class=\"token keyword\">const</span> colliders <span class=\"token operator\">=</span> <span class=\"token function\">staticPlatformWalkingBehavior</span><span class=\"token punctuation\">(</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchingDownObject<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>tilemapLayer\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token comment\">// TODO concat array</span>\r\n                    colliders<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">collider</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>aiColliders<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>collider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Enemy<span class=\"token punctuation\">;</span></code></pre></div>\n<p>And then all the magic happens inside the <code class=\"language-text\">staticPlatformWalkingBehavior</code>, which honestly is super straightforward, I just need to get the collision layer from the enemy and check for an edge in the platform in both directions. The only catch in this function is that I don’t want it to run forever until it finds an edge because maybe the platform doesn’t have an edge, who knows? So instead I will run the loop for every tile in the map’s width.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">staticPlatformWalkingBehavior</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token parameter\">gameObject<span class=\"token punctuation\">,</span>\r\n    dynamicLayer</span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> divider <span class=\"token operator\">=</span> <span class=\"token constant\">TILE_WIDTH</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> loopSize <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">.</span>tileSize<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> divider<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> layers <span class=\"token operator\">=</span> dynamicLayer<span class=\"token operator\">?.</span>getChildren<span class=\"token operator\">?.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span>dynamicLayer<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// for each collision layer</span>\r\n    layers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">layer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// for each direction</span>\r\n        <span class=\"token punctuation\">[</span><span class=\"token constant\">FACING_RIGHT</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">FACING_LEFT</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">direction</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token comment\">// for each tile of the map * divider</span>\r\n            <span class=\"token keyword\">let</span> lastGroundTile<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>loopSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token punctuation\">(</span><span class=\"token parameter\">num<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">const</span> multiplier <span class=\"token operator\">=</span> direction <span class=\"token operator\">===</span> <span class=\"token constant\">FACING_RIGHT</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">const</span> posX <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> multiplier<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">const</span> groundTile <span class=\"token operator\">=</span> layer<span class=\"token punctuation\">.</span><span class=\"token function\">getTileAtWorldXY</span><span class=\"token punctuation\">(</span>\r\n                        posX<span class=\"token punctuation\">,</span>\r\n                        gameObject<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">0.5</span>\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> layer<span class=\"token punctuation\">.</span><span class=\"token function\">getTileAtWorldXY</span><span class=\"token punctuation\">(</span>\r\n                        posX<span class=\"token punctuation\">,</span>\r\n                        gameObject<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span>\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token comment\">// check for collisions</span>\r\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n                        <span class=\"token operator\">!</span>groundTile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>collideUp\r\n                        <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>direction <span class=\"token operator\">===</span> <span class=\"token constant\">FACING_RIGHT</span> <span class=\"token operator\">&amp;&amp;</span> tile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>collideLeft<span class=\"token punctuation\">)</span>\r\n                        <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>direction <span class=\"token operator\">===</span> <span class=\"token constant\">FACING_LEFT</span> <span class=\"token operator\">&amp;&amp;</span> tile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>collideRight<span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token keyword\">let</span> newPosX <span class=\"token operator\">=</span>\r\n                            lastGroundTile<span class=\"token operator\">?.</span>pixelX\r\n                            <span class=\"token operator\">||</span> tile<span class=\"token operator\">?.</span>pixelX\r\n                            <span class=\"token operator\">||</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span>posX <span class=\"token operator\">/</span> <span class=\"token constant\">TILE_WIDTH</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token constant\">TILE_WIDTH</span><span class=\"token punctuation\">;</span>\r\n                        newPosX <span class=\"token operator\">+=</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">TILE_WIDTH</span> <span class=\"token operator\">*</span> multiplier<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                        <span class=\"token comment\">// create a custom collider object</span>\r\n                        <span class=\"token keyword\">const</span> platformLimitCollider <span class=\"token operator\">=</span> <span class=\"token function\">createInteractiveGameObject</span><span class=\"token punctuation\">(</span>\r\n                            gameObject<span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">,</span>\r\n                            newPosX<span class=\"token punctuation\">,</span>\r\n                            gameObject<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token constant\">TILE_HEIGHT</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token constant\">TILE_WIDTH</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token constant\">TILE_HEIGHT</span><span class=\"token punctuation\">,</span>\r\n                            <span class=\"token string\">'something'</span>\r\n                        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                        <span class=\"token comment\">// create a collision between the gameobject and the custom collider</span>\r\n                        scene<span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>gameObject<span class=\"token punctuation\">,</span> platformLimitCollider<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                            gameObject<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityX</span><span class=\"token punctuation\">(</span>\r\n                                <span class=\"token operator\">-</span>gameObject<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x\r\n                            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                            gameObject<span class=\"token punctuation\">.</span><span class=\"token function\">setFlipX</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>gameObject<span class=\"token punctuation\">.</span>flipX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>platformLimitCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                        <span class=\"token comment\">// return true so the 'some' doesn't run anymore</span>\r\n                        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n\r\n                    lastGroundTile <span class=\"token operator\">=</span> groundTile<span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And with that code, we have the result below.</p>\n<p><img src=\"/c44e9c39ebda2dbd1987240257d76317/static-ai-calculation.gif\" alt=\"Static AI calculation\"></p>\n<p>My main goal is to create all the rules of the game based on elements and interactions so that afterward I can simply create a stage on Tiled and everything works without having to mess around with it, creating colliders and other things manually, just like how Breath of The Wild was made. I much rather that the game calculate it all for me, so I can focus on creating levels. In the end, I’ll have something like a Mario Maker 😃.</p>\n<p>And that was all for today, thanks for reading and watching the video, and don’t forget to leave your comment about what you are thinking about this series of posts/videos. Until next week!</p>","fields":{"slug":"/2020/2020-15-12-creating-a-smarter-and-more-performing-ai-on-phaser-js-skate-platformer-game-devlog-15.en/","path":"/blog/games/creating-a-smarter-and-more-performing-ai-on-phaser-js-skate-platformer-game-devlog-15/","locale":"en"},"readingTime":{"minutes":4.495},"frontmatter":{"date":"2020-12-15T00:00:00.000Z","title":"Creating a smarter and more performing AI on Phaser JS - Game Devlog #15","categories":["games"]}}},{"node":{"excerpt":"Hey, y’all. This week I bring another tiny devlog due to…","html":"<p>Hey, y’all. This week I bring another tiny devlog due to being way too hooked in Hyrule Warriors… yeah yeah I know, but I finally beat the game on difficulty <code class=\"language-text\">Very Hard</code> so now I’m free. Today I’m going to show you how to create a rainy weather based on variables set on Tiled.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/z6b3F9SwxN0?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>This is really easy to do, the only part that takes some time is tweaking the particle settings until you find something that you like, you can use <a href=\"https://www.particlebarn.com/\" target=\"_blank\" rel=\"noreferrer\">particlebarn.com</a> to help you with that. After finding the configuration that you like, just port it into the game, in my case I’m using the configuration below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rain <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">particles</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rain_drop'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rain<span class=\"token punctuation\">.</span><span class=\"token function\">createEmitter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">min</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">max</span><span class=\"token operator\">:</span> mapWidth <span class=\"token operator\">+</span> <span class=\"token number\">50</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">lifespan</span><span class=\"token operator\">:</span> <span class=\"token number\">1200</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">speedY</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">min</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">max</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">gravityY</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">gravityX</span><span class=\"token operator\">:</span> PhaserMath<span class=\"token punctuation\">.</span><span class=\"token function\">Between</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">scale</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">start</span><span class=\"token operator\">:</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">end</span><span class=\"token operator\">:</span> <span class=\"token number\">0.8</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">quantity</span><span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">blendMode</span><span class=\"token operator\">:</span> <span class=\"token string\">'ADD'</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rain<span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token constant\">WEATHER_DEPTH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/d5995b4f2529cb05217c237b43bad353/rainy-weather.gif\" alt=\"Rainy weather\" title=\"The gif compression is not living up to the real effect\"></p>\n<p>Then I wrap this code into an <code class=\"language-text\">if</code> statement and run it whenever I have the property <code class=\"language-text\">weather</code> set to <code class=\"language-text\">rainy</code> on Tiled. And that was it for today, short but awesome I hope.</p>\n<p>Until next week!</p>","fields":{"slug":"/2020/2020-09-12-creating-custom-weather-on-phaser-js-skate-platformer-game-devlog-14.en/","path":"/blog/games/creating-custom-weather-on-phaser-js-skate-platformer-game-devlog-14/","locale":"en"},"readingTime":{"minutes":1.025},"frontmatter":{"date":"2020-12-09T00:00:00.000Z","title":"Creating custom weather on Phaser JS - Skate Platformer Game Devlog #14","categories":["games"]}}},{"node":{"excerpt":"Hey guys, in today’s game devlog I’ll add a loading screen…","html":"<p>Hey guys, in today’s game devlog I’ll add a loading screen showing the assets being loaded and also add the option to use translations in the game’s texts.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/IlOlv-9hKZc?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>To create the loading screen, I followed the <a href=\"https://gamedevacademy.org/creating-a-preloading-screen-in-phaser-3/\" target=\"_blank\" rel=\"noreferrer\">tutorial made by the Zenva folks</a>, which basically comes down to using 3 events that are dispatched by Phaser during the load process of assets in the <code class=\"language-text\">preload</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'progress'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fileprogress'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'complete'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'complete'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And the end result will look something like the following code block. Please follow up <a href=\"https://gamedevacademy.org/creating-a-preloading-screen-in-phaser-3/\" target=\"_blank\" rel=\"noreferrer\">Zenva’s blog post</a> for a more detailed tutorial.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> progressBox <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">graphics</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> progressBar <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">graphics</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nprogressBox<span class=\"token punctuation\">.</span><span class=\"token function\">fillStyle</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x222222</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nprogressBox<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">240</span><span class=\"token punctuation\">,</span> <span class=\"token number\">270</span><span class=\"token punctuation\">,</span> <span class=\"token number\">320</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'progress'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    progressBar<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    progressBar<span class=\"token punctuation\">.</span><span class=\"token function\">fillStyle</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xffffff</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    progressBar<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">280</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span> <span class=\"token operator\">*</span> value<span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For the translation, I need to initialize the <code class=\"language-text\">i18next</code> plugin with the languages that I want my game to support. This needs to be initialized in your game entry point, probably <code class=\"language-text\">index.js</code> or <code class=\"language-text\">main.js</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> i18next <span class=\"token keyword\">from</span> <span class=\"token string\">'i18next'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> LanguageDetector <span class=\"token keyword\">from</span> <span class=\"token string\">'i18next-browser-languagedetector'</span><span class=\"token punctuation\">;</span>\r\n\r\ni18next<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>LanguageDetector<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">resources</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">en</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">translation</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token string-property property\">\"loading_ellipsis\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Loading...\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token string-property property\">\"loading_asset_colon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Loading asset:\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token string-property property\">\"select_your_stage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Select Your Stage\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string-property property\">'pt-BR'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">translation</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token string-property property\">\"loading_ellipsis\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Carregando...\"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token string-property property\">\"loading_asset_colon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Carregando arquivo: \"</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token string-property property\">\"select_your_stage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Selecione sua fase\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After that, you can use <code class=\"language-text\">i18next.t('translation_key')</code> anywhere in your game to get that key translation for the current language. You can also change languages manually by calling <code class=\"language-text\">i18next.changeLanguage('language_key')</code>.</p>\n<p>That’s it for today, I’m still playing the new Hyrule Warriors but at least I managed to make some progress in the game and the devlog. See you next week!</p>","fields":{"slug":"/2020/2020-29-11-creating-a-loading-screen-and-adding-translation-on-phaser-js-skate-platformer-game-devlog-13.en/","path":"/blog/games/creating-a-loading-screen-and-adding-translation-on-phaser-js-skate-platformer-game-devlog-13/","locale":"en"},"readingTime":{"minutes":1.395},"frontmatter":{"date":"2020-11-29T00:00:00.000Z","title":"Creating a loading screen and adding translation on Phaser JS - Skate Platformer Game Devlog #13","categories":["games"]}}},{"node":{"excerpt":"Hey guys! In today’s video, I will show you how I created a…","html":"<p>Hey guys! In today’s video, I will show you how I created a checkpoint for the hero in my game in a very easy way.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/KKsg96FD2qI?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>So this is done pretty much in two easy steps, first I set overlap between the hero and my checkpoint object, and inside the callback function, I save the current hero position to be used later on.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> checkpoint <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Checkpoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> overlap <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span>\r\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n  checkpoint<span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">objectA<span class=\"token punctuation\">,</span> objectB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    checkpoint<span class=\"token punctuation\">.</span><span class=\"token function\">setAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'save'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    overlap<span class=\"token operator\">?.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// save it to the browser local storage</span>\r\n    localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero_checkpoint'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> hero<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> hero<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And at the end of my <code class=\"language-text\">create</code> function from my scene, I set the hero to the new saved position from before.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> heroCheckpoint <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero_checkpoint'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>heroCheckpoint<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> position <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>heroCheckpoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token comment\">// always remove the key just in case</span>\r\nlocalStorage<span class=\"token punctuation\">.</span><span class=\"token function\">removeItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hero_checkpoint'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And that’s it. Super simple, right? Sorry for the short devlog this week, but I had a tiny hand injure as mentioned in the video, which made it impossible for me to code for a few days.</p>\n<p>This week the new Hyrule Warriors is out, so I can’t promise I will be making any new devlogs too 😬 but I will try!</p>","fields":{"slug":"/2020/2020-19-11-saving-player-progress-with-checkpoints-with-phaser-js-skate-platformer-game-devlog-12.en/","path":"/blog/games/saving-player-progress-with-checkpoints-with-phaser-js-skate-platformer-game-devlog-12/","locale":"en"},"readingTime":{"minutes":1.04},"frontmatter":{"date":"2020-11-19T00:00:00.000Z","title":"Saving player progress with checkpoints with Phaser JS - Skate Platformer Game Devlog #12","categories":["games"]}}},{"node":{"excerpt":"Hey guys, in today’s devlog I’m going to make something…","html":"<p>Hey guys, in today’s devlog I’m going to make something really cool - dynamically upload external Tiled map files created by the user.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/RiC4T97s8eI?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>First, let’s all get on the same page on how Phaser works. Phaser runs in an HTML canvas element that is attached to whichever HTML element ID you put on Phaser’s <code class=\"language-text\">parent</code> settings option, so if I want a browser-related action like uploading a file using the HTML file-input element, I have to manually create that element and trigger it when needed.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fileInput <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HtmlFileInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">spriteKey</span><span class=\"token operator\">:</span> <span class=\"token string\">'file-input'</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">callBackFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// trigget the HTML file input click</span>\r\n    fileInput<span class=\"token punctuation\">.</span>fileInput<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>But what the hell is this <code class=\"language-text\">HtmlFileInput</code>? It is basically a class that in its constructor I dynamically create an HTML input element and attach it to the page’s DOM. The styling part is there to make sure the element is not visible to the user.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">HtmlFileInput</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\r\n        scene<span class=\"token punctuation\">,</span>\r\n        spriteKey<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// Phaser's parent HTML element</span>\r\n        <span class=\"token keyword\">const</span> mainElement <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">.</span>sys<span class=\"token punctuation\">.</span>game<span class=\"token punctuation\">.</span>canvas<span class=\"token punctuation\">.</span>parentElement<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// create html input type</span>\r\n        <span class=\"token keyword\">const</span> fileInput <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        fileInput<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'file'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        fileInput<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'accept'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        fileInput<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> spriteKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// TODO this stylings</span>\r\n        fileInput<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">;</span>\r\n        fileInput<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>top <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n        fileInput<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'block'</span><span class=\"token punctuation\">;</span>\r\n        fileInput<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>marginTop <span class=\"token operator\">=</span> <span class=\"token string\">'-400px'</span><span class=\"token punctuation\">;</span>\r\n\r\n        mainElement<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>fileInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setFileInput</span><span class=\"token punctuation\">(</span>fileInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setScene</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function-variable function\">setFileInput</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fileInput</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fileInput <span class=\"token operator\">=</span> fileInput<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function-variable function\">setScene</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">scene</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> HtmlFileInput<span class=\"token punctuation\">;</span></code></pre></div>\n<p>I know this feels like a hack, but this is the proper way of doing it on Phaser 3, just don forget to remove the element from the DOM when you’re done with it by calling <code class=\"language-text\">fileInput.fileInput.remove()</code>.</p>\n<p>Now I need a way to parse the <code class=\"language-text\">.json</code> file uploaded by the user and make it available on Phaser’s “cached file manager”, and the best way to do that is by using Phaser’s <code class=\"language-text\">preload</code> function. First, let’s take a look at how the actual callback function works.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">callBackFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    fileInput<span class=\"token punctuation\">.</span>textfield<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onchange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        reader<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'load'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>reader<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token string\">'CustomStageLoadingScene'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">stageKey</span><span class=\"token operator\">:</span> <span class=\"token string\">'custom_stage'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">stageData</span><span class=\"token operator\">:</span> result<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">nextScene</span><span class=\"token operator\">:</span> <span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        reader<span class=\"token punctuation\">.</span><span class=\"token function\">readAsText</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n    fileInput<span class=\"token punctuation\">.</span>textfield<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you can see, I am using <code class=\"language-text\">FileReader</code> to load the file and passing it as a parameter to a new scene called <code class=\"language-text\">CustomStageLoadingScene</code> that only exists as an aux scene to dynamically load the phase sent by the user.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomStageLoadingScene</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Scene</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">'CustomStageLoadingScene'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// data sent as a second parameter when calling the scene</span>\r\n        <span class=\"token comment\">// will be available here</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> stageKey<span class=\"token punctuation\">,</span> stageData<span class=\"token punctuation\">,</span> nextScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>stageKey <span class=\"token operator\">=</span> stageKey<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>stageData <span class=\"token operator\">=</span> stageData<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nextScene <span class=\"token operator\">=</span> nextScene<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> stageKey<span class=\"token punctuation\">,</span> stageData <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// make the JSON data available to Phaser's internal cache</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">.</span><span class=\"token function\">tilemapTiledJSON</span><span class=\"token punctuation\">(</span>stageKey<span class=\"token punctuation\">,</span> stageData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> stageKey<span class=\"token punctuation\">,</span> nextScene <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// start the next scene</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span>nextScene<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> stageKey<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">stageName</span><span class=\"token operator\">:</span> <span class=\"token string\">'custom'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now that I have the data set with <code class=\"language-text\">this.load.tilemapTiledJSON()</code>, I can create the new stage with <code class=\"language-text\">scene.make.tilemap({ key: stageKey })</code>. Pretty neat, right?</p>\n<p>And that’s all for today, please don’t forget to like and subscribe to my channel, and if these devlogs are of any use to you, let me know in the comments below. Thanks and until next time.</p>","fields":{"slug":"/2020/2020-11-11-loading-user-created-tiled-stages-on-phaser-js-skate-platformer-game-devlog-11.en/","path":"/blog/games/loading-user-created-tiled-stages-on-phaser-js-skate-platformer-game-devlog-11/","locale":"en"},"readingTime":{"minutes":2.76},"frontmatter":{"date":"2020-11-11T00:00:00.000Z","title":"Loading user-created Tiled stages on Phaser JS - Skate Platformer Game Devlog #11","categories":["games"]}}},{"node":{"excerpt":"Hey guys, in today’s game devlog I’ll show you how I did to…","html":"<p>Hey guys, in today’s game devlog I’ll show you how I did to create the HUD with the hero’s status.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/JVeRYsaXxpg?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>The first thing I did was to cut the HUD design from Ítalo into small reusable parts so I could increase/decrease the meter bars at will. My final atlas PNG looks like this:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 330px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 142.578125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgT/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAF+ubkVWhYLbpao0pCRH//EABwQAAEEAwEAAAAAAAAAAAAAAAEAAgMSESIxBP/aAAgBAQABBQJ5qBKwjq9MbnnSkeKB1DaPCkCHWDX/xAAZEQADAAMAAAAAAAAAAAAAAAAAASESMUH/2gAIAQMBAT8BSXR7HaZH/8QAGxEAAQQDAAAAAAAAAAAAAAAAAAECAxEQE0H/2gAIAQIBAT8BvCR100tP/8QAIRAAAQMBCQAAAAAAAAAAAAAAAAECETEQEiAhMkFhcYH/2gAIAQEABj8Cly+mqxsZolS9DooJBwbdYKn/xAAcEAADAQADAQEAAAAAAAAAAAAAAREhMUFRYXH/2gAIAQEAAT8hpQblcCY1+hNJU6hiq6sGpwPsiXWl05Seh5U3+Bbptb2LVXpjH//aAAwDAQACAAMAAAAQHCNP/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERMaH/2gAIAQMBAT8QuKRkiAb3eH//xAAYEQEBAQEBAAAAAAAAAAAAAAABABExUf/aAAgBAgEBPxDLyHYA5PW//8QAHBABAAMAAwEBAAAAAAAAAAAAAQARITFBUXGB/9oACAEBAAE/EAPCm7H4grm+w5DIk4RlyWRrZ3fnAxWg0ZgNWdQa0R9NjaknC8TAQtlGvyBKKpVxyIWpoFe87KaasF+RmlGVk//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Hero HUD\"\n        title=\"Hero HUD\"\n        src=\"/static/e238085b17b34974e3945879aea90722/4f5c6/hero_hud.jpg\"\n        srcset=\"/static/e238085b17b34974e3945879aea90722/db830/hero_hud.jpg 256w,\n/static/e238085b17b34974e3945879aea90722/4f5c6/hero_hud.jpg 330w\"\n        sizes=\"(max-width: 330px) 100vw, 330px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Hero HUD</figcaption>\n  </figure></p>\n<p>After having all the HUD parts separated, I created a <code class=\"language-text\">GameGroup</code> with all the images, and whenever I need to increase or decrease the life of the hero I call the functions <code class=\"language-text\">increasePlayerLife</code> and <code class=\"language-text\">decreasePlayerLife</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PlayerHud</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GameGroup</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">scene</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> children <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// create all the game object images</span>\r\n        <span class=\"token punctuation\">[</span>\r\n            <span class=\"token string\">'hud_meter_border'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'hud_meter_point_border'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'player_face_hud'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'player_life_hud'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'skate_hud'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'skate_life_hud'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'collectable_times'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'coin'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">asset</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n              <span class=\"token punctuation\">[</span><span class=\"token string\">'hud_meter_border'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hud_meter_point_border'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>asset<span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token punctuation\">[</span><span class=\"token string\">'skate'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'player'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">hudType</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">const</span> assetName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>hudType<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>asset<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Image</span><span class=\"token punctuation\">(</span>\r\n                        scene<span class=\"token punctuation\">,</span>\r\n                        x<span class=\"token punctuation\">,</span>\r\n                        y<span class=\"token punctuation\">,</span>\r\n                        asset\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                    child<span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    child<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>assetName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    child<span class=\"token punctuation\">.</span><span class=\"token function\">setScrollFactor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    children<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n\r\n            <span class=\"token keyword\">const</span> child <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Image</span><span class=\"token punctuation\">(</span>\r\n                scene<span class=\"token punctuation\">,</span>\r\n                x<span class=\"token punctuation\">,</span>\r\n                y<span class=\"token punctuation\">,</span>\r\n                asset\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>asset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            child<span class=\"token punctuation\">.</span><span class=\"token function\">setScrollFactor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            children<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">,</span> children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// create a dummy game object to store the data manager</span>\r\n        <span class=\"token keyword\">const</span> dataGameobject <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Rectangle</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Data<span class=\"token punctuation\">.</span>DataManager</span><span class=\"token punctuation\">(</span>dataGameobject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// set data manager listeners</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PLAYER_LIFE_DATA</span><span class=\"token punctuation\">,</span> initialPlayerLife<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SKATE_LIFE_DATA</span><span class=\"token punctuation\">,</span> initialSkateLife<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token constant\">COLLECTED_NUTS_DATA</span><span class=\"token punctuation\">,</span> initialCollectedNuts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span>\r\n          <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">changedata-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">SKATE_LIFE_DATA</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onSkateLifeChanged\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span>\r\n          <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">changedata-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PLAYER_LIFE_DATA</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onPlayerLifeChanged\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span>\r\n          <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">changedata-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">COLLECTED_NUTS_DATA</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onCollectedNutsChanged\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// After everythibg is set</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHudPositions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function-variable function\">setHudPositions</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// TODO</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function-variable function\">increasePlayerLife</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// TODO</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function-variable function\">decreasePlayerLife</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// TODO</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As I didn’t want to make the <code class=\"language-text\">construct</code> function too big, I created the <code class=\"language-text\">setHudPositions</code> function that sets all the positions of the HUD images.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">setHudPositions</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> paddingX <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> paddingY <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> skateLife <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SKATE_LIFE_DATA</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> playerLife <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PLAYER_LIFE_DATA</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getChildren</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> child<span class=\"token punctuation\">;</span>\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>paddingX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>paddingY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'player_face_hud'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// TODO</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'player_hud_meter_border'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setScale</span><span class=\"token punctuation\">(</span>playerLife <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'player_hud_meter_point_border'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> playerLife <span class=\"token operator\">+</span> <span class=\"token number\">31</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'player_life_hud'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setScale</span><span class=\"token punctuation\">(</span>playerLife<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'skate_hud'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'skate_hud_meter_border'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">34</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setScale</span><span class=\"token punctuation\">(</span>skateLife <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'skate_hud_meter_point_border'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> skateLife <span class=\"token operator\">+</span> <span class=\"token number\">31</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'skate_life_hud'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setScale</span><span class=\"token punctuation\">(</span>skateLife<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'coin'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">48</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'nut_text'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'collectable_times'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> <span class=\"token number\">52</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                child<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> <span class=\"token number\">17</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And last but not least the functions <code class=\"language-text\">increasePlayerLife</code> and <code class=\"language-text\">decreasePlayerLife</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">decreasePlayerLife</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> playerLife <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PLAYER_LIFE_DATA</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PLAYER_LIFE_DATA</span><span class=\"token punctuation\">,</span> playerLife <span class=\"token operator\">-</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function-variable function\">increasePlayerLife</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> playerLife <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PLAYER_LIFE_DATA</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PLAYER_LIFE_DATA</span><span class=\"token punctuation\">,</span> playerLife <span class=\"token operator\">+</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now I can simply add <code class=\"language-text\">gameHud.decreasePlayerLife(5)</code> in the collision function between the hero and the enemies and that’s it 😄</p>\n<p>And that concludes this week’s game devlog, don’t forget to leave your comment both here and in the video about what you think of these posts and videos.</p>","fields":{"slug":"/2020/2020-05-11-creating-hero-hud-on-phaser-js-skate-platformer-game-devlog-10.en/","path":"/blog/games/creating-hero-hud-on-phaser-js-skate-platformer-game-devlog-10/","locale":"en"},"readingTime":{"minutes":2.8},"frontmatter":{"date":"2020-11-05T00:00:00.000Z","title":"Creating hero HUD on Phaser JS - Skate Platformer Game Devlog #10","categories":["games"]}}},{"node":{"excerpt":"Hey guys! For today’s game devlog I’m going to show more…","html":"<p>Hey guys! For today’s game devlog I’m going to show more details of the enemies AI that I implemented.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/9vocKXNKNjk?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>I decided to create some mixin functions for the artificial intelligence logic, which means I need to call the function binding it to the class that it’s calling it, and for that, I’m using the <a href=\"https://github.com/tc39/proposal-bind-operator\" target=\"_blank\" rel=\"noreferrer\">ES7 bind operator</a> so I can call the function like <code class=\"language-text\">this::someExternalFunction()</code>. Another way to do that would be by running <code class=\"language-text\">Object.assign(this, { someExternalFunction })</code> inside the constructor, and then call the function as if it was a class method, like <code class=\"language-text\">this.someExternalFunction()</code>, then you don’t need to bind it.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">time<span class=\"token punctuation\">,</span> delta</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token function\">platformWalkingBehavior</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>For the logic inside <code class=\"language-text\">platformWalkingBehavior</code>, I did it in the simplest way possible, but I still need to improve it for efficiency when many enemies are on the screen. First I check if the enemy has a collidable ground tile in front of it, if it does, it means it can continue walking. Then I also check if there’s any collidable tile right in front of the enemy, if it does, it means the enemy must turn and walk in the other direction. Check the code below:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">platformWalkingBehavior</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// checks if the next ground tile is collidable</span>\r\n    <span class=\"token keyword\">const</span> nextGroundTile <span class=\"token operator\">=</span> <span class=\"token function\">isNextGroundTileCollidable</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchingDownObject<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>tilemapLayer<span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">'right'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'left'</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// checks if the next tile is collidable</span>\r\n    <span class=\"token keyword\">const</span> nextTile <span class=\"token operator\">=</span> <span class=\"token function\">isNextTileCollidable</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchingDownObject<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>tilemapLayer<span class=\"token punctuation\">,</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">'right'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'left'</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>nextGroundTile <span class=\"token operator\">||</span> nextTile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityX</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token operator\">-</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNextGroundTileCollidable</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token parameter\">gameObject<span class=\"token punctuation\">,</span>\r\n    dynamicLayer<span class=\"token punctuation\">,</span>\r\n    direction <span class=\"token operator\">=</span> <span class=\"token constant\">FACING_RIGHT</span></span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">.</span><span class=\"token function\">getBounds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> posX <span class=\"token operator\">=</span> direction <span class=\"token operator\">===</span> <span class=\"token constant\">FACING_RIGHT</span> <span class=\"token operator\">?</span> x <span class=\"token operator\">+</span> width <span class=\"token operator\">:</span> x <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">getTileAtWorldXY</span><span class=\"token punctuation\">(</span>posX<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">return</span> tile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>collideUp<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNextTileCollidable</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token parameter\">gameObject<span class=\"token punctuation\">,</span>\r\n    dynamicLayer<span class=\"token punctuation\">,</span>\r\n    direction <span class=\"token operator\">=</span> <span class=\"token constant\">FACING_RIGHT</span></span>\r\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">.</span><span class=\"token function\">getBounds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> posX <span class=\"token operator\">=</span> direction <span class=\"token operator\">===</span> <span class=\"token constant\">FACING_RIGHT</span> <span class=\"token operator\">?</span> x <span class=\"token operator\">+</span> width <span class=\"token operator\">:</span> x <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">getTileAtWorldXY</span><span class=\"token punctuation\">(</span>posX<span class=\"token punctuation\">,</span> y <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>direction <span class=\"token operator\">===</span> <span class=\"token constant\">FACING_RIGHT</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> tile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>collideLeft<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> tile<span class=\"token operator\">?.</span>properties<span class=\"token operator\">?.</span>collideRight<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And this is what it looks like in the game:</p>\n<p><img src=\"/537f29d5bf323126defd6f9011d39ab5/enemy-walking-on-platform.gif\" alt=\"Enemy walking on the platform\"></p>\n<p>That’s all for today, don’t forget to like my video and subscribe to my channel.</p>","fields":{"slug":"/2020/2020-30-10-creating-enemies-artificial-intelligence-on-phaser-js-skate-platformer-game-devlog-9.en/","path":"/blog/games/creating-enemies-artificial-intelligence-on-phaser-js-skate-platformer-game-devlog-9/","locale":"en"},"readingTime":{"minutes":1.975},"frontmatter":{"date":"2020-10-30T00:00:00.000Z","title":"Creating enemies artificial intelligence on Phaser JS - Skate Platformer Game Devlog #09","categories":["games"]}}},{"node":{"excerpt":"Hey guys, I’m back with another game devlog, it took me a…","html":"<p>Hey guys, I’m back with another game devlog, it took me a while to make this one because there were a couple of things that I didn’t know how to do (still don’t actually). Watch it below.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/I6btT6AHv78?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>Now let’s dive into the code, remember my <code class=\"language-text\">dataLayer</code> loop? This is where we’re going to add our new objects.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// in the scene create function</span>\r\n<span class=\"token keyword\">const</span> dataLayer <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getObjectLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\ndataLayer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> width <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'coin'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// TODO add coin logic here</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'box'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'long_box'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// TODO add box logic here</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'enemy2'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// TODO add enemy logic here</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The first new thing is the collectible coins, which is really straightforward, all I needed to do is instantiate a new GameObject and destroy it when colliding with the hero.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'coin'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> coin <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Coin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span> coin<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        coin<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now for the box, the way I wanted it to work was by having the box completely still unless the hero starts pushing it. Just by enabling Arcade Physics on default settings, the hero will exert a force in the box, and the box in the hero, and this is what this looks like:</p>\n<p><img src=\"/94a2464e81d64e9716fa39fd0d9a6470/bouncing-physics.gif\" alt=\"Bouncing physics\" title=\"poin poin poin\"></p>\n<p>I needed the box to not exert any force into the hero, so to accomplish that I’m using <code class=\"language-text\">this.body.setAllowGravity(false)</code> and <code class=\"language-text\">this.body.setImmovable(true)</code>, as you can see below:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> scene<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> asset<span class=\"token punctuation\">,</span> frame <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> asset<span class=\"token punctuation\">,</span> frame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// set physics</span>\r\n    scene<span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setImmovable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAccelerationY</span><span class=\"token punctuation\">(</span>\r\n        scene<span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>world<span class=\"token punctuation\">.</span>gravity<span class=\"token punctuation\">.</span>y\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">time<span class=\"token punctuation\">,</span> delta</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> gravityY <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>world<span class=\"token punctuation\">.</span>gravity<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAccelerationY</span><span class=\"token punctuation\">(</span>gravityY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">.</span>y <span class=\"token operator\">!==</span> gravityY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If you think that hack in the <code class=\"language-text\">update</code> function was the worst part, boy you’re mistaken. Let me present you what I call “the collision shenanigans”.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'box'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'long_box'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> box<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'box'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        box <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Box</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n            x<span class=\"token punctuation\">,</span>\r\n            y<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        box <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LongBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n            x<span class=\"token punctuation\">,</span>\r\n            y<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// Add colliders that forces the box to stop</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>dynamicLayers<span class=\"token punctuation\">.</span>ground<span class=\"token punctuation\">,</span> box<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        box<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>dynamicLayers<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">,</span> box<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        box<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>mapGroundColliders<span class=\"token punctuation\">,</span> box<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        box<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>mapElementsColliders<span class=\"token punctuation\">,</span> box<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        box<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// Handles pushing the box</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>box<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>touching<span class=\"token punctuation\">.</span>right\r\n            <span class=\"token operator\">&amp;&amp;</span> box<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>touching<span class=\"token punctuation\">.</span>left\r\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\r\n            box<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityX</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>touching<span class=\"token punctuation\">.</span>left\r\n            <span class=\"token operator\">&amp;&amp;</span> box<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>touching<span class=\"token punctuation\">.</span>right\r\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\r\n            box<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityX</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">.</span>x\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And last but not least, the enemy, which is pretty much the same as the <code class=\"language-text\">coin</code>, but instead of destroying the enemy on collision, I made the hero blink for a couple of seconds.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'enemy2'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> enemy2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Enemy2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n       <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// add hero blinking effect</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">overlap</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">,</span>\r\n        enemy2<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">objectA<span class=\"token punctuation\">,</span> objectB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tweens<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">targets</span><span class=\"token operator\">:</span> player<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">alpha</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">ease</span><span class=\"token operator\">:</span> <span class=\"token string\">'Cubic.easeOut'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">120</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">repeat</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">yoyo</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>That’s all for today! Stay tuned for next week when I’m going to show you how to build the enemy movement AI. Don’t forget to like my video and subscribe to my channel 😊.</p>","fields":{"slug":"/2020/2020-22-10-creating-enemies-and-collectable-items-on-phaser-js-skate-platformer-game-devlog-8.en/","path":"/blog/games/creating-enemies-and-collectable-items-on-phaser-js-skate-platformer-game-devlog-8/","locale":"en"},"readingTime":{"minutes":2.78},"frontmatter":{"date":"2020-10-22T00:00:00.000Z","title":"Creating enemies and collectable items on Phaser JS - Skate Platformer Game Devlog #08","categories":["games"]}}},{"node":{"excerpt":"Loading external tileset files Tiled is a powerful open…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQY0wHoARf+ADOI3DOI3DKH3CiC3CeB2yqC2TKH3ESHzFGHv3hyh3R2j12MwMDO3dnY3cDL3EOP3DCG3DSI3DSJ3DWK3QAyiN0xiN02it1spd5xruRlqeUrkuyBcH+4X0CSa2+YbWvPbEPhzcauz+lVouYyi+Ayh9wziN0thtwmgtwAOIjXNYfXQI3XvsvY7JiG2XZomFttsFdcrkdHpFlfo1NZoURInUROk1duklJoY3mwMIveM4TVWZrcnb7iAGuQpGuQpWmPpWOMppFWYJ03QLFCQrhIRK5MTqVVXZdhaJhQV6lLSrNFQ6o/Q4xrdmyTp2eNoouiq8XEvADEo2PDomPDomPGpGO/pWm/omWtk2aMd2qFb2leTGWHcmqcg2qOe22nj2i8oGW+o2XEo2PEo2O/oGK4nWEAn4k5o4o4nIo5ooo5oIs4o4w5bFZJPzlQQztOQTtPRD5ORT1NPTpOXVFJook5oYo5oIo5oYw5oIs6pIw5ACFKViFLViBLViFLVSFHVCBLUSFcRylUTilMUylRVCdRVChQVChRVCRNVCFKVSFMVSFHVSJJUiFIVCFKVgA8M0s9NEs9NEs9MUs/WVc1gVkigU8xgFk9W1g7MEs6M0w7Mkw7Mkw8M0s9NEs9MktCUVQ7f1w+YVU+M0tQItiEJydQCgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Super Ollie vs Pebble Corp.\"\n        title=\"Super Ollie vs Pebble Corp.\"\n        src=\"/static/e75f123fcd3c27b5e43b60fe5c9b9a09/42a19/super-ollie-vs-pebble-corp-tittle-screen.png\"\n        srcset=\"/static/e75f123fcd3c27b5e43b60fe5c9b9a09/e3135/super-ollie-vs-pebble-corp-tittle-screen.png 256w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/06341/super-ollie-vs-pebble-corp-tittle-screen.png 512w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/42a19/super-ollie-vs-pebble-corp-tittle-screen.png 1024w,\n/static/e75f123fcd3c27b5e43b60fe5c9b9a09/e2f49/super-ollie-vs-pebble-corp-tittle-screen.png 1366w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Super Ollie vs Pebble Corp.</figcaption>\n  </figure></p>\n<p>In today's Game Devlog I will show you how to load external tilesets into Phaser JS, but first let's take this out of the way: Forget about \"Skate Platformer\", our game is going to be called <span\n          \n          class='highlighted-text'\n        >Super Ollie vs Pebble Corp</span>. We didn't really plan in naming the game now, but the idea simply popped into our heads and we think the name is perfect. Let me ask you this, what's the skater's worst enemy? Unarguably those small pebbles, right? What if in the future there's an evil company that wants to prohibit skateboarding everywhere, what would that company be called? Pebble Corp of course. Now with that out of the way, let's keep going with the post.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/a4oeHCm_Tig?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<h2 id=\"loading-external-tileset-files\" style=\"position:relative;\"><a href=\"#loading-external-tileset-files\" aria-label=\"loading external tileset files permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Loading external tileset files</h2>\n<p><a href=\"https://www.mapeditor.org/\" target=\"_blank\" rel=\"noreferrer\">Tiled</a> is a powerful <a href=\"https://github.com/bjorn/tiled\" target=\"_blank\" rel=\"noreferrer\">open source</a> tool to build 2D maps supported by <a href=\"https://discourse.mapeditor.org/t/which-game-engine-s-are-you-using-with-tiled/757/8\" target=\"_blank\" rel=\"noreferrer\">many different game engines</a>, including Phaser JS, which is the framework I’m using for <a href=\"/en/blog/tags/super-ollie-vs-pebble-corp\">this game</a>.</p>\n<p>There is one small problem, when loading Tiled maps on Phaser JS, the tileset needs to be embedded into the map, otherwise Phaser JS can’t load it. This is quite frustrating because whenever you make changes to your tileset, you will have to go to all your map files and re-embed the tileset, this can be very time-consuming if you have multiple maps and tilesets.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 518px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACV0lEQVQoz3XRy1LTUBgH8Ox9CDc+gT6AOo6Wneg449ChilZALr2ALRSQS9PQc07SJg0pEQqdkgOlleKQQG6YtqFNW+oiFRe8j1NW4uhv5vt2/5nvQmCMFUWWZdmyLMM0DU3XdePcsgzDMHRdPTszTUNVNcuy6jdqtZpt247jmKZJbOd2kiRcXFhhWEYQhASXTiOQZRlxUxS3tnlBzO3s8jy/J0mlUunw8LBYLH49OjpVFFVVCSG5NjjgffbkxcCAJzwbvf/Wu7C8NDUxuRQJJj9H1hdnUGIVIRqCWyiKSqVSxBcazHmHJsfCXp/fM/bhzt17nvHRBw+fvvYO5Tf59aVPDLmAEE336xYIIZETC8vv38Wia2yS+TgfGfGN+AMB//hEKBzOCxkGMggk0b/0w3t5PDw8PujxHucPspkM4rM0l43GSAhRAsANkU0C8N+whA98I1Oh4DyJUiwDDRA4oabJNy+5lYgQC+apEMfSN1P/DQBA7ONiKrErcVyZIemZ6bNZT4MabkK/nIqmqVW4GJsbCwEqyTDMnwsjhDiO64fng+z6WjqT5Z8/eux7NVQCscrqqA4CACFIM3OTsxSZgPDWvePxeC6XIyqVb7tbhdzOsWnVEKAFNlMpSvuF/MFeHmOp/9lyCWMs3cAYFwoFjHG5XFYUhahWq67r9Ez1Z02/apx3tRNbOW12Oo7TdlpO02m1Wu1Op9Ptdi/7+r3nutfX167rEhe2XbWb7Q3+RxZeinSDjrdK5brj2PV648I2rMap9t3QtWbTabf6rn5d9Xo9TVNlWf4Nd4mgdymyqM4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Embed Tileset\"\n        title=\"Embedding a tileset on Tiled\"\n        src=\"/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png\"\n        srcset=\"/static/51df513f0b0acbe195eb3327398273b4/e3135/tiled-embed-tileset.png 256w,\n/static/51df513f0b0acbe195eb3327398273b4/06341/tiled-embed-tileset.png 512w,\n/static/51df513f0b0acbe195eb3327398273b4/2f227/tiled-embed-tileset.png 518w\"\n        sizes=\"(max-width: 518px) 100vw, 518px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Embedding a tileset on Tiled</figcaption>\n  </figure></p>\n<p>To solve this problem I decided to come up with a solution to automatically embed tilemaps using Webpack, to do that I compared the JSON file from the same map before and after embedding a tileset, and it looked like this:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQoz22Ra2/aMBSG82s6RmP7GCexHUxz5VIQaimJk8CHdtIu0qYmDqH8/olLt3bdo1fWsXQeHR/ZSqe3k9k8mczCJI3H0ygdJ+NplEzGs0WYpDdxosJIBaEKo+GfBGGQxMu7O4tSCkAJACFATsX5yhyXBxGPY8QdL4hEENEhB987RvlYqWgxtxh1nIGDbNR/D0a2lz7w1S+2eAq0SfJnf/Vd3H/j91/F+ifPTFDUluRKyRvKgDJy/QZCMJ9qv9gJ3YbVId4e1GbnF53QndA7kbcyN5bnCs8VNkJHo/9evi2lNnz9HFb7ZPsitRF5c4oRuZF5Y9m2zRxGARC2L0H2RZ5vZG5EVkvdjspOFa3U7dl8lRGmjMOAYcAYCAKCAa4RBuaI5aPMG5HVPDdDvUs3h1HZSv12MjDipuCOwHXAcQlzQAwx48wP/YcfIqtFduke6U4Vu9PjX2Vn4DLGjuv2+6el++eaAIjl03nyuZvnJir3qmj/ygwYALU/AHTwjyyP8ktQGJnXF/nq01Wv1/v8ARthd/HIs8Zb115mvMzwzKiiG1Z7WXb89FuW53n8f/i+H62+xFUTl/XxrJpkY6KqiTdtsm2jyiwed78BOSS64qW11kUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Embedded vs non-embedded\"\n        title=\"Embedded vs non-embedded\"\n        src=\"/static/fce7ff4d25c0afd53f6c31a041518dd8/42a19/embedded-vs-non-embedded.png\"\n        srcset=\"/static/fce7ff4d25c0afd53f6c31a041518dd8/e3135/embedded-vs-non-embedded.png 256w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/06341/embedded-vs-non-embedded.png 512w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/42a19/embedded-vs-non-embedded.png 1024w,\n/static/fce7ff4d25c0afd53f6c31a041518dd8/b38ab/embedded-vs-non-embedded.png 1168w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Embedded vs non-embedded</figcaption>\n  </figure></p>\n<p>As you can see, instead of having the property <code class=\"language-text\">source</code> to an external file, like <code class=\"language-text\">\"source\": \"../tilesets/test_tileset.json\"</code>, it contains the whole content of that file plus a <code class=\"language-text\">firstgid</code> attribute, so all we need to do is loop through all Tiled maps, read the <code class=\"language-text\">tilesets</code> property, load each individual tileset file and put each of it’s content in a array replacement for the <code class=\"language-text\">tilesets</code> property.</p>\n<p>This is how I did it:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> CopyWebpackPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">promises</span><span class=\"token operator\">:</span> fs <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> stageFiles <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// get only the JSON files</span>\r\n<span class=\"token keyword\">const</span> stageJsons <span class=\"token operator\">=</span> stageFiles\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> copyWebpackPluginPatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\nstageJsons<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    copyWebpackPluginPatterns<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">to</span><span class=\"token operator\">:</span> <span class=\"token string\">'../assets/stages'</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token function-variable function\">transform</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fileBuffer<span class=\"token punctuation\">,</span> elPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> manifestString <span class=\"token operator\">=</span> fileBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> stageData <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>manifestString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> newTilesets <span class=\"token operator\">=</span> stageData<span class=\"token punctuation\">.</span>tilesets<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tileset</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token comment\">// firstgid is an important id reference for Tiled</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> firstgid <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> tileset<span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tileset<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token comment\">// if there's no source, it means the Tileset</span>\r\n                    <span class=\"token comment\">// is already embedded</span>\r\n                    <span class=\"token keyword\">return</span> tileset<span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token comment\">// on my setup, stages are in root/stages/</span>\r\n                <span class=\"token comment\">// and the tilesets are in root/tilesets/</span>\r\n                <span class=\"token comment\">// so we need to remove \"../tilesets/\" from the path</span>\r\n                <span class=\"token comment\">// and load it based on the root dir of the tilesets</span>\r\n                <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> tileset<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../tilesets/'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token comment\">// eslint-disable-next-line import/no-dynamic-require</span>\r\n                <span class=\"token keyword\">const</span> tilesetData <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tilesetData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not find file'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">return</span> tileset<span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n\r\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token operator\">...</span>tilesetData<span class=\"token punctuation\">,</span>\r\n                    firstgid<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            stageData<span class=\"token punctuation\">.</span>tilesets <span class=\"token operator\">=</span> newTilesets<span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">return</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>stageData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">CopyWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">patterns</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n                <span class=\"token operator\">...</span>copyWebpackPluginPatterns<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>As you can see we need the <code class=\"language-text\">copy-webpack-plugin</code> plugin to make it work, by copying all maps from the <code class=\"language-text\">assets/stages</code> directory into the <code class=\"language-text\">dist/assets/stages</code> directory, and while copying it, we set a <code class=\"language-text\">transform</code> function that will load the individual external tilesets and embed them into the Tiled maps. Add this code to your Webpack config file if you want to achieve the same result.</p>\n<h2 id=\"creating-the-title-screen\" style=\"position:relative;\"><a href=\"#creating-the-title-screen\" aria-label=\"creating the title screen permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating the title screen</h2>\n<p>This was actually quite easy and straightforward, specially because it’s pretty much the same code from previous Game Devlog.</p>\n<p>First I load the map in the <code class=\"language-text\">create</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">.</span><span class=\"token function\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'title_screen'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> tileset <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">'title_screen'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'city_tileset'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> background <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'background'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> ground <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ground'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> foreground <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">createDynamicLayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foreground'</span><span class=\"token punctuation\">,</span> tileset<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token punctuation\">[</span>background<span class=\"token punctuation\">,</span> ground<span class=\"token punctuation\">,</span> foreground<span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dynamicLayer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>\r\n            height <span class=\"token operator\">-</span> background<span class=\"token punctuation\">.</span>height\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// set this property to make the the layers move in different speeds</span>\r\n        dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setScrollFactor</span><span class=\"token punctuation\">(</span>dynamicLayer<span class=\"token punctuation\">.</span>parallaxSpeedX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// we're going to use that in the update function</span>\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now all I did was move the camera till position <code class=\"language-text\">y = 640</code>, and from there reset the position back to <code class=\"language-text\">y = 0</code>, and the loop continues.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">===</span> <span class=\"token number\">640</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>scrollX <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parallaxCounter<span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s all for today, I hope you liked it, if you do please leave it a comment and consider subscribing to my YouTube channel.</p>","fields":{"slug":"/2020/2020-08-10-loading-external-tileset-file-on-phaser-js-using-webpack-skate-platformer-game-devlog-7.en/","path":"/blog/games/loading-external-tileset-file-on-phaser-js-using-webpack-skate-platformer-game-devlog-7/","locale":"en"},"readingTime":{"minutes":3.905},"frontmatter":{"date":"2020-10-08T00:00:00.000Z","title":"Loading external tileset file on Phaser JS using Webpack - Skate Platformer Game Devlog #07","categories":["games"]}}},{"node":{"excerpt":"Hey guys! Today’s Game Devlog is a bit long, 15 minutes, but…","html":"<p>Hey guys! Today’s Game Devlog is a bit long, 15 minutes, but bare with me because there are a lot of interesting things going on in the game.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/dUNkwPYmzb4?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<h2 id=\"stage-selection\" style=\"position:relative;\"><a href=\"#stage-selection\" aria-label=\"stage selection permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Stage Selection</h2>\n<p>To facilitate testing new stages, I decided to add a basic stage selection for the game, so I could test multiple stages in the same build instead of having to change a single file every time. Now whenever I add a new stage file to the stages folder, that stage will automatically be included in the game bundle, thanks to some custom Webpack settings.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> CopyWebpackPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">promises</span><span class=\"token operator\">:</span> fs <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> stageFiles <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">// get only the JSON files</span>\r\n<span class=\"token keyword\">const</span> stageJsons <span class=\"token operator\">=</span> stageFiles\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">GAME_STAGES</span> <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>\r\n    stageJsons<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// eslint-disable-next-line import/no-dynamic-require</span>\r\n        <span class=\"token keyword\">const</span> stageData <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> stageName <span class=\"token operator\">=</span> <span class=\"token function\">getStageNameFromMap</span><span class=\"token punctuation\">(</span>stageData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n            stageName<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">stageKey</span><span class=\"token operator\">:</span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>DefinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token constant\">GAME_STAGES</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Then in the stage selection scene, you can access the stages via the <code class=\"language-text\">GAME_STAGES</code> constant, so I loop through the stages data and create the stage selector game object.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> posX <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">let</span> posY <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token constant\">GAME_STAGES</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stageData<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> stageKey<span class=\"token punctuation\">,</span> stageName <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> stageData<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> stageSelector <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StageSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> posX<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> posY<span class=\"token punctuation\">,</span>\r\n        stageKey<span class=\"token punctuation\">,</span>\r\n        stageName<span class=\"token punctuation\">,</span>\r\n        <span class=\"token function-variable function\">onClickCallback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GameScene'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>\r\n        posX <span class=\"token operator\">+</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\r\n        posY <span class=\"token operator\">+</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">padStart</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setDepth</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span>stageSelector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    stageSelectors<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>stageSelector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    posX <span class=\"token operator\">+=</span> <span class=\"token number\">52</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token number\">7</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        posY <span class=\"token operator\">+=</span> <span class=\"token number\">52</span><span class=\"token punctuation\">;</span>\r\n        posX <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"parallax-effect\" style=\"position:relative;\"><a href=\"#parallax-effect\" aria-label=\"parallax effect permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Parallax Effect</h2>\n<p>The game wouldn’t be complete without a nice parallax effect, and to achieve that I decided to add some custom properties to the layers on Tiled, and read them in my scene’s update function to make the layer current position X or Y move accordingly with the camera movement.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">time<span class=\"token punctuation\">,</span> delta</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> dynamicLayers <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mapData<span class=\"token punctuation\">;</span>\r\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>dynamicLayers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dynamicLayer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        dynamicLayer<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">property</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> property<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">!==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'parallaxSpeedX'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setX</span><span class=\"token punctuation\">(</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>scrollX <span class=\"token operator\">*</span> value\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'parallaxSpeedY'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                    dynamicLayer<span class=\"token punctuation\">.</span><span class=\"token function\">setY</span><span class=\"token punctuation\">(</span>\r\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameras<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">*</span> value\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Note: After writing this post, I found out about the <a href=\"https://photonstorm.github.io/phaser3-docs/Phaser.GameObjects.Components.ScrollFactor.html#setScrollFactor\" target=\"_blank\" rel=\"noreferrer\">setScrollFactor</a> function, so I can use that instead, which takes way less processing power than looping in the update function.</p>\n<h2 id=\"falling-off-platforms\" style=\"position:relative;\"><a href=\"#falling-off-platforms\" aria-label=\"falling off platforms permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Falling Off Platforms</h2>\n<p>To make this I did a bit of researching, and the way it’s done is a bit hacky, but it works for now, so I decided to just roll with it.</p>\n<p>First I check if the hero is in the ground, if there is an element the hero from below and if the down button is pressed. If so, then we disable the player bottom collision for 150 milliseconds.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Handle hero going down through element</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroOnGround</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isDownJustDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>touchingDownObject\r\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>checkCollision<span class=\"token punctuation\">.</span>down <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token number\">150</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>checkCollision<span class=\"token punctuation\">.</span>down <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This is pretty straight forward, but how can we access the <code class=\"language-text\">this.touchingDownObject</code> attribute? Well that’s the biggest hacky part of this solution. First, we need to add a collider between the hero and the map layer with a callback that will check some stuff and set the <code class=\"language-text\">this.touchingDownObject</code> attribute for the hero.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">collider</span><span class=\"token punctuation\">(</span>\r\n    dynamicLayers<span class=\"token punctuation\">.</span>ground<span class=\"token punctuation\">,</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hero<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">objectA<span class=\"token punctuation\">,</span> objectB</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>hero<span class=\"token punctuation\">,</span> element<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getHeroAndObject</span><span class=\"token punctuation\">(</span>objectA<span class=\"token punctuation\">,</span> objectB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n            hero<span class=\"token punctuation\">.</span><span class=\"token function\">isHeroOnGround</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token operator\">&amp;&amp;</span> element<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>collidesUp\r\n            <span class=\"token operator\">&amp;&amp;</span> element<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>canFallThrough\r\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            hero<span class=\"token punctuation\">.</span>touchingDownObject <span class=\"token operator\">=</span> element<span class=\"token punctuation\">;</span> <span class=\"token comment\">// TODO?</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            hero<span class=\"token punctuation\">.</span>touchingDownObject <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s it! I hope you guys enjoyed it and don’t forget to leave your comment if you liked this post.</p>","fields":{"slug":"/2020/2020-01-10-falling-off-platforms-with-arcade-physics-on-phaser-js-skate-platformer-game-devlog-6.en/","path":"/blog/games/falling-off-platforms-with-arcade-physics-on-phaser-js-skate-platformer-game-devlog-6/","locale":"en"},"readingTime":{"minutes":3.125},"frontmatter":{"date":"2020-10-01T00:00:00.000Z","title":"Falling off platforms with Arcade Physics on Phaser JS - Skate Platformer Game Devlog #06","categories":["games"]}}},{"node":{"excerpt":"Hey guys, in this week’s Game Devlog I’ll show you how I…","html":"<p>Hey guys, in this week’s Game Devlog I’ll show you how I implemented the hero’s skateboard movement, which is activated when you press the directional button twice, a great idea given by Italo!</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/irbx0e1zDVM?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>The code below takes care of the logic of the hero’s running state.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Handle hero running</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isJumping<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>runTimer <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pressedRight <span class=\"token operator\">||</span> pressedLeft<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pressedRunRight <span class=\"token operator\">=</span> pressedRight<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pressedRunLeft <span class=\"token operator\">=</span> pressedLeft<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>runTimer <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>runTimer <span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pressedRunRight <span class=\"token operator\">&amp;&amp;</span> isRightDown <span class=\"token operator\">&amp;&amp;</span> pressedRight<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">RUNNING_RIGHT_START</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>startRunDuration<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">RUNNING_RIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pressedRunLeft <span class=\"token operator\">&amp;&amp;</span> isLeftDown <span class=\"token operator\">&amp;&amp;</span> pressedLeft<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">RUNNING_LEFT_START</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">delayedCall</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>startRunDuration<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setHeroState</span><span class=\"token punctuation\">(</span><span class=\"token constant\">RUNNING_LEFT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>runTimer <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pressedRunRight <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pressedRunLeft <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>runTimer <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>runTimer <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">const</span> isRunning <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isHeroRunning</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","fields":{"slug":"/2020/2020-26-09-using-a-button-to-run-with-phaser-js-skate-platformer-game-devlog-5.en/","path":"/blog/games/using-a-button-to-run-with-phaser-js-skate-platformer-game-devlog-5/","locale":"en"},"readingTime":{"minutes":0.73},"frontmatter":{"date":"2020-09-26T00:00:00.000Z","title":"Using a button to run with Phaser JS - Skate Platformer Game Devlog #05","categories":["games"]}}},{"node":{"excerpt":"As a software developer, it’s common to move around the…","html":"<p>As a software developer, it’s common to move around the globe in search of better job opportunities or for the experience of being a digital nomad.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMCBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAABjn2kGKGBf//EABoQAQACAwEAAAAAAAAAAAAAAAIAAQMREzH/2gAIAQEAAQUCyYCY/CL10TaFTU//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgAHAQAAAAAAAAAAAAAAAAECEBESIjFxgf/aAAgBAQAGPwKK98EkdHXSMfZf/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBUaH/2gAIAQEAAT8hRoBvOVKqvsqVDsbECNE3YilW+pqqbJ//2gAMAwEAAgADAAAAEAQv/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/EHVn/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAECAQE/EMV//8QAHhABAQABBAMBAAAAAAAAAAAAAREAITFBYVFxgcH/2gAIAQEAAT8QM3VANbx6w7otLEaZoqPgbfmEs1wqU5wdmsQk77xlQBBfGf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Me nomading\"\n        title=\"Rare picture of me being digital nomad before it was cool (not really)\"\n        src=\"/static/6e3e4412ba761d5f2879cbd9e945ea9d/63217/me_nomading.jpg\"\n        srcset=\"/static/6e3e4412ba761d5f2879cbd9e945ea9d/db830/me_nomading.jpg 256w,\n/static/6e3e4412ba761d5f2879cbd9e945ea9d/8102f/me_nomading.jpg 512w,\n/static/6e3e4412ba761d5f2879cbd9e945ea9d/63217/me_nomading.jpg 1024w,\n/static/6e3e4412ba761d5f2879cbd9e945ea9d/d58d1/me_nomading.jpg 1536w,\n/static/6e3e4412ba761d5f2879cbd9e945ea9d/04bec/me_nomading.jpg 1600w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Rare picture of me being digital nomad before it was cool (not really)</figcaption>\n  </figure></p>\n<h2 id=\"motivation-to-work-abroad\" style=\"position:relative;\"><a href=\"#motivation-to-work-abroad\" aria-label=\"motivation to work abroad permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Motivation to work abroad</h2>\n<p>As a child, I was always fascinated by shows like Indiana Jones and Mighty Max that explored the wonders of the world. This sparked my sense of wanderlust and desire to discover new places and cultures.</p>\n<p>As I grew older, I realized that the world was vast and full of opportunities, and I didn’t want to be confined to just one little town in Brazil. So, I made the decision to pursue my dream of living and working abroad. In this post, I will share my journey and how an open source project played a role in landing me a job abroad.</p>\n<h2 id=\"open-source-projects-and-hackathons\" style=\"position:relative;\"><a href=\"#open-source-projects-and-hackathons\" aria-label=\"open source projects and hackathons permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Open Source projects and hackathons</h2>\n<p>In 2016, I started working on personal projects and publishing them on GitHub. Some examples include the <a href=\"https://github.com/blopa/Magento-Chatbot\" target=\"_blank\" rel=\"noreferrer\">Magento Chatbot</a> extension for Magento and the <a href=\"https://github.com/blopa/Contract-Builder/\" target=\"_blank\" rel=\"noreferrer\">Contract Builder</a>, which I built using VueJs to help a lawyer friend create new legal contracts more efficiently.</p>\n<p>I also participated in hackathons to improve my skills, practice my English, and meet other professionals in the industry. This is how I found out about <a href=\"https://blog.vanhack.com/blog/the-vanhackathon/\" target=\"_blank\" rel=\"noreferrer\">VanHackathon</a>, a hackathon organized by <a href=\"http://vanhack.com/\" target=\"_blank\" rel=\"noreferrer\">VanHack</a>. My friends and I decided to participate and created a <a href=\"https://github.com/VanHackathon/botStoreGenesis\" target=\"_blank\" rel=\"noreferrer\">chatbot integration for Shopify</a> (we even made a <a href=\"https://www.youtube.com/watch?v=4RnIj8g8vDw\" target=\"_blank\" rel=\"noreferrer\">promotional video for it</a>). As a result, we won a <a href=\"https://vanhack.com/premium\" target=\"_blank\" rel=\"noreferrer\">VanHack Premium</a> account, which provided us with various perks and access to an exclusive Slack group.</p>\n<h2 id=\"resume-builder\" style=\"position:relative;\"><a href=\"#resume-builder\" aria-label=\"resume builder permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resume Builder</h2>\n<p>Fast-forward to 2018, and I received a job offer to move to São Paulo. As I really enjoyed working for my current employer at the time, I declined the offer and decided to apply for other job openings to test my interviewing skills. However, I found it tedious to constantly tailor my resume for each job listing I applied to, so I created a tool to help me streamline the process: <a href=\"https://resume-builder.js.org/\" target=\"_blank\" rel=\"noreferrer\">Resume Builder</a>. You can check out the source code <a href=\"https://github.com/blopa/Resume-Builder\" target=\"_blank\" rel=\"noreferrer\">here</a> (don’t forget to star it).</p>\n<p><img src=\"/6fb4914a5988ac18a0d4ab9b84c5e9b0/resume_builder.gif\" alt=\"Resume Builder\"></p>\n<p>After a few iterations, I was satisfied with the results and decided to add the option to use custom templates (which is unfortunately not available yet in v2). I shared the tool on the VanHack Slack group, thinking it might be useful for others but didn’t think too much about it later.</p>\n<h2 id=\"job-offer\" style=\"position:relative;\"><a href=\"#job-offer\" aria-label=\"job offer permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Job offer</h2>\n<p>A few days later, a recruiter contacted me, praising the Resume Builder project and asking if I knew React. I told her that the tool was built with React (my first ever React app) and that I had no problem learning new things.</p>\n<p>She was impressed and scheduled interviews with some companies in the Netherlands for me.</p>\n<p>All of that because in the middle of thousands of developers trying to land a job abroad, I was able to stand out thanks to an open-source project that honestly wasn’t even using React’s best practices or anything like that, but it was useful and showed recruiters that I was good at solving problems, I had no problems in learning new things and that I cared about having a good resume.</p>\n<p>Back to the interviews, one of the companies sent me a React challenge to build a Q&#x26;A Single Page Application. Since I was already coding with React for a couple of weeks, I was able to finish the challenge without any trouble. That got me an interview with the Tech Lead in that company and after that with the CTO, things were looking good.</p>\n<p>So one day I was participating in a hackathon when I received an email with a job offer to move to Amsterdam. I wasn’t really planning on leaving my employer at that moment, I just got a raise, and I was in a nice project, but I knew an opportunity like that don’t knock on your door every day, so I said yes, and the rest is history 🇳🇱.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwACBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABQzw55Iaf/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEDEgQTIf/aAAgBAQABBQLaibI5cqidKp//xAAWEQEBAQAAAAAAAAAAAAAAAAARARD/2gAIAQMBAT8Bo5//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8BByf/xAAbEAABBAMAAAAAAAAAAAAAAAAAARAREiEikf/aAAgBAQAGPwLThVGhMEt//8QAGRAAAgMBAAAAAAAAAAAAAAAAAREAITFB/9oACAEBAAE/IUm7L12YxHpgC30uGgKs5MVYQiDNT//aAAwDAQACAAMAAAAQCy//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QWAz/xAAXEQEBAQEAAAAAAAAAAAAAAAABABEx/9oACAECAQE/EEJORt//xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAhMUFRof/aAAgBAQABPxCyHcuhFnzD2bSzJ6GWsKpo5r+osbQfcGTPacnGaxqMz//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Amsterdam canal\"\n        title=\"Amsterdam canal\"\n        src=\"/static/64cb2956c785c79783bea79d2f788549/63217/amsterdam_canal.jpg\"\n        srcset=\"/static/64cb2956c785c79783bea79d2f788549/db830/amsterdam_canal.jpg 256w,\n/static/64cb2956c785c79783bea79d2f788549/8102f/amsterdam_canal.jpg 512w,\n/static/64cb2956c785c79783bea79d2f788549/63217/amsterdam_canal.jpg 1024w,\n/static/64cb2956c785c79783bea79d2f788549/d58d1/amsterdam_canal.jpg 1536w,\n/static/64cb2956c785c79783bea79d2f788549/09658/amsterdam_canal.jpg 2048w,\n/static/64cb2956c785c79783bea79d2f788549/441eb/amsterdam_canal.jpg 6000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Amsterdam canal</figcaption>\n  </figure></p>\n<p>When I look back on how I landed this job in Amsterdam, it all comes down to a simple open-source project with a mediocre idea, but <span\n          \n          class='highlighted-text'\n        >it was something more than just having a resume</span> with my name and a list of activities and skills that are really hard to stand out when all other resumes are doing the same thing.</p>\n<p><span\n          \n          class='highlighted-text'\n        >If you really want to work abroad, you need to put yourself out there</span>, not necessarily only by making an open-source project, but by expanding your portfolio in a way that is meaningful to you. You could write Medium articles, make YouTube videos, a personal website (like this one), and so on. Don't give up. Getting a new job is a numbers game™, and it takes time, so why not use this time to also improve some of your skills?</p>\n<p>That’s all I have for you today, I hope my story inspires you to get your dream job.</p>","fields":{"slug":"/2020/2020-23-09-how-an-open-source-project-landed-me-a-job-abroad.en/","path":"/blog/coding/how-an-open-source-project-landed-me-a-job-abroad/","locale":"en"},"readingTime":{"minutes":4.21},"frontmatter":{"date":"2020-09-23T00:00:00.000Z","title":"How an open source project landed me a job abroad","categories":["coding"]}}},{"node":{"excerpt":"Hey, I’m back with another Game Devlog. In today’s devlog we…","html":"<p>Hey, I’m back with another Game Devlog. In today’s devlog we are going to see a simple way to make the hero jump higher if you hold the button longer.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/Ok55tLNjgeA?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Only allow the hero to jump if they are on the ground</span>\r\n<span class=\"token keyword\">let</span> willJump <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n    onGround\r\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n        Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">JustDown</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controlKeys<span class=\"token punctuation\">.</span>up<span class=\"token punctuation\">)</span>\r\n        <span class=\"token operator\">||</span> Input<span class=\"token punctuation\">.</span>Keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">JustDown</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controlKeys<span class=\"token punctuation\">.</span>w<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// hero is on the ground, so he is allowed to start a jump</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jumptimer <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jump'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    willJump <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jumptimer <span class=\"token operator\">!==</span> <span class=\"token number\">0</span>\r\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controlKeys<span class=\"token punctuation\">.</span>up<span class=\"token punctuation\">.</span>isDown\r\n        <span class=\"token operator\">||</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controlKeys<span class=\"token punctuation\">.</span>w<span class=\"token punctuation\">.</span>isDown\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// hero is no longer on the ground, but is still holding the jump key</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jumptimer <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jumptimer <span class=\"token operator\">></span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// hero has been holding jump for over 100 millliseconds, it's time to stop him</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jumptimer <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jumptimer <span class=\"token operator\">></span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// hero is allowed to jump higher, not yet 600 milliseconds of jumping</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setVelocityY</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jumptimer <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// reset this.jumptimer since the hero is no longer holding the jump key</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jumptimer <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This code is originally from <a href=\"https://www.html5gamedevs.com/topic/3050-how-to-make-the-player-do-small-medium-long-jumps/?do=findComment&#x26;comment=19860\" target=\"_blank\" rel=\"noreferrer\">this forum post</a>.</p>","fields":{"slug":"/2020/2020-21-09-skate-platformer-game-devlog-4.en/","path":"/blog/games/skate-platformer-game-devlog-4/","locale":"en"},"readingTime":{"minutes":0.96},"frontmatter":{"date":"2020-09-21T00:00:00.000Z","title":"Holding button to jump higher with Phaser JS - Skate Platformer Game Devlog #04","categories":["games"]}}},{"node":{"excerpt":"Hey guys, another game devlog of skate platformer, this time…","html":"<p>Hey guys, another game devlog of skate platformer, this time I added the hero’s movement animation and created a helper function to create custom collisions straight from Tiled.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/J-0qjYATwiQ?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>The most interesting part of this week’s changes is the helper function to create the collisions, as in the video you couldn’t see the full function properly since it’s quite big, I’ll make it available for you to see it below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getTilesetCustomColliders</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">scene<span class=\"token punctuation\">,</span> tilesetLayer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> customColliders <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    tilesetLayer<span class=\"token punctuation\">.</span>tilemap<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tiles</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        tiles<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tile</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> index <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> tile<span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">const</span> tilesetCustomColliders <span class=\"token operator\">=</span> tilesetLayer<span class=\"token punctuation\">.</span>tileset<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>tileData<span class=\"token punctuation\">[</span>index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token comment\">// check if we have a tileset on that position</span>\r\n            <span class=\"token comment\">// and if it has custom colliders</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> tilesetCustomColliders<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> objectgroup <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> tilesetCustomColliders<span class=\"token punctuation\">;</span>\r\n                <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> objects <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> objectgroup<span class=\"token punctuation\">;</span>\r\n                objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">objectData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> height<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> objectData<span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">const</span> properties <span class=\"token operator\">=</span> tilesetLayer<span class=\"token punctuation\">.</span>tileset<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>tileProperties<span class=\"token punctuation\">[</span>index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\r\n                        collidesLeft<span class=\"token punctuation\">,</span>\r\n                        collidesRight<span class=\"token punctuation\">,</span>\r\n                        collidesUp<span class=\"token punctuation\">,</span>\r\n                        collidesDown<span class=\"token punctuation\">,</span>\r\n                    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> properties<span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token comment\">// if the custom collider is the same size as the tile</span>\r\n                    <span class=\"token comment\">// then we enable the normal tile collider from Phaser</span>\r\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>height <span class=\"token operator\">===</span> <span class=\"token constant\">TILESET_HEIGHT</span> <span class=\"token operator\">&amp;&amp;</span> width <span class=\"token operator\">===</span> <span class=\"token constant\">TILESET_WIDTH</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                        tile<span class=\"token punctuation\">.</span><span class=\"token function\">setCollision</span><span class=\"token punctuation\">(</span>collidesLeft<span class=\"token punctuation\">,</span> collidesRight<span class=\"token punctuation\">,</span> collidesUp<span class=\"token punctuation\">,</span> collidesDown<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n\r\n                    <span class=\"token keyword\">const</span> customCollider <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameObjects<span class=\"token punctuation\">.</span>Rectangle</span><span class=\"token punctuation\">(</span>\r\n                        scene<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token constant\">TILESET_WIDTH</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token constant\">TILESET_HEIGHT</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> y<span class=\"token punctuation\">,</span>\r\n                        width<span class=\"token punctuation\">,</span>\r\n                        height\r\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOrigin</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">IS_DEV</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                        customCollider<span class=\"token punctuation\">.</span><span class=\"token function\">setFillStyle</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x741B47</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n\r\n                    scene<span class=\"token punctuation\">.</span>physics<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">.</span><span class=\"token function\">existing</span><span class=\"token punctuation\">(</span>customCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    customCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAllowGravity</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    customCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setImmovable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>properties<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                        customCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>checkCollision <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n                            <span class=\"token operator\">...</span>customCollider<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>checkCollision<span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> collidesLeft<span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> collidesRight<span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">up</span><span class=\"token operator\">:</span> collidesUp<span class=\"token punctuation\">,</span>\r\n                            <span class=\"token literal-property property\">down</span><span class=\"token operator\">:</span> collidesDown<span class=\"token punctuation\">,</span>\r\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n\r\n                    customColliders<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>customCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        scene<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> customColliders<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> tilesetLayer<span class=\"token punctuation\">.</span>tileset<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The <code class=\"language-text\">GameGroup</code> class is a class that creates a Phaser Game Group with some custom properties that I need.</p>","fields":{"slug":"/2020/2020-17-09-third-game-devlog-of-skate-platformer.en/","path":"/blog/games/third-game-devlog-of-skate-platformer/","locale":"en"},"readingTime":{"minutes":1.405},"frontmatter":{"date":"2020-09-17T00:00:00.000Z","title":"Creating precise custom colliders for Arcade Physics on Phaser JS - Skate Platformer Game Devlog #03","categories":["games"]}}},{"node":{"excerpt":"So that’s me, standing in front of the grand opening of the…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBv/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABXRzrw75CLP/EABsQAAEEAwAAAAAAAAAAAAAAAAEAAhESAxMx/9oACAEBAAEFAmZSXDsqS43Fdq//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8BjH//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFJ/8QAGhAAAgIDAAAAAAAAAAAAAAAAADEQQSJhkf/aAAgBAQAGPwLJCm9l9P/EABoQAAMAAwEAAAAAAAAAAAAAAAABESFBUYH/2gAIAQEAAT8hylxNHZoY4PAExHK0o21B/9oADAMBAAIAAwAAABAcL//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QhYO3T//EABgRAAIDAAAAAAAAAAAAAAAAAAABESEx/9oACAECAQE/EHaKlB//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMUFhUYGx/9oACAEBAAE/EBti8DgW7m07lH5UxgA9Sqb6FuIcE0R76fEU6Rxaf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"me at chase center\"\n        title=\"Me at the Chase Center\"\n        src=\"/static/45e33d9b1a1ee0f09e03c56bdac1f3e5/63217/me_at_chase_center.jpg\"\n        srcset=\"/static/45e33d9b1a1ee0f09e03c56bdac1f3e5/db830/me_at_chase_center.jpg 256w,\n/static/45e33d9b1a1ee0f09e03c56bdac1f3e5/8102f/me_at_chase_center.jpg 512w,\n/static/45e33d9b1a1ee0f09e03c56bdac1f3e5/63217/me_at_chase_center.jpg 1024w,\n/static/45e33d9b1a1ee0f09e03c56bdac1f3e5/d58d1/me_at_chase_center.jpg 1536w,\n/static/45e33d9b1a1ee0f09e03c56bdac1f3e5/09658/me_at_chase_center.jpg 2048w,\n/static/45e33d9b1a1ee0f09e03c56bdac1f3e5/e7f75/me_at_chase_center.jpg 2592w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Me at the Chase Center</figcaption>\n  </figure></p>\n<p>So that’s me, standing in front of the grand opening of the Chase Center in San Francisco. But to understand why I’m there, we need to go back in time to 17 years ago.</p>\n<h2 id=\"my-introduction-to-metallica-and-sm\" style=\"position:relative;\"><a href=\"#my-introduction-to-metallica-and-sm\" aria-label=\"my introduction to metallica and sm permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>My Introduction to Metallica and S&#x26;M</h2>\n<p>In school, I wasn’t a fan of Metallica because of its name. It just sounded too heavy metal for me, and since I was at the peak of my skateboarding “career”, I was really into punk and hardcore music at the time. That all changed when a friend told me about the band’s album with the San Francisco Symphony. I was intrigued and decided to borrow the CD. And let me tell you, I became a huge Metallica fan almost instantly.</p>\n<p>I couldn’t get enough of S&#x26;M and listened to it nonstop. And after I knew all the songs by heart, I started delving into the rest of Metallica’s discography. Around that time, the band released St. Anger, which I absolutely loved (even though I know it’s not a fan favorite). I listened to all of Metallica’s albums, but S&#x26;M remained my favorite and I still listened to it often.</p>\n<h2 id=\"attending-metallica-concerts-in-brazil\" style=\"position:relative;\"><a href=\"#attending-metallica-concerts-in-brazil\" aria-label=\"attending metallica concerts in brazil permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Attending Metallica concerts in Brazil</h2>\n<p>In 2005, I hoped that Metallica would come to Brazil and maybe even perform with a Brazilian symphony. As it turned out, the band didn’t come to Brazil until 2010 for its Death Magnetic tour. I was there and had an amazing time with friends. The show sold out in one day, so they added a second show the following day.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUCBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGDuuIzpJ//xAAaEAEAAwADAAAAAAAAAAAAAAABAAIRAwQS/9oACAEBAAEFAp5cTJRrnZA4hw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAADAQEAAAAAAAAAAAAAAAABAhEAEP/aAAgBAQAGPwLXimCyZCqy8//EABoQAQEAAwEBAAAAAAAAAAAAAAEAESFBUbH/2gAIAQEAAT8hBXAbkvh2Ve6kLLkIZi6LSYv/2gAMAwEAAgADAAAAEAc//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8Qiv/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EKj/xAAbEAEBAAMAAwAAAAAAAAAAAAABEQAhMUFRcf/aAAgBAQABPxAQhTADuE1I+2n0wgHQWeKWZNIwKaDv3WE8+qbksfZhBB88z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"me and friends metallica 2010\"\n        title=\"Metallica second day concert in 2010\"\n        src=\"/static/c841ded084fc5c49fc47fa6f2aca646d/63217/me_and_friends_metallica_2010.jpg\"\n        srcset=\"/static/c841ded084fc5c49fc47fa6f2aca646d/db830/me_and_friends_metallica_2010.jpg 256w,\n/static/c841ded084fc5c49fc47fa6f2aca646d/8102f/me_and_friends_metallica_2010.jpg 512w,\n/static/c841ded084fc5c49fc47fa6f2aca646d/63217/me_and_friends_metallica_2010.jpg 1024w,\n/static/c841ded084fc5c49fc47fa6f2aca646d/d58d1/me_and_friends_metallica_2010.jpg 1536w,\n/static/c841ded084fc5c49fc47fa6f2aca646d/09658/me_and_friends_metallica_2010.jpg 2048w,\n/static/c841ded084fc5c49fc47fa6f2aca646d/998db/me_and_friends_metallica_2010.jpg 3072w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Metallica second day concert in 2010</figcaption>\n  </figure></p>\n<p>After that, I went to a few more Metallica concerts in Brazil, including at Rock in Rio. But sometimes, I would still search online to see if there was any chance of another S&#x26;M concert.  It seemed I wasn’t alone in my desire for one – <a href=\"https://www.reddit.com/r/Metallica/comments/1xnrh3/does_anyone_else_here_want_another_smesc_concert/\" target=\"_blank\" rel=\"noreferrer\">there were</a> <a href=\"https://www.reddit.com/r/Metallica/comments/5h4dae/sm_may_be_my_favorite_album_ever/\" target=\"_blank\" rel=\"noreferrer\">plenty of others</a> who felt the same way. And even though I was living in Brazil and earning <a href=\"https://www.bloomberg.com/news/articles/2015-09-22/brazil-s-currency-tumbles-to-record-on-pessimism-over-budget\" target=\"_blank\" rel=\"noreferrer\">wages in Brazilian reais</a>, I told myself that no matter the cost, date, or location, I would attend the concert if it ever happened.</p>\n<h2 id=\"the-announcement-of-sm2\" style=\"position:relative;\"><a href=\"#the-announcement-of-sm2\" aria-label=\"the announcement of sm2 permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The announcement of S&#x26;M2</h2>\n<p>Years passed, and I wasn’t even living in Brazil anymore, but there I was, in 2018, googling if there was a possibility of Metallica do another S&#x26;M. Boy, little did I know 🧐</p>\n<p>Then last year in March I was on vacation when one day I was checking the news feed on my phone in bed and I saw it: <a href=\"https://www.billboard.com/articles/news/8503116/metallica-san-francisco-symphony-20th-anniversary-s-and-m-concert\" target=\"_blank\" rel=\"noreferrer\">Metallica was uniting with San Francisco Symphony once more for S&#x26;M2</a> for a concert in San Francisco in September 2019, and I kind of freaked out, I was like <em>“What seriously? Is this real? OMG!”</em> and I knew I had to go! The thing is, I was already going to California in June for E3, so I would have to go again one month later, but you know what? Fuck it! I was all in because this was the concert I was waiting 17 years to attend.</p>\n<p>Later that week I tried to get the tickets, but I couldn't, they sold out superfast and the only way to buy them was via scalpers, which were up to 8 times more expensive than the original ones. But then <span\n          \n          class='highlighted-text'\n        >I remembered a promise I made for myself years before</span>, that I would go to this show, no matter what, so I bought the concert tickets, the flight tickets and one week of hostel in one of the most expensive cities for tourism in the world 🤪.</p>\n<p>Of course, since the tickets sold out superfast, Metallica announced a second concert 2 days after the first one, and since I was already going to be in San Francisco, I bought a ticket for that one too.</p>\n<h2 id=\"the-journey-to-san-francisco\" style=\"position:relative;\"><a href=\"#the-journey-to-san-francisco\" aria-label=\"the journey to san francisco permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The journey to San Francisco</h2>\n<p>I ended up going to E3 in June and then returning to San Francisco in September for the S&#x26;M2 concert.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdQtCXEAP//EABgQAAMBAQAAAAAAAAAAAAAAAAABAhES/9oACAEBAAEFAtgVxiqByjejD//EABYRAQEBAAAAAAAAAAAAAAAAAAASE//aAAgBAwEBPwHND//EABYRAQEBAAAAAAAAAAAAAAAAAAASE//aAAgBAgEBPwHRb//EABoQAAEFAQAAAAAAAAAAAAAAABAAAREhMkH/2gAIAQEABj8C0rMPwf/EABoQAAMBAAMAAAAAAAAAAAAAAAABEUEQMXH/2gAIAQEAAT8hacESnfBpaYi0y68P/9oADAMBAAIAAwAAABD4L//EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8QhaQf/8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBMVH/2gAIAQIBAT8QeaH0/8QAGxABAQEBAAMBAAAAAAAAAAAAAREhAFGBocH/2gAIAQEAAT8QOVidVKV0fnq4Fsun5zLoz12tS4TILv3glK53/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"me at golden bridge\"\n        title=\"me at the Golden Gate Bridge\"\n        src=\"/static/7b6f091a3f166a877daf71b31753850c/63217/me_at_golden_bridge.jpg\"\n        srcset=\"/static/7b6f091a3f166a877daf71b31753850c/db830/me_at_golden_bridge.jpg 256w,\n/static/7b6f091a3f166a877daf71b31753850c/8102f/me_at_golden_bridge.jpg 512w,\n/static/7b6f091a3f166a877daf71b31753850c/63217/me_at_golden_bridge.jpg 1024w,\n/static/7b6f091a3f166a877daf71b31753850c/d58d1/me_at_golden_bridge.jpg 1536w,\n/static/7b6f091a3f166a877daf71b31753850c/09658/me_at_golden_bridge.jpg 2048w,\n/static/7b6f091a3f166a877daf71b31753850c/441eb/me_at_golden_bridge.jpg 6000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">me at the Golden Gate Bridge</figcaption>\n  </figure></p>\n<p>Since I was in San Francisco and had paid a lot of money for the trip, I had to visit all the famous city landmarks. First on the list was the Golden Gate Bridge, which I was lucky enough to get a clear photo of since the bridge was usually fully covered by fog and clouds that week.</p>\n<p>It’s a must-see spot and truly stunning to look at. San Francisco is a unique city in that it’s only a bus ride away from beautiful natural sites like Rodeo Beach and Farol de Point Bonita.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEC/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAG5LmA//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAECAxP/2gAIAQEAAQUCesI7Sx0f/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEREv/aAAgBAwEBPwHKIj//xAAWEQADAAAAAAAAAAAAAAAAAAAAARL/2gAIAQIBAT8BplM//8QAFxABAQEBAAAAAAAAAAAAAAAAADICIf/aAAgBAQAGPwKXMpf/xAAaEAACAgMAAAAAAAAAAAAAAAAAATGBEUGR/9oACAEBAAE/IZ1nZtNsTmHT/9oADAMBAAIAAwAAABCAH//EABcRAAMBAAAAAAAAAAAAAAAAAAABEWH/2gAIAQMBAT8QoqZH/8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBMUH/2gAIAQIBAT8QVpL7P//EABsQAQACAgMAAAAAAAAAAAAAAAEAESExQeHx/9oACAEBAAE/EHaCMXCLgb8IEaEsrpP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"lighthouse panorama\"\n        title=\"View from Farol de Point Bonita\"\n        src=\"/static/76652fe71b3d2dcfb9cc6df35ef8ae0d/63217/lighthouse_panorama.jpg\"\n        srcset=\"/static/76652fe71b3d2dcfb9cc6df35ef8ae0d/db830/lighthouse_panorama.jpg 256w,\n/static/76652fe71b3d2dcfb9cc6df35ef8ae0d/8102f/lighthouse_panorama.jpg 512w,\n/static/76652fe71b3d2dcfb9cc6df35ef8ae0d/63217/lighthouse_panorama.jpg 1024w,\n/static/76652fe71b3d2dcfb9cc6df35ef8ae0d/d58d1/lighthouse_panorama.jpg 1536w,\n/static/76652fe71b3d2dcfb9cc6df35ef8ae0d/09658/lighthouse_panorama.jpg 2048w,\n/static/76652fe71b3d2dcfb9cc6df35ef8ae0d/ddec9/lighthouse_panorama.jpg 6333w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">View from Farol de Point Bonita</figcaption>\n  </figure></p>\n<p>Also, for some reason, sea lions love to hang around Pier 39</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBAgME/8QAFAEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAB1lbVFscQh//EABkQAAMBAQEAAAAAAAAAAAAAAAABAhMDIv/aAAgBAQABBQLdC7yzVF9Jhx7M5P/EABcRAQADAAAAAAAAAAAAAAAAAAABEiH/2gAIAQMBAT8BrDH/xAAXEQADAQAAAAAAAAAAAAAAAAAAARES/9oACAECAQE/AdMrP//EABsQAAICAwEAAAAAAAAAAAAAAAAxARECEJGh/9oACAEBAAY/AlHRaqMPR1Aj/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERMSFxQWGR/9oACAEBAAE/IU+wZCa2J1JekJ+xKfKpC7ez/9oADAMBAAIAAwAAABDAH//EABcRAQEBAQAAAAAAAAAAAAAAAAEAIXH/2gAIAQMBAT8QR1ub/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAFh/9oACAECAQE/EJdq/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFxkWH/2gAIAQEAAT8QMwfRJ7UEQA6Qu1nWVDLeSU2WyIMDvsGaE8uln//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pier 39 sea lion\"\n        title=\"Sea lions at Pier 39\"\n        src=\"/static/affa9b68e7920e4582a390538f30ca8c/63217/pier_39_sea_lion.jpg\"\n        srcset=\"/static/affa9b68e7920e4582a390538f30ca8c/db830/pier_39_sea_lion.jpg 256w,\n/static/affa9b68e7920e4582a390538f30ca8c/8102f/pier_39_sea_lion.jpg 512w,\n/static/affa9b68e7920e4582a390538f30ca8c/63217/pier_39_sea_lion.jpg 1024w,\n/static/affa9b68e7920e4582a390538f30ca8c/d58d1/pier_39_sea_lion.jpg 1536w,\n/static/affa9b68e7920e4582a390538f30ca8c/09658/pier_39_sea_lion.jpg 2048w,\n/static/affa9b68e7920e4582a390538f30ca8c/441eb/pier_39_sea_lion.jpg 6000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Sea lions at Pier 39</figcaption>\n  </figure></p>\n<p>San Francisco is home to one of the most well-known prisons in the world, Alcatraz, which was closed due to high maintenance costs.</p>\n<p>I also visited Palo Alto to see Google’s headquarters, although I didn’t know anyone at Google to get a VIP tour. Nonetheless, it was still worth it. I also took a picture in front of the Dragon Gate in Chinatown, a famous spot from the movie “Big Trouble in Little China”.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAGR7dqQDRH/xAAbEAACAgMBAAAAAAAAAAAAAAAAAQIRAxIhE//aAAgBAQABBQKMNm8IlY+l88kf/8QAFhEBAQEAAAAAAAAAAAAAAAAAABES/9oACAEDAQE/AYy//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAESEf/aAAgBAgEBPwGnpZ//xAAbEAABBAMAAAAAAAAAAAAAAAABABARMSFBUf/aAAgBAQAGPwLFIxotxrK//8QAGhABAQADAQEAAAAAAAAAAAAAAREAIVEQMf/aAAgBAQABPyFBNq25Kn9CZFreBBGDmNI74H//2gAMAwEAAgADAAAAEAM//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERcf/aAAgBAwEBPxBLIaP/xAAXEQEAAwAAAAAAAAAAAAAAAAAAATFx/9oACAECAQE/EL0Mv//EABsQAQEAAwADAAAAAAAAAAAAAAERACExQVGB/9oACAEBAAE/ECMICmu8yCwUHYecCmqymCDsFDL9xELO99xqwD1c/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alcatraz\"\n        title=\"Alcatraz\"\n        src=\"/static/6c7560e29a1ecc96336c60f9a2585a3a/63217/alcatraz.jpg\"\n        srcset=\"/static/6c7560e29a1ecc96336c60f9a2585a3a/db830/alcatraz.jpg 256w,\n/static/6c7560e29a1ecc96336c60f9a2585a3a/8102f/alcatraz.jpg 512w,\n/static/6c7560e29a1ecc96336c60f9a2585a3a/63217/alcatraz.jpg 1024w,\n/static/6c7560e29a1ecc96336c60f9a2585a3a/d58d1/alcatraz.jpg 1536w,\n/static/6c7560e29a1ecc96336c60f9a2585a3a/09658/alcatraz.jpg 2048w,\n/static/6c7560e29a1ecc96336c60f9a2585a3a/441eb/alcatraz.jpg 6000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Alcatraz</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBP/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAU4qqwklYH//xAAaEAACAwEBAAAAAAAAAAAAAAABAgADEhEh/9oACAEBAAEFAhZmO5cke55FIsXJE//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/AYf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEiH/2gAIAQIBAT8BvFv/xAAaEAADAQADAAAAAAAAAAAAAAAAAREhAjGh/9oACAEBAAY/AiumJm8myw78P//EABoQAAIDAQEAAAAAAAAAAAAAAAABESFBMWH/2gAIAQEAAT8hlJpYWLWOwBPN0PHwW3jcRJg9j//aAAwDAQACAAMAAAAQ28//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QTthf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EBGpd//EABwQAQACAwADAAAAAAAAAAAAAAEAESExQVFxgf/aAAgBAQABPxCwICy8Y4pCmteuQ6t8NM2NNoAfAmCMQyADFNCD4J//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"me at google\"\n        title=\"Me at Google\"\n        src=\"/static/40ed2f3c48cd4a01662a09404079e416/63217/me_at_google.jpg\"\n        srcset=\"/static/40ed2f3c48cd4a01662a09404079e416/db830/me_at_google.jpg 256w,\n/static/40ed2f3c48cd4a01662a09404079e416/8102f/me_at_google.jpg 512w,\n/static/40ed2f3c48cd4a01662a09404079e416/63217/me_at_google.jpg 1024w,\n/static/40ed2f3c48cd4a01662a09404079e416/d58d1/me_at_google.jpg 1536w,\n/static/40ed2f3c48cd4a01662a09404079e416/09658/me_at_google.jpg 2048w,\n/static/40ed2f3c48cd4a01662a09404079e416/3a318/me_at_google.jpg 3888w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Me at Google</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAVMlVs3B0B//xAAaEAACAwEBAAAAAAAAAAAAAAABAgADERIh/9oACAEBAAEFAhYs6rKIviHStWoF5n//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGn/8QAFREBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQIBAT8BCf/EABgQAQADAQAAAAAAAAAAAAAAABEAAhAh/9oACAEBAAY/Am0DuEbZ/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAITFBUaH/2gAIAQEAAT8hHHA8jEKcFpRBN53LsTfIYNgISiyHs//aAAwDAQACAAMAAAAQfy//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QNL//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPxBR/8QAHBABAAICAwEAAAAAAAAAAAAAAREhADFBUXGR/9oACAEBAAE/ELtrGpRdhR7lp1lAHmdbwAhPaLoyZE1iF/ceKBs6afcmbhZx/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"me at the dragon gate\"\n        title=\"Me at the Dragon Gate\"\n        src=\"/static/4559c8a73c302bafccde45245d18b355/63217/me_at_the_dragon_gate.jpg\"\n        srcset=\"/static/4559c8a73c302bafccde45245d18b355/db830/me_at_the_dragon_gate.jpg 256w,\n/static/4559c8a73c302bafccde45245d18b355/8102f/me_at_the_dragon_gate.jpg 512w,\n/static/4559c8a73c302bafccde45245d18b355/63217/me_at_the_dragon_gate.jpg 1024w,\n/static/4559c8a73c302bafccde45245d18b355/d58d1/me_at_the_dragon_gate.jpg 1536w,\n/static/4559c8a73c302bafccde45245d18b355/09658/me_at_the_dragon_gate.jpg 2048w,\n/static/4559c8a73c302bafccde45245d18b355/e7f75/me_at_the_dragon_gate.jpg 2592w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Me at the Dragon Gate</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 150%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgH/xAAXAQADAQAAAAAAAAAAAAAAAAACBAUB/9oADAMBAAIQAxAAAAGY2ykrOOCHHJ6JrbCM0f/EABwQAAICAwEBAAAAAAAAAAAAAAACAREDISISE//aAAgBAQABBQKiihdrMFD8pky7+ykdN5imqJ//xAAaEQACAgMAAAAAAAAAAAAAAAAAAgEQERJR/9oACAEDAQE/Aahcmq8P/8QAGREBAAIDAAAAAAAAAAAAAAAAAAISARFR/9oACAECAQE/AbtsyXl1/8QAGxAAAgMAAwAAAAAAAAAAAAAAAAEQEiExMqH/2gAIAQEABj8Cmwoq/BVNRpwdUf/EABwQAAICAwEBAAAAAAAAAAAAAAERADEQIUFhcf/aAAgBAQABPyHKJdAZQ8eBrELBHGocEGBQY51ai0Saln0T/9oADAMBAAIAAwAAABCo2D7/xAAZEQADAAMAAAAAAAAAAAAAAAAAAREQMWH/2gAIAQMBAT8QnCoQmsD/xAAXEQEBAQEAAAAAAAAAAAAAAAABIRAR/9oACAECAQE/EOJcqMcX/8QAHxABAQACAQQDAAAAAAAAAAAAAREAITEQQVFhcbHR/9oACAEBAAE/EPjj6dNGIB28XtiGjn7n8y/GJQz2QKHNAR0ibloestqhUE1loKhpx5uUCAkWbxr1QRo5/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"transamerica pyramid\"\n        title=\"Transamerica Pyramid\"\n        src=\"/static/5bad6fb0c387c5734f90bc5583b5f9fa/63217/transamerica_pyramid.jpg\"\n        srcset=\"/static/5bad6fb0c387c5734f90bc5583b5f9fa/db830/transamerica_pyramid.jpg 256w,\n/static/5bad6fb0c387c5734f90bc5583b5f9fa/8102f/transamerica_pyramid.jpg 512w,\n/static/5bad6fb0c387c5734f90bc5583b5f9fa/63217/transamerica_pyramid.jpg 1024w,\n/static/5bad6fb0c387c5734f90bc5583b5f9fa/d58d1/transamerica_pyramid.jpg 1536w,\n/static/5bad6fb0c387c5734f90bc5583b5f9fa/09658/transamerica_pyramid.jpg 2048w,\n/static/5bad6fb0c387c5734f90bc5583b5f9fa/2d34d/transamerica_pyramid.jpg 3265w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Transamerica Pyramid</figcaption>\n  </figure></p>\n<h2 id=\"the-concert\" style=\"position:relative;\"><a href=\"#the-concert\" aria-label=\"the concert permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The concert</h2>\n<p>On September 6th, the day of the long-anticipated S&#x26;M2 concert finally arrived. I took a Lyft from my hostel to the Chase Center and couldn’t believe that I was really there. The line to get into the venue was huge, but I didn’t mind – I was just thrilled to be there.</p>\n<p>As I found my seat with a perfect view of the stage, the concert began. It was an incredible experience to see Metallica and the San Francisco Symphony perform together, like a dream come true.</p>\n<p>They opened with <em>The Ecstasy Of Gold</em>, followed by <em>The Call Of Ktulu</em>, just like the first S&#x26;M concert. I was living my dream, listening to my favorite album live.</p>\n<p>The third song was also from the first S&#x26;M concert, <em>For Whom The Bell Tolls</em>, and the fourth song was <em>The Day That Never Comes</em> from Death Magnetic, which is my second-favorite Metallica album. I was overjoyed.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAABk3Iay4UD/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEREwIQEv/aAAgBAQABBQLUoseLsc9n/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bh//EABcRAQADAAAAAAAAAAAAAAAAAAABERL/2gAIAQIBAT8B1K3/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhMWFB/9oACAEBAAE/Ia7sTw6NnpUTbq6WqZOkf//aAAwDAQACAAMAAAAQ2B//xAAXEQEBAQEAAAAAAAAAAAAAAAABACFR/9oACAEDAQE/EADhby//xAAXEQEBAQEAAAAAAAAAAAAAAAABABEh/9oACAECAQE/EFDrYv/EABkQAQADAQEAAAAAAAAAAAAAAAEAESExYf/aAAgBAQABPxAw68BjlVpE5GLzEdLU1wzCAV2nW5ah78wcn//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"metallica and symphony 1\"\n        title=\"Symphony and Metallica 2\"\n        src=\"/static/b1faaf3dd0ddd7c0f9b7a8ae017c9128/63217/metallica_and_symphony_1.jpg\"\n        srcset=\"/static/b1faaf3dd0ddd7c0f9b7a8ae017c9128/db830/metallica_and_symphony_1.jpg 256w,\n/static/b1faaf3dd0ddd7c0f9b7a8ae017c9128/8102f/metallica_and_symphony_1.jpg 512w,\n/static/b1faaf3dd0ddd7c0f9b7a8ae017c9128/63217/metallica_and_symphony_1.jpg 1024w,\n/static/b1faaf3dd0ddd7c0f9b7a8ae017c9128/d58d1/metallica_and_symphony_1.jpg 1536w,\n/static/b1faaf3dd0ddd7c0f9b7a8ae017c9128/09658/metallica_and_symphony_1.jpg 2048w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Symphony and Metallica 2</figcaption>\n  </figure></p>\n<p>We all knew <em>The Unforgiven III</em> had to be played that day, and it was epic. James played a full acoustic masterpiece with the symphony, and it was emotional. Unfortunately, they didn’t play <em>Fade to Black</em>, which I had hoped for on the second show. However, the setlist was the same for both performances.</p>\n<p>\n      <div class=\"gatsby-remark-local-videos\">\n        <video controlsList=\"nodownload\" controls loop preload style=\"width: 100%\" >\n          <source src=\"/378bd2073fa5322471fcf2ab9c477098/metallica-sam2.webm\" type=\"video/webm\">\n        </video>\n    </div>\n    </p>\n<p>After the second show, security allowed me to go down and take some great pictures close to the stage, which made the entire experience even more unforgettable (that’s what you are… 🎵).</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAFFeTUVaJE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAAxITIv/aAAgBAQABBQIFBM1VNzxeiGUA21T/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAEBAAIDAQAAAAAAAAAAAAABABEyAxIhgf/aAAgBAQAGPwLZPsOBvAsXXkLW/8QAHBAAAgMAAwEAAAAAAAAAAAAAAREAITFBUWFx/9oACAEBAAE/IeWoqoWJHszofI6S1qDzyyDIAs6n/9oADAMBAAIAAwAAABAP3//EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8Q1WEP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EGx//8QAHRABAAMAAgMBAAAAAAAAAAAAAQARITFBUYGhwf/aAAgBAQABPxAmnkbl+QVQUaXf3zMEJF0or1A/A6DBO4xgK+4nHUSy4FC3WXbs/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"me and sf symphony harp\"\n        title=\"Me and the harp from the symphony\"\n        src=\"/static/c9b25f2e43f1a234e2e16d8f46d7bcd0/63217/me_and_sf_symphony_harp.jpg\"\n        srcset=\"/static/c9b25f2e43f1a234e2e16d8f46d7bcd0/db830/me_and_sf_symphony_harp.jpg 256w,\n/static/c9b25f2e43f1a234e2e16d8f46d7bcd0/8102f/me_and_sf_symphony_harp.jpg 512w,\n/static/c9b25f2e43f1a234e2e16d8f46d7bcd0/63217/me_and_sf_symphony_harp.jpg 1024w,\n/static/c9b25f2e43f1a234e2e16d8f46d7bcd0/d58d1/me_and_sf_symphony_harp.jpg 1536w,\n/static/c9b25f2e43f1a234e2e16d8f46d7bcd0/09658/me_and_sf_symphony_harp.jpg 2048w,\n/static/c9b25f2e43f1a234e2e16d8f46d7bcd0/e7f75/me_and_sf_symphony_harp.jpg 2592w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Me and the harp from the symphony</figcaption>\n  </figure></p>\n<h2 id=\"the-aftermath\" style=\"position:relative;\"><a href=\"#the-aftermath\" aria-label=\"the aftermath permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The aftermath</h2>\n<p>I wish I could write more about this amazing trip, but since it was a year ago, I don’t remember many of the details.</p>\n<p>This was my first solo trip, and it was definitely worth it. While I think traveling with friends is usually better, it’s also good to have alone experiences every once in a while.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABQ2qqDUSFf//EABsQAAICAwEAAAAAAAAAAAAAAAECAAQREhMU/9oACAEBAAEFAhWi10x5VgYkdWiNsv8A/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BR//EABcRAQADAAAAAAAAAAAAAAAAAAABERL/2gAIAQIBAT8BtqX/xAAbEAACAgMBAAAAAAAAAAAAAAAAAREhAjEycf/aAAgBAQAGPwLZLyOhlUTa8Z//xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMUFxgfH/2gAIAQEAAT8hwVHiIQQMj8UYnqUuvScc1qqif//aAAwDAQACAAMAAAAQtA//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFR/9oACAEDAQE/EEtJP//EABYRAQEBAAAAAAAAAAAAAAAAAAEQQf/aAAgBAgEBPxBeQ//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExQWFR/9oACAEBAAE/EDq6jAXcXglmjH3YBzFdwi5m8KXIlD2bcb45pOeASRZ9Dqf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"good bye san francisco\"\n        title=\"Bye San Francisco\"\n        src=\"/static/b7776e137c3a87e63f1ce6d496ea4e5b/63217/good_bye_san_francisco.jpg\"\n        srcset=\"/static/b7776e137c3a87e63f1ce6d496ea4e5b/db830/good_bye_san_francisco.jpg 256w,\n/static/b7776e137c3a87e63f1ce6d496ea4e5b/8102f/good_bye_san_francisco.jpg 512w,\n/static/b7776e137c3a87e63f1ce6d496ea4e5b/63217/good_bye_san_francisco.jpg 1024w,\n/static/b7776e137c3a87e63f1ce6d496ea4e5b/d58d1/good_bye_san_francisco.jpg 1536w,\n/static/b7776e137c3a87e63f1ce6d496ea4e5b/09658/good_bye_san_francisco.jpg 2048w,\n/static/b7776e137c3a87e63f1ce6d496ea4e5b/441eb/good_bye_san_francisco.jpg 6000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Bye San Francisco</figcaption>\n  </figure></p>\n<p>Goodbye, San Francisco.</p>\n<h2 id=\"extra\" style=\"position:relative;\"><a href=\"#extra\" aria-label=\"extra permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Extra</h2>\n<p>Today, a year later, I purchased the <em>S&#x26;M2 Deluxe Boxset</em> as a way to commemorate this amazing trip even more. I made an unboxing video of it – check it out below and let me know what you think :)</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/GDYU8UBZ168?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2020/2020-14-09-me-san-francisco-and-metallica.en/","path":"/blog/events/me-san-francisco-and-metallica/","locale":"en"},"readingTime":{"minutes":6.245},"frontmatter":{"date":"2020-09-14T00:00:00.000Z","title":"Me, San Francisco and Metallica","categories":["events"]}}},{"node":{"excerpt":"Hey guys, second post in less than a week, unbelievable.  In…","html":"<p>Hey guys, second post in less than a week, unbelievable.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/6kpWc6VR0sA?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>In the gameplay, we don’t have a lot of news since the last video, just some changes in the game build, which I would like to share here with you.</p>\n<p>First I have to get all the tileset files, sprites, and the stage files made in Tiled.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> stageFiles <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">STAGES_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> tilesetFiles <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> tilesetImageFiles <span class=\"token operator\">=</span> tilesetFiles\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tilesetFile</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> supportedImageTypes<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>tilesetFile<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> spritesFolders <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdir</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SPRITES_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In the sprites folder there is an image for each frame of the animation:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 351px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.953125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABgUlEQVQoz6WSzWsbMRDF/f9DayitoYVeeigJDiSYJjk0UJrkUAr5IBBqd3el1WptJ16v3ZJZydJImla7Tgi99h10eMxj5jejHv2HeiEEIpoWbO/dazSGiEII3nsiOj/ev/z6hYi8c13Zuq523rzQANTWbcO5yD98HAI0j+Fojg4PPx2dxHAI2/Cv5eDt+/n9oivrGa3GPyZSTjkTopClkES0mN8lSVqWs4wJlmVVVRNROklEUYpcpozzjFmLsbMxxlpb16sQAlpLRNiqaRSACt4jOiIyxqDDVb1G59Da8DT2vGAXJ0fdMPFtma/OPo+/f2tNT62PaE4Pdn9X1Za5283NzXW/P0DE58y7w7390XFk9lvmRsHLV4Oci0fmjc7StJCz2zHPMjaVJREtq0XOOROzSSJEzup6HZfKmJDlz1QmGRecW3Q97xw8AADczUqttGoUEW20bpRaLau6Wm7MxrQnhAfQSs+nJQCopomdu3PHVbUzP5ePCv+YiNgh/P0kfwBddzORj2NQxgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Idle animation\"\n        title=\"Idle animation\"\n        src=\"/static/35b7d402d7a2888797de66c7269007e8/7ecec/skate-platformer-idle-sprites.png\"\n        srcset=\"/static/35b7d402d7a2888797de66c7269007e8/e3135/skate-platformer-idle-sprites.png 256w,\n/static/35b7d402d7a2888797de66c7269007e8/7ecec/skate-platformer-idle-sprites.png 351w\"\n        sizes=\"(max-width: 351px) 100vw, 351px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Idle animation</figcaption>\n  </figure></p>\n<p>Now I pass the path from that folder to the <code class=\"language-text\">WebpackFreeTexPacker</code> plugin with some default settings:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> textPackerPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> spritesFolder <span class=\"token keyword\">of</span> spritesFolders<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    texPackerPlugin<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebpackFreeTexPacker</span><span class=\"token punctuation\">(</span>\r\n            path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">SPRITES_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>spritesFolder<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">'../assets/atlases'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">textureName</span><span class=\"token operator\">:</span> spritesFolder<span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">fixedSize</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">allowRotation</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">detectIdentical</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">allowTrim</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">exporter</span><span class=\"token operator\">:</span> <span class=\"token string\">'Phaser3'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">removeFileExtension</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">prependFolderName</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And for each of the tilesets images I will process them using the extrude plugin:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> tilesetFile <span class=\"token keyword\">of</span> tilesetImageFiles<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">await</span> <span class=\"token function\">extrudeTilesetToImage</span><span class=\"token punctuation\">(</span>\r\n        tileWidth<span class=\"token punctuation\">,</span>\r\n        tileHeight<span class=\"token punctuation\">,</span>\r\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">TILESETS_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tilesetFile<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">DIST_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/assets/tilesets/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tilesetFile<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">spacing</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And the last thing I did was to take the stage files created in Tiled and pass them to the frontend using the <code class=\"language-text\">webpack.DefinePlugin</code> plugin so that it is possible to load the stages dynamically:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">STAGES</span> <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>\r\n    stageFiles\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> stage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>DefinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token constant\">CANVAS_RENDERER</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">WEBGL_RENDERER</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">IS_DEV</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">VERSION</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>packageJson<span class=\"token punctuation\">.</span>version<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token constant\">STAGES</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And now every time I build the game I can load stages dynamically with the constant <code class=\"language-text\">STAGES</code> and all my sprites and tilesets are ready to be used.</p>\n<p>That’s what I have for you guys today, I hope you liked this video format and blog post, see you next time.</p>","fields":{"slug":"/2020/2020-09-09-second-game-devlog-of-skate-platformer.en/","path":"/blog/games/second-game-devlog-of-skate-platformer/","locale":"en"},"readingTime":{"minutes":1.59},"frontmatter":{"date":"2020-09-09T00:00:00.000Z","title":"Improving sprite sheets generation for Phaser JS game with Webpack 4 - Skate Platformer Game Devlog #02","categories":["games"]}}},{"node":{"excerpt":"Hey guys, quite some time since I don’t post anything, right…","html":"<p>Hey guys, quite some time since I don’t post anything, right… like 4 years.</p>\n<p>Well, I’m back to bring you some good news, or so I hope. This year I decided to dedicate a few hours of my free time to learn how to make games. I had done it a few years ago and tried to use Unity, but I felt overwhelmed with so much to learn from it’s IDE.</p>\n<p>Last year I discovered the Phaser.io framework that allows me to create games using what I already know and use every day: JavaScript. I decided to log all my story of the game in the form of videos game devlogs, and today I bring you the first of the series.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/MtmGG28e8oQ?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>I hope you like it and don’t forget to share it with your friends and family.</p>","fields":{"slug":"/2020/2020-02-09-first-game-devlog-of-my-game.en/","path":"/blog/games/first-game-devlog-of-my-game/","locale":"en"},"readingTime":{"minutes":0.695},"frontmatter":{"date":"2020-09-02T00:00:00.000Z","title":"Trying out Phaser JS Arcade Physics - Skate Platformer Game Devlog #01","categories":["games"]}}},{"node":{"excerpt":"Word! Att.","html":"<p>Word!</p>\n<p>Att.</p>","fields":{"slug":"/2016/2016-02-16-an-open-letter-to-mark-manson.en/","path":"/blog/general/an-open-letter-to-mark-manson/","locale":"en"},"readingTime":{"minutes":0.01},"frontmatter":{"date":"2016-02-16T00:00:00.000Z","title":"An open letter to Mark Manson","categories":["general"]}}},{"node":{"excerpt":"Well, recently I found out that Google had created the…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 707px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHRS5rmUrB//8QAGRAAAwADAAAAAAAAAAAAAAAAAQIDABAT/9oACAEBAAEFAilCedsVaAb/AP/EABcRAAMBAAAAAAAAAAAAAAAAAAABERL/2gAIAQMBAT8ByiI//8QAFhEAAwAAAAAAAAAAAAAAAAAAAAES/9oACAECAQE/AbZTP//EABsQAAIBBQAAAAAAAAAAAAAAAAACEQEgITKh/9oACAEBAAY/Aqwxv0y02f/EAB0QAAMAAAcAAAAAAAAAAAAAAAABERAhMVFhkbH/2gAIAQEAAT8hdSUrkqzi9iasu7L7gtD/2gAMAwEAAgADAAAAEHAf/8QAFREBAQAAAAAAAAAAAAAAAAAAAQD/2gAIAQMBAT8QUgL/xAAYEQEBAAMAAAAAAAAAAAAAAAABABFRkf/aAAgBAgEBPxAPXJRzf//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExUZGh0fD/2gAIAQEAAT8QehFgmrizYHzxGAUsI2Oom0s2PE9TRP/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Google Flights being awesome\"\n        title=\"Google Flights being awesome\"\n        src=\"/static/4a7c4bd5cda1ecbeadd23bdff902fbf2/3bf56/dica-amiga.jpg\"\n        srcset=\"/static/4a7c4bd5cda1ecbeadd23bdff902fbf2/db830/dica-amiga.jpg 256w,\n/static/4a7c4bd5cda1ecbeadd23bdff902fbf2/8102f/dica-amiga.jpg 512w,\n/static/4a7c4bd5cda1ecbeadd23bdff902fbf2/3bf56/dica-amiga.jpg 707w\"\n        sizes=\"(max-width: 707px) 100vw, 707px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Google Flights being awesome</figcaption>\n  </figure></p>\n<p>Well, recently I found out that Google had created the wonderful Google Flights, which is a search engine for flights from various airlines, like how Skyscanner does. The most amazing thing is that this site has been around for years, and I only discovered it this week, despite having traveled a lot and always looking for cheap tickets, I had never heard about Google Flights.</p>\n<p>And the cool thing is that if you are planning a trip and have a way to lower the price of your ticket by changing a few days on the way and / or return, Google Flights suggests this to you. It’s fast, useful and doesn’t charge fees, well, what else can I say? Since then I’m sure I’ll only use Google Flights for all my searches, so here’s the tip for you :)</p>","fields":{"slug":"/2015/2015-05-31-google-flights-op.en/","path":"/blog/tips/google-flights-op/","locale":"en"},"readingTime":{"minutes":0.715},"frontmatter":{"date":"2015-05-31T00:00:00.000Z","title":"Google Flights OP","categories":["tips"]}}},{"node":{"excerpt":"Another year I had the privilege to participate in the E…","html":"<p>Another year I had the privilege to participate in the E3 coverage for Game Blast, and I made a little video summarizing how our trip was.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/iGDOdSiiFBs?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2014/2014-08-08-trip-to-la-e3-2014.en/","path":"/blog/events/trip-to-la-e3-2014/","locale":"en"},"readingTime":{"minutes":0.14},"frontmatter":{"date":"2014-08-08T00:00:00.000Z","title":"Trip to LA - E3 2014","categories":["events"]}}},{"node":{"excerpt":"Lately I fell in love with Lego again, which was my favorite…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAaiyOQXSMJ//xAAaEAACAgMAAAAAAAAAAAAAAAAAAgETAxES/9oACAEBAAEFAjB3ovcV5Wb3P//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/AYf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGq/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAERAhASMTL/2gAIAQEABj8CHm5m8qrZ0f/EABsQAAIDAAMAAAAAAAAAAAAAAAABESExUZHw/9oACAEBAAE/ISwXNKhlFWroaGG+Sw8Ef//aAAwDAQACAAMAAAAQSx//xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EIwp/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/ELDD/8QAHBABAAMAAwEBAAAAAAAAAAAAAQARITFBYVGR/9oACAEBAAE/EHC3g2Eu5WBAvryqmvIsFqccy7el9C+CP2fif//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Vegeta grrrrr\"\n        title=\"Vegeta grrrrr\"\n        src=\"/static/47f8188d519ef0cc9e08e38cf0599b06/63217/lego_vegeta_with_dragonballs.jpg\"\n        srcset=\"/static/47f8188d519ef0cc9e08e38cf0599b06/db830/lego_vegeta_with_dragonballs.jpg 256w,\n/static/47f8188d519ef0cc9e08e38cf0599b06/8102f/lego_vegeta_with_dragonballs.jpg 512w,\n/static/47f8188d519ef0cc9e08e38cf0599b06/63217/lego_vegeta_with_dragonballs.jpg 1024w,\n/static/47f8188d519ef0cc9e08e38cf0599b06/d58d1/lego_vegeta_with_dragonballs.jpg 1536w,\n/static/47f8188d519ef0cc9e08e38cf0599b06/09658/lego_vegeta_with_dragonballs.jpg 2048w,\n/static/47f8188d519ef0cc9e08e38cf0599b06/22e6a/lego_vegeta_with_dragonballs.jpg 2731w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Vegeta grrrrr</figcaption>\n  </figure></p>\n<p>Lately I fell in love with Lego again, which was my favorite childhood toy, or at least it was until I got a SNES. Taking advantage that I bought a semi-professional camera, Nikon L810, I am taking some pictures of my Lego minifigures and posting them on my Flickr. Today I photographed some action scenes between Vegeta and the Avengers. See some of those photos below:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAID/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGWNjbBm//EABkQAAIDAQAAAAAAAAAAAAAAAAECAxATIf/aAAgBAQABBQJZuiVidqZi1f/EABcRAAMBAAAAAAAAAAAAAAAAAAABIRH/2gAIAQMBAT8BbsNP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/AWR//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQAQESExQf/aAAgBAQAGPwK8VjqwMJON/8QAGxABAAICAwAAAAAAAAAAAAAAAQARIXEQMWH/2gAIAQEAAT8h7e72NwCqZKgs5NMqBC4FHH//2gAMAwEAAgADAAAAENcP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EBNCHf/EABcRAAMBAAAAAAAAAAAAAAAAAAABIRH/2gAIAQIBAT8QjVHpD//EABsQAQEBAQEAAwAAAAAAAAAAAAERIQBhQXGB/9oACAEBAAE/EIBYJAb48++uBA1L+9hLBS48CSEez1ET47DDDv/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Marvel vs Vegeta\"\n        title=\"Marvel vs Vegeta\"\n        src=\"/static/23fb266bd5c0b9164c7aa7eeb314f113/63217/lego_vegeta_vs_avengers.jpg\"\n        srcset=\"/static/23fb266bd5c0b9164c7aa7eeb314f113/db830/lego_vegeta_vs_avengers.jpg 256w,\n/static/23fb266bd5c0b9164c7aa7eeb314f113/8102f/lego_vegeta_vs_avengers.jpg 512w,\n/static/23fb266bd5c0b9164c7aa7eeb314f113/63217/lego_vegeta_vs_avengers.jpg 1024w,\n/static/23fb266bd5c0b9164c7aa7eeb314f113/d58d1/lego_vegeta_vs_avengers.jpg 1536w,\n/static/23fb266bd5c0b9164c7aa7eeb314f113/09658/lego_vegeta_vs_avengers.jpg 2048w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Marvel vs Vegeta</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABrztkmNf/xAAbEAACAgMBAAAAAAAAAAAAAAAAAQISAxETIv/aAAgBAQABBQLXnHYvEcSSOaP/xAAYEQACAwAAAAAAAAAAAAAAAAAAAREiQf/aAAgBAwEBPwGEtKH/xAAVEQEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAgEBPwFX/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERIQIQEjFR/9oACAEBAAY/Am5sfJnZQoxj3X//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMUFh/9oACAEBAAE/IeIKeTqLXCJNQiNguC5qmh7PnP/aAAwDAQACAAMAAAAQFx//xAAaEQACAgMAAAAAAAAAAAAAAAAAEQFBYXGh/9oACAEDAQE/EELTpDy4f//EABYRAQEBAAAAAAAAAAAAAAAAAAEQUf/aAAgBAgEBPxBcI//EAB4QAQACAgIDAQAAAAAAAAAAAAEAESFBMWFRcYHR/9oACAEBAAE/EAIhwcq7fyZHGA26Df3xH6AnUO3FdpuZSdKNrbFG3L2z/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Marvel vs Vegeta\"\n        title=\"Marvel vs Vegeta\"\n        src=\"/static/dbf4bbb6fb734e6162ec48daf738ae9b/63217/lego_vegeta_vs_iron_man_1.jpg\"\n        srcset=\"/static/dbf4bbb6fb734e6162ec48daf738ae9b/db830/lego_vegeta_vs_iron_man_1.jpg 256w,\n/static/dbf4bbb6fb734e6162ec48daf738ae9b/8102f/lego_vegeta_vs_iron_man_1.jpg 512w,\n/static/dbf4bbb6fb734e6162ec48daf738ae9b/63217/lego_vegeta_vs_iron_man_1.jpg 1024w,\n/static/dbf4bbb6fb734e6162ec48daf738ae9b/d58d1/lego_vegeta_vs_iron_man_1.jpg 1536w,\n/static/dbf4bbb6fb734e6162ec48daf738ae9b/09658/lego_vegeta_vs_iron_man_1.jpg 2048w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Marvel vs Vegeta</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAABBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB1xSF040a/8QAHBABAAIBBQAAAAAAAAAAAAAAAQIDEgAEEBET/9oACAEBAAEFAtvc2TlIOHocn0zdf//EABcRAAMBAAAAAAAAAAAAAAAAAAABEQL/2gAIAQMBAT8By64in//EABYRAAMAAAAAAAAAAAAAAAAAAAECEP/aAAgBAgEBPwFhP//EABoQAAIDAQEAAAAAAAAAAAAAAAARATFBECH/2gAIAQEABj8CWLvkKFQsLP/EABoQAQADAAMAAAAAAAAAAAAAAAEAESFBYaH/2gAIAQEAAT8hxAD7lTpsZigt6HMagY7E/9oADAMBAAIAAwAAABAED//EABcRAQADAAAAAAAAAAAAAAAAABEBEDH/2gAIAQMBAT8QnITa/wD/xAAXEQEBAQEAAAAAAAAAAAAAAAABACEx/9oACAECAQE/EBNXsDf/xAAdEAEBAAIBBQAAAAAAAAAAAAABEQAhQTFRcZHB/9oACAEBAAE/EK9bF8u/vWRCSFLuzgxg1gpYuHYtoAYd9LaY6AJZOcBPvn//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Marvel vs Vegeta\"\n        title=\"Marvel vs Vegeta\"\n        src=\"/static/81b4f66509cf319654ed33def1a7fa52/63217/lego_vegeta_vs_iron_man_2.jpg\"\n        srcset=\"/static/81b4f66509cf319654ed33def1a7fa52/db830/lego_vegeta_vs_iron_man_2.jpg 256w,\n/static/81b4f66509cf319654ed33def1a7fa52/8102f/lego_vegeta_vs_iron_man_2.jpg 512w,\n/static/81b4f66509cf319654ed33def1a7fa52/63217/lego_vegeta_vs_iron_man_2.jpg 1024w,\n/static/81b4f66509cf319654ed33def1a7fa52/d58d1/lego_vegeta_vs_iron_man_2.jpg 1536w,\n/static/81b4f66509cf319654ed33def1a7fa52/09658/lego_vegeta_vs_iron_man_2.jpg 2048w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Marvel vs Vegeta</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAwAB/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAFkDRYq5//EABoQAAMAAwEAAAAAAAAAAAAAAAABAhAREyH/2gAIAQEAAQUCl1J0aOlHuNs//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARUf/aAAgBAwEBPwEe2t//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAQMQABAlH/2gAIAQEABj8C5QWYz//EABwQAQACAQUAAAAAAAAAAAAAAAEAURARITFBYf/aAAgBAQABPyEBApbmi5GMp3dCsek//9oADAMBAAIAAwAAABDr3//EABgRAAIDAAAAAAAAAAAAAAAAAAABESFB/9oACAEDAQE/EEYHJSP/xAAXEQADAQAAAAAAAAAAAAAAAAAAASFh/9oACAECAQE/EHjIf//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExUZHB0f/aAAgBAQABPxB8t11FcoC6G7IhsSzauYmUxaod+QKdqmYo/E//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Marvel vs Vegeta\"\n        title=\"Marvel vs Vegeta\"\n        src=\"/static/46de3656aa34a5ee2d1145e2a98f91b3/63217/lego_vegeta_vs_iron_man_3.jpg\"\n        srcset=\"/static/46de3656aa34a5ee2d1145e2a98f91b3/db830/lego_vegeta_vs_iron_man_3.jpg 256w,\n/static/46de3656aa34a5ee2d1145e2a98f91b3/8102f/lego_vegeta_vs_iron_man_3.jpg 512w,\n/static/46de3656aa34a5ee2d1145e2a98f91b3/63217/lego_vegeta_vs_iron_man_3.jpg 1024w,\n/static/46de3656aa34a5ee2d1145e2a98f91b3/d58d1/lego_vegeta_vs_iron_man_3.jpg 1536w,\n/static/46de3656aa34a5ee2d1145e2a98f91b3/d55d8/lego_vegeta_vs_iron_man_3.jpg 1994w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Marvel vs Vegeta</figcaption>\n  </figure></p>\n<p>Access all Flickr photos <a href=\"http://www.flickr.com/photos/blopaaa/sets/72157632720737316/with/8455730163/\" target=\"_blank\" rel=\"noreferrer\"><strong>here</strong></a>.</p>","fields":{"slug":"/2013/2013-02-09-lego-love.en/","path":"/blog/toys/lego-love/","locale":"en"},"readingTime":{"minutes":0.435},"frontmatter":{"date":"2013-02-09T00:00:00.000Z","title":"Lego love","categories":["toys"]}}},{"node":{"excerpt":"Fala galera! Beleza? Muitos leitores aqui no meu blog…","html":"<p>Fala galera! Beleza? Muitos leitores aqui no meu blog, sempre. Ano passado quando estava tudo confirmado para eu viajar para Los Angeles, eu comecei a pesquisar preços de jogos de GBA que eu sempre quis ter, como por exemplo Boktai, e eu devo ter comprado uns 10 jogos. Foi bem legal, eu consegui enxer a minha case de games:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIFBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAFGacXjCJ//xAAbEAADAAIDAAAAAAAAAAAAAAABAgMABBETFP/aAAgBAQABBQLZVeyNZzJLc7SlgGAz1zGf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAgICAwAAAAAAAAAAAAAAAAECESFBEjOh/9oACAEBAAY/Ao2VHZ1+kWtHGWEYR//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExQWGB/9oACAEBAAE/ITqMR4lBs9dztL8wY71cRA3tatjyNPZ//9oADAMBAAIAAwAAABBz/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhMVFBocH/2gAIAQEAAT8QiWqGnEx4UiJuvauph0a/k+rhViwaDEyPqMBOwmKTm1U37z//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"case de games\"\n        title=\"Case de games\"\n        src=\"/static/f043f475b4c7d4dfef7d39c7332ecd91/63217/gba_bag.jpg\"\n        srcset=\"/static/f043f475b4c7d4dfef7d39c7332ecd91/db830/gba_bag.jpg 256w,\n/static/f043f475b4c7d4dfef7d39c7332ecd91/8102f/gba_bag.jpg 512w,\n/static/f043f475b4c7d4dfef7d39c7332ecd91/63217/gba_bag.jpg 1024w,\n/static/f043f475b4c7d4dfef7d39c7332ecd91/d58d1/gba_bag.jpg 1536w,\n/static/f043f475b4c7d4dfef7d39c7332ecd91/09658/gba_bag.jpg 2048w,\n/static/f043f475b4c7d4dfef7d39c7332ecd91/08826/gba_bag.jpg 3264w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Case de games</figcaption>\n  </figure></p>\n<p>O único problema na verdade foi jogar todos esses jogos. Claro que eu já sou um gamer que compra mais do que consome, mas dessa vez o problema não era esse, e sim onde jogar mesmo. Eu tenho um Game Boy Advance SP, é o melhor jeito de se jogar GBA hoje em dia, só que eu não consigo me acostumar com o jeito que ele é, em “portrait”, os meus dedos se encontram na parte de trás do console, tirando que ele parece um estojo de maquiagem, na verdade eu nunca gostei muito desse designe de “flip”, até mesmo nos celulares. Só que não adianta jogar GBA no Game Boy Advance Classic porque você não enxerga nada! É incrível como existiu uma leva de portáteis que não tem luz própria. Agora que já expliquei o meu problema, vamos para a solução: Por sorte minha, ano passado a galera do K-Team lançou um console baseado no hardware do GBA chamado <a href=\"http://revok101.com/\" target=\"_blank\" rel=\"noreferrer\">Revo K101</a>, que é basicamente o hardware do Game Boy Advance dentro da case de um <a href=\"http://dx.com/p/gemei-a330-3-0-lcd-mp3-mp4-media-games-player-with-fm-tv-out-sd-white-4gb-47741\" target=\"_blank\" rel=\"noreferrer\">Gemei A330</a>, o que é perfeito, pois tem o design bem parecido com o Game Boy Advance Classic, tipo “landscape” e tem a backlight. Uhuuul! Mas isso não é tudo, esse console tem diversas vantagens, como TV Out, possibilidade de trocar de bateria e também ele já acompanha um Flash Card que roda nativamente NES, SNES, GB, GBC e mais alguns outros consoles. Fiz um unboxing dele, segue ai o vídeo:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/QopGTeq46Sk?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>Eu aconselho muito a comprar esse console se você ainda curte jogar os jogos de GBA. O preço dele é U$59,90 o que bem razoável, vendo todas as vantagens que ele tem. Se você tem interesse em compra-lo ou saber mais, acesse os links abaixo:</p>\n<p>Compre aqui: <a href=\"http://www.k1gbasp.com/pre-order-k101-free-pouch-bag-headphone-4gb-card-offered-p-47.html\" target=\"_blank\" rel=\"noreferrer\">k1gbasp.com/</a></p>\n<p>Site oficial: <a href=\"http://revok101.com/\" target=\"_blank\" rel=\"noreferrer\">revok101.com/</a></p>","fields":{"slug":"/2013/2013-02-09-new-handheld-revo-k101-gba-clone.en/","path":"/blog/games/new-handheld-revo-k101-gba-clone/","locale":"en"},"readingTime":{"minutes":1.825},"frontmatter":{"date":"2013-02-09T00:00:00.000Z","title":"New handheld: Revo K101 (GBA clone)","categories":["games"]}}},{"node":{"excerpt":"Woohoooo!!! Completing 6 months of E3, and practically…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAGJ8TB2LC//xAAaEAACAwEBAAAAAAAAAAAAAAAAAQIRIQMS/9oACAEBAAEFAl0ocsdjWxe+j//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAICAgMAAAAAAAAAAAAAAAABITECESJhkf/aAAgBAQAGPwKULSuisfSBdHI//8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFBYbH/2gAIAQEAAT8hIO68VCus4XM/0gRadiPTjyAbsr7P/9oADAMBAAIAAwAAABCUP//EABYRAQEBAAAAAAAAAAAAAAAAAAABIf/aAAgBAwEBPxCMf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB8QAQACAgICAwAAAAAAAAAAAAERIQAxQVFhgZGh0f/aAAgBAQABPxB6mUtNcv3WFRQnIJ3Rv1ihl65BPF5KuFB6AvH9VGX0CVPjJhM6bVv9z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Gameblast team\"\n        title=\"Gameblast team\"\n        src=\"/static/5e00cb3e4d093666482e94511bcf69e6/63217/equipe-gameblast.jpg\"\n        srcset=\"/static/5e00cb3e4d093666482e94511bcf69e6/db830/equipe-gameblast.jpg 256w,\n/static/5e00cb3e4d093666482e94511bcf69e6/8102f/equipe-gameblast.jpg 512w,\n/static/5e00cb3e4d093666482e94511bcf69e6/63217/equipe-gameblast.jpg 1024w,\n/static/5e00cb3e4d093666482e94511bcf69e6/d58d1/equipe-gameblast.jpg 1536w,\n/static/5e00cb3e4d093666482e94511bcf69e6/09658/equipe-gameblast.jpg 2048w,\n/static/5e00cb3e4d093666482e94511bcf69e6/49580/equipe-gameblast.jpg 3648w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Gameblast team</figcaption>\n  </figure></p>\n<p>Woohoooo!!! Completing 6 months of E3, and practically 6 months also that I don’t write anything here. Sad. But ok, lemm show you a video summarizing how the trip to Los Angeles by the Blast team was.</p>\n<p>I know that the video came out with a slight delay, but at least it is good to kill the event and start preparations for E3 2013! Let’s go!</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/ewfv4yfjgNs?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2012/2012-12-20-trip-to-e3-2012.en/","path":"/blog/events/trip-to-e3-2012/","locale":"en"},"readingTime":{"minutes":0.36},"frontmatter":{"date":"2012-12-20T00:00:00.000Z","title":"Trip to E3 2012","categories":["events"]}}},{"node":{"excerpt":"BACK FROM THE DEAD? Hardly. It just arrived at a time when I…","html":"<p>BACK FROM THE DEAD? Hardly.</p>\n<p>It just arrived at a time when I can’t help but post about what’s coming next week.</p>\n<p>Well, last year I had the great opportunity to go to Comic Con in San Diego as a press, I did all the rush to register, I sent them a letter and after a month of waiting I had my press ticket confirmed. Unfortunately, due to several unforeseen events, I was unable to travel and missed this great opportunity.</p>\n<p>Of course, the dream would be to be able to go to E3, which unfortunately was not possible (and not even planned) due to the date that coincides with the dates of my college exams, and also coincided with the presentation of my CBT. Last year’s E3 was very epic, especially the part of Nintendo’s conference (which I won’t be attending this year …), not only for the conference itself, but for the adventure I went through to attend it, it happened that the internet went down well in the middle of the presentation, which made me and my fellow Nintendista Luca have to run out of the house, get a ride to go to someone else’s house to watch the conference, and well, we did it. Everything worked out in the end.</p>\n<p>Why won’t I attend the Nintendo conference? Well, it’s simple. After years of wishing, my presence at E3 is confirmed, I will be part of the <a href=\"https://www.nintendoblast.com.br/2012/05/e3-2012-nintendo-blast-fara-cobertura.html\" target=\"_blank\" rel=\"noreferrer\">Nintendo Blast team</a> that will cover the event.</p>\n<p>We were divided into two groups: Those who will attend the conference live and those who stayed at the event, covering what happens while the conference is going on, and I was in the group that will stay at the event, which is extremely AWESOME, but I will miss watch and learn first hand what Nintendo has to say for its future releases.</p>\n<p>So many things that I could have done posts about events that happened recently, like a lot of knowledge about Magento that I acquired in the last two years, and I also never posted the programming tutorials for cell phones. Well, now Symbian is also a dead OS, who knows, I may not reuse this idea for something broader and more current, like Android.</p>\n<p>What really matters is: FUCK YEAH I’M GOING TO E3! I still don’t believe it. I promise you, faithful readers, that I will post here again one day. One day…</p>","fields":{"slug":"/2012/2012-05-31-e3-2012-and-here-we-go.en/","path":"/blog/events/e3-2012-and-here-we-go/","locale":"en"},"readingTime":{"minutes":2.025},"frontmatter":{"date":"2012-05-31T00:00:00.000Z","title":"E3 2012 - And here we... Go","categories":["events"]}}},{"node":{"excerpt":"Well, it is been a few months since I decided to dedicate a…","html":"<p>Well, it is been a few months since I decided to dedicate a few days of my life trying to put Zelda games on a correct timeline.</p>\n<p>I was based on the history of the games and the comments of the developers and until I was doing well, taking out some basic problems, like the fact that the first Princess Zelda that existed appeared in Adventure of Link.</p>\n<p>Things like that make things more complicated, because after all if in Ocarina of Time is where Ganon is born, and in Legend of Zelda there is already Ganon, Ocarina of Time comes before Legend of Zelda and Adventure of Link, soon this Princess Zelda who is asleep in Adventure of Link has been sleeping for centuries.</p>\n<p>This aside from the fact most declared by everyone who creates the timeline: Ocarina of Time is the first on the timeline. Much like Miyamoto once said “Ocarina of Time is the very first story!“. It turns out that we recently discovered that it is not quite like that: During this year’s E3, Skyward Sword, the new game in the Zelda series for Wii, was revealed.</p>\n<p>What happens is that in this game it is revealed how the Master Sword becomes Master Sword, and seeing that the Master Sword already existed in the Ocarina of Time, obviously Skyward Sword comes from all Zeldas. Which made it all very problematic, as I spent hours and hours putting the timeline together, and often some stories made perfect sense to stay before Ocarina of Time, but I couldn’t because of the simple fact that Ocarina of Time was the first Zelda , well, no more.</p>\n<p>At least Skyward Sword arrived already explaining A LOT, even with so little revealed. The fact that Skyward Sword can become Master Sword explains perfectly why Picori Sword and Lokomo Sword look so much like Master Sword - Somehow Master Sword ends up becoming Picori / Lokomo Sword.</p>\n<p>As few details were revealed about Skyward Sword, I prefer not to think about the timeline for now, even though despite explaining some things, Skyward Sword brought much more doubts than clarity.</p>\n<p>So I’m releasing below the post I intended to do on Zelda’s timeline. Get ready for a huge <a href=\"http://uncyclopedia.wikia.com/wiki/Wall_of_Text\" title=\"Wall of Text\" target=\"_blank\" rel=\"noreferrer\">WOT</a>!</p>\n<p>After researching A LOT, I completed my vision on Zelda’s timeline. I know that many have already done the same, including the GameTrailer website, but with each game released, gaps in these theories are created.</p>\n<p>I’m going to show you my own theory about Zelda’s timeline, of all the Zeldas I’ve played and everything I’ve studied about, I’m satisfied with this being the “official” timeline for me. First of all, one thing we need to understand is that Hyrule is not the name of a world, as ours is Earth.</p>\n<p>It is just a continent of a world that has not yet been revealed, just as Labrynna and Holodrum from Oracle of Ages and Oracle of Seasons are continents in the same way. Another important thing is to know that the game’s hero name is not necessarily Link, so much so that you can choose the name every game start.</p>\n<p>Right then, the first thing we know about the Zelda universe, is the creation of Hyrule by the three Goddesses, Din, Nayru and Farore (In the act of creating the world of Hyrule, multiple universes were created).</p>\n<p>Then there was the great war in Hyrule, known as the Hyrulean Civil War to see who had the power of the Triforce, the war ended with the Triforce in the hands of the Royal Family of Hyrule, thus beginning the events of Ocarina of Time.</p>\n<p>Despite Aonuma’s hasty announcement about Four Swords for GBA, in which he claims that this game is the first on Zelda’s timeline, I rely more on the quotes in which he really was part of the game’s story development, not as a producer, like he was on Four Swords. After the events in Ocarina of Time, we have the famous split timeline, in which one Link goes back in time and tells Princess Zelda everything about Ganondorf and his plans, and in the other he continues in the future devastated by Ganondorf’s power.</p>\n<p>We will now continue with the timeline in which Link would remain an adult. After the world was destroyed by Ganondorf, the events mentioned in the backstory of Wind Waker occur: The king and the people of Hyrule asked the Gods to flood the world, afraid of the evil power of Ganon, who somehow resurrected and for some reason. reason was not prevented by Link.</p>\n<p>I don’t know this story will turn out to be some Zelda game, but I’ll leave a question at that point. Hundreds of years have passed and a new Link is born, he receives an outfit from his grandmother on his birthday, as a ritual of waiting for the hero to return from the past. These are the events of Wind Waker. This Link meets a pirate named Tetra who later reveals himself to be the reincarnation of the princess of Hyrule, Zelda and the King of Red Lions is revealed to be the former king who flooded Hyrule, Daphnes Nohansen Hyrule.</p>\n<p>After collecting the pieces of the Triforce of Courage and killing Ganondorf, Zelda and Link are given the mission to seek a new land to rule. Link and Tetra go in search of new lands, and are faced with a ghost ship, causing the events of Phantom Hourglass, where Link wakes up in an unknown land and Tetra is missing. Determined to find Tetra, Link goes on yet another adventure, where in the end it is revealed that Link was not in his world, but in the World of the Ocean King.</p>\n<p>Upon returning to their own world, the sailors on Tetra’s ship claim that the two were unconscious on the fanstasma ship for just 10 minutes, so Link looks in his pocket and finds the Phantom Hourglass. An adventure in a parallel universe or just a dream?</p>\n<p>It doesn’t really matter, as Spirit Tracks events follow. Many quotes in the game itself show that this new realm was found by Link and Zelda’s ancestors, who named it Hyrule, because of the old realm forgotten by people. One weird thing about Spirit Tracks is the Lokomo Sword, which was designed by the Gods to humans to defeat the bad in the past. She has an incredible resemblance to the Master Sword. Would it be itself with a different name, or does each land have its own weapon to fight evil?</p>\n<p>This remains open, everyone thinks what they want. Now, after Spirit Tracks, not much is known, so I’m going to fit a game that starts in a game that doesn’t know much about the past: Minish Cap. But between Minish Cap and Spirit Tracks I would like to put the future Zelda for Wii.</p>\n<p>Not that much is already known about the game, but what everything indicates is that it will be a game that will show a lot about Master Sword, and perhaps explain the Master Sword / Picori Sword transition. In Minish Cap, a new villain appears: Vaati.</p>\n<p>A sorcerer who only wants to become more powerful, and for that he needs the “Light Power” (triforce of wisdom?) That Princess Zelda has. Link once again has the mission to save Princess Zelda and on the way to his adventure, he forges the Four Sword and defeats Vaati.</p>\n<p>Since this Zelda doesn’t comment on Triforce or Ganon, the only thing we can imagine is that it is hundreds of years after Spirit Tracks, but one thing is certain: Minish have always existed. In a quote from the game, it says that the Minish have fun hiding items and breaks under rocks and grass around the world. After Minish Cap, obviously comes the Game Boy Advance’s Four Swords, in which Vaati manages to escape his prison and kidnaps Princess Zelda. Link goes after it to rescue Zelda and reseals Vaati on the Four Sword.</p>\n<p>Shortly thereafter comes the Four Swords Adventures, for Game Cube, in which Vaati is released again and at the end of the game it is revealed that Vaati was just being manipulated by Ganon, Link defeats Vaati and Ganon and saddles Ganon on the Four Sword. Here ends the timeline of the adult link for Ocarina of Time. Now let’s go back to the beginning of everything: Ocarina of Time’s Link goes back in time and tells Princess Zelda everything about Ganondorf and his plans and Ganondorf is sentenced to death.</p>\n<p>Meanwhile, Link says goodbye to Zelda as he goes in search of his companion Navi, who left him at the end of Ocarina of Time. While looking for Navi, Link gets lost in Lost Woods and is approached by a Skull Kid, who steals his Ocarina of Time and Epona, while following him, Link is teleported to another world, a universe parallel to Hyrule. Once there, Link learns that the moon is about to fall, and Link has only three days to stop the moon.</p>\n<p>At the end of the third day, Link uses the Ocarina of Time to go back in time and continue his adventure. At the end of the game, it is not very clear whether or not Link returns to Hyrule, but there are theories that he appears in the Twilight Princess in the form of Stalfo, I will talk about this later.</p>\n<p>Returning to the timeline, a while passed by Ocarina of Time and a tribe of dark magicians known as Dark Interlopers tried to get the Triforce using the power of the Fused Shadow but were stopped by the Light Spirits. Again, I don’t know if there will be a Zelda based on this story, so I’ll leave a question here. Hundreds of years later, the events of Twilight Princess take place, in which Ganondorf tries to dominate Hyrule again, but this time manipulating Zant, a being of the Twilight Realm, which I also believe to be the Dark World, as well as many.</p>\n<p>After defeating Zant, Link battles Ganondorf and defeats him with the Master Sword. After the events of Twilight Princess, many hundreds of years pass, and for some reason, Triforce is separated into several pieces. After the events of Twilight Princess, the A Link to The Past begins, in which the Imprisoning War is introduced, which is not known for sure if the events occurred in Twilight Princess or Ocarina of Time. Link to the Past begins on a night when Link wakes up to the telepathic cry for help made by Zelda, who tries to call someone to her rescue, upon hearing the words Link’s Uncle takes his shield and sword and goes after it to rescue the Princess. Link gets up from his bed and goes after his uncle, to try to help him.</p>\n<p>Ahead, again Zelda helps Link enter the castle by revealing a hidden passage that was in the corner gardens, going there, Link finds his uncle lying on the floor, he asks him to help Zelda to free himself from the wizard Agahnim. Zelda and Link then meet and go to a secret room, arriving there with a priest who tells Link that to end the chaos created by Agahnim, Link needs to recover the Master Sword that is hidden in Lost Woods.</p>\n<p>After going through one of the most difficult adventures of all Zelda games, Link and Zelda defeat Ganon, who planned to escape the Dark World, manipulating the wizard Agahnim to release him from his seal, Ganon is sealed again, along with the Dark world. After the events of Link to the Past, for some reason Link is absent from Hyrule, and Ganon manages to break free from the Dark World, it is not explained very well how. A new hero, who is not Link appears, is the “Hero of the Light” in which he can be chosen as a man or woman at the beginning of the game.</p>\n<p>The story takes place in 4 weeks, in the first week the hero wakes up in one of the houses of A Link to the Past and is given the task of rescuing Princess Zelda. Over the course of the four weeks, the hero learns more about Ganon and Link and how he should stop Ganon. In the fourth week the hero defeats Ganon, places the Master Sword where it belongs and is teleported back to where it belongs. Many years later, a new Link appears and has the mission to stop Ganon’s actions again, these are the events that took place in the first Legend of Zelda, which as Miyamoto himself said, A Link to the Past are the ancestors of Link and Zelda of the first Legend of Zelda.</p>\n<p>After gathering the 8 pieces of the Triforce of Wisdom and defeating Ganon, the Adventure of Link events begin, where he is summoned for another mission by Impa. It reveals to Link that many generations ago, there was a kingdom where a king reigned with justice and wisdom using the power of the Triforce. This king hid a part of the Triforce, the Triforce of Courage, and reported the secret location only to his daughter Zelda.</p>\n<p>When the king passed away, his son wanted to know the location of the Triforce, but his sister Zelda did not want to reveal it, so he sent a witch to use a spell to force his sister to reveal the location of the Triforce, and was unsuccessful. Then the witch cast a spell on Princess Zelda that put her to sleep. Terrified by the tragedy, the prince ordered that from that generation, all the princesses of Hyrule should be called Zelda.</p>\n<p>This was a very important event, which is very different from the Wind Waker timeline, in which we have Tetra. Returning to Adventure of Link, after Link restored the Triforce of Courage and woke up Princess Zelda, she is kidnapped by dragons and begins the Game &#x26; Watch Zelda.</p>\n<p>Many disregard this game, but it is an official Nintendo release and should not be disregarded. After providing many services of the Royal Family and saving Hyrule, Triforce summons Link and sends him to a distant kingdom that needs help.</p>\n<p>Then the Oracle of Seasons and Oracle of Ages events begin. When one of the two games is finished and you start the second game with the code given at the end of the first, the true story of the game is revealed. At the end of the game (if you started with the code after finishing the other one) it is revealed that Zelda had been captured by Ganondorf’s mothers due to trying to resuscitate Ganon.</p>\n<p>At the end of the game Link defeats Ganon and goes out on a raft back to his homeland, Hyrule. But a storm causes him to get lost, and ends up stopping on Koholint Island. Link learns that to leave this island, he first needs to wake up Wind Fish, and upon waking him up, Link discovers that the island he was on was just a creation of a Wind Fish dream, the game is over and it is not clear whether Link made it home or not.</p>\n<p>After Link’s Awakening, many years have passed and A Link to the Past events begin. I know it’s almost official that Link’s Awakening is a sequel to A Link to the Past, but there were also a lot of mistakes in translating from Japanese to English, but it wouldn’t be possible to put Link to the Past as the protagonist of Oracle of Ages and Oracle of Seasons for the simple fact that in Oracle of Age / Seasons you eliminate Ganon, and following A Link to The Past, where Link is not the hero but “The Hero of Light”, Ganon is also defeated , making this connection impossible, as there would be two Ganons at the same time in different lands.</p>\n<p>Yeah, quite a lot! I guarantee you that this placement there, even before the Skyward Sword announcement was the one that made the most sense, despite some small inconsistencies, but that could be fixed with perhaps some other game between the stories.</p>\n<p>I will do the timeline again, we just need to know a little more about the Skyward Sword story. Until then, we only have … I don’t know, keep thinking until the brain burns !!!</p>","fields":{"slug":"/2010/2010-07-03-zelda-timeline-and-skyward-sword-placement.en/","path":"/blog/games/zelda-timeline-and-skyward-sword-placement/","locale":"en"},"readingTime":{"minutes":13.77},"frontmatter":{"date":"2010-07-03T00:00:00.000Z","title":"Zelda timeline and Skyward Sword placement","categories":["games"]}}},{"node":{"excerpt":"I realized that there aren’t many videos about it, so I made…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 540px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAMEAQX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQP/2gAMAwEAAhADEAAAAfanSGD2DcciG6Ap/8QAGxABAQACAwEAAAAAAAAAAAAAAQIDEAAREiH/2gAIAQEAAQUCuvJFOrkTGF6fphOp5//EABcRAAMBAAAAAAAAAAAAAAAAAAEQEUH/2gAIAQMBAT8BEixf/8QAGBEAAgMAAAAAAAAAAAAAAAAAARACEkH/2gAIAQIBAT8BIlZav//EABkQAAMAAwAAAAAAAAAAAAAAAAABERAgYf/aAAgBAQAGPwLpHisrt1//xAAbEAEAAgMBAQAAAAAAAAAAAAABESEAEEExgf/aAAgBAQABPyGsCV5hnitaaSUcycVCo0JB7n0XX//aAAwDAQACAAMAAAAQu8gA/8QAFhEBAQEAAAAAAAAAAAAAAAAAEAEx/9oACAEDAQE/EAzR/8QAGBEBAAMBAAAAAAAAAAAAAAAAARARQfD/2gAIAQIBAT8Qq0e2EKsf/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARECExQcH/2gAIAQEAAT8QYNo0uoHHia7ws4utXhB0VEtAdMDwQRhqiqlrXzH/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"talento\"\n        title=\"Talento\"\n        src=\"/static/187326c34432ce1bb2b827995183a387/ceaae/talento.jpg\"\n        srcset=\"/static/187326c34432ce1bb2b827995183a387/db830/talento.jpg 256w,\n/static/187326c34432ce1bb2b827995183a387/8102f/talento.jpg 512w,\n/static/187326c34432ce1bb2b827995183a387/ceaae/talento.jpg 540w\"\n        sizes=\"(max-width: 540px) 100vw, 540px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Talento</figcaption>\n  </figure></p>\n<p>I realized that there aren’t many videos about it, so I made my contribution! =D next week unboxing of Peppermint Tablets.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/y8CZSKACsIo?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2010/2010-04-07-unboxing-white-chocolate-easter-egg.en/","path":"/blog/tips/unboxing-white-chocolate-easter-egg/","locale":"en"},"readingTime":{"minutes":0.125},"frontmatter":{"date":"2010-04-07T00:00:00.000Z","title":"Unboxing white chocolate easter egg","categories":["tips"]}}},{"node":{"excerpt":"Waking up early and being left with nothing to do is awesome…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAVS07l5Hjf/EABoQAAMBAAMAAAAAAAAAAAAAAAECAwAREyL/2gAIAQEAAQUClQjI7adPPQCTAHLLgf/EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAwEBPwGsf//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/AYf/xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIRMSH/2gAIAQEABj8Catslbkdtms1mn//EABsQAAMAAgMAAAAAAAAAAAAAAAABESExQWGR/9oACAEBAAE/IeRpculLe8fudd0dzN0QriUEQtn/2gAMAwEAAgADAAAAEH8//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QhT//xAAWEQEBAQAAAAAAAAAAAAAAAAARAAH/2gAIAQIBAT8QTG3/xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhUUEx/9oACAEBAAE/ELRQ0XUOSxoCIDPWFqcRZMsAusRBMwGfewbheoT/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Clone\"\n        title=\"Clone\"\n        src=\"/static/a01bc5a7b0b7df6805fc39f080215375/63217/brincando.jpg\"\n        srcset=\"/static/a01bc5a7b0b7df6805fc39f080215375/db830/brincando.jpg 256w,\n/static/a01bc5a7b0b7df6805fc39f080215375/8102f/brincando.jpg 512w,\n/static/a01bc5a7b0b7df6805fc39f080215375/63217/brincando.jpg 1024w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Clone</figcaption>\n  </figure></p>\n<p>Waking up early and being left with nothing to do is awesome, in need of entertainment, nothing better than a joke at Sony Vegas. Who knows next week I try to do something better done hehehe</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/GsBnE2riH9c?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2010/2010-03-23-having-fun-with-sony-vegas.en/","path":"/blog/funny/having-fun-with-sony-vegas/","locale":"en"},"readingTime":{"minutes":0.2},"frontmatter":{"date":"2010-03-23T00:00:00.000Z","title":"Having fun with Sony Vegas","categories":["funny"]}}},{"node":{"excerpt":"As you may already know, a special Jirachi distribution…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 743px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgH/2gAMAwEAAhADEAAAAbNbTKtM/wD/xAAbEAABBAMAAAAAAAAAAAAAAAABAAIDERMhMf/aAAgBAQABBQJopaT4jfQY2Yyv/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bp//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPwGFf//EABkQAAMBAQEAAAAAAAAAAAAAAAABIREQMf/aAAgBAQAGPwJNtnrJSm5ef//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQWFx/9oACAEBAAE/ITHwMqiOX3UVfFW2UGZEESYSd5P/2gAMAwEAAgADAAAAENzf/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxAAZL2//8QAFxEBAQEBAAAAAAAAAAAAAAAAAREAMf/aAAgBAgEBPxBZtwM5v//EABsQAQADAQADAAAAAAAAAAAAAAEAESExYYGx/9oACAEBAAE/EGYmrpYMM8eNMBNDyIh3Tj7gOSS22KAKqfJ//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Jirachi Release\"\n        title=\"Jirachi Release\"\n        src=\"/static/0187b12215dd75d9c1d740b948acae5b/54571/jirachi-release.jpg\"\n        srcset=\"/static/0187b12215dd75d9c1d740b948acae5b/db830/jirachi-release.jpg 256w,\n/static/0187b12215dd75d9c1d740b948acae5b/8102f/jirachi-release.jpg 512w,\n/static/0187b12215dd75d9c1d740b948acae5b/54571/jirachi-release.jpg 743w\"\n        sizes=\"(max-width: 743px) 100vw, 743px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Jirachi Release</figcaption>\n  </figure></p>\n<p>As you may already know, a special Jirachi distribution event took place in Brazil, organized by Latamel. It was beautiful, I went to the penultimate day of distribution, at Saraiva Mega Store in New York City Center - Rio de Janeiro. Once there, countless Pokémon fans talking, battling, exchanging Pokémon - The place was filled with Nintendo fans. I became friends with people there, we played a few games of Mario Kart DS while we waited for the Jirachi distributor to come back from lunch. As soon as he returned, I started turning on my DSi to get Jirachi! It was really cool !!!</p>\n<p>I had the opportunity to speak with the Jirachi distributor, Diego. He explained that the starting point for this event to happen was Nintendo’s contact with Latamel. That’s right !! Nintendo has an eye on Brazil, interested in doing events, and as this was a success, more are yet to come! LET’S GO! To read more about the event, <a href=\"http://www.nintendoblast.com.br/2010/03/pokemon-blast-adquirindo-o-jirachi-da.html\" title=\"Post on Nintendo Blast\" target=\"_blank\" rel=\"noreferrer\">** click here **</a>.</p>\n<p>Finally, I managed to do a mini-interview with Gabriel Teixeira, Pokémon trainer who has already won the Brazilian Elite Four. Watch the video below.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/iV6LlGLGYlU?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>At the end of the event, I couldn’t wait to go home and be able to accomplish everything that had happened that day. I can’t wait for another Nintendo event. Thanks to João Felipe, for lending me his phone, so I can take a picture of Diego and for explaining to me how to get home 😃</p>\n<p>See below a video of Jirachi being received, and some scenes from the event.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/ZUZCBuNYGdk?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2010/2010-03-22-jirachi-from-latamel-event.en/","path":"/blog/events/jirachi-from-latamel-event/","locale":"en"},"readingTime":{"minutes":1.36},"frontmatter":{"date":"2010-03-22T00:00:00.000Z","title":"Jirachi from Latamel event","categories":["events"]}}},{"node":{"excerpt":"MY POKEMON CARTRIDGE IS HERE! YAAAAAY!!! The Pokéwalker is…","html":"<p>MY POKEMON CARTRIDGE IS HERE! YAAAAAY!!! The Pokéwalker is beautiful, I can’t wait to be happy and carry it everywhere with my beloved Pokémons 🤩 see below a video that I recorded when I unpacked the game:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/ZAPOxsQGCt0?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2010/2010-03-21-pokemon-soul-silver-unboxing.en/","path":"/blog/games/pokemon-soul-silver-unboxing/","locale":"en"},"readingTime":{"minutes":0.195},"frontmatter":{"date":"2010-03-21T00:00:00.000Z","title":"Pokémon Soul Silver Unboxing","categories":["games"]}}},{"node":{"excerpt":"After a long wait, my Wii guitar arrived. I paid a measly R…","html":"<p>After a long wait, my Wii guitar arrived. I paid a measly R$70.00 on it! A quality product =D see below a video of the unboxing.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/azKUcmUqiYo?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2010/2010-03-05-unboxing-the-wireless-guitar-for-wii.en/","path":"/blog/tips/unboxing-the-wireless-guitar-for-wii/","locale":"en"},"readingTime":{"minutes":0.14},"frontmatter":{"date":"2010-03-05T00:00:00.000Z","title":"Unboxing the Wireless Guitar for Wii","categories":["tips"]}}},{"node":{"excerpt":"Can’t handle the will to be able to control Link in his new…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 450px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.546875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAH/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB030aq4uRKYAf/8QAGxAAAgIDAQAAAAAAAAAAAAAAAQIAAwQQEhP/2gAIAQEAAQUCt9e0sJgYTNZ1D2skXoht/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAfEAABAwMFAAAAAAAAAAAAAAABABESITFxAhAyUYH/2gAIAQEABj8C60KRlG1lSuEIkjC4PROWC93/AP/EAB4QAQACAgIDAQAAAAAAAAAAAAEAIRFRQWEQMYGx/9oACAEBAAE/IcyDOTcr6joe9xJaD5jETbZ+S62kGycql4CevxOfH//aAAwDAQACAAMAAAAQ0ygA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFhEBAQEAAAAAAAAAAAAAAAAAESAh/9oACAECAQE/EFyP/8QAHRABAQADAAIDAAAAAAAAAAAAAREAITFBUXGB8P/aAAgBAQABPxAt9ytR1bqvfWFIeh2h2TTycmVQg1djFSexglaTr1PVwQMpcW86k184zM2pTBNVZv6zn+N4Yc//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Hero Pack\"\n        title=\"Hero Pack\"\n        src=\"/static/713401f73c32387cbacf9386769840c9/cb709/hero_pack.jpg\"\n        srcset=\"/static/713401f73c32387cbacf9386769840c9/db830/hero_pack.jpg 256w,\n/static/713401f73c32387cbacf9386769840c9/cb709/hero_pack.jpg 450w\"\n        sizes=\"(max-width: 450px) 100vw, 450px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Hero Pack</figcaption>\n  </figure></p>\n<p>Can’t handle the will to be able to control Link in his new Wii adventure anymore? All that perfect MotionPlus movement has left us all biting our lips for this game’s release, without even thinking about all the mysteries that are already out since the beginning of last year.</p>\n<p>But what’s the fun about spinning the WiiMote to attack an enemy without really feeling the power of the Master Sword? Well, actually you’ll never be able to feel it, but at least, if you’re fan enough, you can buy the <a href=\"http://www.camyinternational.com/heropack/\" title=\"Hero Pack\" target=\"_blank\" rel=\"noreferrer\">Hero Pack</a>, from <a href=\"http://www.camyinternational.com/\" title=\"Camy International\" target=\"_blank\" rel=\"noreferrer\">Camy International</a> enterprise.</p>\n<p>This pack is not new, it was released in the beginning of 2007, when Wii was still a little baby, and a Zelda for Wii was just a dream. I don’t know why, but it seems this product didn’t get very famous, and nowadays it’s practically impossible to find it, but it had everything to work out well – With an IGN review and everything.</p>\n<p>Watch <a href=\"https://www.ign.com/videos/2007/08/07/camy-pro-hero-pack\" target=\"_blank\" rel=\"noreferrer\">mini-video-review from IGN</a> about the pack for more information.</p>\n<p>After a long search, I finally found this item selling on an italian website, <a href=\"http://www.hardstore.com/\" title=\"HardStore.com\" target=\"_blank\" rel=\"noreferrer\">hardstore.com</a>, and for our joy, it ships to Brazil!! =D YAY</p>\n<p>The only problem is the price, it’s not very friendly, the product’s price is €13.00 + €25.00 shipping cost, which gives a total of around R$90,00, that without considering the possible custom taxes when it gets here.</p>\n<p>If you’re interested in, just access its page, <a href=\"http://www.hardstore.com/default.asp?cmd=getProd&#x26;cmdID=46422\" title=\"Haro Pack @ HardStore\" target=\"_blank\" rel=\"noreferrer\"><strong>clicking here</strong></a>. But take action quickly, on the website it says that the product will expire in July 28, and I don’t know if they’ll continue selling it after that date.</p>\n<p>I obviously already ordered mine, now I just have to wait, and when it gets here I’ll post some photos and videos here (since there is no other video of it on the internet).</p>\n<p>See below some more photos of it:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAaEuhS8ywf/EABsQAAEEAwAAAAAAAAAAAAAAAAEAAxETAhIz/9oACAEBAAEFAtzXchBT3VxYkx//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAGxAAAgEFAAAAAAAAAAAAAAAAAQIQABEhMYH/2gAIAQEABj8CBQCsrbkIo1P/xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhMVH/2gAIAQEAAT8huTh7ly7do9tGV1M5D6GRtuvfYLCz/9oADAMBAAIAAwAAABBkz//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxAMn//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EET/xAAaEAEAAgMBAAAAAAAAAAAAAAABABExQVEh/9oACAEBAAE/EAbu8CQXRiK6AavVjfJS9L06id2/jKYxD95tEAIvs//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Hero Pack 2\"\n        title=\"Hero Pack 2\"\n        src=\"/static/da375a9ef2a238955ef055e9609a5256/63217/hero_pack_2.jpg\"\n        srcset=\"/static/da375a9ef2a238955ef055e9609a5256/db830/hero_pack_2.jpg 256w,\n/static/da375a9ef2a238955ef055e9609a5256/8102f/hero_pack_2.jpg 512w,\n/static/da375a9ef2a238955ef055e9609a5256/63217/hero_pack_2.jpg 1024w,\n/static/da375a9ef2a238955ef055e9609a5256/62aaf/hero_pack_2.jpg 1280w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Hero Pack 2</figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEC/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABxckIH//EABkQAQACAwAAAAAAAAAAAAAAAAEAESEyQv/aAAgBAQABBQIwWUTk0n//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAgEBPwGH/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITFB/9oACAEBAAE/IVo2kEvy9CaLqdq+kxXwiT//2gAMAwEAAgADAAAAEIsP/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARQf/aAAgBAwEBPxA3F//EABYRAAMAAAAAAAAAAAAAAAAAAAEQUf/aAAgBAgEBPxAUv//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExQVFh0f/aAAgBAQABPxACMCKHUDlVdHIX8lBCRyWxAwsUYRCaA8HeYA4J/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Hero Pack 3\"\n        title=\"Hero Pack 3\"\n        src=\"/static/95644164b63501b61ea4ff7c116793d8/63217/hero_pack_3.jpg\"\n        srcset=\"/static/95644164b63501b61ea4ff7c116793d8/db830/hero_pack_3.jpg 256w,\n/static/95644164b63501b61ea4ff7c116793d8/8102f/hero_pack_3.jpg 512w,\n/static/95644164b63501b61ea4ff7c116793d8/63217/hero_pack_3.jpg 1024w,\n/static/95644164b63501b61ea4ff7c116793d8/62aaf/hero_pack_3.jpg 1280w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Hero Pack 3</figcaption>\n  </figure></p>","fields":{"slug":"/2010/2010-02-18-camy-hero-pack-for-those-who-cannot-wait-for-the-new-zelda.en/","path":"/blog/games/camy-hero-pack-for-those-who-cannot-wait-for-the-new-zelda/","locale":"en"},"readingTime":{"minutes":1.65},"frontmatter":{"date":"2010-02-18T00:00:00.000Z","title":"Camy Hero Pack - For those who cannot wait for the next Zelda","categories":["games"]}}},{"node":{"excerpt":"Go to http://www.planalto.gov.br/ccivil_03/leis/l9609.htm","html":"<p>Go to <a href=\"http://www.planalto.gov.br/ccivil_03/leis/l9609.htm\" target=\"_blank\" rel=\"noreferrer\">http://www.planalto.gov.br/ccivil_03/leis/l9609.htm</a></p>","fields":{"slug":"/2010/2010-01-24-softwares-law-in-brazil.en/","path":"/blog/tips/softwares-law-in-brazil/","locale":"en"},"readingTime":{"minutes":0.015},"frontmatter":{"date":"2010-01-24T00:00:00.000Z","title":"Softwares law in Brazil","categories":["tips"]}}},{"node":{"excerpt":"2009 was a kick ass year! Several new games, cellphones and…","html":"<p>2009 was a kick ass year! Several new games, cellphones and awesome movies. Now I keep thinking of my new things of this year: my new screen, my Wii, my DSi, my PSP, my camcoder etc.</p>\n<p>2009 was a really good year, even for the cellphone games, reminding the release of Zombie Infection, Sonic, Megaman and still some news of the fusion between Gamelof and Capcom.</p>\n<p>This year was announced the Spirit Tracks OUT OF NOWHERE and released still on the same year. Several games were released, such as Brutal Legend, Sillent Hill: Shatted Memories, Little Big Planet (PSP) etc. Other games were announced, like Little Big Planet, Assassin’s Creed and Metal Gear for PSP, Metroid: Other M for Wii and also the confirmation that a new Wii Zelda is being developed!</p>\n<p>So many good movies came out this year (some of them don’t came out as expected, but they were good as well) that I can’t even remember them all, such as Gamer, Grace, The Surrogates, The Box.</p>\n<p>Well, if 2010 is half of kick ass as 2009, it’s going to be an awesome year… but just being the year that the release of Metroid: Other M, and maybe the new Zelda for Wii, it is WAY TOO BETTER than 2009! Not to remind the several awesome movies (such as Shutter Island) and some other tecnologic things and games that are still going to be announced next year!</p>\n<p>Happy new year guys! Have plenty of fun =D</p>\n<p>2010!!</p>","fields":{"slug":"/2009/2009-12-31-2010-is-coming.en/","path":"/blog/general/2010-is-coming/","locale":"en"},"readingTime":{"minutes":1.245},"frontmatter":{"date":"2009-12-31T00:00:00.000Z","title":"2010 is coming","categories":["general"]}}},{"node":{"excerpt":"Seriously, if you like pasta and want to spend part of your…","html":"<p>Seriously, if you like pasta and want to spend part of your vacation in Búzios, follow the great tip to enjoy lunch <strong>and</strong> dinner: Donatello Pasta.</p>\n<p>Donatello Pasta specializes in the best pasta in the region (believe me), I went there the first time and fell in love! The Chef of the house, Felipe Peracio, can make a dish in an average of 2 minutes! No more waiting for your food.</p>\n<p>Below is a small teaser of the restaurant:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/-jIxfio7ZGo?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p><strong><a href=\"https://donatellopasta.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Official website</a></strong>\r\n<strong><a href=\"https://twitter.com/DonatelloPasta\" title=\"Donatello Pasta on Twitter\" target=\"_blank\" rel=\"noreferrer\">Twitter</a></strong>\r\n<strong><a href=\"https://YouTube.com/DonatelloPasta\" title=\"Donatello Pasta on YouTube\" target=\"_blank\" rel=\"noreferrer\">YouTube</a></strong></p>","fields":{"slug":"/2009/2009-12-24-donatello-pasta-an-awesome-new-restaurant-in-buzios.en/","path":"/blog/tips/donatello-pasta-an-awesome-new-restaurant-in-buzios/","locale":"en"},"readingTime":{"minutes":0.475},"frontmatter":{"date":"2009-12-24T00:00:00.000Z","title":"Donatello Pasta - An awesome new restaurant in Búzios","categories":["tips"]}}},{"node":{"excerpt":"Did you see this post’s title? Yes, I’m going to talk about…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.609375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAABBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHtmaGH2Vf/xAAZEAADAQEBAAAAAAAAAAAAAAABAgMAEBL/2gAIAQEAAQUCPrScs/JTIG//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAACAQUAAAAAAAAAAAAAAAABEAARITFBUf/aAAgBAQAGPwLMudMV6v/EABwQAQACAQUAAAAAAAAAAAAAAAEAEEERIXGR8f/aAAgBAQABPyE7k4TqexSaiOY6eFf/2gAMAwEAAgADAAAAEETP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFhEBAQEAAAAAAAAAAAAAAAAAAREQ/9oACAECAQE/EG0z/8QAHRABAQACAQUAAAAAAAAAAAAAAREAIRAxQWGBof/aAAgBAQABPxAYUwUT5jzcjgJs9vU4I1QI4NjQtp0il83XH//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"zelda timeline\"\n        title=\"Timeline?\"\n        src=\"/static/005db0a6b1c97cf3fe316178eea48eb3/63217/zelda_timeline.jpg\"\n        srcset=\"/static/005db0a6b1c97cf3fe316178eea48eb3/db830/zelda_timeline.jpg 256w,\n/static/005db0a6b1c97cf3fe316178eea48eb3/8102f/zelda_timeline.jpg 512w,\n/static/005db0a6b1c97cf3fe316178eea48eb3/63217/zelda_timeline.jpg 1024w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Timeline?</figcaption>\n  </figure></p>\n<p>Did you see this post’s title? Yes, I’m going to talk about a really discussed subject that exists on any forum/blog/fotolog/twitter/bar/museum/school on the world: The timeline of <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> . Is there really one? Why does <a href=\"http://en.wikipedia.org/wiki/Shigeru_Miyamoto\" title=\"Shigeru Miyamoto on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Shigeru Miyamoto</a> loves to do those mind blower s that lets everybody INSANE? If you lost your hopes trying to find a correct timeline for <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a>, I hope that this post will put you back on track in the way of hope and that one day we’ll understand the universe of <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> and its timeline.</p>\n<p>To start, watch this video:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/F2g65jL3HDg?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>Now that you’re finished you must be thinking: “WOW, AWSOME!”, just like me and others. Some months after this new theory’s been created, the video’s author sent it to <a href=\"http://nintendo.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo</a>, asking if he got any close to a solution to the timeline of <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a>, and <a href=\"http://nintendo.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo</a> answered this:Resuming: are we screwed? No, not at all. What happened here?</p>\n<p>Someone really addicted to <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> searched a little bit, was able to make lots of connections between <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> games and made this really famous video on <a href=\"http://youtube.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">YouTube</a>, and when he got in contact with <a href=\"http://nintendo.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo</a>, got the response that there was no timeline on <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a>.</p>\n<p>Well, I was really upset with <a href=\"http://nintendo.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo’s</a> response, and resolved to e-mail them. I wrote about the contact between <a href=\"http://www.youtube.com/ocarinahero10\" title=\"ocarinahero10 on YouTube\" target=\"_blank\" rel=\"noreferrer\">ocarinahero10</a> and its videos, I talked about what <a href=\"http://en.wikipedia.org/wiki/Shigeru_Miyamoto\" title=\"Shigeru Miyamoto on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Miyamoto</a> himself said once, that there are two timelines on <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> and even quote the <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeldas</a> that have official sequences ( <a href=\"http://en.wikipedia.org/wiki/The_Legend_of_Zelda_(video_game)\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> -> <a href=\"http://en.wikipedia.org/wiki/Zelda_II:_The_Adventure_of_Link\" title=\"Zelda II on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Zelda II</a> ; <a href=\"http://en.wikipedia.org/wiki/Ocarina_of_Time\" title=\"Ocarina of Time on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Ocarina of Time</a> -> <a href=\"http://en.wikipedia.org/wiki/The_Legend_of_Zelda:_Majora&#x27;s_Mask\" title=\"Majora&#x27;s Mask on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Majora’s Mask</a> ; <a href=\"http://en.wikipedia.org/wiki/Wind_Waker\" title=\"Wind Waker on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Wind Waker</a> -> <a href=\"http://en.wikipedia.org/wiki/Phantom_Hourglass\" title=\"Phantom Hourglass on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Phantom Hourglass</a> ; <a href=\"http://en.wikipedia.org/wiki/Oracle_of_Seasons\" title=\"Oracle of Seasons on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Oracle of Seasons</a> -> <a href=\"http://en.wikipedia.org/wiki/Oracle_of_Ages\" title=\"Oracle of Ages on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Oracle of Ages</a> ), and here’s the answer of <a href=\"http://nintendo.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo</a>.</p>\n<blockquote>\n<p>Hello Pablo,</p>\n<p>Since the first Legend of Zelda game was released on the NES years ago, fans of the series have tried to fit each game into a timeline, each game representing a separate episode of Link’s life. This has lead to much speculation and discussion, particularly over the games where Link switches between adult and young boy.</p>\n<p>The 2003 release of The Legend of Zelda: The Wind Waker finally put an end to the speculation and discussion in its opening line, “This is but one of the legends of which people speak…” The basic assumption has always been that Link is a single individual. However, in an interview given at the time it was released, the game’s director, Eiji Aonuma (speaking for himself and Shigeru Miyamoto, the original creator of the series) stated “In our opinions, with the Legend of Zelda, every game has a new Link. A new hero named Link always rises to fight evil.”</p>\n<p>This means that–unless otherwise specified–each new game represents a new Link and that there isn’t a true frame of reference or timeline possible for the series. For additional information on The Legend of Zelda series, please visit our official Legend of Zelda website at the following address:</p>\n<p><a href=\"http://www.zelda.com/universe/\" target=\"_blank\" rel=\"noreferrer\">www.zelda.com/universe/</a></p>\n<p>Sincerely,</p>\n<p>Sharon Matheny</p>\n<p>Nintendo of America Inc.</p>\n<p>Nintendo’s home page: <a href=\"http://www.nintendo.com/\" target=\"_blank\" rel=\"noreferrer\">http://www.nintendo.com/</a></p>\n<p>Power Line (Automated Product Info): (425) 885-7529</p>\n</blockquote>\n<p>Uhmn, wait a minute… I’ve seen that response somewhere… right! I got the same response that on <a href=\"http://www.youtube.com/ocarinahero10\" title=\"ocarinahero10 on YouTube\" target=\"_blank\" rel=\"noreferrer\">ocarinahero10</a>, but what does this means? It means that <a href=\"http://nintendo.com/\" title=\"official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo’s</a> website has a system that identifies the words “Zelda” and “timeline” and doesn’t even bother to read what you say, and send you that automatic e-mail. Kind of boring, right? So I give it a GOOD look on the internet about <a href=\"http://en.wikipedia.org/wiki/Shigeru_Miyamoto\" title=\"Shigeru Miyamoto on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Miyamoto</a> saying that there is a chronological sequence on <a href=\"http://zelda.com/\" title=\"official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a>, and I did find it, here it is <a href=\"http://en.wikipedia.org/wiki/Shigeru_Miyamoto\" title=\"Shigeru Miyamoto on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Miyamoto’s</a> statement:</p>\n<blockquote>\n<p>“Ocarina of Time is the first story, then the original Legend of Zelda, then Zelda II: The Adventure of Link, and finally A Link to the Past. It’s not very clear where Link’s Awakening fits in–it could be anytime after Ocarina of Time.”</p>\n</blockquote>\n<p>And his one from <a href=\"http://en.wikipedia.org/wiki/Eiji_Aonuma\" title=\"Eiji Aonuma on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Eiji Aonuma</a>:</p>\n<blockquote>\n<p>“As for the timeline, Twilight Princess is set several hundred years after Link has fought Ganondorf in Ocarina of Time and returned to his own time (the OoT ending), and becomes a parallel world to The Wind Waker (the time axis originally splits in Ocarina of Time and a parallel timeline is formed). Wind Waker begins several hundred years immediately after adult Link seals away Ganondorf, Twilight Princess occurs several hundred years after the adult Link is sent back to his original time by Zelda’s power.”</p>\n</blockquote>\n<p>Two powerful quotes spoken by who’s behind the game, which proves that <a href=\"http://zelda.com/\" title=\"official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> HAS a timeline =D And now that you’re finishing reading this post, you’re very happy hearing such news, but there is one problem: sources.</p>\n<p>All sources of those information, were took from blogs and websites about <a href=\"http://zelda.com/\" title=\"official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a>, so how can we tell they’re true? Well, I searched a little bit about the sources, I spent like 5 hours searching where the first quote was from, and I found out that it came from an exclusive interview with <a href=\"http://en.wikipedia.org/wiki/Shigeru_Miyamoto\" title=\"Shigeru Miyamoto on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Miyamoto</a> to a magazine called <a href=\"http://nintendopower.com/\" title=\"official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo Power</a> in November of 1998, <a href=\"http://www.miyamotoshrine.com/theman/interviews/111998.shtml\" title=\"miyamotoshrine.com\" target=\"_blank\" rel=\"noreferrer\"><strong>click here</strong></a> to read it.</p>\n<p>This interview was published on January of 1999 in a special edition of <a href=\"http://nintendopower.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo Power</a> #116, the edition that only who have a subscription of the magazine gets it. I searched on eBay for that special edition but I didn’t find it =( So I e-mailed <a href=\"http://nintendopower.com/\" title=\"official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo Power</a> and <a href=\"http://nintendo.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo</a> with the link of the interview, asking if it’s really true, and they answered yes!</p>\n<p>So the first quote about Ocarina of Time being the first <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> ever it’s true and was <a href=\"http://en.wikipedia.org/wiki/Shigeru_Miyamoto\" title=\"Shigeru Miyamoto on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Miyamoto</a> himself who said it =D The source of the second quote was a lot easier to find, I searched on the official website of <a href=\"http://www.nindori.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo Dream</a>, japanese magazine of <a href=\"http://nintendo.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Nintendo</a>, and I found the edition that has that quote, to access the interview (in japanese) <a href=\"http://www.nindori.com/interview/154zelda/154int_02.html\" title=\"Nintendo Dream\" target=\"_blank\" rel=\"noreferrer\"><strong>click here</strong></a>, and to see the translation (english by <a href=\"http://translate.google.com/translate_t?hl=pt-br#\" title=\"Tradutor da Google\" target=\"_blank\" rel=\"noreferrer\">Google translator</a> ) <a href=\"http://translate.google.com.br/translate?hl=pt-BR&#x26;sl=ja&#x26;tl=en&#x26;u=http://www.nindori.com/interview/154zelda/154int_02.html\" title=\"Nintendo Dream\" target=\"_blank\" rel=\"noreferrer\"><strong>click here</strong></a>.</p>\n<p>You can also check the translated version by Patricia and TSA, from <a href=\"http://www.thehylia.com/\" target=\"_blank\" rel=\"noreferrer\">thehylia.com/</a> by <a href=\"http://www.thehylia.com/index.php?subaction=showfull&#x26;id=1173582355\" title=\"Translation\" target=\"_blank\" rel=\"noreferrer\"><strong>clicking here</strong></a>.</p>\n<p>There, job done! <span\n          \n          class='highlighted-text'\n        >Zelda POSSESSES a timeline</span>, we only have to wait for Shigeru Miyamoto on Wikipédia to start launching new games of Official website that are connected to the ones that already exist.</p>\n<p><a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> is an adventure game, really rich in puzzles, which, for who is more addicted to it, brings a fantasy story like no other before.</p>\n<p>We’ll keep on playing <a href=\"http://zelda.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zelda</a> to the end of times o/</p>\n<p>Also check out <a href=\"/en/zelda-timeline\">the Zelda Timeline secret page I have on this blog</a>.</p>","fields":{"slug":"/2009/2009-09-15-zelda-timeline.en/","path":"/blog/games/zelda-timeline/","locale":"en"},"readingTime":{"minutes":6.165},"frontmatter":{"date":"2009-09-15T00:00:00.000Z","title":"Zelda timeline?","categories":["games"]}}},{"node":{"excerpt":"Sometimes I realize that I’m not just a useless information…","html":"<p>Sometimes I realize that I’m not just a useless information source and I remember that I’ve done some pretty cool stuff! An exemple of that are the effects that I’ve done with <a href=\"http://www.adobe.com/br/products/photoshop/\" title=\"Adobe Photoshop\" target=\"_blank\" rel=\"noreferrer\">Adobe Photoshop</a> + <a href=\"http://www.adobe.com/br/products/premiere/\" title=\"Site oficial\" target=\"_blank\" rel=\"noreferrer\">Adobe Premiere</a>. One of them is a lightsaber fight that I’ve done with my friend Thiago (actually he did the bigger part of it, I just learned how to do it) and another one is a power effect just like <a href=\"http://pt.wikipedia.org/wiki/Kame_hame_ha\" title=\"Kame Hame Ha no Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Kame Hame Ha</a> . It’s actually quite good, watch the two videos below:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/q6LpZMhu-L0?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/psCb67mHjAk?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>This one (just below) I made for a TV show called <a href=\"http://twitter.com/descargamtv\" title=\"Descarga MTV no Twitter\" target=\"_blank\" rel=\"noreferrer\">Descarga MTV</a>! It was on the show and everything, awesome, watch below:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/NWwKs6cV7-4?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2009/2009-07-08-special-effects.en/","path":"/blog/general/special-effects/","locale":"en"},"readingTime":{"minutes":0.65},"frontmatter":{"date":"2009-07-08T00:00:00.000Z","title":"Special effects","categories":["general"]}}},{"node":{"excerpt":"Yesterday my beautiful Samsung SC-MX20B arrived, which a…","html":"<p>Yesterday my beautiful Samsung SC-MX20B arrived, which a good old buddy brought to me from <a href=\"http://pt.wikipedia.org/wiki/Los_Angeles\" title=\"Los Angeles\" target=\"_blank\" rel=\"noreferrer\">LA</a> .</p>\n<p>I still didn’t have the time to use it properly, but I’ve already did a little quality test, I’ve recorded a small video that you can watch bellow.</p>\n<p>It got a really nice turntable grip. Sometimes you want to get a different angle of something and shoot it which the camera bellow your waist, to you take off your hand of the grip, and put it again in a different position. With Samsung SC-MX20B you can easily rotate the grip along with your hand, to get the right angle, check the photos bellow for better understanding:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 450px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.71875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgb/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABTjopcrykH//EABkQAAIDAQAAAAAAAAAAAAAAAAIDAAEEMf/aAAgBAQABBQJm1sXoMrFRFRKWUasVyuf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8BjX//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFH/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAECERASIUH/2gAIAQEABj8CpalMs7BEnFeY/8QAHBABAAICAwEAAAAAAAAAAAAAAQAhETFBUXGB/9oACAEBAAE/IbybJRczlPm4XCA9wVLvOJTkiZr8n//aAAwDAQACAAMAAAAQkx//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPxAt/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EKw//8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBYZGx0f/aAAgBAQABPxAiTNzADzmXI7MCbTQUyzb3HAOQI+YyAWYOvsFDd4ep/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sc-mx20_grip\"\n        title=\"sc-mx20_grip\"\n        src=\"/static/46da1763fcfbc5ff1ce527af6edc671e/cb709/sc-mx20_grip.jpg\"\n        srcset=\"/static/46da1763fcfbc5ff1ce527af6edc671e/db830/sc-mx20_grip.jpg 256w,\n/static/46da1763fcfbc5ff1ce527af6edc671e/cb709/sc-mx20_grip.jpg 450w\"\n        sizes=\"(max-width: 450px) 100vw, 450px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">sc-mx20_grip</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 450px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.671875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHY8/NTHj//xAAaEAADAAMBAAAAAAAAAAAAAAABAgMAERIj/9oACAEBAAEFAq1NTwRkxtYz96S4RKFV/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BR//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AVf/xAAbEAADAQEAAwAAAAAAAAAAAAAAAQIRA0Fhkf/aAAgBAQAGPwLIpqV5Rqvp9NV2Vz32amYf/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAMSFR/9oACAEBAAE/IXS8nC4Y+EXzvT4D9brVyPrVk3nMLkQ3/9oADAMBAAIAAwAAABCcP//EABcRAAMBAAAAAAAAAAAAAAAAAAABEUH/2gAIAQMBAT8QUk0bn//EABYRAQEBAAAAAAAAAAAAAAAAAAERAP/aAAgBAgEBPxBtuDv/xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMUFRgXH/2gAIAQEAAT8QEfFZSuk79+TeyexdoCmzYkepHKIxJu3SeS5Uqy7Q5BMLxP/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sc-mx20 grip\"\n        title=\"sc-mx20 grip\"\n        src=\"/static/c24fb0aa74c6b55cc09861213ef54f56/cb709/sc-mx20_grip_2.jpg\"\n        srcset=\"/static/c24fb0aa74c6b55cc09861213ef54f56/db830/sc-mx20_grip_2.jpg 256w,\n/static/c24fb0aa74c6b55cc09861213ef54f56/cb709/sc-mx20_grip_2.jpg 450w\"\n        sizes=\"(max-width: 450px) 100vw, 450px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">sc-mx20 grip</figcaption>\n  </figure></p>\n<p>This week I have to study for next week’s tests, so it will get difficult to test this camera better. It’s hard to see it standing there, with no time to play. Watch the test video below:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/c_m6bWGSZgE?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2009/2009-06-23-hands-on-samsung-scmx20b.en/","path":"/blog/gadgets/hands-on-samsung-scmx20b/","locale":"en"},"readingTime":{"minutes":0.785},"frontmatter":{"date":"2009-06-23T00:00:00.000Z","title":"Hands on Samsung SC-MX20B!","categories":["gadgets"]}}},{"node":{"excerpt":"Since My Name is Earl was canceled in the EUA, lots of fans…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 371px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUCBv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAaU2xJLTYjzg6QH/xAAbEAADAAMBAQAAAAAAAAAAAAABAgMAERIEIf/aAAgBAQABBQK6Esihwg5WvzJ73nsbmpOhNu5//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAHhAAAgMAAgMBAAAAAAAAAAAAAREAAhIhQRAxUmL/2gAIAQEABj8CrcWSmd8JQCCya6EwK6YQ/I8VI95MfzxK2PYn/8QAHBABAAMBAAMBAAAAAAAAAAAAAQARITFRYXHB/9oACAEBAAE/IbwG4ZarFoVKFPeP5OL4Vkyul705GNAtT08w5E8eHqM4bpX5sakWC1P/2gAMAwEAAgADAAAAEBPAPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB4QAQEAAgICAwAAAAAAAAAAAAERACExQVFhkaHw/9oACAEBAAE/EAciEMhAC/vOER8Qg0NviWinG8RRSWjWJqMJKhQody/Fwihn1q1XqF+rcEAtneS5g09vJ7xNCW70ss71MO4GXAU6z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"save earl\"\n        title=\"save earl\"\n        src=\"/static/d6c5c6396566cce661f0d4ffcb29cf4a/bfbf0/saveearl.jpg\"\n        srcset=\"/static/d6c5c6396566cce661f0d4ffcb29cf4a/db830/saveearl.jpg 256w,\n/static/d6c5c6396566cce661f0d4ffcb29cf4a/bfbf0/saveearl.jpg 371w\"\n        sizes=\"(max-width: 371px) 100vw, 371px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">save earl</figcaption>\n  </figure></p>\n<p>Since <a href=\"https://parade.com/97056/parade/my-name-is-earl-canceled/\" title=\"MNIE canceled\" target=\"_blank\" rel=\"noreferrer\">My Name is Earl was canceled in the EUA</a>, lots of fans started to create several petitions for the series to go on, which in my opinion is one of the funniest. If you think <a href=\"http://pt.wikipedia.org/wiki/My_Name_is_Earl\" title=\"MNIE on Wikipédia\" target=\"_blank\" rel=\"noreferrer\">My Name is Earl</a> should continue, to your little quota e start following <a href=\"http://twitter.com/EarlTwitition\" title=\"EarlTwitition\" target=\"_blank\" rel=\"noreferrer\">EarlTwitition</a> profile on <a href=\"http://twitter.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Twitter</a>. It’s a fact that big companies are always looking after blogs and <a href=\"http://twitter.com/invitations/find_on_twitter\" title=\"Users on Twitter\" target=\"_blank\" rel=\"noreferrer\">Twitters</a>, who knows this can work out?</p>\n<p><strong>Source:</strong> <a href=\"http://popwatch.ew.com/popwatch/2009/05/earl-fans-start.html\" title=\"My Name is Earl Twitition\" target=\"_blank\" rel=\"noreferrer\">popwatch.ew.com/</a></p>","fields":{"slug":"/2009/2009-06-21-save-earl.en/","path":"/blog/general/save-earl/","locale":"en"},"readingTime":{"minutes":0.47},"frontmatter":{"date":"2009-06-21T00:00:00.000Z","title":"Save Earl","categories":["general"]}}},{"node":{"excerpt":"When I bought Zeemote I got surprised at first sight: The…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 436px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.734375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFAf/EABQBAQAAAAAAAAAAAAAAAAAAAAP/2gAMAwEAAhADEAAAAaqlYa0QEL//xAAaEAADAQADAAAAAAAAAAAAAAABAgMSACQy/9oACAEBAAEFArNlJXDpyh7LgZTx/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBIx/9oACAEDAQE/AUg//8QAFxEAAwEAAAAAAAAAAAAAAAAAAQIQMf/aAAgBAgEBPwEts//EABwQAAIABwAAAAAAAAAAAAAAAAABAhARITJxgf/aAAgBAQAGPwK2Qm5cKkOj/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAIYH/2gAIAQEAAT8htWcUNwhbHeZq7pGAFS5Pk3//2gAMAwEAAgADAAAAEKsf/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAwEBPxAOheyZf//EABcRAQEBAQAAAAAAAAAAAAAAAAEAIUH/2gAIAQIBAT8QUEcjb//EABoQAQEBAAMBAAAAAAAAAAAAAAERADFBUYH/2gAIAQEAAT8QSHJ9pDnSgeqIX3R60pcABfMqMZBLnKtVl+b/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"zeemote\"\n        title=\"Zeemote\"\n        src=\"/static/53d7c71df09df898f79454d9c7a0eef5/4c32f/zeemote.jpg\"\n        srcset=\"/static/53d7c71df09df898f79454d9c7a0eef5/db830/zeemote.jpg 256w,\n/static/53d7c71df09df898f79454d9c7a0eef5/4c32f/zeemote.jpg 436w\"\n        sizes=\"(max-width: 436px) 100vw, 436px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Zeemote</figcaption>\n  </figure></p>\n<p>When I bought <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> I got surprised at first sight: The box is really pretty and comes with the manual, two AAA batteries, <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> (duh) and a carabiner to be used as a key chain.</p>\n<p>The moment I installed <a href=\"http://www.zeemote.com/zeekey/\" title=\"Zeekey\" target=\"_blank\" rel=\"noreferrer\">Zeekey</a> and tried <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> for the first time, I got really surprised, I admit that I didn’t expected it to work so good, with such a good response, and <a href=\"http://www.zeemote.com/zeekey/\" title=\"Zeekey\" target=\"_blank\" rel=\"noreferrer\">Zeekey</a> is a very easy program to use. But to get the inner works, only with time!</p>\n<p>I spent almost a month playing several hours with <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> a bunch of games that I have on my <a href=\"http://www.nokia.com.br/A4799272\" title=\"Nokia E51\" target=\"_blank\" rel=\"noreferrer\">Nokia E51</a> and I’ll make a review talking about the pros and cons of <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a>. Soon as I grabbed my Zeemote, I had a little problem: Batteries. Well, two AAA batteries are a problem, they’re expensive and don’t last long, but with time, I’ve realised that they last a lot with <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a>, but is always better to buy rechargeable batteries.</p>\n<p>To synchronize <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> with your cellphone is a really simple process, you have to install <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote’s</a> software ( <a href=\"http://www.zeemote.com/zeekey/\" title=\"Zeekey\" target=\"_blank\" rel=\"noreferrer\">Zeekey</a> ), which has Portuguese language, and in it you’ll have a simple step-by-step explaining how to connect <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> on your device. After you connect it, let’s go to the configs: You can create lots of different profiles, each one of them with its own key mapping personalized to the game you want to play. After the key mapping is done, you just have to select the profile you want to use and let <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> running in background: You’re now free to run any game you want to. When the game started, I got surprised: <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote’s</a> response is unbelievably fast, without any delay, it’s just great!</p>\n<p>I spent 20 minutes playing and I admit that at beginning was a little bit difficult to get used to <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a>, but as time passed, and after a lot of key re-mapping, I got to the perfect configs. Despite the fast response, bluetooth is not a really fast network, so what happened to me was that <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote’s</a> response friezed for a second and didn’t answer my commands, but as I was with my cellphone in the other hand, I kept playing with it, and within a second <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> was good to go again.</p>\n<p>Unfortunately that happened a few times and messes up your game, specially in a crucial part when a lot of commands are sent at the same time, but I believe that this problem can be resolved in the next versions of <a href=\"http://www.zeemote.com/zeekey/\" title=\"Zeekey\" target=\"_blank\" rel=\"noreferrer\">Zeekey</a>. Another problem that I found was because of the games themselves: Companies don’t create games thinking in <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> (obviously), so some commands, like to move your character diagonally, are not 100% understood by the game itself, which leaves the movement kind of confuse. I don’t know if you can implement an improvement on <a href=\"http://www.zeemote.com/zeekey/\" title=\"Zeekey\" target=\"_blank\" rel=\"noreferrer\">Zeekey</a> about this problem, sadly.</p>\n<p>Two AAA batteries last quite a long time on <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a>, in this month that I’ve used it I didn’t have to change them not even once, and I played quite a long time, I carried <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> everywhere. Well, that was kind of a con, I was thinking: To carry <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> from here to there all the time. Who wants to walk with a joystick in their pocket? There you think “that’s a problem”.</p>\n<p>I spent the first few days carrying it in my pocket, and then I got used to it and now I can say that it didn’t bother me at all, actually <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> is now part of my key chain. It’s light and quite small, practically the size of those first Sony MP3 players. My experience with <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a> in the last month was really good and I believe it’s only going to get better. Well, if you consider yourself addicted in video games, buy a Zeemote. Is there a better thing than play <a href=\"http://pt.wikipedia.org/wiki/Super_mario_world\" title=\"SMW no Wikipédia\" target=\"_blank\" rel=\"noreferrer\">Super Mario World</a> in some boring class? 😅</p>\n<p>Like in every good review, I have to give it a score, so there it goes: 8.0.</p>\n<h2 id=\"final-score-80\" style=\"position:relative;\"><a href=\"#final-score-80\" aria-label=\"final score 80 permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Final score: 8.0</h2>\n<p>The videos below show myself playing some games with <a href=\"http://zeemote.com/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Zeemote</a>, you can see that its response is great.</p>\n<p><strong>Resident Evil: Degeneration</strong>:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/DJpPclrP6jc?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p><strong>Crash Bandicoot Nitro Kart 3D</strong>:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/M5Gog73K-SI?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2009/2009-06-10-review-zeemote-js1.en/","path":"/blog/gadgets/review-zeemote-js1/","locale":"en"},"readingTime":{"minutes":3.795},"frontmatter":{"date":"2009-06-10T00:00:00.000Z","title":"Review: Zeemote JS1","categories":["gadgets"]}}},{"node":{"excerpt":"These days I was at the market, choosing what to eat with…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAIA/9oADAMBAAIQAxAAAAHE1pjMNC//xAAZEAACAwEAAAAAAAAAAAAAAAABAgADBBL/2gAIAQEAAQUC6rWW2hp2kGZWufOAzZ3E/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAECH/2gAIAQIBAT8Bh//EABsQAAICAwEAAAAAAAAAAAAAAAABESECEjEy/9oACAEBAAY/ArSZyIPWQ9uHaKxUH//EABsQAQADAQADAAAAAAAAAAAAAAEAESExUYGR/9oACAEBAAE/IT6QHI1ZsNItwPUuh5UHYjLriIZnR7P/2gAMAwEAAgADAAAAEC/P/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxBXYB7t/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQARIUH/2gAIAQIBAT8QCmyw5P/EABwQAQEAAgIDAAAAAAAAAAAAAAERACExYYGRwf/aAAgBAQABPxDkZEJIewwHQQvLvf3JyfOAuIsIRBCXfvDtrAIWd+cbgQQYdovOf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hot_pocket1\"\n        title=\"wuaw\"\n        src=\"/static/30d7505e197ae2cfec169b31a8b1cc92/63217/hot_pocket1.jpg\"\n        srcset=\"/static/30d7505e197ae2cfec169b31a8b1cc92/db830/hot_pocket1.jpg 256w,\n/static/30d7505e197ae2cfec169b31a8b1cc92/8102f/hot_pocket1.jpg 512w,\n/static/30d7505e197ae2cfec169b31a8b1cc92/63217/hot_pocket1.jpg 1024w,\n/static/30d7505e197ae2cfec169b31a8b1cc92/d58d1/hot_pocket1.jpg 1536w,\n/static/30d7505e197ae2cfec169b31a8b1cc92/04bec/hot_pocket1.jpg 1600w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">wuaw</figcaption>\n  </figure></p>\n<p>These days I was at the market, choosing what to eat with little money, and I found a <a href=\"http://www.hotpocket.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Hot Pocket</a> from <a href=\"http://www.sadia.com.br/br/novahome/index.asp\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Sadia</a> for R$3.00, I didn’t think it was expensive so I decided to buy it to see if it’s really good, I got home and put it in the microwave for 1:30 minutes and when I took the first bite and 🤩 wow, very good! For those who like burger from <a href=\"http://www.mcdonalds.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Mc Donalds</a>, <a href=\"http://www.bobs.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Bobs</a> among others, you’ll like it because it’s the same style of burger, okay it’s not so tasty but it’s very good = D. The bread is soft and the meat of the burger too, you just can’t leave too much time in the microwave or you can pass the point and make the bread a little hard, but in the box comes the right instructions for you not to leave your <a href=\"http://www.hotpocket.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Hot Pocket</a> pass the point.</p>\n<p>The only problem is the price, it is not R$3.00 reais as the first time I bought it, the normal price I find there is R$4.70 and with luck R$3.50.</p>\n<p>Today I went to the market and went to check the price: R$2.60!!! It was very cheap, so I bought ten of them lol! I have a stock of <a href=\"http://www.hotpocket.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Hot Pockets</a> here at home, until at least the next two weeks.</p>\n<p>If you like burgers, I advise you to keep an eye on the offers and take advantage when <a href=\"http://www.hotpocket.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Hot Pocket</a> is in a good price range.</p>\n<p><a href=\"http://www.hotpocket.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Hot Pocket</a> from <a href=\"http://www.sadia.com.br/br/novahome/index.asp\" title=\"Official website \" target=\"_blank\" rel=\"noreferrer\">Sadia</a> really impressed me and now it’s on the list of my quick meals at home, if I were to give a general score, it would be 7.0. A comparative note: For a <a href=\"http://www.mcdonalds.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Mc Donalds</a> burger I’d give it an 8.0.</p>\n<h2 id=\"final-score-70\" style=\"position:relative;\"><a href=\"#final-score-70\" aria-label=\"final score 70 permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Final score: 7.0</h2>\n<p>Photos of my ten <a href=\"http://www.hotpocket.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Hot Pocket</a>:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAbKdmEwkOf/EABkQAQADAQEAAAAAAAAAAAAAAAIAAREhA//aAAgBAQABBQLeeb4nl0dCOSyXP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAARARAhkf/aAAgBAQAGPwJm0umDmD//xAAaEAEBAQEBAQEAAAAAAAAAAAABEQAhMUGB/9oACAEBAAE/IeXHDJJaq9nmCSzBKpH9a89w30hN/9oADAMBAAIAAwAAABCX3//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCNf//EABcRAAMBAAAAAAAAAAAAAAAAAAABEVH/2gAIAQIBAT8QUhFp/8QAGxABAQEBAQADAAAAAAAAAAAAAREAITFBYfD/2gAIAQEAAT8QX1SFbAyvUoAi8sykyPhxAKkPchl0ip7+mQDshX63/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hot_pocket2\"\n        title=\"hot_pocket2\"\n        src=\"/static/a7cb7996b3eed455b4d64a527aceb70e/63217/hot_pocket2.jpg\"\n        srcset=\"/static/a7cb7996b3eed455b4d64a527aceb70e/db830/hot_pocket2.jpg 256w,\n/static/a7cb7996b3eed455b4d64a527aceb70e/8102f/hot_pocket2.jpg 512w,\n/static/a7cb7996b3eed455b4d64a527aceb70e/63217/hot_pocket2.jpg 1024w,\n/static/a7cb7996b3eed455b4d64a527aceb70e/d58d1/hot_pocket2.jpg 1536w,\n/static/a7cb7996b3eed455b4d64a527aceb70e/04bec/hot_pocket2.jpg 1600w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">hot_pocket2</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABku3MKgwc/8QAGxAAAQQDAAAAAAAAAAAAAAAAAQACESEDEzH/2gAIAQEAAQUCzgSO2VpEES5tL//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AUf/xAAZEAADAQEBAAAAAAAAAAAAAAAAARECIVH/2gAIAQEABj8CnplV8KkOuiSO4p//xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhMUH/2gAIAQEAAT8hAg8d9IkrKMJVeJnSbbLSaC3LFE10Z//aAAwDAQACAAMAAAAQE+//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EE8Kf//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAgEBPxCYl//EABsQAQEAAwEBAQAAAAAAAAAAAAERACFRMXGh/9oACAEBAAE/EAaQFLsE0cuWDDDdkt7kySFRZHmfa4gPtyuxZu688yypWjv9z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hot_pocket3\"\n        title=\"hot_pocket3\"\n        src=\"/static/e9eb7648d9a35fe1df0430108dc284fd/63217/hot_pocket3.jpg\"\n        srcset=\"/static/e9eb7648d9a35fe1df0430108dc284fd/db830/hot_pocket3.jpg 256w,\n/static/e9eb7648d9a35fe1df0430108dc284fd/8102f/hot_pocket3.jpg 512w,\n/static/e9eb7648d9a35fe1df0430108dc284fd/63217/hot_pocket3.jpg 1024w,\n/static/e9eb7648d9a35fe1df0430108dc284fd/d58d1/hot_pocket3.jpg 1536w,\n/static/e9eb7648d9a35fe1df0430108dc284fd/04bec/hot_pocket3.jpg 1600w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">hot_pocket3</figcaption>\n  </figure>\r\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABQP0E5YZv/8QAGRABAAMBAQAAAAAAAAAAAAAAAgABEQQS/9oACAEBAAEFArWIJZquPn9I8uSxRn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAADAQEBAAAAAAAAAAAAAAAAASERAjH/2gAIAQEABj8Ca0us9G5RVF6P/8QAGhABAQEBAQEBAAAAAAAAAAAAAREAITFBof/aAAgBAQABPyE7wj8ZriivG8xQ1LzCUj1uB5Nody0/Hf/aAAwDAQACAAMAAAAQZD//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAZ/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAhMf/aAAgBAgEBPxAJN7f/xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAhMUFRkf/aAAgBAQABPxBQPUeU3OyyhaXGC2mz1le4aRouQIEqFT24rJedvXzP/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hot_pocket4\"\n        title=\"hot_pocket4\"\n        src=\"/static/0e401d0a85ef711fb628eae54453b0e6/63217/hot_pocket4.jpg\"\n        srcset=\"/static/0e401d0a85ef711fb628eae54453b0e6/db830/hot_pocket4.jpg 256w,\n/static/0e401d0a85ef711fb628eae54453b0e6/8102f/hot_pocket4.jpg 512w,\n/static/0e401d0a85ef711fb628eae54453b0e6/63217/hot_pocket4.jpg 1024w,\n/static/0e401d0a85ef711fb628eae54453b0e6/d58d1/hot_pocket4.jpg 1536w,\n/static/0e401d0a85ef711fb628eae54453b0e6/04bec/hot_pocket4.jpg 1600w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">hot_pocket4</figcaption>\n  </figure></p>\n<p><a href=\"http://www.hotpocket.com.br/\" title=\"Official website\" target=\"_blank\" rel=\"noreferrer\">Hot Pocket</a> commercial:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/szSeNZsNHkY?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2009/2009-06-01-review-hot-pocket-burger.en/","path":"/blog/tips/review-hot-pocket-burger/","locale":"en"},"readingTime":{"minutes":1.685},"frontmatter":{"date":"2009-06-01T00:00:00.000Z","title":"Review: Hot Pocket Burger","categories":["tips"]}}},{"node":{"excerpt":"After several hours searching, I finally found a practical…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 233px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.06008583690987%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABgklEQVQY03WNzUoCYRSGj0RKVDO1mSSLGsYIHBEiqEXUolxEUtPoIAmtDCK6g2kr7eoC2lWrrqBF5AVEVET/EZqKOfp93/x8w2SBUYy0KKKHl7M4h+c9wPO88A9BQRgSBD4YnO7vi4X754f7xni+JxDY3tpKJBKiKILf72cYhv0Dw7I+lvUxjJfpmuhoHV0dnFrgRtrawevdzGQURQmFQsBxHAB4PB74TQsA10w3gACwPhlbFsd7m6cNVU0mk64sSVL8N4l4fFGWl9LpC1F8Bbjv7FSnZ3ZTKztyai02Nzu/sL+3J0lSOBwGSm3axHKH7UKp7Tj1g4PGwMAnwEcgYCNUq1ZItUItq16va5oWjUYjkQg41HSoaVuGQ01TJxhjjBCm9F2WPwEcVX1TFJzPI0qxriOETMMol8vfcvb87vDk+uj09vjs9u65XEWYIIQsixSLRjZbazRIqYQrFUxIsxYZP+XLx+fzh9xNrnD1VHjRagjj7+e6jhwHa5qrEeJu/shfcWvreD9czwQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"idiomas\"\n        title=\"languages\"\n        src=\"/static/29d1cea29acbafbf0023a824822dea5e/ff7a3/idiomas.png\"\n        srcset=\"/static/29d1cea29acbafbf0023a824822dea5e/ff7a3/idiomas.png 233w\"\n        sizes=\"(max-width: 233px) 100vw, 233px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">languages</figcaption>\n  </figure></p>\n<p>After several hours searching, I finally found a practical way to put two languages on the blog.</p>\n<p>From now on, all the blog content will be available in english and portuguese.</p>","fields":{"slug":"/2009/2009-05-13-blog-in-english.en/","path":"/blog/general/blog-in-english/","locale":"en"},"readingTime":{"minutes":0.165},"frontmatter":{"date":"2009-05-13T00:00:00.000Z","title":"Blog in english","categories":["general"]}}},{"node":{"excerpt":"Today I found a really old video of some fingerboard tricks…","html":"<p>Today I found a really old video of some <a href=\"http://fingerboard.com/\" title=\"official website\" target=\"_blank\" rel=\"noreferrer\">fingerboard</a> tricks that I’ve recorded, when I was addicted to it :P</p>\n<p>I still carry my fingerboard in my pocket, and when that movie was shot I even got some support from a foreign fingerboard trademark. It’s a really wicked “sport”, you can break a leg, but you still can practice the “portable” version ;D</p>\n<p>Here’s the video:</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/QtruOZhVxVQ?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2009/2009-05-12-fingerboard-old-times.en/","path":"/blog/general/fingerboard-old-times/","locale":"en"},"readingTime":{"minutes":0.355},"frontmatter":{"date":"2009-05-12T00:00:00.000Z","title":"Fingerboard old times","categories":["general"]}}},{"node":{"excerpt":"Did you know that in every product you buy, you’re paying…","html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 353px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClklEQVQoz23TW0iTYRgA4HeHrDDJE4R0U0JdSN0UBUFRNyFFByKyA+RVeYgckpva5ub+bWiuJaFpQ3GVsYu0zGglWNk0D4Sm1tz/u+ZObWIeSN3v3Nx/+GJbydS9Nx98vA9833sANioQohGi0IZg6CAdICnfXNA7yVB+lkWRfIgcTOiC6VhALb/InpHu4c/1vfqiLm22Q3+WaDjhajxgf7THqkm1qpMC02MIIZahozBDI4R0o4O3dWV5taX55ZfOnEzPPZ7w8RZos8COgVnKwcvgpzo1SE6FMROF6SBCyPet3lUMTjl/XgPa6/ynN7e15PHEpzkeNRdX8AgZ2Gp2MTQVfvYG/OeHfkwKJkWcW83FzkHyJuAAFGXy3PcAV3BxKTibDrPon1yPvXgrLgVCyXOooDI77Y7wcpfhbk+74IsIbBV8swQ8L86vfjgah4pMWt4SMrCouCYZdMjT/b7n0y6dxVz3SbzDrgSzBKYMuaHiM1QMvGTrJORgVcKQPP5JTuKwUTZgrHSbNf3t+X3iLeNimDVikc6txUwI+1w9BAZWFadbCH2vco2GktoHoqZ6TF9z5X31MaIY5ocaYuJQq5YnBwkF16GCTlHCa+3FOsH+CefU47JrVRfidIXpE3JYHH8TxmufzYax/7fJVsH/ULq9V5qovZHSXHLIG0DeGXtrVVbx1X3fpeD39Mf4cwQH5izj2GaTDL5K+OXZGYLM+PYOo2eGfHY/T5eTOCiLp+dt7MZqhyYGIYqcdjYetFZuHS2FdwV8wVHYvTOt8FSyoSDOoQCrJoX2L7L/xysKRwYcIYYKrCy4g+5u+0DzWJtwoPpIJ5YxokoiJDDxcC9Dr4SXIAZe3a01EfAvL83aSaJtEX+5LvMvjaemsJsGYY4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"taxes\"\n        title=\"taxes\"\n        src=\"/static/a6155dbc085784d5ae8b4487a2175b89/8e4bf/taxas.png\"\n        srcset=\"/static/a6155dbc085784d5ae8b4487a2175b89/e3135/taxas.png 256w,\n/static/a6155dbc085784d5ae8b4487a2175b89/8e4bf/taxas.png 353w\"\n        sizes=\"(max-width: 353px) 100vw, 353px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">taxes</figcaption>\n  </figure></p>\n<p>Did you know that in every product you buy, you’re paying more for taxes / services the by the product itself? Every month you pay a fee from your salary, to pay taxes, and every month you pay car taxes, house. Nowadays you pay taxes even to go to your friend’s house, and don’t even know that, and still, Brazil is able to create new ways to steal our money. With the common internet shopping, many people decide to risk themselves and buy exterior products, with the risk of being taxed. This is how it works: If you buy a product, regardless of what it costs, of a company, you’ll be taxed, that’s the law of this country. So, the few people that thought that they would buy some things, for reasonable prices, were wrong.</p>\n<p>Many products go without being taxed, because it’s a large amount of mail that get everyday on Brazil.</p>\n<p>But, there is a small truce to the ones who have friends outside Brazil, if a person sends a product to another person and less than 50.00 dollars, it cannot be taxed. That’s good, right? We can still be happy, if you have friends outside.</p>\n<p>Recently was the release day of <a href=\"http://pokemonplatinum.com/\" title=\"official website\" target=\"_blank\" rel=\"noreferrer\">Pokémon Platinum</a>, for <a href=\"http://nintendods.com/\" title=\"official website\" target=\"_blank\" rel=\"noreferrer\">DS</a> . I’m addicted to Pokémon, and I ran after its pre release and my <a href=\"http://kidconfidence.com/blogs/2009/02/11/pokemon-platinum-giratina-figure/\" title=\"Giratina Action Figure\" target=\"_blank\" rel=\"noreferrer\">Giratine’s Action Figure</a> :D! The pre-order was made on <a href=\"http://amazon.com/\" title=\"Site oficial\" target=\"_blank\" rel=\"noreferrer\">Amazon.com</a>, but unfortunately they don’t send <a href=\"http://nintendo.com/\" title=\"Site oficial\" target=\"_blank\" rel=\"noreferrer\">Nintendo</a> products to Brazil, I don’t know why, so I asked a friends of mine who lives in Los Angeles to buy and send it to me, so I’ve got it by <a href=\"http://www.usps.com/international/prioritymailinternational.htm\" title=\"USPS.com\" target=\"_blank\" rel=\"noreferrer\">Priority Mail International</a> and the declared value of it was 35,00 dollars. I was already happy, close to get the cartridge before everyone in Brazil, so I’ve realized that the product has gone to verify it there were any taxes or not!</p>\n<p>That’s when I got furious, and with reason, because it’s almost making one month that my friend sent it, and it was by <a href=\"http://www.usps.com/international/prioritymailinternational.htm\" title=\"USPS.com\" target=\"_blank\" rel=\"noreferrer\">Priority Mail International</a>, delivering in 7 days, I paid expensive to be quick, and it’s stuck in there! The product comes with the fiscal note, and with my own, and my friends name on the envelope. That’s ok, I won’t be taxed, but still, the product took more than 4 times to get here, even going legally.</p>\n<p>End of the history: Not only we pay taxes even for breathing, when we have the pleasure to get a present from a friend, they do that just to screw us, for fun!</p>\n<p>Brazil \\o/</p>","fields":{"slug":"/2009/2009-04-18-brazilian-taxes.en/","path":"/blog/general/brazilian-taxes/","locale":"en"},"readingTime":{"minutes":2.205},"frontmatter":{"date":"2009-04-18T00:00:00.000Z","title":"Brazilian taxes","categories":["general"]}}},{"node":{"excerpt":"After practically 4 years of wanting to watch this clip…","html":"<p>After practically 4 years of wanting to watch this clip again, and incessant searches on the internet for music, I finally found this clip, the hottest music clip, with the most content I know! I spent years looking for “Los Pirata<strong>S</strong>”. Very serious error (so dumb).</p>\n<p>Well, that’s it, just watch this awesome videoclip.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/UepYlDJXxo8?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<p>Don’t forget to check the <a href=\"http://lospirata.com/\" target=\"_blank\" rel=\"noreferrer\">band’s website</a>, it’s hilarious.</p>","fields":{"slug":"/2008/2008-11-11-nada-by-los-pirata.en/","path":"/blog/funny/nada-by-los-pirata/","locale":"en"},"readingTime":{"minutes":0.325},"frontmatter":{"date":"2008-11-11T00:00:00.000Z","title":"Nada by Los Pirata","categories":["funny"]}}},{"node":{"excerpt":"","html":"<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe title=\"\" src=\"https://www.youtube.com/embed/B9wFZyUSEBs?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"eager\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>","fields":{"slug":"/2008/2008-10-02-idol-steve-oedekerk.en/","path":"/blog/funny/idol-steve-oedekerk/","locale":"en"},"readingTime":{"minutes":0.01},"frontmatter":{"date":"2008-10-02T00:00:00.000Z","title":"Idol: Steve Oedekerk","categories":["funny"]}}},{"node":{"excerpt":"Well, I don’t really know how to have this blog thing, it…","html":"<p>Well, I don’t really know how to have this blog thing, it seems that it was one of the things that was fashionable 5 years ago, and suddenly it became fashionable again I guess!</p>\n<p>Now that I have my own beautiful domain, I decided to create this blog, I haven’t decided on what it will be about yet, but it will certainly be well mixed 😃</p>\n<p>Nice!</p>\n<p><img src=\"/a148c25ce3ce372a77fb7f25593e1eeb/saci.gif\" alt=\"Saci\"></p>","fields":{"slug":"/2008/2008-09-28-first-post.en/","path":"/blog/general/first-post/","locale":"en"},"readingTime":{"minutes":0.34},"frontmatter":{"date":"2008-09-28T00:00:00.000Z","title":"First Post","categories":["general"]}}}]}},"pageContext":{"language":"en","intl":{"language":"en","languages":["en","pt-br"],"messages":{"site_title":"pablo.gg","title":"Title","author":"@thepiratepablo","search_placeholder":"Search...","about":"About","photos":"Photos","archive":"Archive","contact":"Contact","close":"Close","contact_page":"Contact page","see_more":"See more posts","built_with":"Built with ","buy_me_a_soda":"Buy me a soda","blog":"Blog","blog_posts":"Blog posts","go_to_post":"Go to post","search":"Search","loading":"Loading...","search_results":"Search results","search_results_for":"{quantity} search results for: \"{query}\"","search_for_query":"Search for \"{query}\"","no_results":"No results","home":"Home","description":"Yet another developer personal blog","go_back":"Go back to the homepage","thats_me":"That's me!","got_it":"Got it!","check_it_out":"Check it out!","we_are":"We are","e3":"E3","away_from_next_sgf":"away from Summer Game Fest 2025","away_from_next_gamescom":"away from Gamescom 2024","sgf_countdown":"Summer Game Fest Countdown","gamescom_countdown":"Gamescom Countdown","e3_paragraph_1":"This page once featured a countdown to the next E3 event, a moment that countless gamers and industry professionals looked forward to each year. E3 was not just an event; it was a celebration of our shared passion for video games, a place where dreams were realized, and memories were made.","e3_paragraph_2":"From the electrifying announcements to the hands-on demos, E3 was the heartbeat of the gaming world. It brought together people from all corners of the globe, united by their love for games. For many, it was a chance to meet their heroes, discover new titles, and experience the thrill of the latest innovations in gaming technology.","e3_paragraph_3":"However, as the gaming landscape has evolved, so too has the way we connect and celebrate our passion. While E3 has come to an end, the spirit of excitement and community it fostered lives on. We now look forward to new ways of coming together, sharing our love for games, and creating new memories.","e3_paragraph_4":"Though the countdown is gone, the legacy of E3 will forever remain in our hearts, reminding us of the incredible journeys we've taken and the bonds we've formed along the way.","sec":"Sec","secs":"Secs","min":"Min","mins":"Mins","hour":"Hour","hours":"Hours","day":"Day","days":"Days","month":"Month","months":"Months","year":"Year","years":"Years","recent_posts":"Recent posts","email":"Email","twitter":"Twitter","name":"Name","page":"Page","fill_this_want_reply":"Fill this in if you want me to contact you back","sorry_this_post_unavailable_language":"Sorry, this post is not available in the language you picked","language":"Language","comment":"Comment","comments":"Comments","no_comments":"No comments yet.","post_comment":"Post comment","send_message":"Send message","message":"Message","post_a_comment":"Post a comment","your_comment_submitted":"Your comment has been successfully submitted.","your_message_submitted":"Your message has been successfully submitted.","on":"on","ok":"Ok","copy":"Copy","copied":"Copied","photo_num":"Photo {num}","the_matrix_has_you":"The Matrix has you...","about_paragraph_1":"A technology enthusiast from an early age, I have always been interested in computers and video games.","about_paragraph_2":"I graduated in Information Technology at Estácio de Sá University and always try to find out about new technologies and get involved in new development projects, some of which the code can be found on GitHub.","cookie_banner_consent":"By using this website you agree to our use of cookies to deliver a better experience.","written_in":"Written in ","no_post_this_tag":"No post in English include this tag.","tags":"Tags","tag_colon":"Tag: ","tags_colon":"Tags: ","posts_tagged":"Posts tagged with ","categories":"Categories","category":"Category","category_colon":"Category: ","posts_on_category":"Posts on category ","related_posts":"Related posts","read_time":"🕒 {time} min. read","create_post":"Create Post","show":"Show","date":"Date","download":"Download","add_tag":"Add Tag","hide_excerpt":"Hide Excerpt","publish_on_medium":"Publish on Medium","allow_comments":"Allow Comments","subtitle":"Subtitle","you_must_be_truly_desperate":"You must be truly desperate to come to me for help","game.game_title":"pablo.gg - The Game","game.next":"Next","game.ok":"Ok","game.loading_asset_colon":"Loading asset:","game.loading":"Loading...","game.characters.npc_01":"Frost","game.characters.npc_02":"Gavin","game.characters.npc_03":"Giles","game.characters.npc_04":"Godfrey","game.characters.npc_05":"Hugh","game.characters.npc_06":"Ivar","game.characters.npc_07":"Leopold","game.characters.npc_08":"Lucian","game.characters.npc_09":"Gumercindo","game.characters.npc_10":"Mr. Flower","game.characters.npc_11":"Maxim","game.characters.npc_12":"Milo","game.characters.npc_13":"Otto","game.characters.npc_14":"Palmer","game.characters.npc_15":"Quentin","game.characters.npc_16":"Sebastian","game.characters.npc_17":"Neville","game.characters.npc_18":"Cassian","game.characters.npc_19":"Balthasar","game.characters.sign_01":"Sign","game.characters.book_01":"Book","game.characters.home_page_city_sign":"Sign","game.characters.coding_category_city_sign_01":"Sign","game.characters.coding_category_city_sign_02":"Sign","game.characters.events_category_city_sign":"Sign","game.characters.funny_category_city_sign":"Sign","game.characters.gadgets_category_city_sign_01":"Sign","game.characters.gadgets_category_city_sign_02":"Sign","game.characters.games_category_city_sign":"Sign","game.characters.general_category_city_sign":"Sign","game.characters.tips_category_city_sign":"Sign","game.characters.toys_category_city_sign":"Sign","game.characters.sword":"Info","game.characters.push":"Info","game.gamepad.a_button":"A Button","game.gamepad.b_button":"B Button","game.gamepad.d_pad_left":"D-Pad Left","game.gamepad.d_pad_up":"D-Pad Up","game.gamepad.d_pad_right":"D-Pad Right","game.gamepad.d_pad_down":"D-Pad Down","game.gamepad.start_button":"Start Button","game.menu.start":"Start","game.menu.exit":"Exit","game.menu.settings":"Settings","game.game_over.game_over":"Game Over","game.game_over.retry":"Retry","game.game_over.exit":"Exit","game.start_menu.save_game":"Save Game","game.start_menu.exit":"Exit","game.browse_posts.choose_a_post":"Choose a Post to read","game.dialogs.npc_01.01":"Hey, you're finally awake!","game.dialogs.npc_01.02":"What, you don't know where you are?","game.dialogs.npc_01.03":"Don't be silly, you're at the Home Page City, remember?","game.dialogs.npc_01.04":"This city was founded by Pablo Montenegro to be the start of your journey","game.dialogs.npc_01.05":"Go explore the world and find other cities where you can read the accumulated knowledge of our civilization...","game.dialogs.npc_01.06":"... some people call it \"Blog Posts\", I don't know why...","game.dialogs.npc_02.01":"Be careful with the Slimes that live in the wild.","game.dialogs.npc_02.02":"Press SPACE to use your sword","game.dialogs.npc_02.03":"What is SPACE? I have no idea.","game.dialogs.npc_03.01":"Hello, welcome to our library","game.dialogs.npc_03.02":"We only have one book, which contains all of this city category publications.","game.dialogs.npc_03.03":"Go check it out!","game.dialogs.npc_04.01":"I like snails","game.dialogs.npc_05.01":"Incomplete sentences may cause some","game.dialogs.npc_06.01":"Red is greener than purple, for sure.","game.dialogs.npc_07.01":"Having a beard is the new not having a beard","game.dialogs.npc_08.01":"Sup","game.dialogs.npc_09.01":"\" - Cooper, what are you doing?\"\n\" - Docking.\"","game.dialogs.npc_10.01":"I should buy a boat","game.dialogs.npc_11.01":"Have you heard the me neither joke? Me neither.","game.dialogs.npc_12.01":"I clean toilet and rescue princesses, good life, yes?","game.dialogs.npc_13.01":"We want the airwaves back","game.dialogs.npc_14.01":"Save the cheerleader, save the world","game.dialogs.npc_15.01":"Hello, how are you?","game.dialogs.npc_15.02":"Ok bye!","game.dialogs.npc_16.01":"A kangaroo is really just a rabbit on steroids","game.dialogs.npc_17.01":"For the 216th time, he said he would quit drinking soda after this last Coke","game.dialogs.npc_18.01":"Nothing and everything is possimpible","game.dialogs.npc_19.01":"For a city called \"Events\", there isn't much going on...","game.dialogs.sign_01.01":"Congrats, you can read this!","game.dialogs.book_01.01":"Hey, thanks for trying out this very weird way to access my website","game.dialogs.book_01.02":"This project wouldn't be possible without the awesome open-source work of many people, like:","game.dialogs.book_01.03":"ArMM1998 - For the characters sprites and tilesets","game.dialogs.book_01.04":"PixElthen - For the slime sprites","game.dialogs.book_01.05":"pixelartm - For the pirate hat sprites","game.dialogs.book_01.06":"jkjkke - For the Game Over screen background","game.dialogs.book_01.07":"KnoblePersona - For the Main Menu screen background","game.dialogs.book_01.08":"Min - For the open book sprite","game.dialogs.book_01.09":"And of course, Richard Davey for making Phaser.io!","game.dialogs.home_page_city_sign":"City of Home Page","game.dialogs.coding_category_city_sign.01":"City of Coding Category","game.dialogs.coding_category_city_sign.02":"City of Coding Category","game.dialogs.events_category_city_sign":"City of Events Category","game.dialogs.funny_category_city_sign":"City of Funny Category","game.dialogs.gadgets_category_city_sign.01":"City of Gadgets Category","game.dialogs.gadgets_category_city_sign.02":"City of Gadgets Category","game.dialogs.games_category_city_sign":"City of Games Category","game.dialogs.general_category_city_sign":"City of General Category","game.dialogs.tips_category_city_sign":"City of Tips Category","game.dialogs.toys_category_city_sign":"City of Toys Category","game.dialogs.sword_item_description":"You can now attack, press SPACE to use your sword.","game.dialogs.push_item_description":"Now you can push some objects, press SPACE in front of a object to use push it.","zelda_timeline.title":"Zelda Timeline","zelda_timeline.timeline_split":"Timeline Split","zelda_timeline.timeline_unification":"Timeline Unification","zelda_timeline.icons_from":"The icons used on this page are from zeldauniverse.net and game-icons.net","zelda_timeline.creation":"Creation","zelda_timeline.creation_of_land_sky":"The Creation of the Land and Sky","zelda_timeline.goddess_hylia_and_sky_era":"Goddess Hylia and Sky Era","zelda_timeline.skyward_sword":"Skyward Sword","zelda_timeline.the_ancient_battle":"The Ancient Battle and the reincarnation of the Goddess Hylia","zelda_timeline.return_to_surface":"Return to the surface","zelda_timeline.era_of_chaos":"Era of Chaos","zelda_timeline.sacred_realm_sealed":"The Sacred Realm is Sealed","zelda_timeline.era_of_prosperity":"Era of Prosperity","zelda_timeline.establishment_of_hyrule":"The Hyrule Kingdom is established","zelda_timeline.force_era":"Force Era","zelda_timeline.the_minish_cap":"The Minish Cap","zelda_timeline.rise_of_evil_vaati":"The Rise of the Evil Vaati","zelda_timeline.four_swords":"Four Swords","zelda_timeline.resurrection_of_vaati":"The Resurrection of Vaati","zelda_timeline.era_of_the_hero_of_time":"Era of the Hero of Time","zelda_timeline.hyrulean_civil_war":"Hyrulean Civil War","zelda_timeline.ocarina_of_time":"Ocarina of Time","zelda_timeline.sacred_realm_becomes_dark_world":"The Sacred Realm Becomes the Dark World","zelda_timeline.ganondorf_becomes_ganon":"Ganondorf becomes Ganon","zelda_timeline.hero_is_defeated":"Hero is defeated","zelda_timeline.decline_of_last_hero":"The Decline of Hyrule and the Last Hero","zelda_timeline.the_imprisoning_war":"The Imprisoning War","zelda_timeline.era_of_dark_and_light":"Era of Light and Dark","zelda_timeline.a_link_to_the_past":"A Link to the Past","zelda_timeline.resurrection_of_ganon":"The Resurrection of Ganon","zelda_timeline.resurrection_of_ganon_is_prevented":"The Resurrection of Ganon is prevented","zelda_timeline.links_awakening":"Link's Awakening","zelda_timeline.oracle_of_ages_and_seasons":"Oracle of Ages and Oracle of Seasons","zelda_timeline.a_link_between_worlds":"A Link Between Worlds","zelda_timeline.tri_force_heroes":"Tri Force Heroes","zelda_timeline.the_gold_era":"The Gold Era","zelda_timeline.monarchs_of_hyrule_use_triforce":"The Monarchs of Hyrule Use the Triforce","zelda_timeline.era_of_decline":"The Era of Decline","zelda_timeline.tragedy_of_princess_zelda_1":"The Tragedy of Princess Zelda I","zelda_timeline.the_legend_of_zelda":"The Legend of Zelda","zelda_timeline.adventure_of_link":"Adventure of Link","zelda_timeline.hero_defeated":"Hero Defeated","zelda_timeline.child_era":"Child Era","zelda_timeline.adult_era":"Adult Era","zelda_timeline.sacred_realm_protected":"The Sacred Realm Remains Protected","zelda_timeline.twilight_realm_and_legacy_of_hero":"The Twilight Realm and the Legacy of the Hero","zelda_timeline.majoras_mask":"Majora's Mask","zelda_timeline.prince_of_thieves_is_executed":"The Demon Thief, Ganondorf, Is Executed","zelda_timeline.twilight_era":"The Twilight Era","zelda_timeline.twilight_princess":"Twilight Princess","zelda_timeline.shadow_invasion":"The Shadow Invasion","zelda_timeline.shadow_era":"The Shadow Era","zelda_timeline.four_swords_adventures":"Four Swords Adventures","zelda_timeline.reincarnation_of_ganondorf":"The Reincarnation of Ganondorf","zelda_timeline.ganondorf_is_sealed":"Ganondorf is sealed","zelda_timeline.hero_of_wind_and_new_world":"The Hero of Wind and a New World","zelda_timeline.era_without_a_hero":"The Era without a Hero","zelda_timeline.ganondorf_is_resurrected":"Ganondorf is Resurrected","zelda_timeline.hyrule_is_sealed_and_flooded":"Hyrule is sealed and then flooded","zelda_timeline.era_of_the_great_sea":"The Era of the Great Sea","zelda_timeline.the_wind_waker":"The Wind Waker","zelda_timeline.era_of_the_great_voyage":"The Era of the Great Voyage","zelda_timeline.phantom_hourglass":"Phantom Hourglass","zelda_timeline.era_of_hyrule_rebirth":"The Era of Hyrule's Rebirth","zelda_timeline.new_continent_discovered":"New Continent Discovered","zelda_timeline.new_hyrule_is_founded":"A New Hyrule Kingdom is founded","zelda_timeline.spirit_tracks":"Spirit Tracks","zelda_timeline.evil_king_malladus_is_resurrected":"The Evil King Malladus is Resurrected","zelda_timeline.age_of_calamity":"Age of Calamity","zelda_timeline.breath_of_the_wild":"Breath of the Wild","zelda_timeline.era_of_the_wilds":"Era of the Wilds","zelda_timeline.calamity_ganon_is_sealed":"Calamity Ganon is Sealed. Technology is banned, leading some Sheikah to form the Yiga Clan","zelda_timeline.divine_beasts_are_cleansed":"The Divine Beasts are cleansed and Calamity Ganon is Sealed","zelda_timeline.tears_of_the_kingdom":"Tears of the Kingdom","zelda_timeline.hyrule_kingdom_is_teared_apart":"Ganondorf is Resurrected (I think?)","blog_categories.games":"Games","blog_categories.general":"General","blog_categories.tips":"Tips","blog_categories.events":"Events","blog_categories.coding":"Coding","blog_categories.funny":"Funny","blog_categories.toys":"Toys","blog_categories.gadgets":"Gadgets","forty_two_page.title":"Forty Two","forty_two_page.description":"So long and thanks for all the fish!","projects_page.title":"Projects","projects_page.description":"Here is a list of some of my favorites personal projects.","projects_page.gatsbyMaterialUiBlogDescription":"A simple Gatsby Blog Starter with Material UI.","projects_page.contractBuilderDescription":"Contract Builder is a free open-source project that allows anyone to easily maintain and build any kind of contract (legal documents, lawsuit, rent, agreements, construction and so on) using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom contract, now she is able to do it in less than 5 minutes. Hooray!","projects_page.resumeBuilderDescription":"Resume Builder is a free open-source project that allows anyone to easily maintain and build any kind of resume using Google Spreadsheets. This was develop as a personal project to help a friend who was struggling spending up to an hour to make a custom resumes.","projects_page.magentoChatbotDescription":"With this module you can fully integrate your Magento store with the most popular chat apps in the market. This means that by simply installing this module and a few clicks you can have a new way to show and sell your products to your clients. Very easy to use! Try now, it's FREE.","projects_page.jamStackSortenerDescription":"This is a basic URL shortener POC build with Gatsby.","projects_page.gotinhaDescription":"It was always my dream to make my own game, and after trying Unity a couple years ago, I decided to try it again with something I'm more familiar with: Javascript. As a frontend developer, Javascript is already the language that I write most of my code at work and also in my personal projects, and after a quick search I was able to find the amazing PhaserJS Framework for building 2D web games.","e3_2012_photos.title":"E3 2012","e3_2012_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for Nintendo Blast.","e3_2013_photos.title":"E3 2013","e3_2013_photos.description":"On June 2013 I attended E3 as a media press for a full coverage for Game Blast.","e3_2014_photos.title":"E3 2014","e3_2014_photos.description":"On June 2014 I attended E3 as a media press for a full coverage for Game Blast.","e3_2015_photos.title":"E3 2015","e3_2015_photos.description":"On June 2015 I attended E3 as a media press for a full coverage for Game Blast and Game Over TV.","e3_2017_photos.title":"E3 2017","e3_2017_photos.description":"On June 2012 I attended E3 as a media press for a full coverage for PlayReplay and Game Over TV.","e3_2019_photos.title":"E3 2019","e3_2019_photos.description":"On June 2019 I attended E3 as a media press for a full coverage for PlayReplay.","gamescom_2019_photos.title":"Gamescom 2019","gamescom_2019_photos.description":"On August 2019 I attended Gamescom as a media press for a full coverage for PlayReplay.","san_francisco_2019_photos.title":"San Francisco 2019","san_francisco_2019_photos.description":"On September 2019 I've traveled to San Francisco for the Metallica S&M2 concert.","notfound.title":"404: Not found","notfound.header":"404 NOT FOUND","notfound.description":"Sorry, this page doesn't seem to exist. Perhaps the archives are incomplete?","seo_keywords.developer":"developer","seo_keywords.development":"development","seo_keywords.javascript":"javascript","seo_keywords.es6":"es6","seo_keywords.e3":"e3","seo_keywords.sgf":"sgf","seo_keywords.gamescom":"gamescom","seo_keywords.countdown":"countdown","seo_keywords.archive":"archive","seo_keywords.about_me":"about me","seo_keywords.personal_blog":"personal blog","seo_keywords.personal_projects":"personal projects","seo_keywords.travels":"travels","seo_keywords.tips":"tips","seo_keywords.lifehacks":"lifehacks","seo_keywords.reviews":"reviews","seo_keywords.games":"games","seo_keywords.timeline":"timeline","seo_keywords.photos":"photos","cookie_law.we_use_cookies":"We use cookies to ensure you get the best experience on our website. By using our website you agree to our ","cookie_law.title":"Cookie policy","cookie_law.what_are_cookies":"What are cookies?","cookie_law.what_are_cookies_text":"As is common practice with almost all professional websites this site uses cookies, which are tiny files that are downloaded to your computer, to improve your experience. This page describes what information they gather, how we use it and why we sometimes need to store these cookies. We will also share how you can prevent these cookies from being stored however this may downgrade or 'break' certain elements of the sites functionality. For more general information on cookies, please read ","cookie_law.what_are_cookies_more_info_url":"https://en.wikipedia.org/wiki/HTTP_cookie","cookie_law.how_we_use_cookies":"How we use cookies","cookie_law.how_we_use_cookies_text":"We use cookies for a variety of reasons detailed below. Unfortunately in most cases there are no industry standard options for disabling cookies without completely disabling the functionality and features they add to this site. It is recommended that you leave on all cookies if you are not sure whether you need them or not in case they are used to provide a service that you use.","cookie_law.disabling_cookies":"Disabling cookies","cookie_law.disabling_cookies_text":"You can prevent the setting of cookies by adjusting the settings on your browser (see your browser Help for how to do this). Be aware that disabling cookies will affect the functionality of this and many other websites that you visit. Disabling cookies will usually result in also disabling certain functionality and features of the this site. Therefore it is recommended that you do not disable cookies.","cookie_law.the_cookies_we_set":"The cookies we set","cookie_law.site_preferences_cookie":"Site preferences cookies","cookie_law.site_preferences_cookie_text":"In order to provide you with a great experience on this site we provide the functionality to set your preferences for how this site runs when you use it. In order to remember your preferences we need to set cookies so that this information can be called whenever you interact with a page is affected by your preferences.","cookie_law.third_party_cookies":"Third party cookies","cookie_law.third_party_cookies_text":"In some special cases we also use cookies provided by trusted third parties. The following section details which third party cookies you might encounter through this site.","cookie_law.third_party_cookies_item_1":"This site uses Google Analytics which is one of the most widespread and trusted analytics solution on the web for helping us to understand how you use the site and ways that we can improve your experience. These cookies may track things such as how long you spend on the site and the pages that you visit so we can continue to produce engaging content. For more information on Google Analytics cookies, see the official Google Analytics page.","cookie_law.third_party_cookies_item_2":"From time to time we test new features and make subtle changes to the way that the site is delivered. When we are still testing new features these cookies may be used to ensure that you receive a consistent experience whilst on the site whilst ensuring we understand which optimisations our users appreciate the most.","cookie_law.more_information":"More information","cookie_law.more_information_text":"Hopefully that has clarified things for you and as was previously mentioned if there is something that you aren't sure whether you need or not it's usually safer to leave cookies enabled in case it does interact with one of the features you use on our site. However if you are still looking for more information then you can contact us through our "},"routed":false,"originalPath":"/game/","redirect":true,"redirectDefaultLanguageToRoot":false,"defaultLanguage":"en","fallbackLanguage":"","ignoredPaths":[]},"pageType":"default","locale":"en"}},
    "staticQueryHashes": ["1156153307","1355482417","1591365477","1628619374","2127381735","2288279559","26159077","3566410298","3649515864","3847325417","3982724423","928834867"]}